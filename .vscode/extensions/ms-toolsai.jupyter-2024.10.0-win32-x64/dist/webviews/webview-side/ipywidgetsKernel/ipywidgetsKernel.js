var xu=Object.create;var oo=Object.defineProperty;var Uu=Object.getOwnPropertyDescriptor;var qu=Object.getOwnPropertyNames;var Wu=Object.getPrototypeOf,Ku=Object.prototype.hasOwnProperty;var Vu=(t,e)=>()=>(t&&(e=t(t=0)),e);var te=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Fu=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of qu(e))!Ku.call(t,r)&&r!==n&&oo(t,r,{get:()=>e[r],enumerable:!(i=Uu(e,r))||i.enumerable});return t};var Kt=(t,e,n)=>(n=t!=null?xu(Wu(t)):{},Fu(e||!t||!t.__esModule?oo(n,"default",{value:t,enumerable:!0}):n,t));var process,A=Vu(()=>{"use strict";process={platform:"web",cwd:()=>"",env:{NODE_ENV:"production"}}});var mr=te((Mp,ho)=>{"use strict";A();var co=Array.isArray,fo=Object.keys,Hu=Object.prototype.hasOwnProperty;ho.exports=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){var i=co(e),r=co(n),o,f,g;if(i&&r){if(f=e.length,f!=n.length)return!1;for(o=f;o--!==0;)if(!t(e[o],n[o]))return!1;return!0}if(i!=r)return!1;var S=e instanceof Date,_=n instanceof Date;if(S!=_)return!1;if(S&&_)return e.getTime()==n.getTime();var u=e instanceof RegExp,s=n instanceof RegExp;if(u!=s)return!1;if(u&&s)return e.toString()==n.toString();var b=fo(e);if(f=b.length,f!==fo(n).length)return!1;for(o=f;o--!==0;)if(!Hu.call(n,b[o]))return!1;for(o=f;o--!==0;)if(g=b[o],!t(e[g],n[g]))return!1;return!0}return e!==e&&n!==n}});var _r=te((Un,po)=>{A();(function(t,e){typeof Un=="object"&&typeof po!="undefined"?e(Un):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.lumino_algorithm={}))})(Un,function(t){"use strict";t.ArrayExt=void 0,function(d){function p(h,m,a=0,l=-1){let c=h.length;if(c===0)return-1;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;l<a?y=l+1+(c-a):y=l-a+1;for(let E=0;E<y;++E){let F=(a+E)%c;if(h[F]===m)return F}return-1}d.firstIndexOf=p;function v(h,m,a=-1,l=0){let c=h.length;if(c===0)return-1;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;a<l?y=a+1+(c-l):y=a-l+1;for(let E=0;E<y;++E){let F=(a-E+c)%c;if(h[F]===m)return F}return-1}d.lastIndexOf=v;function w(h,m,a=0,l=-1){let c=h.length;if(c===0)return-1;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;l<a?y=l+1+(c-a):y=l-a+1;for(let E=0;E<y;++E){let F=(a+E)%c;if(m(h[F],F))return F}return-1}d.findFirstIndex=w;function K(h,m,a=-1,l=0){let c=h.length;if(c===0)return-1;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;a<l?y=a+1+(c-l):y=a-l+1;for(let E=0;E<y;++E){let F=(a-E+c)%c;if(m(h[F],F))return F}return-1}d.findLastIndex=K;function G(h,m,a=0,l=-1){let c=w(h,m,a,l);return c!==-1?h[c]:void 0}d.findFirstValue=G;function V(h,m,a=-1,l=0){let c=K(h,m,a,l);return c!==-1?h[c]:void 0}d.findLastValue=V;function B(h,m,a,l=0,c=-1){let y=h.length;if(y===0)return 0;l<0?l=Math.max(0,l+y):l=Math.min(l,y-1),c<0?c=Math.max(0,c+y):c=Math.min(c,y-1);let E=l,F=c-l+1;for(;F>0;){let ne=F>>1,ue=E+ne;a(h[ue],m)<0?(E=ue+1,F-=ne+1):F=ne}return E}d.lowerBound=B;function Y(h,m,a,l=0,c=-1){let y=h.length;if(y===0)return 0;l<0?l=Math.max(0,l+y):l=Math.min(l,y-1),c<0?c=Math.max(0,c+y):c=Math.min(c,y-1);let E=l,F=c-l+1;for(;F>0;){let ne=F>>1,ue=E+ne;a(h[ue],m)>0?F=ne:(E=ue+1,F-=ne+1)}return E}d.upperBound=Y;function z(h,m,a){if(h===m)return!0;if(h.length!==m.length)return!1;for(let l=0,c=h.length;l<c;++l)if(a?!a(h[l],m[l]):h[l]!==m[l])return!1;return!0}d.shallowEqual=z;function Q(h,m={}){let{start:a,stop:l,step:c}=m;if(c===void 0&&(c=1),c===0)throw new Error("Slice `step` cannot be zero.");let y=h.length;a===void 0?a=c<0?y-1:0:a<0?a=Math.max(a+y,c<0?-1:0):a>=y&&(a=c<0?y-1:y),l===void 0?l=c<0?-1:y:l<0?l=Math.max(l+y,c<0?-1:0):l>=y&&(l=c<0?y-1:y);let E;c<0&&l>=a||c>0&&a>=l?E=0:c<0?E=Math.floor((l-a+1)/c+1):E=Math.floor((l-a-1)/c+1);let F=[];for(let ne=0;ne<E;++ne)F[ne]=h[a+ne*c];return F}d.slice=Q;function J(h,m,a){let l=h.length;if(l<=1||(m<0?m=Math.max(0,m+l):m=Math.min(m,l-1),a<0?a=Math.max(0,a+l):a=Math.min(a,l-1),m===a))return;let c=h[m],y=m<a?1:-1;for(let E=m;E!==a;E+=y)h[E]=h[E+y];h[a]=c}d.move=J;function ie(h,m=0,a=-1){let l=h.length;if(!(l<=1))for(m<0?m=Math.max(0,m+l):m=Math.min(m,l-1),a<0?a=Math.max(0,a+l):a=Math.min(a,l-1);m<a;){let c=h[m],y=h[a];h[m++]=y,h[a--]=c}}d.reverse=ie;function ae(h,m,a=0,l=-1){let c=h.length;if(c<=1||(a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1),a>=l))return;let y=l-a+1;if(m>0?m=m%y:m<0&&(m=(m%y+y)%y),m===0)return;let E=a+m;ie(h,a,E-1),ie(h,E,l),ie(h,a,l)}d.rotate=ae;function le(h,m,a=0,l=-1){let c=h.length;if(c===0)return;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;l<a?y=l+1+(c-a):y=l-a+1;for(let E=0;E<y;++E)h[(a+E)%c]=m}d.fill=le;function ze(h,m,a){let l=h.length;m<0?m=Math.max(0,m+l):m=Math.min(m,l);for(let c=l;c>m;--c)h[c]=h[c-1];h[m]=a}d.insert=ze;function pe(h,m){let a=h.length;if(m<0&&(m+=a),m<0||m>=a)return;let l=h[m];for(let c=m+1;c<a;++c)h[c-1]=h[c];return h.length=a-1,l}d.removeAt=pe;function Je(h,m,a=0,l=-1){let c=p(h,m,a,l);return c!==-1&&pe(h,c),c}d.removeFirstOf=Je;function Ve(h,m,a=-1,l=0){let c=v(h,m,a,l);return c!==-1&&pe(h,c),c}d.removeLastOf=Ve;function Ge(h,m,a=0,l=-1){let c=h.length;if(c===0)return 0;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y=0;for(let E=0;E<c;++E)a<=l&&E>=a&&E<=l&&h[E]===m||l<a&&(E<=l||E>=a)&&h[E]===m?y++:y>0&&(h[E-y]=h[E]);return y>0&&(h.length=c-y),y}d.removeAllOf=Ge;function Fe(h,m,a=0,l=-1){let c,y=w(h,m,a,l);return y!==-1&&(c=pe(h,y)),{index:y,value:c}}d.removeFirstWhere=Fe;function k(h,m,a=-1,l=0){let c,y=K(h,m,a,l);return y!==-1&&(c=pe(h,y)),{index:y,value:c}}d.removeLastWhere=k;function x(h,m,a=0,l=-1){let c=h.length;if(c===0)return 0;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y=0;for(let E=0;E<c;++E)a<=l&&E>=a&&E<=l&&m(h[E],E)||l<a&&(E<=l||E>=a)&&m(h[E],E)?y++:y>0&&(h[E-y]=h[E]);return y>0&&(h.length=c-y),y}d.removeAllWhere=x}(t.ArrayExt||(t.ArrayExt={}));function*e(...d){for(let p of d)yield*p}function*n(){}function*i(d,p=0){for(let v of d)yield[p++,v]}function*r(d,p){let v=0;for(let w of d)p(w,v++)&&(yield w)}function o(d,p){let v=0;for(let w of d)if(p(w,v++))return w}function f(d,p){let v=0;for(let w of d)if(p(w,v++))return v-1;return-1}function g(d,p){let v;for(let w of d){if(v===void 0){v=w;continue}p(w,v)<0&&(v=w)}return v}function S(d,p){let v;for(let w of d){if(v===void 0){v=w;continue}p(w,v)>0&&(v=w)}return v}function _(d,p){let v=!0,w,K;for(let G of d)v?(w=G,K=G,v=!1):p(G,w)<0?w=G:p(G,K)>0&&(K=G);return v?void 0:[w,K]}function u(d){return Array.from(d)}function s(d){let p={};for(let[v,w]of d)p[v]=w;return p}function b(d,p){let v=0;for(let w of d)if(p(w,v++)===!1)return}function C(d,p){let v=0;for(let w of d)if(p(w,v++)===!1)return!1;return!0}function I(d,p){let v=0;for(let w of d)if(p(w,v++))return!0;return!1}function*T(d,p){let v=0;for(let w of d)yield p(w,v++)}function*D(d,p,v){p===void 0?(p=d,d=0,v=1):v===void 0&&(v=1);let w=L.rangeLength(d,p,v);for(let K=0;K<w;K++)yield d+v*K}var L;(function(d){function p(v,w,K){return K===0?1/0:v>w&&K>0||v<w&&K<0?0:Math.ceil((w-v)/K)}d.rangeLength=p})(L||(L={}));function U(d,p,v){let w=d[Symbol.iterator](),K=0,G=w.next();if(G.done&&v===void 0)throw new TypeError("Reduce of empty iterable with no initial value.");if(G.done)return v;let V=w.next();if(V.done&&v===void 0)return G.value;if(V.done)return p(v,G.value,K++);let B;v===void 0?B=p(G.value,V.value,K++):B=p(p(v,G.value,K++),V.value,K++);let Y;for(;!(Y=w.next()).done;)B=p(B,Y.value,K++);return B}function*M(d,p){for(;0<p--;)yield d}function*R(d){yield d}function*O(d){if(typeof d.retro=="function")yield*d.retro();else for(let p=d.length-1;p>-1;p--)yield d[p]}function j(d){let p=[],v=new Set,w=new Map;for(let V of d)K(V);for(let[V]of w)G(V);return p;function K(V){let[B,Y]=V,z=w.get(Y);z?z.push(B):w.set(Y,[B])}function G(V){if(v.has(V))return;v.add(V);let B=w.get(V);if(B)for(let Y of B)G(Y);p.push(V)}}function*H(d,p){let v=0;for(let w of d)v++%p===0&&(yield w)}t.StringExt=void 0,function(d){function p(V,B,Y=0){let z=new Array(B.length);for(let Q=0,J=Y,ie=B.length;Q<ie;++Q,++J){if(J=V.indexOf(B[Q],J),J===-1)return null;z[Q]=J}return z}d.findIndices=p;function v(V,B,Y=0){let z=p(V,B,Y);if(!z)return null;let Q=0;for(let J=0,ie=z.length;J<ie;++J){let ae=z[J]-Y;Q+=ae*ae}return{score:Q,indices:z}}d.matchSumOfSquares=v;function w(V,B,Y=0){let z=p(V,B,Y);if(!z)return null;let Q=0,J=Y-1;for(let ie=0,ae=z.length;ie<ae;++ie){let le=z[ie];Q+=le-J-1,J=le}return{score:Q,indices:z}}d.matchSumOfDeltas=w;function K(V,B,Y){let z=[],Q=0,J=0,ie=B.length;for(;Q<ie;){let ae=B[Q],le=B[Q];for(;++Q<ie&&B[Q]===le+1;)le++;J<ae&&z.push(V.slice(J,ae)),ae<le+1&&z.push(Y(V.slice(ae,le+1))),J=le+1}return J<V.length&&z.push(V.slice(J)),z}d.highlight=K;function G(V,B){return V<B?-1:V>B?1:0}d.cmp=G}(t.StringExt||(t.StringExt={}));function*P(d,p){if(p<1)return;let v=d[Symbol.iterator](),w;for(;0<p--&&!(w=v.next()).done;)yield w.value}function*N(...d){let p=d.map(w=>w[Symbol.iterator]()),v=p.map(w=>w.next());for(;C(v,w=>!w.done);v=p.map(w=>w.next()))yield v.map(w=>w.value)}t.chain=e,t.each=b,t.empty=n,t.enumerate=i,t.every=C,t.filter=r,t.find=o,t.findIndex=f,t.map=T,t.max=S,t.min=g,t.minmax=_,t.once=R,t.range=D,t.reduce=U,t.repeat=M,t.retro=O,t.some=I,t.stride=H,t.take=P,t.toArray=u,t.toObject=s,t.topologicSort=j,t.zip=N})});var st=te((qn,go)=>{A();(function(t,e){typeof qn=="object"&&typeof go!="undefined"?e(qn,_r()):typeof define=="function"&&define.amd?define(["exports","@lumino/algorithm"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.lumino_coreutils={},t.lumino_algorithm))})(qn,function(t,e){"use strict";t.JSONExt=void 0,function(_){_.emptyObject=Object.freeze({}),_.emptyArray=Object.freeze([]);function u(M){return M===null||typeof M=="boolean"||typeof M=="number"||typeof M=="string"}_.isPrimitive=u;function s(M){return Array.isArray(M)}_.isArray=s;function b(M){return!u(M)&&!s(M)}_.isObject=b;function C(M,R){if(M===R)return!0;if(u(M)||u(R))return!1;let O=s(M),j=s(R);return O!==j?!1:O&&j?T(M,R):D(M,R)}_.deepEqual=C;function I(M){return u(M)?M:s(M)?L(M):U(M)}_.deepCopy=I;function T(M,R){if(M===R)return!0;if(M.length!==R.length)return!1;for(let O=0,j=M.length;O<j;++O)if(!C(M[O],R[O]))return!1;return!0}function D(M,R){if(M===R)return!0;for(let O in M)if(M[O]!==void 0&&!(O in R))return!1;for(let O in R)if(R[O]!==void 0&&!(O in M))return!1;for(let O in M){let j=M[O],H=R[O];if(!(j===void 0&&H===void 0)&&(j===void 0||H===void 0||!C(j,H)))return!1}return!0}function L(M){let R=new Array(M.length);for(let O=0,j=M.length;O<j;++O)R[O]=I(M[O]);return R}function U(M){let R={};for(let O in M){let j=M[O];j!==void 0&&(R[O]=I(j))}return R}}(t.JSONExt||(t.JSONExt={}));class n{constructor(){this._types=[],this._values=[]}types(){return this._types.slice()}hasData(u){return this._types.indexOf(u)!==-1}getData(u){let s=this._types.indexOf(u);return s!==-1?this._values[s]:void 0}setData(u,s){this.clearData(u),this._types.push(u),this._values.push(s)}clearData(u){let s=this._types.indexOf(u);s!==-1&&(this._types.splice(s,1),this._values.splice(s,1))}clear(){this._types.length=0,this._values.length=0}}class i{constructor(u={}){this._application=null,this._validatePlugin=()=>!0,this._plugins=new Map,this._services=new Map,u.validatePlugin&&(console.info("Plugins may be rejected by the custom validation plugin method."),this._validatePlugin=u.validatePlugin)}get application(){return this._application}set application(u){if(this._application!==null)throw Error("PluginRegistry.application is already set. It cannot be overridden.");this._application=u}get deferredPlugins(){return Array.from(this._plugins).filter(([u,s])=>s.autoStart==="defer").map(([u,s])=>u)}getPluginDescription(u){var s,b;return(b=(s=this._plugins.get(u))===null||s===void 0?void 0:s.description)!==null&&b!==void 0?b:""}hasPlugin(u){return this._plugins.has(u)}isPluginActivated(u){var s,b;return(b=(s=this._plugins.get(u))===null||s===void 0?void 0:s.activated)!==null&&b!==void 0?b:!1}listPlugins(){return Array.from(this._plugins.keys())}registerPlugin(u){if(this._plugins.has(u.id))throw new TypeError(`Plugin '${u.id}' is already registered.`);if(!this._validatePlugin(u))throw new Error(`Plugin '${u.id}' is not valid.`);let s=r.createPluginData(u);r.ensureNoCycle(s,this._plugins,this._services),s.provides&&this._services.set(s.provides,s.id),this._plugins.set(s.id,s)}registerPlugins(u){for(let s of u)this.registerPlugin(s)}deregisterPlugin(u,s){let b=this._plugins.get(u);if(b){if(b.activated&&!s)throw new Error(`Plugin '${u}' is still active.`);this._plugins.delete(u)}}async activatePlugin(u){let s=this._plugins.get(u);if(!s)throw new ReferenceError(`Plugin '${u}' is not registered.`);if(s.activated)return;if(s.promise)return s.promise;let b=s.requires.map(I=>this.resolveRequiredService(I)),C=s.optional.map(I=>this.resolveOptionalService(I));return s.promise=Promise.all([...b,...C]).then(I=>s.activate.apply(void 0,[this.application,...I])).then(I=>{s.service=I,s.activated=!0,s.promise=null}).catch(I=>{throw s.promise=null,I}),s.promise}async activatePlugins(u,s={}){switch(u){case"defer":{let b=this.deferredPlugins.filter(C=>this._plugins.get(C).autoStart).map(C=>this.activatePlugin(C));await Promise.all(b);break}case"startUp":{let C=r.collectStartupPlugins(this._plugins,s).map(async I=>{try{return await this.activatePlugin(I)}catch(T){console.error(`Plugin '${I}' failed to activate.`,T)}});await Promise.all(C);break}}}async deactivatePlugin(u){let s=this._plugins.get(u);if(!s)throw new ReferenceError(`Plugin '${u}' is not registered.`);if(!s.activated)return[];if(!s.deactivate)throw new TypeError(`Plugin '${u}'#deactivate() method missing`);let b=r.findDependents(u,this._plugins,this._services),C=b.map(I=>this._plugins.get(I));for(let I of C)if(!I.deactivate)throw new TypeError(`Plugin ${I.id}#deactivate() method missing (depends on ${u})`);for(let I of C){let T=[...I.requires,...I.optional].map(D=>{let L=this._services.get(D);return L?this._plugins.get(L).service:null});await I.deactivate(this.application,...T),I.service=null,I.activated=!1}return b.pop(),b}async resolveRequiredService(u){let s=this._services.get(u);if(!s)throw new TypeError(`No provider for: ${u.name}.`);let b=this._plugins.get(s);return b.activated||await this.activatePlugin(s),b.service}async resolveOptionalService(u){let s=this._services.get(u);if(!s)return null;let b=this._plugins.get(s);if(!b.activated)try{await this.activatePlugin(s)}catch(C){return console.error(C),null}return b.service}}var r;(function(_){class u{constructor(D){var L,U,M,R;this._activated=!1,this._promise=null,this._service=null,this.id=D.id,this.description=(L=D.description)!==null&&L!==void 0?L:"",this.activate=D.activate,this.deactivate=(U=D.deactivate)!==null&&U!==void 0?U:null,this.provides=(M=D.provides)!==null&&M!==void 0?M:null,this.autoStart=(R=D.autoStart)!==null&&R!==void 0?R:!1,this.requires=D.requires?D.requires.slice():[],this.optional=D.optional?D.optional.slice():[]}get activated(){return this._activated}set activated(D){this._activated=D}get service(){return this._service}set service(D){this._service=D}get promise(){return this._promise}set promise(D){this._promise=D}}function s(T){return new u(T)}_.createPluginData=s;function b(T,D,L){let U=[...T.requires,...T.optional],M=O=>{if(O===T.provides)return!0;let j=L.get(O);if(!j)return!1;let H=D.get(j),P=[...H.requires,...H.optional];return P.length===0?!1:(R.push(j),P.some(M)?!0:(R.pop(),!1))};if(!T.provides||U.length===0)return;let R=[T.id];if(U.some(M))throw new ReferenceError(`Cycle detected: ${R.join(" -> ")}.`)}_.ensureNoCycle=b;function C(T,D,L){let U=new Array,M=P=>{let N=D.get(P),d=[...N.requires,...N.optional];U.push(...d.reduce((p,v)=>{let w=L.get(v);return w&&p.push([P,w]),p},[]))};for(let P of D.keys())M(P);let R=U.filter(P=>P[1]===T),O=0;for(;R.length>O;){let P=R.length,N=new Set(R.map(d=>d[0]));for(let d of N)U.filter(p=>p[1]===d).forEach(p=>{R.includes(p)||R.push(p)});O=P}let j=e.topologicSort(R),H=j.findIndex(P=>P===T);return H===-1?[T]:j.slice(0,H+1)}_.findDependents=C;function I(T,D){let L=new Set;for(let U of T.keys())T.get(U).autoStart===!0&&L.add(U);if(D.startPlugins)for(let U of D.startPlugins)L.add(U);if(D.ignorePlugins)for(let U of D.ignorePlugins)L.delete(U);return Array.from(L)}_.collectStartupPlugins=I})(r||(r={}));class o{constructor(){this.promise=new Promise((u,s)=>{this._resolve=u,this._reject=s})}resolve(u){let s=this._resolve;s(u)}reject(u){let s=this._reject;s(u)}}class f{constructor(u,s){this.name=u,this.description=s!=null?s:"",this._tokenStructuralPropertyT=null}}function g(_){let u=0;for(let s=0,b=_.length;s<b;++s)s%4===0&&(u=Math.random()*4294967295>>>0),_[s]=u&255,u>>>=8}t.Random=void 0,function(_){_.getRandomValues=(()=>{let u=typeof window!="undefined"&&(window.crypto||window.msCrypto)||null;return u&&typeof u.getRandomValues=="function"?function(b){return u.getRandomValues(b)}:g})()}(t.Random||(t.Random={}));function S(_){let u=new Uint8Array(16),s=new Array(256);for(let b=0;b<16;++b)s[b]="0"+b.toString(16);for(let b=16;b<256;++b)s[b]=b.toString(16);return function(){return _(u),u[6]=64|u[6]&15,u[8]=128|u[8]&63,s[u[0]]+s[u[1]]+s[u[2]]+s[u[3]]+"-"+s[u[4]]+s[u[5]]+"-"+s[u[6]]+s[u[7]]+"-"+s[u[8]]+s[u[9]]+"-"+s[u[10]]+s[u[11]]+s[u[12]]+s[u[13]]+s[u[14]]+s[u[15]]}}t.UUID=void 0,function(_){_.uuid4=S(t.Random.getRandomValues)}(t.UUID||(t.UUID={})),t.MimeData=n,t.PluginRegistry=i,t.PromiseDelegate=o,t.Token=f})});var He=te((Wn,mo)=>{A();(function(t,e){typeof Wn=="object"&&typeof mo!="undefined"?e(Wn,_r(),st()):typeof define=="function"&&define.amd?define(["exports","@lumino/algorithm","@lumino/coreutils"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.lumino_signaling={},t.lumino_algorithm,t.lumino_coreutils))})(Wn,function(t,e,n){"use strict";class i{constructor(g){this.sender=g}connect(g,S){return o.connect(this,g,S)}disconnect(g,S){return o.disconnect(this,g,S)}emit(g){o.emit(this,g)}}(function(f){function g(I,T){o.disconnectBetween(I,T)}f.disconnectBetween=g;function S(I){o.disconnectSender(I)}f.disconnectSender=S;function _(I){o.disconnectReceiver(I)}f.disconnectReceiver=_;function u(I){o.disconnectAll(I)}f.disconnectAll=u;function s(I){o.disconnectAll(I)}f.clearData=s;function b(){return o.exceptionHandler}f.getExceptionHandler=b;function C(I){let T=o.exceptionHandler;return o.exceptionHandler=I,T}f.setExceptionHandler=C})(i||(i={}));class r extends i{constructor(){super(...arguments),this._pending=new n.PromiseDelegate}async*[Symbol.asyncIterator](){let g=this._pending;for(;;)try{let{args:S,next:_}=await g.promise;g=_,yield S}catch(S){return}}emit(g){let S=this._pending,_=this._pending=new n.PromiseDelegate;S.resolve({args:g,next:_}),super.emit(g)}stop(){this._pending.promise.catch(()=>{}),this._pending.reject("stop"),this._pending=new n.PromiseDelegate}}var o;(function(f){f.exceptionHandler=P=>{console.error(P)};function g(P,N,d){d=d||void 0;let p=I.get(P.sender);if(p||(p=[],I.set(P.sender,p)),U(p,P,N,d))return!1;let v=d||N,w=T.get(v);w||(w=[],T.set(v,w));let K={signal:P,slot:N,thisArg:d};return p.push(K),w.push(K),!0}f.connect=g;function S(P,N,d){d=d||void 0;let p=I.get(P.sender);if(!p||p.length===0)return!1;let v=U(p,P,N,d);if(!v)return!1;let w=d||N,K=T.get(w);return v.signal=null,R(p),R(K),!0}f.disconnect=S;function _(P,N){let d=I.get(P);if(!d||d.length===0)return;let p=T.get(N);if(!(!p||p.length===0)){for(let v of p)v.signal&&v.signal.sender===P&&(v.signal=null);R(d),R(p)}}f.disconnectBetween=_;function u(P){let N=I.get(P);if(!(!N||N.length===0)){for(let d of N){if(!d.signal)continue;let p=d.thisArg||d.slot;d.signal=null,R(T.get(p))}R(N)}}f.disconnectSender=u;function s(P){let N=T.get(P);if(!(!N||N.length===0)){for(let d of N){if(!d.signal)continue;let p=d.signal.sender;d.signal=null,R(I.get(p))}R(N)}}f.disconnectReceiver=s;function b(P){u(P),s(P)}f.disconnectAll=b;function C(P,N){let d=I.get(P.sender);if(!(!d||d.length===0))for(let p=0,v=d.length;p<v;++p){let w=d[p];w.signal===P&&M(w,N)}}f.emit=C;let I=new WeakMap,T=new WeakMap,D=new Set,L=(()=>typeof requestAnimationFrame=="function"?requestAnimationFrame:setImmediate)();function U(P,N,d,p){return e.find(P,v=>v.signal===N&&v.slot===d&&v.thisArg===p)}function M(P,N){let{signal:d,slot:p,thisArg:v}=P;try{p.call(v,d.sender,N)}catch(w){f.exceptionHandler(w)}}function R(P){D.size===0&&L(O),D.add(P)}function O(){D.forEach(j),D.clear()}function j(P){e.ArrayExt.removeAllWhere(P,H)}function H(P){return P.signal===null}})(o||(o={})),t.Signal=i,t.Stream=r})});var vr=te((Kn,_o)=>{A();(function(t,e){typeof Kn=="object"&&typeof _o!="undefined"?e(Kn):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.lumino_algorithm={}))})(Kn,function(t){"use strict";t.ArrayExt=void 0,function(d){function p(h,m,a=0,l=-1){let c=h.length;if(c===0)return-1;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;l<a?y=l+1+(c-a):y=l-a+1;for(let E=0;E<y;++E){let F=(a+E)%c;if(h[F]===m)return F}return-1}d.firstIndexOf=p;function v(h,m,a=-1,l=0){let c=h.length;if(c===0)return-1;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;a<l?y=a+1+(c-l):y=a-l+1;for(let E=0;E<y;++E){let F=(a-E+c)%c;if(h[F]===m)return F}return-1}d.lastIndexOf=v;function w(h,m,a=0,l=-1){let c=h.length;if(c===0)return-1;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;l<a?y=l+1+(c-a):y=l-a+1;for(let E=0;E<y;++E){let F=(a+E)%c;if(m(h[F],F))return F}return-1}d.findFirstIndex=w;function K(h,m,a=-1,l=0){let c=h.length;if(c===0)return-1;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;a<l?y=a+1+(c-l):y=a-l+1;for(let E=0;E<y;++E){let F=(a-E+c)%c;if(m(h[F],F))return F}return-1}d.findLastIndex=K;function G(h,m,a=0,l=-1){let c=w(h,m,a,l);return c!==-1?h[c]:void 0}d.findFirstValue=G;function V(h,m,a=-1,l=0){let c=K(h,m,a,l);return c!==-1?h[c]:void 0}d.findLastValue=V;function B(h,m,a,l=0,c=-1){let y=h.length;if(y===0)return 0;l<0?l=Math.max(0,l+y):l=Math.min(l,y-1),c<0?c=Math.max(0,c+y):c=Math.min(c,y-1);let E=l,F=c-l+1;for(;F>0;){let ne=F>>1,ue=E+ne;a(h[ue],m)<0?(E=ue+1,F-=ne+1):F=ne}return E}d.lowerBound=B;function Y(h,m,a,l=0,c=-1){let y=h.length;if(y===0)return 0;l<0?l=Math.max(0,l+y):l=Math.min(l,y-1),c<0?c=Math.max(0,c+y):c=Math.min(c,y-1);let E=l,F=c-l+1;for(;F>0;){let ne=F>>1,ue=E+ne;a(h[ue],m)>0?F=ne:(E=ue+1,F-=ne+1)}return E}d.upperBound=Y;function z(h,m,a){if(h===m)return!0;if(h.length!==m.length)return!1;for(let l=0,c=h.length;l<c;++l)if(a?!a(h[l],m[l]):h[l]!==m[l])return!1;return!0}d.shallowEqual=z;function Q(h,m={}){let{start:a,stop:l,step:c}=m;if(c===void 0&&(c=1),c===0)throw new Error("Slice `step` cannot be zero.");let y=h.length;a===void 0?a=c<0?y-1:0:a<0?a=Math.max(a+y,c<0?-1:0):a>=y&&(a=c<0?y-1:y),l===void 0?l=c<0?-1:y:l<0?l=Math.max(l+y,c<0?-1:0):l>=y&&(l=c<0?y-1:y);let E;c<0&&l>=a||c>0&&a>=l?E=0:c<0?E=Math.floor((l-a+1)/c+1):E=Math.floor((l-a-1)/c+1);let F=[];for(let ne=0;ne<E;++ne)F[ne]=h[a+ne*c];return F}d.slice=Q;function J(h,m,a){let l=h.length;if(l<=1||(m<0?m=Math.max(0,m+l):m=Math.min(m,l-1),a<0?a=Math.max(0,a+l):a=Math.min(a,l-1),m===a))return;let c=h[m],y=m<a?1:-1;for(let E=m;E!==a;E+=y)h[E]=h[E+y];h[a]=c}d.move=J;function ie(h,m=0,a=-1){let l=h.length;if(!(l<=1))for(m<0?m=Math.max(0,m+l):m=Math.min(m,l-1),a<0?a=Math.max(0,a+l):a=Math.min(a,l-1);m<a;){let c=h[m],y=h[a];h[m++]=y,h[a--]=c}}d.reverse=ie;function ae(h,m,a=0,l=-1){let c=h.length;if(c<=1||(a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1),a>=l))return;let y=l-a+1;if(m>0?m=m%y:m<0&&(m=(m%y+y)%y),m===0)return;let E=a+m;ie(h,a,E-1),ie(h,E,l),ie(h,a,l)}d.rotate=ae;function le(h,m,a=0,l=-1){let c=h.length;if(c===0)return;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;l<a?y=l+1+(c-a):y=l-a+1;for(let E=0;E<y;++E)h[(a+E)%c]=m}d.fill=le;function ze(h,m,a){let l=h.length;m<0?m=Math.max(0,m+l):m=Math.min(m,l);for(let c=l;c>m;--c)h[c]=h[c-1];h[m]=a}d.insert=ze;function pe(h,m){let a=h.length;if(m<0&&(m+=a),m<0||m>=a)return;let l=h[m];for(let c=m+1;c<a;++c)h[c-1]=h[c];return h.length=a-1,l}d.removeAt=pe;function Je(h,m,a=0,l=-1){let c=p(h,m,a,l);return c!==-1&&pe(h,c),c}d.removeFirstOf=Je;function Ve(h,m,a=-1,l=0){let c=v(h,m,a,l);return c!==-1&&pe(h,c),c}d.removeLastOf=Ve;function Ge(h,m,a=0,l=-1){let c=h.length;if(c===0)return 0;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y=0;for(let E=0;E<c;++E)a<=l&&E>=a&&E<=l&&h[E]===m||l<a&&(E<=l||E>=a)&&h[E]===m?y++:y>0&&(h[E-y]=h[E]);return y>0&&(h.length=c-y),y}d.removeAllOf=Ge;function Fe(h,m,a=0,l=-1){let c,y=w(h,m,a,l);return y!==-1&&(c=pe(h,y)),{index:y,value:c}}d.removeFirstWhere=Fe;function k(h,m,a=-1,l=0){let c,y=K(h,m,a,l);return y!==-1&&(c=pe(h,y)),{index:y,value:c}}d.removeLastWhere=k;function x(h,m,a=0,l=-1){let c=h.length;if(c===0)return 0;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y=0;for(let E=0;E<c;++E)a<=l&&E>=a&&E<=l&&m(h[E],E)||l<a&&(E<=l||E>=a)&&m(h[E],E)?y++:y>0&&(h[E-y]=h[E]);return y>0&&(h.length=c-y),y}d.removeAllWhere=x}(t.ArrayExt||(t.ArrayExt={}));function*e(...d){for(let p of d)yield*p}function*n(){}function*i(d,p=0){for(let v of d)yield[p++,v]}function*r(d,p){let v=0;for(let w of d)p(w,v++)&&(yield w)}function o(d,p){let v=0;for(let w of d)if(p(w,v++))return w}function f(d,p){let v=0;for(let w of d)if(p(w,v++))return v-1;return-1}function g(d,p){let v;for(let w of d){if(v===void 0){v=w;continue}p(w,v)<0&&(v=w)}return v}function S(d,p){let v;for(let w of d){if(v===void 0){v=w;continue}p(w,v)>0&&(v=w)}return v}function _(d,p){let v=!0,w,K;for(let G of d)v?(w=G,K=G,v=!1):p(G,w)<0?w=G:p(G,K)>0&&(K=G);return v?void 0:[w,K]}function u(d){return Array.from(d)}function s(d){let p={};for(let[v,w]of d)p[v]=w;return p}function b(d,p){let v=0;for(let w of d)if(p(w,v++)===!1)return}function C(d,p){let v=0;for(let w of d)if(p(w,v++)===!1)return!1;return!0}function I(d,p){let v=0;for(let w of d)if(p(w,v++))return!0;return!1}function*T(d,p){let v=0;for(let w of d)yield p(w,v++)}function*D(d,p,v){p===void 0?(p=d,d=0,v=1):v===void 0&&(v=1);let w=L.rangeLength(d,p,v);for(let K=0;K<w;K++)yield d+v*K}var L;(function(d){function p(v,w,K){return K===0?1/0:v>w&&K>0||v<w&&K<0?0:Math.ceil((w-v)/K)}d.rangeLength=p})(L||(L={}));function U(d,p,v){let w=d[Symbol.iterator](),K=0,G=w.next();if(G.done&&v===void 0)throw new TypeError("Reduce of empty iterable with no initial value.");if(G.done)return v;let V=w.next();if(V.done&&v===void 0)return G.value;if(V.done)return p(v,G.value,K++);let B;v===void 0?B=p(G.value,V.value,K++):B=p(p(v,G.value,K++),V.value,K++);let Y;for(;!(Y=w.next()).done;)B=p(B,Y.value,K++);return B}function*M(d,p){for(;0<p--;)yield d}function*R(d){yield d}function*O(d){if(typeof d.retro=="function")yield*d.retro();else for(let p=d.length-1;p>-1;p--)yield d[p]}function j(d){let p=[],v=new Set,w=new Map;for(let V of d)K(V);for(let[V]of w)G(V);return p;function K(V){let[B,Y]=V,z=w.get(Y);z?z.push(B):w.set(Y,[B])}function G(V){if(v.has(V))return;v.add(V);let B=w.get(V);if(B)for(let Y of B)G(Y);p.push(V)}}function*H(d,p){let v=0;for(let w of d)v++%p===0&&(yield w)}t.StringExt=void 0,function(d){function p(V,B,Y=0){let z=new Array(B.length);for(let Q=0,J=Y,ie=B.length;Q<ie;++Q,++J){if(J=V.indexOf(B[Q],J),J===-1)return null;z[Q]=J}return z}d.findIndices=p;function v(V,B,Y=0){let z=p(V,B,Y);if(!z)return null;let Q=0;for(let J=0,ie=z.length;J<ie;++J){let ae=z[J]-Y;Q+=ae*ae}return{score:Q,indices:z}}d.matchSumOfSquares=v;function w(V,B,Y=0){let z=p(V,B,Y);if(!z)return null;let Q=0,J=Y-1;for(let ie=0,ae=z.length;ie<ae;++ie){let le=z[ie];Q+=le-J-1,J=le}return{score:Q,indices:z}}d.matchSumOfDeltas=w;function K(V,B,Y){let z=[],Q=0,J=0,ie=B.length;for(;Q<ie;){let ae=B[Q],le=B[Q];for(;++Q<ie&&B[Q]===le+1;)le++;J<ae&&z.push(V.slice(J,ae)),ae<le+1&&z.push(Y(V.slice(ae,le+1))),J=le+1}return J<V.length&&z.push(V.slice(J)),z}d.highlight=K;function G(V,B){return V<B?-1:V>B?1:0}d.cmp=G}(t.StringExt||(t.StringExt={}));function*P(d,p){if(p<1)return;let v=d[Symbol.iterator](),w;for(;0<p--&&!(w=v.next()).done;)yield w.value}function*N(...d){let p=d.map(w=>w[Symbol.iterator]()),v=p.map(w=>w.next());for(;C(v,w=>!w.done);v=p.map(w=>w.next()))yield v.map(w=>w.value)}t.chain=e,t.each=b,t.empty=n,t.enumerate=i,t.every=C,t.filter=r,t.find=o,t.findIndex=f,t.map=T,t.max=S,t.min=g,t.minmax=_,t.once=R,t.range=D,t.reduce=U,t.repeat=M,t.retro=O,t.some=I,t.stride=H,t.take=P,t.toArray=u,t.toObject=s,t.topologicSort=j,t.zip=N})});var Fn=te((Vn,vo)=>{A();(function(t,e){typeof Vn=="object"&&typeof vo!="undefined"?e(Vn,vr()):typeof define=="function"&&define.amd?define(["exports","@lumino/algorithm"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.lumino_coreutils={},t.lumino_algorithm))})(Vn,function(t,e){"use strict";t.JSONExt=void 0,function(_){_.emptyObject=Object.freeze({}),_.emptyArray=Object.freeze([]);function u(M){return M===null||typeof M=="boolean"||typeof M=="number"||typeof M=="string"}_.isPrimitive=u;function s(M){return Array.isArray(M)}_.isArray=s;function b(M){return!u(M)&&!s(M)}_.isObject=b;function C(M,R){if(M===R)return!0;if(u(M)||u(R))return!1;let O=s(M),j=s(R);return O!==j?!1:O&&j?T(M,R):D(M,R)}_.deepEqual=C;function I(M){return u(M)?M:s(M)?L(M):U(M)}_.deepCopy=I;function T(M,R){if(M===R)return!0;if(M.length!==R.length)return!1;for(let O=0,j=M.length;O<j;++O)if(!C(M[O],R[O]))return!1;return!0}function D(M,R){if(M===R)return!0;for(let O in M)if(M[O]!==void 0&&!(O in R))return!1;for(let O in R)if(R[O]!==void 0&&!(O in M))return!1;for(let O in M){let j=M[O],H=R[O];if(!(j===void 0&&H===void 0)&&(j===void 0||H===void 0||!C(j,H)))return!1}return!0}function L(M){let R=new Array(M.length);for(let O=0,j=M.length;O<j;++O)R[O]=I(M[O]);return R}function U(M){let R={};for(let O in M){let j=M[O];j!==void 0&&(R[O]=I(j))}return R}}(t.JSONExt||(t.JSONExt={}));class n{constructor(){this._types=[],this._values=[]}types(){return this._types.slice()}hasData(u){return this._types.indexOf(u)!==-1}getData(u){let s=this._types.indexOf(u);return s!==-1?this._values[s]:void 0}setData(u,s){this.clearData(u),this._types.push(u),this._values.push(s)}clearData(u){let s=this._types.indexOf(u);s!==-1&&(this._types.splice(s,1),this._values.splice(s,1))}clear(){this._types.length=0,this._values.length=0}}class i{constructor(u={}){this._application=null,this._validatePlugin=()=>!0,this._plugins=new Map,this._services=new Map,u.validatePlugin&&(console.info("Plugins may be rejected by the custom validation plugin method."),this._validatePlugin=u.validatePlugin)}get application(){return this._application}set application(u){if(this._application!==null)throw Error("PluginRegistry.application is already set. It cannot be overridden.");this._application=u}get deferredPlugins(){return Array.from(this._plugins).filter(([u,s])=>s.autoStart==="defer").map(([u,s])=>u)}getPluginDescription(u){var s,b;return(b=(s=this._plugins.get(u))===null||s===void 0?void 0:s.description)!==null&&b!==void 0?b:""}hasPlugin(u){return this._plugins.has(u)}isPluginActivated(u){var s,b;return(b=(s=this._plugins.get(u))===null||s===void 0?void 0:s.activated)!==null&&b!==void 0?b:!1}listPlugins(){return Array.from(this._plugins.keys())}registerPlugin(u){if(this._plugins.has(u.id))throw new TypeError(`Plugin '${u.id}' is already registered.`);if(!this._validatePlugin(u))throw new Error(`Plugin '${u.id}' is not valid.`);let s=r.createPluginData(u);r.ensureNoCycle(s,this._plugins,this._services),s.provides&&this._services.set(s.provides,s.id),this._plugins.set(s.id,s)}registerPlugins(u){for(let s of u)this.registerPlugin(s)}deregisterPlugin(u,s){let b=this._plugins.get(u);if(b){if(b.activated&&!s)throw new Error(`Plugin '${u}' is still active.`);this._plugins.delete(u)}}async activatePlugin(u){let s=this._plugins.get(u);if(!s)throw new ReferenceError(`Plugin '${u}' is not registered.`);if(s.activated)return;if(s.promise)return s.promise;let b=s.requires.map(I=>this.resolveRequiredService(I)),C=s.optional.map(I=>this.resolveOptionalService(I));return s.promise=Promise.all([...b,...C]).then(I=>s.activate.apply(void 0,[this.application,...I])).then(I=>{s.service=I,s.activated=!0,s.promise=null}).catch(I=>{throw s.promise=null,I}),s.promise}async activatePlugins(u,s={}){switch(u){case"defer":{let b=this.deferredPlugins.filter(C=>this._plugins.get(C).autoStart).map(C=>this.activatePlugin(C));await Promise.all(b);break}case"startUp":{let C=r.collectStartupPlugins(this._plugins,s).map(async I=>{try{return await this.activatePlugin(I)}catch(T){console.error(`Plugin '${I}' failed to activate.`,T)}});await Promise.all(C);break}}}async deactivatePlugin(u){let s=this._plugins.get(u);if(!s)throw new ReferenceError(`Plugin '${u}' is not registered.`);if(!s.activated)return[];if(!s.deactivate)throw new TypeError(`Plugin '${u}'#deactivate() method missing`);let b=r.findDependents(u,this._plugins,this._services),C=b.map(I=>this._plugins.get(I));for(let I of C)if(!I.deactivate)throw new TypeError(`Plugin ${I.id}#deactivate() method missing (depends on ${u})`);for(let I of C){let T=[...I.requires,...I.optional].map(D=>{let L=this._services.get(D);return L?this._plugins.get(L).service:null});await I.deactivate(this.application,...T),I.service=null,I.activated=!1}return b.pop(),b}async resolveRequiredService(u){let s=this._services.get(u);if(!s)throw new TypeError(`No provider for: ${u.name}.`);let b=this._plugins.get(s);return b.activated||await this.activatePlugin(s),b.service}async resolveOptionalService(u){let s=this._services.get(u);if(!s)return null;let b=this._plugins.get(s);if(!b.activated)try{await this.activatePlugin(s)}catch(C){return console.error(C),null}return b.service}}var r;(function(_){class u{constructor(D){var L,U,M,R;this._activated=!1,this._promise=null,this._service=null,this.id=D.id,this.description=(L=D.description)!==null&&L!==void 0?L:"",this.activate=D.activate,this.deactivate=(U=D.deactivate)!==null&&U!==void 0?U:null,this.provides=(M=D.provides)!==null&&M!==void 0?M:null,this.autoStart=(R=D.autoStart)!==null&&R!==void 0?R:!1,this.requires=D.requires?D.requires.slice():[],this.optional=D.optional?D.optional.slice():[]}get activated(){return this._activated}set activated(D){this._activated=D}get service(){return this._service}set service(D){this._service=D}get promise(){return this._promise}set promise(D){this._promise=D}}function s(T){return new u(T)}_.createPluginData=s;function b(T,D,L){let U=[...T.requires,...T.optional],M=O=>{if(O===T.provides)return!0;let j=L.get(O);if(!j)return!1;let H=D.get(j),P=[...H.requires,...H.optional];return P.length===0?!1:(R.push(j),P.some(M)?!0:(R.pop(),!1))};if(!T.provides||U.length===0)return;let R=[T.id];if(U.some(M))throw new ReferenceError(`Cycle detected: ${R.join(" -> ")}.`)}_.ensureNoCycle=b;function C(T,D,L){let U=new Array,M=P=>{let N=D.get(P),d=[...N.requires,...N.optional];U.push(...d.reduce((p,v)=>{let w=L.get(v);return w&&p.push([P,w]),p},[]))};for(let P of D.keys())M(P);let R=U.filter(P=>P[1]===T),O=0;for(;R.length>O;){let P=R.length,N=new Set(R.map(d=>d[0]));for(let d of N)U.filter(p=>p[1]===d).forEach(p=>{R.includes(p)||R.push(p)});O=P}let j=e.topologicSort(R),H=j.findIndex(P=>P===T);return H===-1?[T]:j.slice(0,H+1)}_.findDependents=C;function I(T,D){let L=new Set;for(let U of T.keys())T.get(U).autoStart===!0&&L.add(U);if(D.startPlugins)for(let U of D.startPlugins)L.add(U);if(D.ignorePlugins)for(let U of D.ignorePlugins)L.delete(U);return Array.from(L)}_.collectStartupPlugins=I})(r||(r={}));class o{constructor(){this.promise=new Promise((u,s)=>{this._resolve=u,this._reject=s})}resolve(u){let s=this._resolve;s(u)}reject(u){let s=this._reject;s(u)}}class f{constructor(u,s){this.name=u,this.description=s!=null?s:"",this._tokenStructuralPropertyT=null}}function g(_){let u=0;for(let s=0,b=_.length;s<b;++s)s%4===0&&(u=Math.random()*4294967295>>>0),_[s]=u&255,u>>>=8}t.Random=void 0,function(_){_.getRandomValues=(()=>{let u=typeof window!="undefined"&&(window.crypto||window.msCrypto)||null;return u&&typeof u.getRandomValues=="function"?function(b){return u.getRandomValues(b)}:g})()}(t.Random||(t.Random={}));function S(_){let u=new Uint8Array(16),s=new Array(256);for(let b=0;b<16;++b)s[b]="0"+b.toString(16);for(let b=16;b<256;++b)s[b]=b.toString(16);return function(){return _(u),u[6]=64|u[6]&15,u[8]=128|u[8]&63,s[u[0]]+s[u[1]]+s[u[2]]+s[u[3]]+"-"+s[u[4]]+s[u[5]]+"-"+s[u[6]]+s[u[7]]+"-"+s[u[8]]+s[u[9]]+"-"+s[u[10]]+s[u[11]]+s[u[12]]+s[u[13]]+s[u[14]]+s[u[15]]}}t.UUID=void 0,function(_){_.uuid4=S(t.Random.getRandomValues)}(t.UUID||(t.UUID={})),t.MimeData=n,t.PluginRegistry=i,t.PromiseDelegate=o,t.Token=f})});var wo=te((Bn,yo)=>{A();(function(t,e){typeof Bn=="object"&&typeof yo!="undefined"?e(Bn,vr(),Fn()):typeof define=="function"&&define.amd?define(["exports","@lumino/algorithm","@lumino/coreutils"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.lumino_signaling={},t.lumino_algorithm,t.lumino_coreutils))})(Bn,function(t,e,n){"use strict";class i{constructor(g){this.sender=g}connect(g,S){return o.connect(this,g,S)}disconnect(g,S){return o.disconnect(this,g,S)}emit(g){o.emit(this,g)}}(function(f){function g(I,T){o.disconnectBetween(I,T)}f.disconnectBetween=g;function S(I){o.disconnectSender(I)}f.disconnectSender=S;function _(I){o.disconnectReceiver(I)}f.disconnectReceiver=_;function u(I){o.disconnectAll(I)}f.disconnectAll=u;function s(I){o.disconnectAll(I)}f.clearData=s;function b(){return o.exceptionHandler}f.getExceptionHandler=b;function C(I){let T=o.exceptionHandler;return o.exceptionHandler=I,T}f.setExceptionHandler=C})(i||(i={}));class r extends i{constructor(){super(...arguments),this._pending=new n.PromiseDelegate}async*[Symbol.asyncIterator](){let g=this._pending;for(;;)try{let{args:S,next:_}=await g.promise;g=_,yield S}catch(S){return}}emit(g){let S=this._pending,_=this._pending=new n.PromiseDelegate;S.resolve({args:g,next:_}),super.emit(g)}stop(){this._pending.promise.catch(()=>{}),this._pending.reject("stop"),this._pending=new n.PromiseDelegate}}var o;(function(f){f.exceptionHandler=P=>{console.error(P)};function g(P,N,d){d=d||void 0;let p=I.get(P.sender);if(p||(p=[],I.set(P.sender,p)),U(p,P,N,d))return!1;let v=d||N,w=T.get(v);w||(w=[],T.set(v,w));let K={signal:P,slot:N,thisArg:d};return p.push(K),w.push(K),!0}f.connect=g;function S(P,N,d){d=d||void 0;let p=I.get(P.sender);if(!p||p.length===0)return!1;let v=U(p,P,N,d);if(!v)return!1;let w=d||N,K=T.get(w);return v.signal=null,R(p),R(K),!0}f.disconnect=S;function _(P,N){let d=I.get(P);if(!d||d.length===0)return;let p=T.get(N);if(!(!p||p.length===0)){for(let v of p)v.signal&&v.signal.sender===P&&(v.signal=null);R(d),R(p)}}f.disconnectBetween=_;function u(P){let N=I.get(P);if(!(!N||N.length===0)){for(let d of N){if(!d.signal)continue;let p=d.thisArg||d.slot;d.signal=null,R(T.get(p))}R(N)}}f.disconnectSender=u;function s(P){let N=T.get(P);if(!(!N||N.length===0)){for(let d of N){if(!d.signal)continue;let p=d.signal.sender;d.signal=null,R(I.get(p))}R(N)}}f.disconnectReceiver=s;function b(P){u(P),s(P)}f.disconnectAll=b;function C(P,N){let d=I.get(P.sender);if(!(!d||d.length===0))for(let p=0,v=d.length;p<v;++p){let w=d[p];w.signal===P&&M(w,N)}}f.emit=C;let I=new WeakMap,T=new WeakMap,D=new Set,L=(()=>typeof requestAnimationFrame=="function"?requestAnimationFrame:setImmediate)();function U(P,N,d,p){return e.find(P,v=>v.signal===N&&v.slot===d&&v.thisArg===p)}function M(P,N){let{signal:d,slot:p,thisArg:v}=P;try{p.call(v,d.sender,N)}catch(w){f.exceptionHandler(w)}}function R(P){D.size===0&&L(O),D.add(P)}function O(){D.forEach(j),D.clear()}function j(P){e.ArrayExt.removeAllWhere(P,H)}function H(P){return P.signal===null}})(o||(o={})),t.Signal=i,t.Stream=r})});var So=te(Hn=>{"use strict";A();Object.defineProperty(Hn,"__esModule",{value:!0});Hn.ActivityMonitor=void 0;var bo=wo(),yr=class{constructor(e){this._timer=-1,this._timeout=-1,this._isDisposed=!1,this._activityStopped=new bo.Signal(this),e.signal.connect(this._onSignalFired,this),this._timeout=e.timeout||1e3}get activityStopped(){return this._activityStopped}get timeout(){return this._timeout}set timeout(e){this._timeout=e}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,bo.Signal.clearData(this))}_onSignalFired(e,n){clearTimeout(this._timer),this._sender=e,this._args=n,this._timer=setTimeout(()=>{this._activityStopped.emit({sender:this._sender,args:this._args})},this._timeout)}};Hn.ActivityMonitor=yr});var Io=te(Eo=>{"use strict";A();Object.defineProperty(Eo,"__esModule",{value:!0})});var Mo=te($n=>{"use strict";A();Object.defineProperty($n,"__esModule",{value:!0});$n.LruCache=void 0;var $u=128,wr=class{constructor(e={}){this._map=new Map,this._maxSize=(e==null?void 0:e.maxSize)||$u}get size(){return this._map.size}clear(){this._map.clear()}get(e){let n=this._map.get(e)||null;return n!=null&&(this._map.delete(e),this._map.set(e,n)),n}set(e,n){this._map.size>=this._maxSize&&this._map.delete(this._map.keys().next().value),this._map.set(e,n)}};$n.LruCache=wr});var Ro=te(zn=>{"use strict";A();Object.defineProperty(zn,"__esModule",{value:!0});zn.MarkdownCodeBlocks=void 0;var Po;(function(t){t.CODE_BLOCK_MARKER="```";let e=[".markdown",".mdown",".mkdn",".md",".mkd",".mdwn",".mdtxt",".mdtext",".text",".txt",".Rmd"];class n{constructor(f){this.startLine=f,this.code="",this.endLine=-1}}t.MarkdownCodeBlock=n;function i(o){return e.indexOf(o)>-1}t.isMarkdown=i;function r(o){if(!o||o==="")return[];let f=o.split(`
`),g=[],S=null;for(let _=0;_<f.length;_++){let u=f[_],s=u.indexOf(t.CODE_BLOCK_MARKER)===0,b=S!=null;if(!(!s&&!b))if(b)S&&(s?(S.endLine=_-1,g.push(S),S=null):S.code+=u+`
`);else{S=new n(_);let C=u.indexOf(t.CODE_BLOCK_MARKER),I=u.lastIndexOf(t.CODE_BLOCK_MARKER);C!==I&&(S.code=u.substring(C+t.CODE_BLOCK_MARKER.length,I),S.endLine=_,g.push(S),S=null)}}return g}t.findMarkdownCodeBlocks=r})(Po||(zn.MarkdownCodeBlocks=Po={}))});var Ao=te((Fp,To)=>{"use strict";A();function zu(t,e){var n=t;e.slice(0,-1).forEach(function(r){n=n[r]||{}});var i=e[e.length-1];return i in n}function Co(t){return typeof t=="number"||/^0x[0-9a-f]+$/i.test(t)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}function Do(t,e){return e==="constructor"&&typeof t[e]=="function"||e==="__proto__"}To.exports=function(t,e){e||(e={});var n={bools:{},strings:{},unknownFn:null};typeof e.unknown=="function"&&(n.unknownFn=e.unknown),typeof e.boolean=="boolean"&&e.boolean?n.allBools=!0:[].concat(e.boolean).filter(Boolean).forEach(function(R){n.bools[R]=!0});var i={};function r(R){return i[R].some(function(O){return n.bools[O]})}Object.keys(e.alias||{}).forEach(function(R){i[R]=[].concat(e.alias[R]),i[R].forEach(function(O){i[O]=[R].concat(i[R].filter(function(j){return O!==j}))})}),[].concat(e.string).filter(Boolean).forEach(function(R){n.strings[R]=!0,i[R]&&[].concat(i[R]).forEach(function(O){n.strings[O]=!0})});var o=e.default||{},f={_:[]};function g(R,O){return n.allBools&&/^--[^=]+$/.test(O)||n.strings[R]||n.bools[R]||i[R]}function S(R,O,j){for(var H=R,P=0;P<O.length-1;P++){var N=O[P];if(Do(H,N))return;H[N]===void 0&&(H[N]={}),(H[N]===Object.prototype||H[N]===Number.prototype||H[N]===String.prototype)&&(H[N]={}),H[N]===Array.prototype&&(H[N]=[]),H=H[N]}var d=O[O.length-1];Do(H,d)||((H===Object.prototype||H===Number.prototype||H===String.prototype)&&(H={}),H===Array.prototype&&(H=[]),H[d]===void 0||n.bools[d]||typeof H[d]=="boolean"?H[d]=j:Array.isArray(H[d])?H[d].push(j):H[d]=[H[d],j])}function _(R,O,j){if(!(j&&n.unknownFn&&!g(R,j)&&n.unknownFn(j)===!1)){var H=!n.strings[R]&&Co(O)?Number(O):O;S(f,R.split("."),H),(i[R]||[]).forEach(function(P){S(f,P.split("."),H)})}}Object.keys(n.bools).forEach(function(R){_(R,o[R]===void 0?!1:o[R])});var u=[];t.indexOf("--")!==-1&&(u=t.slice(t.indexOf("--")+1),t=t.slice(0,t.indexOf("--")));for(var s=0;s<t.length;s++){var b=t[s],C,I;if(/^--.+=/.test(b)){var T=b.match(/^--([^=]+)=([\s\S]*)$/);C=T[1];var D=T[2];n.bools[C]&&(D=D!=="false"),_(C,D,b)}else if(/^--no-.+/.test(b))C=b.match(/^--no-(.+)/)[1],_(C,!1,b);else if(/^--.+/.test(b))C=b.match(/^--(.+)/)[1],I=t[s+1],I!==void 0&&!/^(-|--)[^-]/.test(I)&&!n.bools[C]&&!n.allBools&&(!i[C]||!r(C))?(_(C,I,b),s+=1):/^(true|false)$/.test(I)?(_(C,I==="true",b),s+=1):_(C,n.strings[C]?"":!0,b);else if(/^-[^-]+/.test(b)){for(var L=b.slice(1,-1).split(""),U=!1,M=0;M<L.length;M++){if(I=b.slice(M+2),I==="-"){_(L[M],I,b);continue}if(/[A-Za-z]/.test(L[M])&&I[0]==="="){_(L[M],I.slice(1),b),U=!0;break}if(/[A-Za-z]/.test(L[M])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(I)){_(L[M],I,b),U=!0;break}if(L[M+1]&&L[M+1].match(/\W/)){_(L[M],b.slice(M+2),b),U=!0;break}else _(L[M],n.strings[L[M]]?"":!0,b)}C=b.slice(-1)[0],!U&&C!=="-"&&(t[s+1]&&!/^(-|--)[^-]/.test(t[s+1])&&!n.bools[C]&&(!i[C]||!r(C))?(_(C,t[s+1],b),s+=1):t[s+1]&&/^(true|false)$/.test(t[s+1])?(_(C,t[s+1]==="true",b),s+=1):_(C,n.strings[C]?"":!0,b))}else if((!n.unknownFn||n.unknownFn(b)!==!1)&&f._.push(n.strings._||!Co(b)?b:Number(b)),e.stopEarly){f._.push.apply(f._,t.slice(s+1));break}}return Object.keys(o).forEach(function(R){zu(f,R.split("."))||(S(f,R.split("."),o[R]),(i[R]||[]).forEach(function(O){S(f,O.split("."),o[R])}))}),e["--"]?f["--"]=u.slice():u.forEach(function(R){f._.push(R)}),f}});var Jn=te((Hp,No)=>{"use strict";A();function ot(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function Oo(t,e){for(var n="",i=0,r=-1,o=0,f,g=0;g<=t.length;++g){if(g<t.length)f=t.charCodeAt(g);else{if(f===47)break;f=47}if(f===47){if(!(r===g-1||o===1))if(r!==g-1&&o===2){if(n.length<2||i!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var S=n.lastIndexOf("/");if(S!==n.length-1){S===-1?(n="",i=0):(n=n.slice(0,S),i=n.length-1-n.lastIndexOf("/")),r=g,o=0;continue}}else if(n.length===2||n.length===1){n="",i=0,r=g,o=0;continue}}e&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+="/"+t.slice(r+1,g):n=t.slice(r+1,g),i=g-r-1;r=g,o=0}else f===46&&o!==-1?++o:o=-1}return n}function Ju(t,e){var n=e.dir||e.root,i=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+i:n+t+i:i}var Vt={resolve:function(){for(var e="",n=!1,i,r=arguments.length-1;r>=-1&&!n;r--){var o;r>=0?o=arguments[r]:(i===void 0&&(i=process.cwd()),o=i),ot(o),o.length!==0&&(e=o+"/"+e,n=o.charCodeAt(0)===47)}return e=Oo(e,!n),n?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(ot(e),e.length===0)return".";var n=e.charCodeAt(0)===47,i=e.charCodeAt(e.length-1)===47;return e=Oo(e,!n),e.length===0&&!n&&(e="."),e.length>0&&i&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return ot(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,n=0;n<arguments.length;++n){var i=arguments[n];ot(i),i.length>0&&(e===void 0?e=i:e+="/"+i)}return e===void 0?".":Vt.normalize(e)},relative:function(e,n){if(ot(e),ot(n),e===n||(e=Vt.resolve(e),n=Vt.resolve(n),e===n))return"";for(var i=1;i<e.length&&e.charCodeAt(i)===47;++i);for(var r=e.length,o=r-i,f=1;f<n.length&&n.charCodeAt(f)===47;++f);for(var g=n.length,S=g-f,_=o<S?o:S,u=-1,s=0;s<=_;++s){if(s===_){if(S>_){if(n.charCodeAt(f+s)===47)return n.slice(f+s+1);if(s===0)return n.slice(f+s)}else o>_&&(e.charCodeAt(i+s)===47?u=s:s===0&&(u=0));break}var b=e.charCodeAt(i+s),C=n.charCodeAt(f+s);if(b!==C)break;b===47&&(u=s)}var I="";for(s=i+u+1;s<=r;++s)(s===r||e.charCodeAt(s)===47)&&(I.length===0?I+="..":I+="/..");return I.length>0?I+n.slice(f+u):(f+=u,n.charCodeAt(f)===47&&++f,n.slice(f))},_makeLong:function(e){return e},dirname:function(e){if(ot(e),e.length===0)return".";for(var n=e.charCodeAt(0),i=n===47,r=-1,o=!0,f=e.length-1;f>=1;--f)if(n=e.charCodeAt(f),n===47){if(!o){r=f;break}}else o=!1;return r===-1?i?"/":".":i&&r===1?"//":e.slice(0,r)},basename:function(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');ot(e);var i=0,r=-1,o=!0,f;if(n!==void 0&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var g=n.length-1,S=-1;for(f=e.length-1;f>=0;--f){var _=e.charCodeAt(f);if(_===47){if(!o){i=f+1;break}}else S===-1&&(o=!1,S=f+1),g>=0&&(_===n.charCodeAt(g)?--g===-1&&(r=f):(g=-1,r=S))}return i===r?r=S:r===-1&&(r=e.length),e.slice(i,r)}else{for(f=e.length-1;f>=0;--f)if(e.charCodeAt(f)===47){if(!o){i=f+1;break}}else r===-1&&(o=!1,r=f+1);return r===-1?"":e.slice(i,r)}},extname:function(e){ot(e);for(var n=-1,i=0,r=-1,o=!0,f=0,g=e.length-1;g>=0;--g){var S=e.charCodeAt(g);if(S===47){if(!o){i=g+1;break}continue}r===-1&&(o=!1,r=g+1),S===46?n===-1?n=g:f!==1&&(f=1):n!==-1&&(f=-1)}return n===-1||r===-1||f===0||f===1&&n===r-1&&n===i+1?"":e.slice(n,r)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return Ju("/",e)},parse:function(e){ot(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;var i=e.charCodeAt(0),r=i===47,o;r?(n.root="/",o=1):o=0;for(var f=-1,g=0,S=-1,_=!0,u=e.length-1,s=0;u>=o;--u){if(i=e.charCodeAt(u),i===47){if(!_){g=u+1;break}continue}S===-1&&(_=!1,S=u+1),i===46?f===-1?f=u:s!==1&&(s=1):f!==-1&&(s=-1)}return f===-1||S===-1||s===0||s===1&&f===S-1&&f===g+1?S!==-1&&(g===0&&r?n.base=n.name=e.slice(1,S):n.base=n.name=e.slice(g,S)):(g===0&&r?(n.name=e.slice(1,f),n.base=e.slice(1,S)):(n.name=e.slice(g,f),n.base=e.slice(g,S)),n.ext=e.slice(f,S)),g>0?n.dir=e.slice(0,g-1):r&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};Vt.posix=Vt;No.exports=Vt});var ko=te((zp,Lo)=>{"use strict";A();Lo.exports=function(e,n){if(n=n.split(":")[0],e=+e,!e)return!1;switch(n){case"http":case"ws":return e!==80;case"https":case"wss":return e!==443;case"ftp":return e!==21;case"gopher":return e!==70;case"file":return!1}return e!==0}});var Uo=te(br=>{"use strict";A();var Gu=Object.prototype.hasOwnProperty,Yu;function jo(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return null}}function xo(t){try{return encodeURIComponent(t)}catch(e){return null}}function Xu(t){for(var e=/([^=?#&]+)=?([^&]*)/g,n={},i;i=e.exec(t);){var r=jo(i[1]),o=jo(i[2]);r===null||o===null||r in n||(n[r]=o)}return n}function Qu(t,e){e=e||"";var n=[],i,r;typeof e!="string"&&(e="?");for(r in t)if(Gu.call(t,r)){if(i=t[r],!i&&(i===null||i===Yu||isNaN(i))&&(i=""),r=xo(r),i=xo(i),r===null||i===null)continue;n.push(r+"="+i)}return n.length?e+n.join("&"):""}br.stringify=Qu;br.parse=Xu});var $o=te((Xp,Ho)=>{"use strict";A();var Wo=ko(),Gn=Uo(),Zu=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,Ko=/[\n\r\t]/g,ec=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,Vo=/:\d+$/,tc=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,nc=/^[a-zA-Z]:/;function Er(t){return(t||"").toString().replace(Zu,"")}var Sr=[["#","hash"],["?","query"],function(e,n){return at(n.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],qo={hash:1,query:1};function Fo(t){var e;typeof window!="undefined"?e=window:typeof this!="undefined"?e=this:typeof self!="undefined"?e=self:e={};var n=e.location||{};t=t||n;var i={},r=typeof t,o;if(t.protocol==="blob:")i=new lt(unescape(t.pathname),{});else if(r==="string"){i=new lt(t,{});for(o in qo)delete i[o]}else if(r==="object"){for(o in t)o in qo||(i[o]=t[o]);i.slashes===void 0&&(i.slashes=ec.test(t.href))}return i}function at(t){return t==="file:"||t==="ftp:"||t==="http:"||t==="https:"||t==="ws:"||t==="wss:"}function Bo(t,e){t=Er(t),t=t.replace(Ko,""),e=e||{};var n=tc.exec(t),i=n[1]?n[1].toLowerCase():"",r=!!n[2],o=!!n[3],f=0,g;return r?o?(g=n[2]+n[3]+n[4],f=n[2].length+n[3].length):(g=n[2]+n[4],f=n[2].length):o?(g=n[3]+n[4],f=n[3].length):g=n[4],i==="file:"?f>=2&&(g=g.slice(2)):at(i)?g=n[4]:i?r&&(g=g.slice(2)):f>=2&&at(e.protocol)&&(g=n[4]),{protocol:i,slashes:r||at(i),slashesCount:f,rest:g}}function ic(t,e){if(t==="")return e;for(var n=(e||"/").split("/").slice(0,-1).concat(t.split("/")),i=n.length,r=n[i-1],o=!1,f=0;i--;)n[i]==="."?n.splice(i,1):n[i]===".."?(n.splice(i,1),f++):f&&(i===0&&(o=!0),n.splice(i,1),f--);return o&&n.unshift(""),(r==="."||r==="..")&&n.push(""),n.join("/")}function lt(t,e,n){if(t=Er(t),t=t.replace(Ko,""),!(this instanceof lt))return new lt(t,e,n);var i,r,o,f,g,S,_=Sr.slice(),u=typeof e,s=this,b=0;for(u!=="object"&&u!=="string"&&(n=e,e=null),n&&typeof n!="function"&&(n=Gn.parse),e=Fo(e),r=Bo(t||"",e),i=!r.protocol&&!r.slashes,s.slashes=r.slashes||i&&e.slashes,s.protocol=r.protocol||e.protocol||"",t=r.rest,(r.protocol==="file:"&&(r.slashesCount!==2||nc.test(t))||!r.slashes&&(r.protocol||r.slashesCount<2||!at(s.protocol)))&&(_[3]=[/(.*)/,"pathname"]);b<_.length;b++){if(f=_[b],typeof f=="function"){t=f(t,s);continue}o=f[0],S=f[1],o!==o?s[S]=t:typeof o=="string"?(g=o==="@"?t.lastIndexOf(o):t.indexOf(o),~g&&(typeof f[2]=="number"?(s[S]=t.slice(0,g),t=t.slice(g+f[2])):(s[S]=t.slice(g),t=t.slice(0,g)))):(g=o.exec(t))&&(s[S]=g[1],t=t.slice(0,g.index)),s[S]=s[S]||i&&f[3]&&e[S]||"",f[4]&&(s[S]=s[S].toLowerCase())}n&&(s.query=n(s.query)),i&&e.slashes&&s.pathname.charAt(0)!=="/"&&(s.pathname!==""||e.pathname!=="")&&(s.pathname=ic(s.pathname,e.pathname)),s.pathname.charAt(0)!=="/"&&at(s.protocol)&&(s.pathname="/"+s.pathname),Wo(s.port,s.protocol)||(s.host=s.hostname,s.port=""),s.username=s.password="",s.auth&&(g=s.auth.indexOf(":"),~g?(s.username=s.auth.slice(0,g),s.username=encodeURIComponent(decodeURIComponent(s.username)),s.password=s.auth.slice(g+1),s.password=encodeURIComponent(decodeURIComponent(s.password))):s.username=encodeURIComponent(decodeURIComponent(s.auth)),s.auth=s.password?s.username+":"+s.password:s.username),s.origin=s.protocol!=="file:"&&at(s.protocol)&&s.host?s.protocol+"//"+s.host:"null",s.href=s.toString()}function rc(t,e,n){var i=this;switch(t){case"query":typeof e=="string"&&e.length&&(e=(n||Gn.parse)(e)),i[t]=e;break;case"port":i[t]=e,Wo(e,i.protocol)?e&&(i.host=i.hostname+":"+e):(i.host=i.hostname,i[t]="");break;case"hostname":i[t]=e,i.port&&(e+=":"+i.port),i.host=e;break;case"host":i[t]=e,Vo.test(e)?(e=e.split(":"),i.port=e.pop(),i.hostname=e.join(":")):(i.hostname=e,i.port="");break;case"protocol":i.protocol=e.toLowerCase(),i.slashes=!n;break;case"pathname":case"hash":if(e){var r=t==="pathname"?"/":"#";i[t]=e.charAt(0)!==r?r+e:e}else i[t]=e;break;case"username":case"password":i[t]=encodeURIComponent(e);break;case"auth":var o=e.indexOf(":");~o?(i.username=e.slice(0,o),i.username=encodeURIComponent(decodeURIComponent(i.username)),i.password=e.slice(o+1),i.password=encodeURIComponent(decodeURIComponent(i.password))):i.username=encodeURIComponent(decodeURIComponent(e))}for(var f=0;f<Sr.length;f++){var g=Sr[f];g[4]&&(i[g[1]]=i[g[1]].toLowerCase())}return i.auth=i.password?i.username+":"+i.password:i.username,i.origin=i.protocol!=="file:"&&at(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString(),i}function sc(t){(!t||typeof t!="function")&&(t=Gn.stringify);var e,n=this,i=n.host,r=n.protocol;r&&r.charAt(r.length-1)!==":"&&(r+=":");var o=r+(n.protocol&&n.slashes||at(n.protocol)?"//":"");return n.username?(o+=n.username,n.password&&(o+=":"+n.password),o+="@"):n.password?(o+=":"+n.password,o+="@"):n.protocol!=="file:"&&at(n.protocol)&&!i&&n.pathname!=="/"&&(o+="@"),(i[i.length-1]===":"||Vo.test(n.hostname)&&!n.port)&&(i+=":"),o+=i+n.pathname,e=typeof n.query=="object"?t(n.query):n.query,e&&(o+=e.charAt(0)!=="?"?"?"+e:e),n.hash&&(o+=n.hash),o}lt.prototype={set:rc,toString:sc};lt.extractProtocol=Bo;lt.location=Fo;lt.trimLeft=Er;lt.qs=Gn;Ho.exports=lt});var Ir=te(Ft=>{"use strict";A();var oc=Ft&&Ft.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.URLExt=void 0;var ac=Jn(),Yn=oc($o()),zo;(function(t){function e(_){if(typeof document!="undefined"&&document){let u=document.createElement("a");return u.href=_,u}return(0,Yn.default)(_)}t.parse=e;function n(_){return(0,Yn.default)(_).hostname}t.getHostName=n;function i(_){return _&&e(_).toString()}t.normalize=i;function r(..._){let u=(0,Yn.default)(_[0],{}),s=u.protocol===""&&u.slashes;s&&(u=(0,Yn.default)(_[0],"https:"+_[0]));let b=`${s?"":u.protocol}${u.slashes?"//":""}${u.auth}${u.auth?"@":""}${u.host}`,C=ac.posix.join(`${b&&u.pathname[0]!=="/"?"/":""}${u.pathname}`,..._.slice(1));return`${b}${C==="."?"":C}`}t.join=r;function o(_){return r(..._.split("/").map(encodeURIComponent))}t.encodeParts=o;function f(_){let u=Object.keys(_).filter(s=>s.length>0);return u.length?"?"+u.map(s=>{let b=encodeURIComponent(String(_[s]));return s+(b?"="+b:"")}).join("&"):""}t.objectToQueryString=f;function g(_){return _.replace(/^\?/,"").split("&").reduce((u,s)=>{let[b,C]=s.split("=");return b.length>0&&(u[b]=decodeURIComponent(C||"")),u},{})}t.queryStringToObject=g;function S(_,u=!1){let{protocol:s}=e(_);return(!s||_.toLowerCase().indexOf(s)!==0)&&(u?_.indexOf("//")!==0:_.indexOf("/")!==0)}t.isLocal=S})(zo||(Ft.URLExt=zo={}))});var Jo=te((exports,module)=>{"use strict";A();var __importDefault=exports&&exports.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});exports.PageConfig=void 0;var coreutils_1=Fn(),minimist_1=__importDefault(Ao()),url_1=Ir(),PageConfig;(function(PageConfig){function getOption(name){if(configData)return configData[name]||getBodyData(name);configData=Object.create(null);let found=!1;if(typeof document!="undefined"&&document){let t=document.getElementById("jupyter-config-data");t&&(configData=JSON.parse(t.textContent||""),found=!0)}if(!found&&typeof process!="undefined"&&process.argv)try{let cli=(0,minimist_1.default)(process.argv.slice(2)),path=Jn(),fullPath="";"jupyter-config-data"in cli?fullPath=path.resolve(cli["jupyter-config-data"]):"JUPYTER_CONFIG_DATA"in process.env&&(fullPath=path.resolve(process.env.JUPYTER_CONFIG_DATA)),fullPath&&(configData=eval("require")(fullPath))}catch(t){console.error(t)}if(!coreutils_1.JSONExt.isObject(configData))configData=Object.create(null);else for(let t in configData)typeof configData[t]!="string"&&(configData[t]=JSON.stringify(configData[t]));return configData[name]||getBodyData(name)}PageConfig.getOption=getOption;function setOption(t,e){let n=getOption(t);return configData[t]=e,n}PageConfig.setOption=setOption;function getBaseUrl(){return url_1.URLExt.normalize(getOption("baseUrl")||"/")}PageConfig.getBaseUrl=getBaseUrl;function getTreeUrl(){return url_1.URLExt.join(getBaseUrl(),getOption("treeUrl"))}PageConfig.getTreeUrl=getTreeUrl;function getShareUrl(){return url_1.URLExt.normalize(getOption("shareUrl")||getBaseUrl())}PageConfig.getShareUrl=getShareUrl;function getTreeShareUrl(){return url_1.URLExt.normalize(url_1.URLExt.join(getShareUrl(),getOption("treeUrl")))}PageConfig.getTreeShareUrl=getTreeShareUrl;function getUrl(t){var e,n,i,r;let o=t.toShare?getShareUrl():getBaseUrl(),f=(e=t.mode)!==null&&e!==void 0?e:getOption("mode"),g=(n=t.workspace)!==null&&n!==void 0?n:getOption("workspace"),S=f==="single-document"?"doc":"lab";o=url_1.URLExt.join(o,S),g!==PageConfig.defaultWorkspace&&(o=url_1.URLExt.join(o,"workspaces",encodeURIComponent((i=getOption("workspace"))!==null&&i!==void 0?i:PageConfig.defaultWorkspace)));let _=(r=t.treePath)!==null&&r!==void 0?r:getOption("treePath");return _&&(o=url_1.URLExt.join(o,"tree",url_1.URLExt.encodeParts(_))),o}PageConfig.getUrl=getUrl,PageConfig.defaultWorkspace="default";function getWsUrl(t){let e=getOption("wsUrl");if(!e){if(t=t?url_1.URLExt.normalize(t):getBaseUrl(),t.indexOf("http")!==0)return"";e="ws"+t.slice(4)}return url_1.URLExt.normalize(e)}PageConfig.getWsUrl=getWsUrl;function getNBConvertURL({path:t,format:e,download:n}){let i=url_1.URLExt.encodeParts(t),r=url_1.URLExt.join(getBaseUrl(),"nbconvert",e,i);return n?r+"?download=true":r}PageConfig.getNBConvertURL=getNBConvertURL;function getToken(){return getOption("token")||getBodyData("jupyterApiToken")}PageConfig.getToken=getToken;function getNotebookVersion(){let t=getOption("notebookVersion");return t===""?[0,0,0]:JSON.parse(t)}PageConfig.getNotebookVersion=getNotebookVersion;let configData=null;function getBodyData(t){if(typeof document=="undefined"||!document.body)return"";let e=document.body.dataset[t];return typeof e=="undefined"?"":decodeURIComponent(e)}let Extension;(function(t){function e(r){try{let o=getOption(r);if(o)return JSON.parse(o)}catch(o){console.warn(`Unable to parse ${r}.`,o)}return[]}t.deferred=e("deferredExtensions"),t.disabled=e("disabledExtensions");function n(r){let o=r.indexOf(":"),f="";return o!==-1&&(f=r.slice(0,o)),t.deferred.some(g=>g===r||f&&g===f)}t.isDeferred=n;function i(r){let o=r.indexOf(":"),f="";return o!==-1&&(f=r.slice(0,o)),t.disabled.some(g=>g===r||f&&g===f)}t.isDisabled=i})(Extension=PageConfig.Extension||(PageConfig.Extension={}))})(PageConfig||(exports.PageConfig=PageConfig={}))});var Yo=te(Xn=>{"use strict";A();Object.defineProperty(Xn,"__esModule",{value:!0});Xn.PathExt=void 0;var St=Jn(),Go;(function(t){function e(...s){let b=St.posix.join(...s);return b==="."?"":u(b)}t.join=e;function n(...s){let b=St.posix.join(...s);return b==="."?"":b}t.joinWithLeadingSlash=n;function i(s,b){return St.posix.basename(s,b)}t.basename=i;function r(s){let b=u(St.posix.dirname(s));return b==="."?"":b}t.dirname=r;function o(s){return St.posix.extname(s)}t.extname=o;function f(s){return s===""?"":u(St.posix.normalize(s))}t.normalize=f;function g(...s){return u(St.posix.resolve(...s))}t.resolve=g;function S(s,b){return u(St.posix.relative(s,b))}t.relative=S;function _(s){return s.length>0&&s.indexOf(".")!==0&&(s=`.${s}`),s}t.normalizeExtension=_;function u(s){return s.indexOf("/")===0&&(s=s.slice(1)),s}t.removeSlash=u})(Go||(Xn.PathExt=Go={}))});var Xo=te(Qn=>{"use strict";A();Object.defineProperty(Qn,"__esModule",{value:!0});Qn.signalToPromise=void 0;var lc=Fn();function uc(t,e){let n=new lc.PromiseDelegate;function i(){t.disconnect(r)}function r(o,f){i(),n.resolve([o,f])}return t.connect(r),(e!=null?e:0)>0&&setTimeout(()=>{i(),n.reject(`Signal not emitted within ${e} ms.`)},e),n.promise}Qn.signalToPromise=uc});var Zo=te(Zn=>{"use strict";A();Object.defineProperty(Zn,"__esModule",{value:!0});Zn.Text=void 0;var Qo;(function(t){let e=2>1;function n(f,g){if(e)return f;let S=f;for(let _=0;_+1<g.length&&_<f;_++){let u=g.charCodeAt(_);if(u>=55296&&u<=56319){let s=g.charCodeAt(_+1);s>=56320&&s<=57343&&(S--,_++)}}return S}t.jsIndexToCharIndex=n;function i(f,g){if(e)return f;let S=f;for(let _=0;_+1<g.length&&_<S;_++){let u=g.charCodeAt(_);if(u>=55296&&u<=56319){let s=g.charCodeAt(_+1);s>=56320&&s<=57343&&(S++,_++)}}return S}t.charIndexToJsIndex=i;function r(f,g=!1){return f.replace(/^(\w)|[\s-_:]+(\w)/g,function(S,_,u){return u?u.toUpperCase():g?_.toUpperCase():_.toLowerCase()})}t.camelCase=r;function o(f){return(f||"").toLowerCase().split(" ").map(g=>g.charAt(0).toUpperCase()+g.slice(1)).join(" ")}t.titleCase=o})(Qo||(Zn.Text=Qo={}))});var ta=te(ei=>{"use strict";A();Object.defineProperty(ei,"__esModule",{value:!0});ei.Time=void 0;var cc=[{name:"years",milliseconds:365*24*60*60*1e3},{name:"months",milliseconds:30*24*60*60*1e3},{name:"days",milliseconds:24*60*60*1e3},{name:"hours",milliseconds:60*60*1e3},{name:"minutes",milliseconds:60*1e3},{name:"seconds",milliseconds:1e3}],ea;(function(t){function e(i,r="long"){let o=document.documentElement.lang||"en",f=new Intl.RelativeTimeFormat(o,{numeric:"auto",style:r}),g=new Date(i).getTime()-Date.now();for(let S of cc){let _=Math.ceil(g/S.milliseconds);if(_!==0)return f.format(_,S.name)}return f.format(0,"seconds")}t.formatHuman=e;function n(i){let r=document.documentElement.lang||"en";return new Intl.DateTimeFormat(r,{dateStyle:"short",timeStyle:"short"}).format(new Date(i))}t.format=n})(ea||(ei.Time=ea={}))});var Te=te(De=>{"use strict";A();var dc=De&&De.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),ut=De&&De.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&dc(e,t,n)};Object.defineProperty(De,"__esModule",{value:!0});ut(So(),De);ut(Io(),De);ut(Mo(),De);ut(Ro(),De);ut(Jo(),De);ut(Yo(),De);ut(Xo(),De);ut(Zo(),De);ut(ta(),De);ut(Ir(),De)});var Bt=te(de=>{"use strict";A();Object.defineProperty(de,"__esModule",{value:!0});de.supportedKernelWebSocketProtocols=de.isInputReplyMsg=de.isInputRequestMsg=de.isDebugReplyMsg=de.isDebugRequestMsg=de.isExecuteReplyMsg=de.isInfoRequestMsg=de.isCommMsgMsg=de.isCommCloseMsg=de.isCommOpenMsg=de.isDebugEventMsg=de.isClearOutputMsg=de.isStatusMsg=de.isErrorMsg=de.isExecuteResultMsg=de.isExecuteInputMsg=de.isUpdateDisplayDataMsg=de.isDisplayDataMsg=de.isStreamMsg=de.createMessage=void 0;var fc=st();function hc(t){var e,n,i,r,o;return{buffers:(e=t.buffers)!==null&&e!==void 0?e:[],channel:t.channel,content:t.content,header:{date:new Date().toISOString(),msg_id:(n=t.msgId)!==null&&n!==void 0?n:fc.UUID.uuid4(),msg_type:t.msgType,session:t.session,username:(i=t.username)!==null&&i!==void 0?i:"",version:"5.2"},metadata:(r=t.metadata)!==null&&r!==void 0?r:{},parent_header:(o=t.parentHeader)!==null&&o!==void 0?o:{}}}de.createMessage=hc;function pc(t){return t.header.msg_type==="stream"}de.isStreamMsg=pc;function gc(t){return t.header.msg_type==="display_data"}de.isDisplayDataMsg=gc;function mc(t){return t.header.msg_type==="update_display_data"}de.isUpdateDisplayDataMsg=mc;function _c(t){return t.header.msg_type==="execute_input"}de.isExecuteInputMsg=_c;function vc(t){return t.header.msg_type==="execute_result"}de.isExecuteResultMsg=vc;function yc(t){return t.header.msg_type==="error"}de.isErrorMsg=yc;function wc(t){return t.header.msg_type==="status"}de.isStatusMsg=wc;function bc(t){return t.header.msg_type==="clear_output"}de.isClearOutputMsg=bc;function Sc(t){return t.header.msg_type==="debug_event"}de.isDebugEventMsg=Sc;function Ec(t){return t.header.msg_type==="comm_open"}de.isCommOpenMsg=Ec;function Ic(t){return t.header.msg_type==="comm_close"}de.isCommCloseMsg=Ic;function Mc(t){return t.header.msg_type==="comm_msg"}de.isCommMsgMsg=Mc;function Pc(t){return t.header.msg_type==="kernel_info_request"}de.isInfoRequestMsg=Pc;function Rc(t){return t.header.msg_type==="execute_reply"}de.isExecuteReplyMsg=Rc;function Cc(t){return t.header.msg_type==="debug_request"}de.isDebugRequestMsg=Cc;function Dc(t){return t.header.msg_type==="debug_reply"}de.isDebugReplyMsg=Dc;function Tc(t){return t.header.msg_type==="input_request"}de.isInputRequestMsg=Tc;function Ac(t){return t.header.msg_type==="input_reply"}de.isInputReplyMsg=Ac;var na;(function(t){t.v1KernelWebsocketJupyterOrg="v1.kernel.websocket.jupyter.org"})(na||(de.supportedKernelWebSocketProtocols=na={}))});var ra=te(Xe=>{"use strict";A();var Oc=Xe&&Xe.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Nc=Xe&&Xe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Lc=Xe&&Xe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Oc(e,t,n);return Nc(e,t),e};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.deserialize=Xe.serialize=void 0;var ia=Lc(Bt());function kc(t,e=""){switch(e){case ia.supportedKernelWebSocketProtocols.v1KernelWebsocketJupyterOrg:return Ht.serializeV1KernelWebsocketJupyterOrg(t);default:return Ht.serializeDefault(t)}}Xe.serialize=kc;function jc(t,e=""){switch(e){case ia.supportedKernelWebSocketProtocols.v1KernelWebsocketJupyterOrg:return Ht.deserializeV1KernelWebsocketJupyterOrg(t);default:return Ht.deserializeDefault(t)}}Xe.deserialize=jc;var Ht;(function(t){function e(g){let S,_=new DataView(g),u=Number(_.getBigUint64(0,!0)),s=[];for(let M=0;M<u;M++)s.push(Number(_.getBigUint64(8*(M+1),!0)));let b=new TextDecoder("utf8"),C=b.decode(g.slice(s[0],s[1])),I=JSON.parse(b.decode(g.slice(s[1],s[2]))),T=JSON.parse(b.decode(g.slice(s[2],s[3]))),D=JSON.parse(b.decode(g.slice(s[3],s[4]))),L=JSON.parse(b.decode(g.slice(s[4],s[5]))),U=[];for(let M=5;M<s.length-1;M++)U.push(new DataView(g.slice(s[M],s[M+1])));return S={channel:C,header:I,parent_header:T,metadata:D,content:L,buffers:U},S}t.deserializeV1KernelWebsocketJupyterOrg=e;function n(g){let S=JSON.stringify(g.header),_=g.parent_header==null?"{}":JSON.stringify(g.parent_header),u=JSON.stringify(g.metadata),s=JSON.stringify(g.content),b=g.buffers!==void 0?g.buffers:[],C=1+4+b.length+1,I=[];I.push(8*(1+C)),I.push(g.channel.length+I[I.length-1]);let T=new TextEncoder,D=T.encode(g.channel),L=T.encode(S),U=T.encode(_),M=T.encode(u),R=T.encode(s),O=new Uint8Array(D.length+L.length+U.length+M.length+R.length);O.set(D),O.set(L,D.length),O.set(U,D.length+L.length),O.set(M,D.length+L.length+U.length),O.set(R,D.length+L.length+U.length+M.length);for(let d of[L.length,U.length,M.length,R.length])I.push(d+I[I.length-1]);let j=0;for(let d of b){let p=d.byteLength;I.push(p+I[I.length-1]),j+=p}let H=new Uint8Array(8*(1+C)+O.byteLength+j),P=new ArrayBuffer(8),N=new DataView(P);N.setBigUint64(0,BigInt(C),!0),H.set(new Uint8Array(P),0);for(let d=0;d<I.length;d++)N.setBigUint64(0,BigInt(I[d]),!0),H.set(new Uint8Array(P),8*(d+1));H.set(O,I[0]);for(let d=0;d<b.length;d++){let p=b[d];H.set(new Uint8Array(ArrayBuffer.isView(p)?p.buffer:p),I[5+d])}return H.buffer}t.serializeV1KernelWebsocketJupyterOrg=n;function i(g){let S;return typeof g=="string"?S=JSON.parse(g):S=o(g),S}t.deserializeDefault=i;function r(g){var S;let _;return!((S=g.buffers)===null||S===void 0)&&S.length?_=f(g):_=JSON.stringify(g),_}t.serializeDefault=r;function o(g){let S=new DataView(g),_=S.getUint32(0),u=[];if(_<2)throw new Error("Invalid incoming Kernel Message");for(let C=1;C<=_;C++)u.push(S.getUint32(C*4));let s=new Uint8Array(g.slice(u[0],u[1])),b=JSON.parse(new TextDecoder("utf8").decode(s));b.buffers=[];for(let C=1;C<_;C++){let I=u[C],T=u[C+1]||g.byteLength;b.buffers.push(new DataView(g.slice(I,T)))}return b}function f(g){let S=[],_=[],u=new TextEncoder,s=[];g.buffers!==void 0&&(s=g.buffers,delete g.buffers);let b=u.encode(JSON.stringify(g));_.push(b.buffer);for(let D=0;D<s.length;D++){let L=s[D];_.push(ArrayBuffer.isView(L)?L.buffer:L)}let C=_.length;S.push(4*(C+1));for(let D=0;D+1<_.length;D++)S.push(S[S.length-1]+_[D].byteLength);let I=new Uint8Array(S[S.length-1]+_[_.length-1].byteLength),T=new DataView(I.buffer);T.setUint32(0,C);for(let D=0;D<S.length;D++)T.setUint32(4*(D+1),S[D]);for(let D=0;D<_.length;D++)I.set(new Uint8Array(_[D]),S[D]);return I.buffer}})(Ht||(Ht={}))});var sa=te(Mr=>{"use strict";A();Object.defineProperty(Mr,"__esModule",{value:!0});Mr.default=WebSocket});var Oe=te(ni=>{"use strict";A();Object.defineProperty(ni,"__esModule",{value:!0});ni.ServerConnection=void 0;var Et=Te(),oa=ra(),Pr;typeof window=="undefined"?Pr=sa():Pr=WebSocket;var Rr;(function(t){function e(o){return ti.makeSettings(o)}t.makeSettings=e;function n(o,f,g){return ti.handleRequest(o,f,g)}t.makeRequest=n;class i extends Error{static async create(f){try{let g=await f.json(),{message:S,traceback:_}=g;return _&&console.error(_),new i(f,S!=null?S:i._defaultMessage(f),_!=null?_:"")}catch(g){return console.debug(g),new i(f)}}constructor(f,g=i._defaultMessage(f),S=""){super(g),this.response=f,this.traceback=S}static _defaultMessage(f){return`Invalid response: ${f.status} ${f.statusText}`}}t.ResponseError=i;class r extends TypeError{constructor(f){super(f.message),this.stack=f.stack}}t.NetworkError=r})(Rr||(ni.ServerConnection=Rr={}));var ti;(function(t){function e(r={}){var o;let f=Et.PageConfig.getBaseUrl(),g=Et.PageConfig.getWsUrl(),S=Et.URLExt.normalize(r.baseUrl)||f,_=r.wsUrl;!_&&S===f&&(_=g),!_&&S.indexOf("http")===0&&(_="ws"+S.slice(4)),_=_!=null?_:g;let u=Et.PageConfig.getOption("appendToken").toLowerCase(),s;return u===""?s=typeof window=="undefined"||typeof process!="undefined"&&((o=process===null||process===void 0?void 0:process.env)===null||o===void 0?void 0:o.JEST_WORKER_ID)!==void 0||Et.URLExt.getHostName(f)!==Et.URLExt.getHostName(_):s=u==="true",{init:{cache:"no-store",credentials:"same-origin"},fetch,Headers,Request,WebSocket:Pr,token:Et.PageConfig.getToken(),appUrl:Et.PageConfig.getOption("appUrl"),appendToken:s,serializer:{serialize:oa.serialize,deserialize:oa.deserialize},...r,baseUrl:S,wsUrl:_}}t.makeSettings=e;function n(r,o,f){var g;if(r.indexOf(f.baseUrl)!==0)throw new Error("Can only be used for notebook server requests");((g=o.cache)!==null&&g!==void 0?g:f.init.cache)==="no-store"&&(r+=(/\?/.test(r)?"&":"?")+new Date().getTime());let _=new f.Request(r,{...f.init,...o}),u=!1;if(f.token&&(u=!0,_.headers.append("Authorization",`token ${f.token}`)),typeof document!="undefined"){let s=i("_xsrf");s!==void 0&&(u=!0,_.headers.append("X-XSRFToken",s))}return!_.headers.has("Content-Type")&&u&&_.headers.set("Content-Type","application/json"),f.fetch.call(null,_).catch(s=>{throw new Rr.NetworkError(s)})}t.handleRequest=n;function i(r){let o="";try{o=document.cookie}catch(g){return}let f=o.match("\\b"+r+"=([^;]*)\\b");return f==null?void 0:f[1]}})(ti||(ti={}))});var At=te(ii=>{"use strict";A();Object.defineProperty(ii,"__esModule",{value:!0});ii.BaseManager=void 0;var aa=He(),xc=Oe(),Cr=class{constructor(e){var n;this._isDisposed=!1,this._disposed=new aa.Signal(this),this.serverSettings=(n=e.serverSettings)!==null&&n!==void 0?n:xc.ServerConnection.makeSettings()}get disposed(){return this._disposed}get isDisposed(){return this._isDisposed}get isActive(){return!0}dispose(){this.isDisposed||(this._isDisposed=!0,this._disposed.emit(void 0),aa.Signal.clearData(this))}};ii.BaseManager=Cr});var ua=te($t=>{"use strict";A();Object.defineProperty($t,"__esModule",{value:!0});$t.ConfigWithDefaults=$t.ConfigSection=void 0;var Uc=Te(),cn=ct(),qc="api/config",la;(function(t){function e(n){let i=new Dr(n);return i.load().then(()=>i)}t.create=e})(la||($t.ConfigSection=la={}));var Dr=class{constructor(e){var n;this._url="unknown";let i=this.serverSettings=(n=e.serverSettings)!==null&&n!==void 0?n:cn.ServerConnection.makeSettings();this._url=Uc.URLExt.join(i.baseUrl,qc,encodeURIComponent(e.name))}get data(){return this._data}async load(){let e=await cn.ServerConnection.makeRequest(this._url,{},this.serverSettings);if(e.status!==200)throw await cn.ServerConnection.ResponseError.create(e);this._data=await e.json()}async update(e){this._data={...this._data,...e};let n={method:"PATCH",body:JSON.stringify(e)},i=await cn.ServerConnection.makeRequest(this._url,n,this.serverSettings);if(i.status!==200)throw await cn.ServerConnection.ResponseError.create(i);return this._data=await i.json(),this._data}},Tr=class{constructor(e){var n,i;this._className="",this._section=e.section,this._defaults=(n=e.defaults)!==null&&n!==void 0?n:{},this._className=(i=e.className)!==null&&i!==void 0?i:""}get(e){let n=this._classData();return e in n?n[e]:this._defaults[e]}set(e,n){let i={};if(i[e]=n,this._className){let r={};return r[this._className]=i,this._section.update(r)}else return this._section.update(i)}_classData(){let e=this._section.data;return this._className&&this._className in e?e[this._className]:e}};$t.ConfigWithDefaults=Tr});var dn=te(ri=>{"use strict";A();Object.defineProperty(ri,"__esModule",{value:!0});ri.validateProperty=void 0;function Wc(t,e,n,i=[]){if(!t.hasOwnProperty(e))throw Error(`Missing property '${e}'`);let r=t[e];if(n!==void 0){let o=!0;switch(n){case"array":o=Array.isArray(r);break;case"object":o=typeof r!="undefined";break;default:o=typeof r===n}if(!o)throw new Error(`Property '${e}' is not of type '${n}'`);if(i.length>0){let f=!0;switch(n){case"string":case"number":case"boolean":f=i.includes(r);break;default:f=i.findIndex(g=>g===r)>=0;break}if(!f)throw new Error(`Property '${e}' is not one of the valid values ${JSON.stringify(i)}`)}}}ri.validateProperty=Wc});var ca=te(zt=>{"use strict";A();Object.defineProperty(zt,"__esModule",{value:!0});zt.validateCheckpointModel=zt.validateContentsModel=void 0;var dt=dn();function Kc(t){(0,dt.validateProperty)(t,"name","string"),(0,dt.validateProperty)(t,"path","string"),(0,dt.validateProperty)(t,"type","string"),(0,dt.validateProperty)(t,"created","string"),(0,dt.validateProperty)(t,"last_modified","string"),(0,dt.validateProperty)(t,"mimetype","object"),(0,dt.validateProperty)(t,"content","object"),(0,dt.validateProperty)(t,"format","object")}zt.validateContentsModel=Kc;function Vc(t){(0,dt.validateProperty)(t,"id","string"),(0,dt.validateProperty)(t,"last_modified","string")}zt.validateCheckpointModel=Vc});var Nr=te(Ue=>{"use strict";A();var Fc=Ue&&Ue.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Bc=Ue&&Ue.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Hc=Ue&&Ue.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Fc(e,t,n);return Bc(e,t),e};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.Drive=Ue.ContentsManager=Ue.Contents=void 0;var $e=Te(),si=He(),be=ct(),yt=Hc(ca()),$c="api/contents",zc="files",da;(function(t){function e(i){yt.validateContentsModel(i)}t.validateContentsModel=e;function n(i){yt.validateCheckpointModel(i)}t.validateCheckpointModel=n})(da||(Ue.Contents=da={}));var Ar=class{constructor(e={}){var n,i;this._isDisposed=!1,this._additionalDrives=new Map,this._fileChanged=new si.Signal(this);let r=this.serverSettings=(n=e.serverSettings)!==null&&n!==void 0?n:be.ServerConnection.makeSettings();this._defaultDrive=(i=e.defaultDrive)!==null&&i!==void 0?i:new oi({serverSettings:r}),this._defaultDrive.fileChanged.connect(this._onFileChanged,this)}get fileChanged(){return this._fileChanged}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,si.Signal.clearData(this))}addDrive(e){this._additionalDrives.set(e.name,e),e.fileChanged.connect(this._onFileChanged,this)}getSharedModelFactory(e){var n;let[i]=this._driveForPath(e);return(n=i==null?void 0:i.sharedModelFactory)!==null&&n!==void 0?n:null}localPath(e){let n=e.split("/"),i=n[0].split(":");return i.length===1||!this._additionalDrives.has(i[0])?$e.PathExt.removeSlash(e):$e.PathExt.join(i.slice(1).join(":"),...n.slice(1))}normalize(e){let n=e.split(":");return n.length===1?$e.PathExt.normalize(e):`${n[0]}:${$e.PathExt.normalize(n.slice(1).join(":"))}`}resolvePath(e,n){let i=this.driveName(e),r=this.localPath(e),o=$e.PathExt.resolve("/",r,n);return i?`${i}:${o}`:o}driveName(e){let i=e.split("/")[0].split(":");return i.length===1?"":this._additionalDrives.has(i[0])?i[0]:""}get(e,n){let[i,r]=this._driveForPath(e);return i.get(r,n).then(o=>{let f=[];if(o.type==="directory"&&o.content){for(let g of o.content)f.push({...g,path:this._toGlobalPath(i,g.path)});return{...o,path:this._toGlobalPath(i,r),content:f,serverPath:o.path}}else return{...o,path:this._toGlobalPath(i,r),serverPath:o.path}})}getDownloadUrl(e){let[n,i]=this._driveForPath(e);return n.getDownloadUrl(i)}newUntitled(e={}){if(e.path){let n=this.normalize(e.path),[i,r]=this._driveForPath(n);return i.newUntitled({...e,path:r}).then(o=>({...o,path:$e.PathExt.join(n,o.name),serverPath:o.path}))}else return this._defaultDrive.newUntitled(e)}delete(e){let[n,i]=this._driveForPath(e);return n.delete(i)}rename(e,n){let[i,r]=this._driveForPath(e),[o,f]=this._driveForPath(n);if(i!==o)throw Error("ContentsManager: renaming files must occur within a Drive");return i.rename(r,f).then(g=>({...g,path:this._toGlobalPath(i,f),serverPath:g.path}))}save(e,n={}){let i=this.normalize(e),[r,o]=this._driveForPath(e);return r.save(o,{...n,path:o}).then(f=>({...f,path:i,serverPath:f.path}))}copy(e,n){let[i,r]=this._driveForPath(e),[o,f]=this._driveForPath(n);if(i===o)return i.copy(r,f).then(g=>({...g,path:this._toGlobalPath(i,g.path),serverPath:g.path}));throw Error("Copying files between drives is not currently implemented")}createCheckpoint(e){let[n,i]=this._driveForPath(e);return n.createCheckpoint(i)}listCheckpoints(e){let[n,i]=this._driveForPath(e);return n.listCheckpoints(i)}restoreCheckpoint(e,n){let[i,r]=this._driveForPath(e);return i.restoreCheckpoint(r,n)}deleteCheckpoint(e,n){let[i,r]=this._driveForPath(e);return i.deleteCheckpoint(r,n)}_toGlobalPath(e,n){return e===this._defaultDrive?$e.PathExt.removeSlash(n):`${e.name}:${$e.PathExt.removeSlash(n)}`}_driveForPath(e){let n=this.driveName(e),i=this.localPath(e);return n?[this._additionalDrives.get(n),i]:[this._defaultDrive,i]}_onFileChanged(e,n){var i,r;if(e===this._defaultDrive)this._fileChanged.emit(n);else{let o=null,f=null;!((i=n.newValue)===null||i===void 0)&&i.path&&(o={...n.newValue,path:this._toGlobalPath(e,n.newValue.path)}),!((r=n.oldValue)===null||r===void 0)&&r.path&&(f={...n.oldValue,path:this._toGlobalPath(e,n.oldValue.path)}),this._fileChanged.emit({type:n.type,newValue:o,oldValue:f})}}};Ue.ContentsManager=Ar;var oi=class{constructor(e={}){var n,i,r;this._isDisposed=!1,this._fileChanged=new si.Signal(this),this.name=(n=e.name)!==null&&n!==void 0?n:"Default",this._apiEndpoint=(i=e.apiEndpoint)!==null&&i!==void 0?i:$c,this.serverSettings=(r=e.serverSettings)!==null&&r!==void 0?r:be.ServerConnection.makeSettings()}get fileChanged(){return this._fileChanged}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,si.Signal.clearData(this))}async get(e,n){let i=this._getUrl(e);if(n){n.type==="notebook"&&delete n.format;let g=n.content?"1":"0",S=n.hash?"1":"0",_={...n,content:g,hash:S};i+=$e.URLExt.objectToQueryString(_)}let r=this.serverSettings,o=await be.ServerConnection.makeRequest(i,{},r);if(o.status!==200)throw await be.ServerConnection.ResponseError.create(o);let f=await o.json();return yt.validateContentsModel(f),f}getDownloadUrl(e){let n=this.serverSettings.baseUrl,i=$e.URLExt.join(n,zc,$e.URLExt.encodeParts(e)),r="";try{r=document.cookie}catch(f){}let o=r.match("\\b_xsrf=([^;]*)\\b");if(o){let f=new URL(i);f.searchParams.append("_xsrf",o[1]),i=f.toString()}return Promise.resolve(i)}async newUntitled(e={}){var n;let i="{}";e&&(e.ext&&(e.ext=Or.normalizeExtension(e.ext)),i=JSON.stringify(e));let r=this.serverSettings,o=this._getUrl((n=e.path)!==null&&n!==void 0?n:""),f={method:"POST",body:i},g=await be.ServerConnection.makeRequest(o,f,r);if(g.status!==201)throw await be.ServerConnection.ResponseError.create(g);let S=await g.json();return yt.validateContentsModel(S),this._fileChanged.emit({type:"new",oldValue:null,newValue:S}),S}async delete(e){let n=this._getUrl(e),i=this.serverSettings,r={method:"DELETE"},o=await be.ServerConnection.makeRequest(n,r,i);if(o.status!==204)throw await be.ServerConnection.ResponseError.create(o);this._fileChanged.emit({type:"delete",oldValue:{path:e},newValue:null})}async rename(e,n){let i=this.serverSettings,r=this._getUrl(e),o={method:"PATCH",body:JSON.stringify({path:n})},f=await be.ServerConnection.makeRequest(r,o,i);if(f.status!==200)throw await be.ServerConnection.ResponseError.create(f);let g=await f.json();return yt.validateContentsModel(g),this._fileChanged.emit({type:"rename",oldValue:{path:e},newValue:g}),g}async save(e,n={}){let i=this.serverSettings,r=this._getUrl(e),o={method:"PUT",body:JSON.stringify(n)},f=await be.ServerConnection.makeRequest(r,o,i);if(f.status!==200&&f.status!==201)throw await be.ServerConnection.ResponseError.create(f);let g=await f.json();return yt.validateContentsModel(g),this._fileChanged.emit({type:"save",oldValue:null,newValue:g}),g}async copy(e,n){let i=this.serverSettings,r=this._getUrl(n),o={method:"POST",body:JSON.stringify({copy_from:e})},f=await be.ServerConnection.makeRequest(r,o,i);if(f.status!==201)throw await be.ServerConnection.ResponseError.create(f);let g=await f.json();return yt.validateContentsModel(g),this._fileChanged.emit({type:"new",oldValue:null,newValue:g}),g}async createCheckpoint(e){let n=this._getUrl(e,"checkpoints"),i={method:"POST"},r=await be.ServerConnection.makeRequest(n,i,this.serverSettings);if(r.status!==201)throw await be.ServerConnection.ResponseError.create(r);let o=await r.json();return yt.validateCheckpointModel(o),o}async listCheckpoints(e){let n=this._getUrl(e,"checkpoints"),i=await be.ServerConnection.makeRequest(n,{},this.serverSettings);if(i.status!==200)throw await be.ServerConnection.ResponseError.create(i);let r=await i.json();if(!Array.isArray(r))throw new Error("Invalid Checkpoint list");for(let o=0;o<r.length;o++)yt.validateCheckpointModel(r[o]);return r}async restoreCheckpoint(e,n){let i=this._getUrl(e,"checkpoints",n),r={method:"POST"},o=await be.ServerConnection.makeRequest(i,r,this.serverSettings);if(o.status!==204)throw await be.ServerConnection.ResponseError.create(o)}async deleteCheckpoint(e,n){let i=this._getUrl(e,"checkpoints",n),r={method:"DELETE"},o=await be.ServerConnection.makeRequest(i,r,this.serverSettings);if(o.status!==204)throw await be.ServerConnection.ResponseError.create(o)}_getUrl(...e){let n=e.map(r=>$e.URLExt.encodeParts(r)),i=this.serverSettings.baseUrl;return $e.URLExt.join(i,this._apiEndpoint,...n)}};Ue.Drive=oi;var Or;(function(t){function e(n){return n.length>0&&n.indexOf(".")!==0&&(n=`.${n}`),n}t.normalizeExtension=e})(Or||(Or={}))});var Lr=te((ai,fa)=>{A();(function(t,e){typeof ai=="object"&&typeof fa!="undefined"?e(ai):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.lumino_algorithm={}))})(ai,function(t){"use strict";t.ArrayExt=void 0,function(d){function p(h,m,a=0,l=-1){let c=h.length;if(c===0)return-1;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;l<a?y=l+1+(c-a):y=l-a+1;for(let E=0;E<y;++E){let F=(a+E)%c;if(h[F]===m)return F}return-1}d.firstIndexOf=p;function v(h,m,a=-1,l=0){let c=h.length;if(c===0)return-1;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;a<l?y=a+1+(c-l):y=a-l+1;for(let E=0;E<y;++E){let F=(a-E+c)%c;if(h[F]===m)return F}return-1}d.lastIndexOf=v;function w(h,m,a=0,l=-1){let c=h.length;if(c===0)return-1;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;l<a?y=l+1+(c-a):y=l-a+1;for(let E=0;E<y;++E){let F=(a+E)%c;if(m(h[F],F))return F}return-1}d.findFirstIndex=w;function K(h,m,a=-1,l=0){let c=h.length;if(c===0)return-1;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;a<l?y=a+1+(c-l):y=a-l+1;for(let E=0;E<y;++E){let F=(a-E+c)%c;if(m(h[F],F))return F}return-1}d.findLastIndex=K;function G(h,m,a=0,l=-1){let c=w(h,m,a,l);return c!==-1?h[c]:void 0}d.findFirstValue=G;function V(h,m,a=-1,l=0){let c=K(h,m,a,l);return c!==-1?h[c]:void 0}d.findLastValue=V;function B(h,m,a,l=0,c=-1){let y=h.length;if(y===0)return 0;l<0?l=Math.max(0,l+y):l=Math.min(l,y-1),c<0?c=Math.max(0,c+y):c=Math.min(c,y-1);let E=l,F=c-l+1;for(;F>0;){let ne=F>>1,ue=E+ne;a(h[ue],m)<0?(E=ue+1,F-=ne+1):F=ne}return E}d.lowerBound=B;function Y(h,m,a,l=0,c=-1){let y=h.length;if(y===0)return 0;l<0?l=Math.max(0,l+y):l=Math.min(l,y-1),c<0?c=Math.max(0,c+y):c=Math.min(c,y-1);let E=l,F=c-l+1;for(;F>0;){let ne=F>>1,ue=E+ne;a(h[ue],m)>0?F=ne:(E=ue+1,F-=ne+1)}return E}d.upperBound=Y;function z(h,m,a){if(h===m)return!0;if(h.length!==m.length)return!1;for(let l=0,c=h.length;l<c;++l)if(a?!a(h[l],m[l]):h[l]!==m[l])return!1;return!0}d.shallowEqual=z;function Q(h,m={}){let{start:a,stop:l,step:c}=m;if(c===void 0&&(c=1),c===0)throw new Error("Slice `step` cannot be zero.");let y=h.length;a===void 0?a=c<0?y-1:0:a<0?a=Math.max(a+y,c<0?-1:0):a>=y&&(a=c<0?y-1:y),l===void 0?l=c<0?-1:y:l<0?l=Math.max(l+y,c<0?-1:0):l>=y&&(l=c<0?y-1:y);let E;c<0&&l>=a||c>0&&a>=l?E=0:c<0?E=Math.floor((l-a+1)/c+1):E=Math.floor((l-a-1)/c+1);let F=[];for(let ne=0;ne<E;++ne)F[ne]=h[a+ne*c];return F}d.slice=Q;function J(h,m,a){let l=h.length;if(l<=1||(m<0?m=Math.max(0,m+l):m=Math.min(m,l-1),a<0?a=Math.max(0,a+l):a=Math.min(a,l-1),m===a))return;let c=h[m],y=m<a?1:-1;for(let E=m;E!==a;E+=y)h[E]=h[E+y];h[a]=c}d.move=J;function ie(h,m=0,a=-1){let l=h.length;if(!(l<=1))for(m<0?m=Math.max(0,m+l):m=Math.min(m,l-1),a<0?a=Math.max(0,a+l):a=Math.min(a,l-1);m<a;){let c=h[m],y=h[a];h[m++]=y,h[a--]=c}}d.reverse=ie;function ae(h,m,a=0,l=-1){let c=h.length;if(c<=1||(a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1),a>=l))return;let y=l-a+1;if(m>0?m=m%y:m<0&&(m=(m%y+y)%y),m===0)return;let E=a+m;ie(h,a,E-1),ie(h,E,l),ie(h,a,l)}d.rotate=ae;function le(h,m,a=0,l=-1){let c=h.length;if(c===0)return;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;l<a?y=l+1+(c-a):y=l-a+1;for(let E=0;E<y;++E)h[(a+E)%c]=m}d.fill=le;function ze(h,m,a){let l=h.length;m<0?m=Math.max(0,m+l):m=Math.min(m,l);for(let c=l;c>m;--c)h[c]=h[c-1];h[m]=a}d.insert=ze;function pe(h,m){let a=h.length;if(m<0&&(m+=a),m<0||m>=a)return;let l=h[m];for(let c=m+1;c<a;++c)h[c-1]=h[c];return h.length=a-1,l}d.removeAt=pe;function Je(h,m,a=0,l=-1){let c=p(h,m,a,l);return c!==-1&&pe(h,c),c}d.removeFirstOf=Je;function Ve(h,m,a=-1,l=0){let c=v(h,m,a,l);return c!==-1&&pe(h,c),c}d.removeLastOf=Ve;function Ge(h,m,a=0,l=-1){let c=h.length;if(c===0)return 0;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y=0;for(let E=0;E<c;++E)a<=l&&E>=a&&E<=l&&h[E]===m||l<a&&(E<=l||E>=a)&&h[E]===m?y++:y>0&&(h[E-y]=h[E]);return y>0&&(h.length=c-y),y}d.removeAllOf=Ge;function Fe(h,m,a=0,l=-1){let c,y=w(h,m,a,l);return y!==-1&&(c=pe(h,y)),{index:y,value:c}}d.removeFirstWhere=Fe;function k(h,m,a=-1,l=0){let c,y=K(h,m,a,l);return y!==-1&&(c=pe(h,y)),{index:y,value:c}}d.removeLastWhere=k;function x(h,m,a=0,l=-1){let c=h.length;if(c===0)return 0;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y=0;for(let E=0;E<c;++E)a<=l&&E>=a&&E<=l&&m(h[E],E)||l<a&&(E<=l||E>=a)&&m(h[E],E)?y++:y>0&&(h[E-y]=h[E]);return y>0&&(h.length=c-y),y}d.removeAllWhere=x}(t.ArrayExt||(t.ArrayExt={}));function*e(...d){for(let p of d)yield*p}function*n(){}function*i(d,p=0){for(let v of d)yield[p++,v]}function*r(d,p){let v=0;for(let w of d)p(w,v++)&&(yield w)}function o(d,p){let v=0;for(let w of d)if(p(w,v++))return w}function f(d,p){let v=0;for(let w of d)if(p(w,v++))return v-1;return-1}function g(d,p){let v;for(let w of d){if(v===void 0){v=w;continue}p(w,v)<0&&(v=w)}return v}function S(d,p){let v;for(let w of d){if(v===void 0){v=w;continue}p(w,v)>0&&(v=w)}return v}function _(d,p){let v=!0,w,K;for(let G of d)v?(w=G,K=G,v=!1):p(G,w)<0?w=G:p(G,K)>0&&(K=G);return v?void 0:[w,K]}function u(d){return Array.from(d)}function s(d){let p={};for(let[v,w]of d)p[v]=w;return p}function b(d,p){let v=0;for(let w of d)if(p(w,v++)===!1)return}function C(d,p){let v=0;for(let w of d)if(p(w,v++)===!1)return!1;return!0}function I(d,p){let v=0;for(let w of d)if(p(w,v++))return!0;return!1}function*T(d,p){let v=0;for(let w of d)yield p(w,v++)}function*D(d,p,v){p===void 0?(p=d,d=0,v=1):v===void 0&&(v=1);let w=L.rangeLength(d,p,v);for(let K=0;K<w;K++)yield d+v*K}var L;(function(d){function p(v,w,K){return K===0?1/0:v>w&&K>0||v<w&&K<0?0:Math.ceil((w-v)/K)}d.rangeLength=p})(L||(L={}));function U(d,p,v){let w=d[Symbol.iterator](),K=0,G=w.next();if(G.done&&v===void 0)throw new TypeError("Reduce of empty iterable with no initial value.");if(G.done)return v;let V=w.next();if(V.done&&v===void 0)return G.value;if(V.done)return p(v,G.value,K++);let B;v===void 0?B=p(G.value,V.value,K++):B=p(p(v,G.value,K++),V.value,K++);let Y;for(;!(Y=w.next()).done;)B=p(B,Y.value,K++);return B}function*M(d,p){for(;0<p--;)yield d}function*R(d){yield d}function*O(d){if(typeof d.retro=="function")yield*d.retro();else for(let p=d.length-1;p>-1;p--)yield d[p]}function j(d){let p=[],v=new Set,w=new Map;for(let V of d)K(V);for(let[V]of w)G(V);return p;function K(V){let[B,Y]=V,z=w.get(Y);z?z.push(B):w.set(Y,[B])}function G(V){if(v.has(V))return;v.add(V);let B=w.get(V);if(B)for(let Y of B)G(Y);p.push(V)}}function*H(d,p){let v=0;for(let w of d)v++%p===0&&(yield w)}t.StringExt=void 0,function(d){function p(V,B,Y=0){let z=new Array(B.length);for(let Q=0,J=Y,ie=B.length;Q<ie;++Q,++J){if(J=V.indexOf(B[Q],J),J===-1)return null;z[Q]=J}return z}d.findIndices=p;function v(V,B,Y=0){let z=p(V,B,Y);if(!z)return null;let Q=0;for(let J=0,ie=z.length;J<ie;++J){let ae=z[J]-Y;Q+=ae*ae}return{score:Q,indices:z}}d.matchSumOfSquares=v;function w(V,B,Y=0){let z=p(V,B,Y);if(!z)return null;let Q=0,J=Y-1;for(let ie=0,ae=z.length;ie<ae;++ie){let le=z[ie];Q+=le-J-1,J=le}return{score:Q,indices:z}}d.matchSumOfDeltas=w;function K(V,B,Y){let z=[],Q=0,J=0,ie=B.length;for(;Q<ie;){let ae=B[Q],le=B[Q];for(;++Q<ie&&B[Q]===le+1;)le++;J<ae&&z.push(V.slice(J,ae)),ae<le+1&&z.push(Y(V.slice(ae,le+1))),J=le+1}return J<V.length&&z.push(V.slice(J)),z}d.highlight=K;function G(V,B){return V<B?-1:V>B?1:0}d.cmp=G}(t.StringExt||(t.StringExt={}));function*P(d,p){if(p<1)return;let v=d[Symbol.iterator](),w;for(;0<p--&&!(w=v.next()).done;)yield w.value}function*N(...d){let p=d.map(w=>w[Symbol.iterator]()),v=p.map(w=>w.next());for(;C(v,w=>!w.done);v=p.map(w=>w.next()))yield v.map(w=>w.value)}t.chain=e,t.each=b,t.empty=n,t.enumerate=i,t.every=C,t.filter=r,t.find=o,t.findIndex=f,t.map=T,t.max=S,t.min=g,t.minmax=_,t.once=R,t.range=D,t.reduce=U,t.repeat=M,t.retro=O,t.some=I,t.stride=H,t.take=P,t.toArray=u,t.toObject=s,t.topologicSort=j,t.zip=N})});var kr=te((li,ha)=>{A();(function(t,e){typeof li=="object"&&typeof ha!="undefined"?e(li,Lr()):typeof define=="function"&&define.amd?define(["exports","@lumino/algorithm"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.lumino_coreutils={},t.lumino_algorithm))})(li,function(t,e){"use strict";t.JSONExt=void 0,function(_){_.emptyObject=Object.freeze({}),_.emptyArray=Object.freeze([]);function u(M){return M===null||typeof M=="boolean"||typeof M=="number"||typeof M=="string"}_.isPrimitive=u;function s(M){return Array.isArray(M)}_.isArray=s;function b(M){return!u(M)&&!s(M)}_.isObject=b;function C(M,R){if(M===R)return!0;if(u(M)||u(R))return!1;let O=s(M),j=s(R);return O!==j?!1:O&&j?T(M,R):D(M,R)}_.deepEqual=C;function I(M){return u(M)?M:s(M)?L(M):U(M)}_.deepCopy=I;function T(M,R){if(M===R)return!0;if(M.length!==R.length)return!1;for(let O=0,j=M.length;O<j;++O)if(!C(M[O],R[O]))return!1;return!0}function D(M,R){if(M===R)return!0;for(let O in M)if(M[O]!==void 0&&!(O in R))return!1;for(let O in R)if(R[O]!==void 0&&!(O in M))return!1;for(let O in M){let j=M[O],H=R[O];if(!(j===void 0&&H===void 0)&&(j===void 0||H===void 0||!C(j,H)))return!1}return!0}function L(M){let R=new Array(M.length);for(let O=0,j=M.length;O<j;++O)R[O]=I(M[O]);return R}function U(M){let R={};for(let O in M){let j=M[O];j!==void 0&&(R[O]=I(j))}return R}}(t.JSONExt||(t.JSONExt={}));class n{constructor(){this._types=[],this._values=[]}types(){return this._types.slice()}hasData(u){return this._types.indexOf(u)!==-1}getData(u){let s=this._types.indexOf(u);return s!==-1?this._values[s]:void 0}setData(u,s){this.clearData(u),this._types.push(u),this._values.push(s)}clearData(u){let s=this._types.indexOf(u);s!==-1&&(this._types.splice(s,1),this._values.splice(s,1))}clear(){this._types.length=0,this._values.length=0}}class i{constructor(u={}){this._application=null,this._validatePlugin=()=>!0,this._plugins=new Map,this._services=new Map,u.validatePlugin&&(console.info("Plugins may be rejected by the custom validation plugin method."),this._validatePlugin=u.validatePlugin)}get application(){return this._application}set application(u){if(this._application!==null)throw Error("PluginRegistry.application is already set. It cannot be overridden.");this._application=u}get deferredPlugins(){return Array.from(this._plugins).filter(([u,s])=>s.autoStart==="defer").map(([u,s])=>u)}getPluginDescription(u){var s,b;return(b=(s=this._plugins.get(u))===null||s===void 0?void 0:s.description)!==null&&b!==void 0?b:""}hasPlugin(u){return this._plugins.has(u)}isPluginActivated(u){var s,b;return(b=(s=this._plugins.get(u))===null||s===void 0?void 0:s.activated)!==null&&b!==void 0?b:!1}listPlugins(){return Array.from(this._plugins.keys())}registerPlugin(u){if(this._plugins.has(u.id))throw new TypeError(`Plugin '${u.id}' is already registered.`);if(!this._validatePlugin(u))throw new Error(`Plugin '${u.id}' is not valid.`);let s=r.createPluginData(u);r.ensureNoCycle(s,this._plugins,this._services),s.provides&&this._services.set(s.provides,s.id),this._plugins.set(s.id,s)}registerPlugins(u){for(let s of u)this.registerPlugin(s)}deregisterPlugin(u,s){let b=this._plugins.get(u);if(b){if(b.activated&&!s)throw new Error(`Plugin '${u}' is still active.`);this._plugins.delete(u)}}async activatePlugin(u){let s=this._plugins.get(u);if(!s)throw new ReferenceError(`Plugin '${u}' is not registered.`);if(s.activated)return;if(s.promise)return s.promise;let b=s.requires.map(I=>this.resolveRequiredService(I)),C=s.optional.map(I=>this.resolveOptionalService(I));return s.promise=Promise.all([...b,...C]).then(I=>s.activate.apply(void 0,[this.application,...I])).then(I=>{s.service=I,s.activated=!0,s.promise=null}).catch(I=>{throw s.promise=null,I}),s.promise}async activatePlugins(u,s={}){switch(u){case"defer":{let b=this.deferredPlugins.filter(C=>this._plugins.get(C).autoStart).map(C=>this.activatePlugin(C));await Promise.all(b);break}case"startUp":{let C=r.collectStartupPlugins(this._plugins,s).map(async I=>{try{return await this.activatePlugin(I)}catch(T){console.error(`Plugin '${I}' failed to activate.`,T)}});await Promise.all(C);break}}}async deactivatePlugin(u){let s=this._plugins.get(u);if(!s)throw new ReferenceError(`Plugin '${u}' is not registered.`);if(!s.activated)return[];if(!s.deactivate)throw new TypeError(`Plugin '${u}'#deactivate() method missing`);let b=r.findDependents(u,this._plugins,this._services),C=b.map(I=>this._plugins.get(I));for(let I of C)if(!I.deactivate)throw new TypeError(`Plugin ${I.id}#deactivate() method missing (depends on ${u})`);for(let I of C){let T=[...I.requires,...I.optional].map(D=>{let L=this._services.get(D);return L?this._plugins.get(L).service:null});await I.deactivate(this.application,...T),I.service=null,I.activated=!1}return b.pop(),b}async resolveRequiredService(u){let s=this._services.get(u);if(!s)throw new TypeError(`No provider for: ${u.name}.`);let b=this._plugins.get(s);return b.activated||await this.activatePlugin(s),b.service}async resolveOptionalService(u){let s=this._services.get(u);if(!s)return null;let b=this._plugins.get(s);if(!b.activated)try{await this.activatePlugin(s)}catch(C){return console.error(C),null}return b.service}}var r;(function(_){class u{constructor(D){var L,U,M,R;this._activated=!1,this._promise=null,this._service=null,this.id=D.id,this.description=(L=D.description)!==null&&L!==void 0?L:"",this.activate=D.activate,this.deactivate=(U=D.deactivate)!==null&&U!==void 0?U:null,this.provides=(M=D.provides)!==null&&M!==void 0?M:null,this.autoStart=(R=D.autoStart)!==null&&R!==void 0?R:!1,this.requires=D.requires?D.requires.slice():[],this.optional=D.optional?D.optional.slice():[]}get activated(){return this._activated}set activated(D){this._activated=D}get service(){return this._service}set service(D){this._service=D}get promise(){return this._promise}set promise(D){this._promise=D}}function s(T){return new u(T)}_.createPluginData=s;function b(T,D,L){let U=[...T.requires,...T.optional],M=O=>{if(O===T.provides)return!0;let j=L.get(O);if(!j)return!1;let H=D.get(j),P=[...H.requires,...H.optional];return P.length===0?!1:(R.push(j),P.some(M)?!0:(R.pop(),!1))};if(!T.provides||U.length===0)return;let R=[T.id];if(U.some(M))throw new ReferenceError(`Cycle detected: ${R.join(" -> ")}.`)}_.ensureNoCycle=b;function C(T,D,L){let U=new Array,M=P=>{let N=D.get(P),d=[...N.requires,...N.optional];U.push(...d.reduce((p,v)=>{let w=L.get(v);return w&&p.push([P,w]),p},[]))};for(let P of D.keys())M(P);let R=U.filter(P=>P[1]===T),O=0;for(;R.length>O;){let P=R.length,N=new Set(R.map(d=>d[0]));for(let d of N)U.filter(p=>p[1]===d).forEach(p=>{R.includes(p)||R.push(p)});O=P}let j=e.topologicSort(R),H=j.findIndex(P=>P===T);return H===-1?[T]:j.slice(0,H+1)}_.findDependents=C;function I(T,D){let L=new Set;for(let U of T.keys())T.get(U).autoStart===!0&&L.add(U);if(D.startPlugins)for(let U of D.startPlugins)L.add(U);if(D.ignorePlugins)for(let U of D.ignorePlugins)L.delete(U);return Array.from(L)}_.collectStartupPlugins=I})(r||(r={}));class o{constructor(){this.promise=new Promise((u,s)=>{this._resolve=u,this._reject=s})}resolve(u){let s=this._resolve;s(u)}reject(u){let s=this._reject;s(u)}}class f{constructor(u,s){this.name=u,this.description=s!=null?s:"",this._tokenStructuralPropertyT=null}}function g(_){let u=0;for(let s=0,b=_.length;s<b;++s)s%4===0&&(u=Math.random()*4294967295>>>0),_[s]=u&255,u>>>=8}t.Random=void 0,function(_){_.getRandomValues=(()=>{let u=typeof window!="undefined"&&(window.crypto||window.msCrypto)||null;return u&&typeof u.getRandomValues=="function"?function(b){return u.getRandomValues(b)}:g})()}(t.Random||(t.Random={}));function S(_){let u=new Uint8Array(16),s=new Array(256);for(let b=0;b<16;++b)s[b]="0"+b.toString(16);for(let b=16;b<256;++b)s[b]=b.toString(16);return function(){return _(u),u[6]=64|u[6]&15,u[8]=128|u[8]&63,s[u[0]]+s[u[1]]+s[u[2]]+s[u[3]]+"-"+s[u[4]]+s[u[5]]+"-"+s[u[6]]+s[u[7]]+"-"+s[u[8]]+s[u[9]]+"-"+s[u[10]]+s[u[11]]+s[u[12]]+s[u[13]]+s[u[14]]+s[u[15]]}}t.UUID=void 0,function(_){_.uuid4=S(t.Random.getRandomValues)}(t.UUID||(t.UUID={})),t.MimeData=n,t.PluginRegistry=i,t.PromiseDelegate=o,t.Token=f})});var ga=te((ui,pa)=>{A();(function(t,e){typeof ui=="object"&&typeof pa!="undefined"?e(ui,Lr(),kr()):typeof define=="function"&&define.amd?define(["exports","@lumino/algorithm","@lumino/coreutils"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.lumino_signaling={},t.lumino_algorithm,t.lumino_coreutils))})(ui,function(t,e,n){"use strict";class i{constructor(g){this.sender=g}connect(g,S){return o.connect(this,g,S)}disconnect(g,S){return o.disconnect(this,g,S)}emit(g){o.emit(this,g)}}(function(f){function g(I,T){o.disconnectBetween(I,T)}f.disconnectBetween=g;function S(I){o.disconnectSender(I)}f.disconnectSender=S;function _(I){o.disconnectReceiver(I)}f.disconnectReceiver=_;function u(I){o.disconnectAll(I)}f.disconnectAll=u;function s(I){o.disconnectAll(I)}f.clearData=s;function b(){return o.exceptionHandler}f.getExceptionHandler=b;function C(I){let T=o.exceptionHandler;return o.exceptionHandler=I,T}f.setExceptionHandler=C})(i||(i={}));class r extends i{constructor(){super(...arguments),this._pending=new n.PromiseDelegate}async*[Symbol.asyncIterator](){let g=this._pending;for(;;)try{let{args:S,next:_}=await g.promise;g=_,yield S}catch(S){return}}emit(g){let S=this._pending,_=this._pending=new n.PromiseDelegate;S.resolve({args:g,next:_}),super.emit(g)}stop(){this._pending.promise.catch(()=>{}),this._pending.reject("stop"),this._pending=new n.PromiseDelegate}}var o;(function(f){f.exceptionHandler=P=>{console.error(P)};function g(P,N,d){d=d||void 0;let p=I.get(P.sender);if(p||(p=[],I.set(P.sender,p)),U(p,P,N,d))return!1;let v=d||N,w=T.get(v);w||(w=[],T.set(v,w));let K={signal:P,slot:N,thisArg:d};return p.push(K),w.push(K),!0}f.connect=g;function S(P,N,d){d=d||void 0;let p=I.get(P.sender);if(!p||p.length===0)return!1;let v=U(p,P,N,d);if(!v)return!1;let w=d||N,K=T.get(w);return v.signal=null,R(p),R(K),!0}f.disconnect=S;function _(P,N){let d=I.get(P);if(!d||d.length===0)return;let p=T.get(N);if(!(!p||p.length===0)){for(let v of p)v.signal&&v.signal.sender===P&&(v.signal=null);R(d),R(p)}}f.disconnectBetween=_;function u(P){let N=I.get(P);if(!(!N||N.length===0)){for(let d of N){if(!d.signal)continue;let p=d.thisArg||d.slot;d.signal=null,R(T.get(p))}R(N)}}f.disconnectSender=u;function s(P){let N=T.get(P);if(!(!N||N.length===0)){for(let d of N){if(!d.signal)continue;let p=d.signal.sender;d.signal=null,R(I.get(p))}R(N)}}f.disconnectReceiver=s;function b(P){u(P),s(P)}f.disconnectAll=b;function C(P,N){let d=I.get(P.sender);if(!(!d||d.length===0))for(let p=0,v=d.length;p<v;++p){let w=d[p];w.signal===P&&M(w,N)}}f.emit=C;let I=new WeakMap,T=new WeakMap,D=new Set,L=(()=>typeof requestAnimationFrame=="function"?requestAnimationFrame:setImmediate)();function U(P,N,d,p){return e.find(P,v=>v.signal===N&&v.slot===d&&v.thisArg===p)}function M(P,N){let{signal:d,slot:p,thisArg:v}=P;try{p.call(v,d.sender,N)}catch(w){f.exceptionHandler(w)}}function R(P){D.size===0&&L(O),D.add(P)}function O(){D.forEach(j),D.clear()}function j(P){e.ArrayExt.removeAllWhere(P,H)}function H(P){return P.signal===null}})(o||(o={})),t.Signal=i,t.Stream=r})});var Ot=te((ci,ma)=>{A();(function(t,e){typeof ci=="object"&&typeof ma!="undefined"?e(ci,kr(),ga()):typeof define=="function"&&define.amd?define(["exports","@lumino/coreutils","@lumino/signaling"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.lumino_polling={},t.lumino_coreutils,t.lumino_signaling))})(ci,function(t,e,n){"use strict";class i{constructor(_){var u;this._disposed=new n.Signal(this),this._lingered=0,this._tick=new e.PromiseDelegate,this._ticked=new n.Signal(this),this._factory=_.factory,this._linger=(u=_.linger)!==null&&u!==void 0?u:r.DEFAULT_LINGER,this._standby=_.standby||r.DEFAULT_STANDBY,this._state={...r.DEFAULT_STATE,timestamp:new Date().getTime()};let s=_.frequency||{},b=Math.max(s.interval||0,s.max||0,r.DEFAULT_FREQUENCY.max);this.frequency={...r.DEFAULT_FREQUENCY,...s,max:b},this.name=_.name||r.DEFAULT_NAME,(!("auto"in _)||_.auto)&&setTimeout(()=>this.start())}get disposed(){return this._disposed}get frequency(){return this._frequency}set frequency(_){if(this.isDisposed||e.JSONExt.deepEqual(_,this.frequency||{}))return;let{backoff:u,interval:s,max:b}=_;if(s=Math.round(s),b=Math.round(b),typeof u=="number"&&u<1)throw new Error("Poll backoff growth factor must be at least 1");if((s<0||s>b)&&s!==i.NEVER)throw new Error("Poll interval must be between 0 and max");if(b>i.MAX_INTERVAL&&b!==i.NEVER)throw new Error(`Max interval must be less than ${i.MAX_INTERVAL}`);this._frequency={backoff:u,interval:s,max:b}}get isDisposed(){return this.state.phase==="disposed"}get standby(){return this._standby}set standby(_){this.isDisposed||this.standby===_||(this._standby=_)}get state(){return this._state}get tick(){return this._tick.promise}get ticked(){return this._ticked}async*[Symbol.asyncIterator](){for(;!this.isDisposed;)yield this.state,await this.tick.catch(()=>{})}dispose(){this.isDisposed||(this._state={...r.DISPOSED_STATE,timestamp:new Date().getTime()},this._tick.promise.catch(_=>{}),this._tick.reject(new Error(`Poll (${this.name}) is disposed.`)),this._disposed.emit(void 0),n.Signal.clearData(this))}refresh(){return this.schedule({cancel:({phase:_})=>_==="refreshed",interval:i.IMMEDIATE,phase:"refreshed"})}async schedule(_={}){if(this.isDisposed||_.cancel&&_.cancel(this.state))return;let u=this._tick,s=new e.PromiseDelegate,b={interval:this.frequency.interval,payload:null,phase:"standby",timestamp:new Date().getTime(),..._};if(this._state=b,this._tick=s,clearTimeout(this._timeout),this._ticked.emit(this.state),u.resolve(this),await u.promise,b.interval===i.NEVER){this._timeout=void 0;return}let C=()=>{this.isDisposed||this.tick!==s.promise||this._execute()};this._timeout=setTimeout(C,b.interval)}start(){return this.schedule({cancel:({phase:_})=>_!=="constructed"&&_!=="standby"&&_!=="stopped",interval:i.IMMEDIATE,phase:"started"})}stop(){return this.schedule({cancel:({phase:_})=>_==="stopped",interval:i.NEVER,phase:"stopped"})}get hidden(){return r.hidden}_execute(){let _=typeof this.standby=="function"?this.standby():this.standby;if(_==="never"?_=!1:_==="when-hidden"&&(this.hidden?_=++this._lingered>this._linger:(this._lingered=0,_=!1)),_){this.schedule();return}let u=this.tick;this._factory(this.state).then(s=>{this.isDisposed||this.tick!==u||this.schedule({payload:s,phase:this.state.phase==="rejected"?"reconnected":"resolved"})}).catch(s=>{this.isDisposed||this.tick!==u||this.schedule({interval:r.sleep(this.frequency,this.state),payload:s,phase:"rejected"})})}}(function(S){S.IMMEDIATE=0,S.MAX_INTERVAL=2147483647,S.NEVER=1/0})(i||(i={}));var r;(function(S){S.DEFAULT_BACKOFF=3,S.DEFAULT_FREQUENCY={backoff:!0,interval:1e3,max:30*1e3},S.DEFAULT_LINGER=1,S.DEFAULT_NAME="unknown",S.DEFAULT_STANDBY="when-hidden",S.DEFAULT_STATE={interval:i.NEVER,payload:null,phase:"constructed",timestamp:new Date(0).getTime()},S.DISPOSED_STATE={interval:i.NEVER,payload:null,phase:"disposed",timestamp:new Date(0).getTime()};function _(s,b){let{backoff:C,interval:I,max:T}=s;if(I===i.NEVER)return I;let D=C===!0?S.DEFAULT_BACKOFF:C===!1?1:C,L=u(I,b.interval*D);return Math.min(T,L)}S.sleep=_,S.hidden=(()=>typeof document=="undefined"?!1:(document.addEventListener("visibilitychange",()=>{S.hidden=document.visibilityState==="hidden"}),document.addEventListener("pagehide",()=>{S.hidden=document.visibilityState==="hidden"}),document.visibilityState==="hidden"))();function u(s,b){return s=Math.ceil(s),b=Math.floor(b),Math.floor(Math.random()*(b-s+1))+s}})(r||(r={}));class o{constructor(_,u=500){this.args=void 0,this.payload=null,this.limit=u,this.poll=new i({auto:!1,factory:async()=>{let{args:s}=this;return this.args=void 0,_(...s)},frequency:{backoff:!1,interval:i.NEVER,max:i.NEVER},standby:"never"}),this.payload=new e.PromiseDelegate,this.poll.ticked.connect((s,b)=>{let{payload:C}=this;if(b.phase==="resolved"){this.payload=new e.PromiseDelegate,C.resolve(b.payload);return}if(b.phase==="rejected"||b.phase==="stopped"){this.payload=new e.PromiseDelegate,C.promise.catch(I=>{}),C.reject(b.payload);return}},this)}get isDisposed(){return this.payload===null}dispose(){this.isDisposed||(this.args=void 0,this.payload=null,this.poll.dispose())}async stop(){return this.poll.stop()}}class f extends o{invoke(..._){return this.args=_,this.poll.schedule({interval:this.limit,phase:"invoked"}),this.payload.promise}}class g extends o{constructor(_,u){super(_,typeof u=="number"?u:u&&u.limit),this._trailing=!1,typeof u!="number"&&u&&u.edge==="trailing"&&(this._trailing=!0),this._interval=this._trailing?this.limit:i.IMMEDIATE}invoke(..._){let u=this.poll.state.phase!=="invoked";return(u||this._trailing)&&(this.args=_),u&&this.poll.schedule({interval:this._interval,phase:"invoked"}),this.payload.promise}}t.Debouncer=f,t.Poll=i,t.RateLimiter=o,t.Throttler=g})});var xr=te(di=>{"use strict";A();Object.defineProperty(di,"__esModule",{value:!0});di.EventManager=void 0;var _a=Te(),Jc=Ot(),va=He(),ya=Oe(),wa="api/events",jr=class{constructor(e={}){var n;this._socket=null,this.serverSettings=(n=e.serverSettings)!==null&&n!==void 0?n:ya.ServerConnection.makeSettings(),this._poll=new Jc.Poll({factory:()=>this._subscribe()}),this._stream=new va.Stream(this),this._poll.start()}get isDisposed(){return this._poll.isDisposed}get stream(){return this._stream}dispose(){if(this.isDisposed)return;this._poll.dispose();let e=this._socket;e&&(this._socket=null,e.onopen=()=>{},e.onerror=()=>{},e.onmessage=()=>{},e.onclose=()=>{},e.close()),va.Signal.clearData(this),this._stream.stop()}async emit(e){let{serverSettings:n}=this,{baseUrl:i}=n,{makeRequest:r,ResponseError:o}=ya.ServerConnection,f=_a.URLExt.join(i,wa),g={body:JSON.stringify(e),method:"POST"},S=await r(f,g,n);if(S.status!==204)throw new o(S)}_subscribe(){return new Promise((e,n)=>{if(this.isDisposed)return;let{appendToken:i,token:r,WebSocket:o,wsUrl:f}=this.serverSettings,g=_a.URLExt.join(f,wa,"subscribe");i&&r!==""&&(g+=`?token=${encodeURIComponent(r)}`);let S=this._socket=new o(g),_=this._stream;S.onclose=()=>n(new Error("EventManager socket closed")),S.onmessage=u=>u.data&&_.emit(JSON.parse(u.data))})}};di.EventManager=jr});var Sa=te(ba=>{"use strict";A();Object.defineProperty(ba,"__esModule",{value:!0})});var fi=te(It=>{"use strict";A();Object.defineProperty(It,"__esModule",{value:!0});It.validateModels=It.validateModel=It.validateMessage=void 0;var Nt=dn(),Ea=["username","version","session","msg_id","msg_type"],Gc={stream:{name:"string",text:"string"},display_data:{data:"object",metadata:"object"},execute_input:{code:"string",execution_count:"number"},execute_result:{execution_count:"number",data:"object",metadata:"object"},error:{ename:"string",evalue:"string",traceback:"object"},status:{execution_state:["string",["starting","idle","busy","restarting","dead"]]},clear_output:{wait:"boolean"},comm_open:{comm_id:"string",target_name:"string",data:"object"},comm_msg:{comm_id:"string",data:"object"},comm_close:{comm_id:"string"},shutdown_reply:{restart:"boolean"}};function Yc(t){for(let e=0;e<Ea.length;e++)(0,Nt.validateProperty)(t,Ea[e],"string")}function Xc(t){(0,Nt.validateProperty)(t,"metadata","object"),(0,Nt.validateProperty)(t,"content","object"),(0,Nt.validateProperty)(t,"channel","string"),Yc(t.header),t.channel==="iopub"&&Qc(t)}It.validateMessage=Xc;function Qc(t){if(t.channel==="iopub"){let e=Gc[t.header.msg_type];if(e===void 0)return;let n=Object.keys(e),i=t.content;for(let r=0;r<n.length;r++){let o=e[n[r]];Array.isArray(o)||(o=[o]),(0,Nt.validateProperty)(i,n[r],...o)}}}function Ia(t){(0,Nt.validateProperty)(t,"name","string"),(0,Nt.validateProperty)(t,"id","string")}It.validateModel=Ia;function Zc(t){if(!Array.isArray(t))throw new Error("Invalid kernel list");t.forEach(e=>Ia(e))}It.validateModels=Zc});var pi=te(Se=>{"use strict";A();Object.defineProperty(Se,"__esModule",{value:!0});Se.getKernelModel=Se.shutdownKernel=Se.interruptKernel=Se.restartKernel=Se.startNew=Se.listRunning=Se.KERNEL_SERVICE_URL=void 0;var Pe=Oe(),Jt=Te(),hi=fi();Se.KERNEL_SERVICE_URL="api/kernels";async function ed(t=Pe.ServerConnection.makeSettings()){let e=Jt.URLExt.join(t.baseUrl,Se.KERNEL_SERVICE_URL),n=await Pe.ServerConnection.makeRequest(e,{},t);if(n.status!==200)throw await Pe.ServerConnection.ResponseError.create(n);let i=await n.json();return(0,hi.validateModels)(i),i}Se.listRunning=ed;async function td(t={},e=Pe.ServerConnection.makeSettings()){let n=Jt.URLExt.join(e.baseUrl,Se.KERNEL_SERVICE_URL),i={method:"POST",body:JSON.stringify(t)},r=await Pe.ServerConnection.makeRequest(n,i,e);if(r.status!==201)throw await Pe.ServerConnection.ResponseError.create(r);let o=await r.json();return(0,hi.validateModel)(o),o}Se.startNew=td;async function nd(t,e=Pe.ServerConnection.makeSettings()){let n=Jt.URLExt.join(e.baseUrl,Se.KERNEL_SERVICE_URL,encodeURIComponent(t),"restart"),i={method:"POST"},r=await Pe.ServerConnection.makeRequest(n,i,e);if(r.status!==200)throw await Pe.ServerConnection.ResponseError.create(r);let o=await r.json();(0,hi.validateModel)(o)}Se.restartKernel=nd;async function id(t,e=Pe.ServerConnection.makeSettings()){let n=Jt.URLExt.join(e.baseUrl,Se.KERNEL_SERVICE_URL,encodeURIComponent(t),"interrupt"),i={method:"POST"},r=await Pe.ServerConnection.makeRequest(n,i,e);if(r.status!==204)throw await Pe.ServerConnection.ResponseError.create(r)}Se.interruptKernel=id;async function rd(t,e=Pe.ServerConnection.makeSettings()){let n=Jt.URLExt.join(e.baseUrl,Se.KERNEL_SERVICE_URL,encodeURIComponent(t)),i={method:"DELETE"},r=await Pe.ServerConnection.makeRequest(n,i,e);if(r.status===404){let o=`The kernel "${t}" does not exist on the server`;console.warn(o)}else if(r.status!==204)throw await Pe.ServerConnection.ResponseError.create(r)}Se.shutdownKernel=rd;async function sd(t,e=Pe.ServerConnection.makeSettings()){let n=Jt.URLExt.join(e.baseUrl,Se.KERNEL_SERVICE_URL,encodeURIComponent(t)),i=await Pe.ServerConnection.makeRequest(n,{},e);if(i.status===404)return;if(i.status!==200)throw await Pe.ServerConnection.ResponseError.create(i);let r=await i.json();return(0,hi.validateModel)(r),r}Se.getKernelModel=sd});var Ur=te((gi,Ma)=>{A();(function(t,e){typeof gi=="object"&&typeof Ma!="undefined"?e(gi):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.lumino_algorithm={}))})(gi,function(t){"use strict";t.ArrayExt=void 0,function(d){function p(h,m,a=0,l=-1){let c=h.length;if(c===0)return-1;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;l<a?y=l+1+(c-a):y=l-a+1;for(let E=0;E<y;++E){let F=(a+E)%c;if(h[F]===m)return F}return-1}d.firstIndexOf=p;function v(h,m,a=-1,l=0){let c=h.length;if(c===0)return-1;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;a<l?y=a+1+(c-l):y=a-l+1;for(let E=0;E<y;++E){let F=(a-E+c)%c;if(h[F]===m)return F}return-1}d.lastIndexOf=v;function w(h,m,a=0,l=-1){let c=h.length;if(c===0)return-1;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;l<a?y=l+1+(c-a):y=l-a+1;for(let E=0;E<y;++E){let F=(a+E)%c;if(m(h[F],F))return F}return-1}d.findFirstIndex=w;function K(h,m,a=-1,l=0){let c=h.length;if(c===0)return-1;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;a<l?y=a+1+(c-l):y=a-l+1;for(let E=0;E<y;++E){let F=(a-E+c)%c;if(m(h[F],F))return F}return-1}d.findLastIndex=K;function G(h,m,a=0,l=-1){let c=w(h,m,a,l);return c!==-1?h[c]:void 0}d.findFirstValue=G;function V(h,m,a=-1,l=0){let c=K(h,m,a,l);return c!==-1?h[c]:void 0}d.findLastValue=V;function B(h,m,a,l=0,c=-1){let y=h.length;if(y===0)return 0;l<0?l=Math.max(0,l+y):l=Math.min(l,y-1),c<0?c=Math.max(0,c+y):c=Math.min(c,y-1);let E=l,F=c-l+1;for(;F>0;){let ne=F>>1,ue=E+ne;a(h[ue],m)<0?(E=ue+1,F-=ne+1):F=ne}return E}d.lowerBound=B;function Y(h,m,a,l=0,c=-1){let y=h.length;if(y===0)return 0;l<0?l=Math.max(0,l+y):l=Math.min(l,y-1),c<0?c=Math.max(0,c+y):c=Math.min(c,y-1);let E=l,F=c-l+1;for(;F>0;){let ne=F>>1,ue=E+ne;a(h[ue],m)>0?F=ne:(E=ue+1,F-=ne+1)}return E}d.upperBound=Y;function z(h,m,a){if(h===m)return!0;if(h.length!==m.length)return!1;for(let l=0,c=h.length;l<c;++l)if(a?!a(h[l],m[l]):h[l]!==m[l])return!1;return!0}d.shallowEqual=z;function Q(h,m={}){let{start:a,stop:l,step:c}=m;if(c===void 0&&(c=1),c===0)throw new Error("Slice `step` cannot be zero.");let y=h.length;a===void 0?a=c<0?y-1:0:a<0?a=Math.max(a+y,c<0?-1:0):a>=y&&(a=c<0?y-1:y),l===void 0?l=c<0?-1:y:l<0?l=Math.max(l+y,c<0?-1:0):l>=y&&(l=c<0?y-1:y);let E;c<0&&l>=a||c>0&&a>=l?E=0:c<0?E=Math.floor((l-a+1)/c+1):E=Math.floor((l-a-1)/c+1);let F=[];for(let ne=0;ne<E;++ne)F[ne]=h[a+ne*c];return F}d.slice=Q;function J(h,m,a){let l=h.length;if(l<=1||(m<0?m=Math.max(0,m+l):m=Math.min(m,l-1),a<0?a=Math.max(0,a+l):a=Math.min(a,l-1),m===a))return;let c=h[m],y=m<a?1:-1;for(let E=m;E!==a;E+=y)h[E]=h[E+y];h[a]=c}d.move=J;function ie(h,m=0,a=-1){let l=h.length;if(!(l<=1))for(m<0?m=Math.max(0,m+l):m=Math.min(m,l-1),a<0?a=Math.max(0,a+l):a=Math.min(a,l-1);m<a;){let c=h[m],y=h[a];h[m++]=y,h[a--]=c}}d.reverse=ie;function ae(h,m,a=0,l=-1){let c=h.length;if(c<=1||(a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1),a>=l))return;let y=l-a+1;if(m>0?m=m%y:m<0&&(m=(m%y+y)%y),m===0)return;let E=a+m;ie(h,a,E-1),ie(h,E,l),ie(h,a,l)}d.rotate=ae;function le(h,m,a=0,l=-1){let c=h.length;if(c===0)return;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;l<a?y=l+1+(c-a):y=l-a+1;for(let E=0;E<y;++E)h[(a+E)%c]=m}d.fill=le;function ze(h,m,a){let l=h.length;m<0?m=Math.max(0,m+l):m=Math.min(m,l);for(let c=l;c>m;--c)h[c]=h[c-1];h[m]=a}d.insert=ze;function pe(h,m){let a=h.length;if(m<0&&(m+=a),m<0||m>=a)return;let l=h[m];for(let c=m+1;c<a;++c)h[c-1]=h[c];return h.length=a-1,l}d.removeAt=pe;function Je(h,m,a=0,l=-1){let c=p(h,m,a,l);return c!==-1&&pe(h,c),c}d.removeFirstOf=Je;function Ve(h,m,a=-1,l=0){let c=v(h,m,a,l);return c!==-1&&pe(h,c),c}d.removeLastOf=Ve;function Ge(h,m,a=0,l=-1){let c=h.length;if(c===0)return 0;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y=0;for(let E=0;E<c;++E)a<=l&&E>=a&&E<=l&&h[E]===m||l<a&&(E<=l||E>=a)&&h[E]===m?y++:y>0&&(h[E-y]=h[E]);return y>0&&(h.length=c-y),y}d.removeAllOf=Ge;function Fe(h,m,a=0,l=-1){let c,y=w(h,m,a,l);return y!==-1&&(c=pe(h,y)),{index:y,value:c}}d.removeFirstWhere=Fe;function k(h,m,a=-1,l=0){let c,y=K(h,m,a,l);return y!==-1&&(c=pe(h,y)),{index:y,value:c}}d.removeLastWhere=k;function x(h,m,a=0,l=-1){let c=h.length;if(c===0)return 0;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y=0;for(let E=0;E<c;++E)a<=l&&E>=a&&E<=l&&m(h[E],E)||l<a&&(E<=l||E>=a)&&m(h[E],E)?y++:y>0&&(h[E-y]=h[E]);return y>0&&(h.length=c-y),y}d.removeAllWhere=x}(t.ArrayExt||(t.ArrayExt={}));function*e(...d){for(let p of d)yield*p}function*n(){}function*i(d,p=0){for(let v of d)yield[p++,v]}function*r(d,p){let v=0;for(let w of d)p(w,v++)&&(yield w)}function o(d,p){let v=0;for(let w of d)if(p(w,v++))return w}function f(d,p){let v=0;for(let w of d)if(p(w,v++))return v-1;return-1}function g(d,p){let v;for(let w of d){if(v===void 0){v=w;continue}p(w,v)<0&&(v=w)}return v}function S(d,p){let v;for(let w of d){if(v===void 0){v=w;continue}p(w,v)>0&&(v=w)}return v}function _(d,p){let v=!0,w,K;for(let G of d)v?(w=G,K=G,v=!1):p(G,w)<0?w=G:p(G,K)>0&&(K=G);return v?void 0:[w,K]}function u(d){return Array.from(d)}function s(d){let p={};for(let[v,w]of d)p[v]=w;return p}function b(d,p){let v=0;for(let w of d)if(p(w,v++)===!1)return}function C(d,p){let v=0;for(let w of d)if(p(w,v++)===!1)return!1;return!0}function I(d,p){let v=0;for(let w of d)if(p(w,v++))return!0;return!1}function*T(d,p){let v=0;for(let w of d)yield p(w,v++)}function*D(d,p,v){p===void 0?(p=d,d=0,v=1):v===void 0&&(v=1);let w=L.rangeLength(d,p,v);for(let K=0;K<w;K++)yield d+v*K}var L;(function(d){function p(v,w,K){return K===0?1/0:v>w&&K>0||v<w&&K<0?0:Math.ceil((w-v)/K)}d.rangeLength=p})(L||(L={}));function U(d,p,v){let w=d[Symbol.iterator](),K=0,G=w.next();if(G.done&&v===void 0)throw new TypeError("Reduce of empty iterable with no initial value.");if(G.done)return v;let V=w.next();if(V.done&&v===void 0)return G.value;if(V.done)return p(v,G.value,K++);let B;v===void 0?B=p(G.value,V.value,K++):B=p(p(v,G.value,K++),V.value,K++);let Y;for(;!(Y=w.next()).done;)B=p(B,Y.value,K++);return B}function*M(d,p){for(;0<p--;)yield d}function*R(d){yield d}function*O(d){if(typeof d.retro=="function")yield*d.retro();else for(let p=d.length-1;p>-1;p--)yield d[p]}function j(d){let p=[],v=new Set,w=new Map;for(let V of d)K(V);for(let[V]of w)G(V);return p;function K(V){let[B,Y]=V,z=w.get(Y);z?z.push(B):w.set(Y,[B])}function G(V){if(v.has(V))return;v.add(V);let B=w.get(V);if(B)for(let Y of B)G(Y);p.push(V)}}function*H(d,p){let v=0;for(let w of d)v++%p===0&&(yield w)}t.StringExt=void 0,function(d){function p(V,B,Y=0){let z=new Array(B.length);for(let Q=0,J=Y,ie=B.length;Q<ie;++Q,++J){if(J=V.indexOf(B[Q],J),J===-1)return null;z[Q]=J}return z}d.findIndices=p;function v(V,B,Y=0){let z=p(V,B,Y);if(!z)return null;let Q=0;for(let J=0,ie=z.length;J<ie;++J){let ae=z[J]-Y;Q+=ae*ae}return{score:Q,indices:z}}d.matchSumOfSquares=v;function w(V,B,Y=0){let z=p(V,B,Y);if(!z)return null;let Q=0,J=Y-1;for(let ie=0,ae=z.length;ie<ae;++ie){let le=z[ie];Q+=le-J-1,J=le}return{score:Q,indices:z}}d.matchSumOfDeltas=w;function K(V,B,Y){let z=[],Q=0,J=0,ie=B.length;for(;Q<ie;){let ae=B[Q],le=B[Q];for(;++Q<ie&&B[Q]===le+1;)le++;J<ae&&z.push(V.slice(J,ae)),ae<le+1&&z.push(Y(V.slice(ae,le+1))),J=le+1}return J<V.length&&z.push(V.slice(J)),z}d.highlight=K;function G(V,B){return V<B?-1:V>B?1:0}d.cmp=G}(t.StringExt||(t.StringExt={}));function*P(d,p){if(p<1)return;let v=d[Symbol.iterator](),w;for(;0<p--&&!(w=v.next()).done;)yield w.value}function*N(...d){let p=d.map(w=>w[Symbol.iterator]()),v=p.map(w=>w.next());for(;C(v,w=>!w.done);v=p.map(w=>w.next()))yield v.map(w=>w.value)}t.chain=e,t.each=b,t.empty=n,t.enumerate=i,t.every=C,t.filter=r,t.find=o,t.findIndex=f,t.map=T,t.max=S,t.min=g,t.minmax=_,t.once=R,t.range=D,t.reduce=U,t.repeat=M,t.retro=O,t.some=I,t.stride=H,t.take=P,t.toArray=u,t.toObject=s,t.topologicSort=j,t.zip=N})});var Ra=te((mi,Pa)=>{A();(function(t,e){typeof mi=="object"&&typeof Pa!="undefined"?e(mi,Ur()):typeof define=="function"&&define.amd?define(["exports","@lumino/algorithm"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.lumino_coreutils={},t.lumino_algorithm))})(mi,function(t,e){"use strict";t.JSONExt=void 0,function(_){_.emptyObject=Object.freeze({}),_.emptyArray=Object.freeze([]);function u(M){return M===null||typeof M=="boolean"||typeof M=="number"||typeof M=="string"}_.isPrimitive=u;function s(M){return Array.isArray(M)}_.isArray=s;function b(M){return!u(M)&&!s(M)}_.isObject=b;function C(M,R){if(M===R)return!0;if(u(M)||u(R))return!1;let O=s(M),j=s(R);return O!==j?!1:O&&j?T(M,R):D(M,R)}_.deepEqual=C;function I(M){return u(M)?M:s(M)?L(M):U(M)}_.deepCopy=I;function T(M,R){if(M===R)return!0;if(M.length!==R.length)return!1;for(let O=0,j=M.length;O<j;++O)if(!C(M[O],R[O]))return!1;return!0}function D(M,R){if(M===R)return!0;for(let O in M)if(M[O]!==void 0&&!(O in R))return!1;for(let O in R)if(R[O]!==void 0&&!(O in M))return!1;for(let O in M){let j=M[O],H=R[O];if(!(j===void 0&&H===void 0)&&(j===void 0||H===void 0||!C(j,H)))return!1}return!0}function L(M){let R=new Array(M.length);for(let O=0,j=M.length;O<j;++O)R[O]=I(M[O]);return R}function U(M){let R={};for(let O in M){let j=M[O];j!==void 0&&(R[O]=I(j))}return R}}(t.JSONExt||(t.JSONExt={}));class n{constructor(){this._types=[],this._values=[]}types(){return this._types.slice()}hasData(u){return this._types.indexOf(u)!==-1}getData(u){let s=this._types.indexOf(u);return s!==-1?this._values[s]:void 0}setData(u,s){this.clearData(u),this._types.push(u),this._values.push(s)}clearData(u){let s=this._types.indexOf(u);s!==-1&&(this._types.splice(s,1),this._values.splice(s,1))}clear(){this._types.length=0,this._values.length=0}}class i{constructor(u={}){this._application=null,this._validatePlugin=()=>!0,this._plugins=new Map,this._services=new Map,u.validatePlugin&&(console.info("Plugins may be rejected by the custom validation plugin method."),this._validatePlugin=u.validatePlugin)}get application(){return this._application}set application(u){if(this._application!==null)throw Error("PluginRegistry.application is already set. It cannot be overridden.");this._application=u}get deferredPlugins(){return Array.from(this._plugins).filter(([u,s])=>s.autoStart==="defer").map(([u,s])=>u)}getPluginDescription(u){var s,b;return(b=(s=this._plugins.get(u))===null||s===void 0?void 0:s.description)!==null&&b!==void 0?b:""}hasPlugin(u){return this._plugins.has(u)}isPluginActivated(u){var s,b;return(b=(s=this._plugins.get(u))===null||s===void 0?void 0:s.activated)!==null&&b!==void 0?b:!1}listPlugins(){return Array.from(this._plugins.keys())}registerPlugin(u){if(this._plugins.has(u.id))throw new TypeError(`Plugin '${u.id}' is already registered.`);if(!this._validatePlugin(u))throw new Error(`Plugin '${u.id}' is not valid.`);let s=r.createPluginData(u);r.ensureNoCycle(s,this._plugins,this._services),s.provides&&this._services.set(s.provides,s.id),this._plugins.set(s.id,s)}registerPlugins(u){for(let s of u)this.registerPlugin(s)}deregisterPlugin(u,s){let b=this._plugins.get(u);if(b){if(b.activated&&!s)throw new Error(`Plugin '${u}' is still active.`);this._plugins.delete(u)}}async activatePlugin(u){let s=this._plugins.get(u);if(!s)throw new ReferenceError(`Plugin '${u}' is not registered.`);if(s.activated)return;if(s.promise)return s.promise;let b=s.requires.map(I=>this.resolveRequiredService(I)),C=s.optional.map(I=>this.resolveOptionalService(I));return s.promise=Promise.all([...b,...C]).then(I=>s.activate.apply(void 0,[this.application,...I])).then(I=>{s.service=I,s.activated=!0,s.promise=null}).catch(I=>{throw s.promise=null,I}),s.promise}async activatePlugins(u,s={}){switch(u){case"defer":{let b=this.deferredPlugins.filter(C=>this._plugins.get(C).autoStart).map(C=>this.activatePlugin(C));await Promise.all(b);break}case"startUp":{let C=r.collectStartupPlugins(this._plugins,s).map(async I=>{try{return await this.activatePlugin(I)}catch(T){console.error(`Plugin '${I}' failed to activate.`,T)}});await Promise.all(C);break}}}async deactivatePlugin(u){let s=this._plugins.get(u);if(!s)throw new ReferenceError(`Plugin '${u}' is not registered.`);if(!s.activated)return[];if(!s.deactivate)throw new TypeError(`Plugin '${u}'#deactivate() method missing`);let b=r.findDependents(u,this._plugins,this._services),C=b.map(I=>this._plugins.get(I));for(let I of C)if(!I.deactivate)throw new TypeError(`Plugin ${I.id}#deactivate() method missing (depends on ${u})`);for(let I of C){let T=[...I.requires,...I.optional].map(D=>{let L=this._services.get(D);return L?this._plugins.get(L).service:null});await I.deactivate(this.application,...T),I.service=null,I.activated=!1}return b.pop(),b}async resolveRequiredService(u){let s=this._services.get(u);if(!s)throw new TypeError(`No provider for: ${u.name}.`);let b=this._plugins.get(s);return b.activated||await this.activatePlugin(s),b.service}async resolveOptionalService(u){let s=this._services.get(u);if(!s)return null;let b=this._plugins.get(s);if(!b.activated)try{await this.activatePlugin(s)}catch(C){return console.error(C),null}return b.service}}var r;(function(_){class u{constructor(D){var L,U,M,R;this._activated=!1,this._promise=null,this._service=null,this.id=D.id,this.description=(L=D.description)!==null&&L!==void 0?L:"",this.activate=D.activate,this.deactivate=(U=D.deactivate)!==null&&U!==void 0?U:null,this.provides=(M=D.provides)!==null&&M!==void 0?M:null,this.autoStart=(R=D.autoStart)!==null&&R!==void 0?R:!1,this.requires=D.requires?D.requires.slice():[],this.optional=D.optional?D.optional.slice():[]}get activated(){return this._activated}set activated(D){this._activated=D}get service(){return this._service}set service(D){this._service=D}get promise(){return this._promise}set promise(D){this._promise=D}}function s(T){return new u(T)}_.createPluginData=s;function b(T,D,L){let U=[...T.requires,...T.optional],M=O=>{if(O===T.provides)return!0;let j=L.get(O);if(!j)return!1;let H=D.get(j),P=[...H.requires,...H.optional];return P.length===0?!1:(R.push(j),P.some(M)?!0:(R.pop(),!1))};if(!T.provides||U.length===0)return;let R=[T.id];if(U.some(M))throw new ReferenceError(`Cycle detected: ${R.join(" -> ")}.`)}_.ensureNoCycle=b;function C(T,D,L){let U=new Array,M=P=>{let N=D.get(P),d=[...N.requires,...N.optional];U.push(...d.reduce((p,v)=>{let w=L.get(v);return w&&p.push([P,w]),p},[]))};for(let P of D.keys())M(P);let R=U.filter(P=>P[1]===T),O=0;for(;R.length>O;){let P=R.length,N=new Set(R.map(d=>d[0]));for(let d of N)U.filter(p=>p[1]===d).forEach(p=>{R.includes(p)||R.push(p)});O=P}let j=e.topologicSort(R),H=j.findIndex(P=>P===T);return H===-1?[T]:j.slice(0,H+1)}_.findDependents=C;function I(T,D){let L=new Set;for(let U of T.keys())T.get(U).autoStart===!0&&L.add(U);if(D.startPlugins)for(let U of D.startPlugins)L.add(U);if(D.ignorePlugins)for(let U of D.ignorePlugins)L.delete(U);return Array.from(L)}_.collectStartupPlugins=I})(r||(r={}));class o{constructor(){this.promise=new Promise((u,s)=>{this._resolve=u,this._reject=s})}resolve(u){let s=this._resolve;s(u)}reject(u){let s=this._reject;s(u)}}class f{constructor(u,s){this.name=u,this.description=s!=null?s:"",this._tokenStructuralPropertyT=null}}function g(_){let u=0;for(let s=0,b=_.length;s<b;++s)s%4===0&&(u=Math.random()*4294967295>>>0),_[s]=u&255,u>>>=8}t.Random=void 0,function(_){_.getRandomValues=(()=>{let u=typeof window!="undefined"&&(window.crypto||window.msCrypto)||null;return u&&typeof u.getRandomValues=="function"?function(b){return u.getRandomValues(b)}:g})()}(t.Random||(t.Random={}));function S(_){let u=new Uint8Array(16),s=new Array(256);for(let b=0;b<16;++b)s[b]="0"+b.toString(16);for(let b=16;b<256;++b)s[b]=b.toString(16);return function(){return _(u),u[6]=64|u[6]&15,u[8]=128|u[8]&63,s[u[0]]+s[u[1]]+s[u[2]]+s[u[3]]+"-"+s[u[4]]+s[u[5]]+"-"+s[u[6]]+s[u[7]]+"-"+s[u[8]]+s[u[9]]+"-"+s[u[10]]+s[u[11]]+s[u[12]]+s[u[13]]+s[u[14]]+s[u[15]]}}t.UUID=void 0,function(_){_.uuid4=S(t.Random.getRandomValues)}(t.UUID||(t.UUID={})),t.MimeData=n,t.PluginRegistry=i,t.PromiseDelegate=o,t.Token=f})});var Da=te((_i,Ca)=>{A();(function(t,e){typeof _i=="object"&&typeof Ca!="undefined"?e(_i,Ur(),Ra()):typeof define=="function"&&define.amd?define(["exports","@lumino/algorithm","@lumino/coreutils"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.lumino_signaling={},t.lumino_algorithm,t.lumino_coreutils))})(_i,function(t,e,n){"use strict";class i{constructor(g){this.sender=g}connect(g,S){return o.connect(this,g,S)}disconnect(g,S){return o.disconnect(this,g,S)}emit(g){o.emit(this,g)}}(function(f){function g(I,T){o.disconnectBetween(I,T)}f.disconnectBetween=g;function S(I){o.disconnectSender(I)}f.disconnectSender=S;function _(I){o.disconnectReceiver(I)}f.disconnectReceiver=_;function u(I){o.disconnectAll(I)}f.disconnectAll=u;function s(I){o.disconnectAll(I)}f.clearData=s;function b(){return o.exceptionHandler}f.getExceptionHandler=b;function C(I){let T=o.exceptionHandler;return o.exceptionHandler=I,T}f.setExceptionHandler=C})(i||(i={}));class r extends i{constructor(){super(...arguments),this._pending=new n.PromiseDelegate}async*[Symbol.asyncIterator](){let g=this._pending;for(;;)try{let{args:S,next:_}=await g.promise;g=_,yield S}catch(S){return}}emit(g){let S=this._pending,_=this._pending=new n.PromiseDelegate;S.resolve({args:g,next:_}),super.emit(g)}stop(){this._pending.promise.catch(()=>{}),this._pending.reject("stop"),this._pending=new n.PromiseDelegate}}var o;(function(f){f.exceptionHandler=P=>{console.error(P)};function g(P,N,d){d=d||void 0;let p=I.get(P.sender);if(p||(p=[],I.set(P.sender,p)),U(p,P,N,d))return!1;let v=d||N,w=T.get(v);w||(w=[],T.set(v,w));let K={signal:P,slot:N,thisArg:d};return p.push(K),w.push(K),!0}f.connect=g;function S(P,N,d){d=d||void 0;let p=I.get(P.sender);if(!p||p.length===0)return!1;let v=U(p,P,N,d);if(!v)return!1;let w=d||N,K=T.get(w);return v.signal=null,R(p),R(K),!0}f.disconnect=S;function _(P,N){let d=I.get(P);if(!d||d.length===0)return;let p=T.get(N);if(!(!p||p.length===0)){for(let v of p)v.signal&&v.signal.sender===P&&(v.signal=null);R(d),R(p)}}f.disconnectBetween=_;function u(P){let N=I.get(P);if(!(!N||N.length===0)){for(let d of N){if(!d.signal)continue;let p=d.thisArg||d.slot;d.signal=null,R(T.get(p))}R(N)}}f.disconnectSender=u;function s(P){let N=T.get(P);if(!(!N||N.length===0)){for(let d of N){if(!d.signal)continue;let p=d.signal.sender;d.signal=null,R(I.get(p))}R(N)}}f.disconnectReceiver=s;function b(P){u(P),s(P)}f.disconnectAll=b;function C(P,N){let d=I.get(P.sender);if(!(!d||d.length===0))for(let p=0,v=d.length;p<v;++p){let w=d[p];w.signal===P&&M(w,N)}}f.emit=C;let I=new WeakMap,T=new WeakMap,D=new Set,L=(()=>typeof requestAnimationFrame=="function"?requestAnimationFrame:setImmediate)();function U(P,N,d,p){return e.find(P,v=>v.signal===N&&v.slot===d&&v.thisArg===p)}function M(P,N){let{signal:d,slot:p,thisArg:v}=P;try{p.call(v,d.sender,N)}catch(w){f.exceptionHandler(w)}}function R(P){D.size===0&&L(O),D.add(P)}function O(){D.forEach(j),D.clear()}function j(P){e.ArrayExt.removeAllWhere(P,H)}function H(P){return P.signal===null}})(o||(o={})),t.Signal=i,t.Stream=r})});var qr=te((vi,Ta)=>{A();(function(t,e){typeof vi=="object"&&typeof Ta!="undefined"?e(vi,Da()):typeof define=="function"&&define.amd?define(["exports","@lumino/signaling"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.lumino_disposable={},t.lumino_signaling))})(vi,function(t,e){"use strict";class n{constructor(g){this._fn=g}get isDisposed(){return!this._fn}dispose(){if(!this._fn)return;let g=this._fn;this._fn=null,g()}}class i extends n{constructor(){super(...arguments),this._disposed=new e.Signal(this)}get disposed(){return this._disposed}dispose(){this.isDisposed||(super.dispose(),this._disposed.emit(void 0),e.Signal.clearData(this))}}class r{constructor(){this._isDisposed=!1,this._items=new Set}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,this._items.forEach(g=>{g.dispose()}),this._items.clear())}contains(g){return this._items.has(g)}add(g){this._items.add(g)}remove(g){this._items.delete(g)}clear(){this._items.clear()}}(function(f){function g(S){let _=new f;for(let u of S)_.add(u);return _}f.from=g})(r||(r={}));class o extends r{constructor(){super(...arguments),this._disposed=new e.Signal(this)}get disposed(){return this._disposed}dispose(){this.isDisposed||(super.dispose(),this._disposed.emit(void 0),e.Signal.clearData(this))}}(function(f){function g(S){let _=new f;for(let u of S)_.add(u);return _}f.from=g})(o||(o={})),t.DisposableDelegate=n,t.DisposableSet=r,t.ObservableDisposableDelegate=i,t.ObservableDisposableSet=o})});var Aa=te(ft=>{"use strict";A();var od=ft&&ft.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),ad=ft&&ft.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ld=ft&&ft.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&od(e,t,n);return ad(e,t),e};Object.defineProperty(ft,"__esModule",{value:!0});ft.CommHandler=void 0;var ud=qr(),yi=ld(Bt()),Wr=class extends ud.DisposableDelegate{constructor(e,n,i,r){super(r),this._target="",this._id="",this._id=n,this._target=e,this._kernel=i}get commId(){return this._id}get targetName(){return this._target}get onClose(){return this._onClose}set onClose(e){this._onClose=e}get onMsg(){return this._onMsg}set onMsg(e){this._onMsg=e}open(e,n,i=[]){if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot open");let r=yi.createMessage({msgType:"comm_open",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,target_name:this._target,data:e!=null?e:{}},metadata:n,buffers:i});return this._kernel.sendShellMessage(r,!1,!0)}send(e,n,i=[],r=!0){if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot send");let o=yi.createMessage({msgType:"comm_msg",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,data:e},metadata:n,buffers:i});return this._kernel.sendShellMessage(o,!1,r)}close(e,n,i=[]){if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot close");let r=yi.createMessage({msgType:"comm_close",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,data:e!=null?e:{}},metadata:n,buffers:i}),o=this._kernel.sendShellMessage(r,!1,!0),f=this._onClose;if(f){let g=yi.createMessage({msgType:"comm_close",channel:"iopub",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,data:e!=null?e:{}},metadata:n,buffers:i});f(g)}return this.dispose(),o}};ft.CommHandler=Wr});var Na=te(qe=>{"use strict";A();var cd=qe&&qe.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),dd=qe&&qe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),fd=qe&&qe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&cd(e,t,n);return dd(e,t),e};Object.defineProperty(qe,"__esModule",{value:!0});qe.KernelShellFutureHandler=qe.KernelControlFutureHandler=qe.KernelFutureHandler=void 0;var Oa=st(),hd=qr(),pd=fd(Bt()),fn=class extends hd.DisposableDelegate{constructor(e,n,i,r,o){super(e),this._status=0,this._stdin=Re.noOp,this._iopub=Re.noOp,this._reply=Re.noOp,this._done=new Oa.PromiseDelegate,this._hooks=new Re.HookList,this._disposeOnDone=!0,this._msg=n,i||this._setFlag(Re.KernelFutureFlag.GotReply),this._disposeOnDone=r,this._kernel=o}get msg(){return this._msg}get done(){return this._done.promise}get onReply(){return this._reply}set onReply(e){this._reply=e}get onIOPub(){return this._iopub}set onIOPub(e){this._iopub=e}get onStdin(){return this._stdin}set onStdin(e){this._stdin=e}registerMessageHook(e){if(this.isDisposed)throw new Error("Kernel future is disposed");this._hooks.add(e)}removeMessageHook(e){this.isDisposed||this._hooks.remove(e)}sendInputReply(e,n){this._kernel.sendInputReply(e,n)}dispose(){this._stdin=Re.noOp,this._iopub=Re.noOp,this._reply=Re.noOp,this._hooks=null,this._testFlag(Re.KernelFutureFlag.IsDone)||(this._done.promise.catch(()=>{}),this._done.reject(new Error(`Canceled future for ${this.msg.header.msg_type} message before replies were done`))),super.dispose()}async handleMsg(e){switch(e.channel){case"control":case"shell":e.channel===this.msg.channel&&e.parent_header.msg_id===this.msg.header.msg_id&&await this._handleReply(e);break;case"stdin":await this._handleStdin(e);break;case"iopub":await this._handleIOPub(e);break;default:break}}async _handleReply(e){let n=this._reply;n&&await n(e),this._replyMsg=e,this._setFlag(Re.KernelFutureFlag.GotReply),this._testFlag(Re.KernelFutureFlag.GotIdle)&&this._handleDone()}async _handleStdin(e){this._kernel.hasPendingInput=!0;let n=this._stdin;n&&await n(e)}async _handleIOPub(e){let n=await this._hooks.process(e),i=this._iopub;n&&i&&await i(e),pd.isStatusMsg(e)&&e.content.execution_state==="idle"&&(this._setFlag(Re.KernelFutureFlag.GotIdle),this._testFlag(Re.KernelFutureFlag.GotReply)&&this._handleDone())}_handleDone(){this._testFlag(Re.KernelFutureFlag.IsDone)||(this._setFlag(Re.KernelFutureFlag.IsDone),this._done.resolve(this._replyMsg),this._disposeOnDone&&this.dispose())}_testFlag(e){return(this._status&e)!==0}_setFlag(e){this._status|=e}};qe.KernelFutureHandler=fn;var Kr=class extends fn{};qe.KernelControlFutureHandler=Kr;var Vr=class extends fn{};qe.KernelShellFutureHandler=Vr;var Re;(function(t){t.noOp=()=>{};let e=(()=>typeof requestAnimationFrame=="function"?requestAnimationFrame:setImmediate)();class n{constructor(){this._hooks=[]}add(o){this.remove(o),this._hooks.push(o)}remove(o){let f=this._hooks.indexOf(o);f>=0&&(this._hooks[f]=null,this._scheduleCompact())}async process(o){await this._processing;let f=new Oa.PromiseDelegate;this._processing=f.promise;let g;for(let S=this._hooks.length-1;S>=0;S--){let _=this._hooks[S];if(_!==null){try{g=await _(o)}catch(u){g=!0,console.error(u)}if(g===!1)return f.resolve(void 0),!1}}return f.resolve(void 0),!0}_scheduleCompact(){this._compactScheduled||(this._compactScheduled=!0,e(()=>{this._processing=this._processing.then(()=>{this._compactScheduled=!1,this._compact()})}))}_compact(){let o=0;for(let f=0,g=this._hooks.length;f<g;f++){let S=this._hooks[f];this._hooks[f]===null?o++:this._hooks[f-o]=S}this._hooks.length-=o}}t.HookList=n;let i;(function(r){r[r.GotReply=1]="GotReply",r[r.GotIdle=2]="GotIdle",r[r.IsDone=4]="IsDone",r[r.DisposeOnDone=8]="DisposeOnDone"})(i=t.KernelFutureFlag||(t.KernelFutureFlag={}))})(Re||(Re={}))});var ka=te(La=>{"use strict";A();Object.defineProperty(La,"__esModule",{value:!0})});var xa=te(Gt=>{"use strict";A();Object.defineProperty(Gt,"__esModule",{value:!0});Gt.validateSpecModels=Gt.validateSpecModel=void 0;var Lt=dn();function ja(t){let e=t.spec;if(!e)throw new Error("Invalid kernel spec");(0,Lt.validateProperty)(t,"name","string"),(0,Lt.validateProperty)(t,"resources","object"),(0,Lt.validateProperty)(e,"language","string"),(0,Lt.validateProperty)(e,"display_name","string"),(0,Lt.validateProperty)(e,"argv","array");let n=null;e.hasOwnProperty("metadata")&&((0,Lt.validateProperty)(e,"metadata","object"),n=e.metadata);let i=null;return e.hasOwnProperty("env")&&((0,Lt.validateProperty)(e,"env","object"),i=e.env),{name:t.name,resources:t.resources,language:e.language,display_name:e.display_name,argv:e.argv,metadata:n,env:i}}Gt.validateSpecModel=ja;function gd(t){if(!t.hasOwnProperty("kernelspecs"))throw new Error("No kernelspecs found");let e=Object.keys(t.kernelspecs),n=Object.create(null),i=t.default;for(let r=0;r<e.length;r++){let o=t.kernelspecs[e[r]];try{n[e[r]]=ja(o)}catch(f){console.warn(`Removing errant kernel spec: ${e[r]}`)}}if(e=Object.keys(n),!e.length)throw new Error("No valid kernelspecs found");return(!i||typeof i!="string"||!(i in n))&&(i=e[0],console.warn(`Default kernel not found, using '${e[0]}'`)),{default:i,kernelspecs:n}}Gt.validateSpecModels=gd});var Br=te(wi=>{"use strict";A();Object.defineProperty(wi,"__esModule",{value:!0});wi.getSpecs=void 0;var Fr=Oe(),md=xa(),_d=Te(),vd="api/kernelspecs";async function yd(t=Fr.ServerConnection.makeSettings()){let e=_d.URLExt.join(t.baseUrl,vd),n=await Fr.ServerConnection.makeRequest(e,{},t);if(n.status!==200)throw await Fr.ServerConnection.ResponseError.create(n);let i=await n.json();return(0,md.validateSpecModels)(i)}wi.getSpecs=yd});var qa=te(ht=>{"use strict";A();var wd=ht&&ht.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),bd=ht&&ht.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Sd=ht&&ht.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&wd(e,t,n);return bd(e,t),e};Object.defineProperty(ht,"__esModule",{value:!0});ht.KernelSpecManager=void 0;var Ed=st(),Id=Ot(),Ua=He(),Md=Sd(Br()),Pd=At(),Hr=class extends Pd.BaseManager{constructor(e={}){var n;super(e),this._isReady=!1,this._connectionFailure=new Ua.Signal(this),this._specs=null,this._specsChanged=new Ua.Signal(this),this._ready=Promise.all([this.requestSpecs()]).then(i=>{}).catch(i=>{}).then(()=>{this.isDisposed||(this._isReady=!0)}),this._pollSpecs=new Id.Poll({auto:!1,factory:()=>this.requestSpecs(),frequency:{interval:61*1e3,backoff:!0,max:300*1e3},name:"@jupyterlab/services:KernelSpecManager#specs",standby:(n=e.standby)!==null&&n!==void 0?n:"when-hidden"}),this.ready.then(()=>{this._pollSpecs.start()})}get isReady(){return this._isReady}get ready(){return this._ready}get specs(){return this._specs}get specsChanged(){return this._specsChanged}get connectionFailure(){return this._connectionFailure}dispose(){this._pollSpecs.dispose(),super.dispose()}async refreshSpecs(){await this._pollSpecs.refresh(),await this._pollSpecs.tick}async requestSpecs(){let e=await Md.getSpecs(this.serverSettings);this.isDisposed||Ed.JSONExt.deepEqual(e,this._specs)||(this._specs=e,this._specsChanged.emit(e))}};ht.KernelSpecManager=Hr});var bi=te(Ne=>{"use strict";A();var Wa=Ne&&Ne.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Rd=Ne&&Ne.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ka=Ne&&Ne.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Wa(e,t,n);return Rd(e,t),e},Cd=Ne&&Ne.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Wa(e,t,n)};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.KernelSpecAPI=Ne.KernelSpec=void 0;var Dd=Ka(ka());Ne.KernelSpec=Dd;var Td=Ka(Br());Ne.KernelSpecAPI=Td;Cd(qa(),Ne)});var Si=te(pt=>{"use strict";A();var Ad=pt&&pt.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Od=pt&&pt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),zr=pt&&pt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Ad(e,t,n);return Od(e,t),e};Object.defineProperty(pt,"__esModule",{value:!0});pt.KernelConnection=void 0;var Va=Te(),Mt=st(),Pt=He(),Fa=ct(),Ba=Aa(),We=zr(Bt()),Ha=Na(),Nd=zr(fi()),Ld=bi(),hn=zr(pi()),kd=3e3,Yt="_RESTARTING_",jd="",$r=class t{constructor(e){var n,i,r,o;this._createSocket=(f=!0)=>{this._errorIfDisposed(),this._clearSocket(),this._updateConnectionStatus("connecting");let g=this.serverSettings,S=Va.URLExt.join(g.wsUrl,hn.KERNEL_SERVICE_URL,encodeURIComponent(this._id)),_=S.replace(/^((?:\w+:)?\/\/)(?:[^@\/]+@)/,"$1"),u=Va.URLExt.join(S,"channels?session_id="+encodeURIComponent(this._clientId)),s=g.token;g.appendToken&&s!==""&&(u=u+`&token=${encodeURIComponent(s)}`);let b=f?this._supportedProtocols:[];this._ws=new g.WebSocket(u,b),this._ws.binaryType="arraybuffer";let C=!1,I=async D=>{var L,U;if(!this._isDisposed){this._reason="",this._model=void 0;try{let M=await hn.getKernelModel(this._id,g);this._model=M,(M==null?void 0:M.execution_state)==="dead"?this._updateStatus("dead"):this._onWSClose(D)}catch(M){if(M instanceof Fa.ServerConnection.NetworkError||((L=M.response)===null||L===void 0?void 0:L.status)===503||((U=M.response)===null||U===void 0?void 0:U.status)===424){let R=Qe.getRandomIntInclusive(10,30)*1e3;setTimeout(I,R,D)}else this._reason="Kernel died unexpectedly",this._updateStatus("dead")}}},T=async D=>{C||(C=!0,await I(D))};this._ws.onmessage=this._onWSMessage,this._ws.onopen=this._onWSOpen,this._ws.onclose=T,this._ws.onerror=T},this._onWSOpen=f=>{if(this._ws.protocol!==""&&!this._supportedProtocols.includes(this._ws.protocol))throw console.log("Server selected unknown kernel wire protocol:",this._ws.protocol),this._updateStatus("dead"),new Error(`Unknown kernel wire protocol:  ${this._ws.protocol}`);this._selectedProtocol=this._ws.protocol,this._ws.onclose=this._onWSClose,this._ws.onerror=this._onWSClose,this._updateConnectionStatus("connected")},this._onWSMessage=f=>{let g;try{g=this.serverSettings.serializer.deserialize(f.data,this._ws.protocol),Nd.validateMessage(g)}catch(S){throw S.message=`Kernel message validation error: ${S.message}`,S}this._kernelSession=g.header.session,this._msgChain=this._msgChain.then(()=>this._handleMessage(g)).catch(S=>{S.message.startsWith("Canceled future for ")&&console.error(S)}),this._anyMessage.emit({msg:g,direction:"recv"})},this._onWSClose=f=>{this.isDisposed||this._reconnect()},this._id="",this._name="",this._status="unknown",this._connectionStatus="connecting",this._kernelSession="",this._isDisposed=!1,this._ws=null,this._username="",this._reconnectLimit=7,this._reconnectAttempt=0,this._reconnectTimeout=null,this._supportedProtocols=Object.values(We.supportedKernelWebSocketProtocols),this._selectedProtocol="",this._futures=new Map,this._comms=new Map,this._targetRegistry=Object.create(null),this._info=new Mt.PromiseDelegate,this._pendingMessages=[],this._statusChanged=new Pt.Signal(this),this._connectionStatusChanged=new Pt.Signal(this),this._disposed=new Pt.Signal(this),this._iopubMessage=new Pt.Signal(this),this._anyMessage=new Pt.Signal(this),this._pendingInput=new Pt.Signal(this),this._unhandledMessage=new Pt.Signal(this),this._displayIdToParentIds=new Map,this._msgIdToDisplayIds=new Map,this._msgChain=Promise.resolve(),this._hasPendingInput=!1,this._reason="",this._noOp=()=>{},this._name=e.model.name,this._id=e.model.id,this.serverSettings=(n=e.serverSettings)!==null&&n!==void 0?n:Fa.ServerConnection.makeSettings(),this._clientId=(i=e.clientId)!==null&&i!==void 0?i:Mt.UUID.uuid4(),this._username=(r=e.username)!==null&&r!==void 0?r:"",this.handleComms=(o=e.handleComms)!==null&&o!==void 0?o:!0,this._createSocket()}get disposed(){return this._disposed}get statusChanged(){return this._statusChanged}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get model(){return this._model||{id:this.id,name:this.name,reason:this._reason}}get anyMessage(){return this._anyMessage}get pendingInput(){return this._pendingInput}get id(){return this._id}get name(){return this._name}get username(){return this._username}get clientId(){return this._clientId}get status(){return this._status}get connectionStatus(){return this._connectionStatus}get isDisposed(){return this._isDisposed}get info(){return this._info.promise}get spec(){return this._specPromise?this._specPromise:(this._specPromise=Ld.KernelSpecAPI.getSpecs(this.serverSettings).then(e=>e.kernelspecs[this._name]),this._specPromise)}clone(e={}){return new t({model:this.model,username:this.username,serverSettings:this.serverSettings,handleComms:!1,...e})}dispose(){this.isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._updateConnectionStatus("disconnected"),this._clearKernelState(),this._pendingMessages=[],this._clearSocket(),Pt.Signal.clearData(this))}sendShellMessage(e,n=!1,i=!0){return this._sendKernelShellControl(Ha.KernelShellFutureHandler,e,n,i)}sendControlMessage(e,n=!1,i=!0){return this._sendKernelShellControl(Ha.KernelControlFutureHandler,e,n,i)}_sendKernelShellControl(e,n,i=!1,r=!0){this._sendMessage(n),this._anyMessage.emit({msg:n,direction:"send"});let o=new e(()=>{let f=n.header.msg_id;this._futures.delete(f);let g=this._msgIdToDisplayIds.get(f);g&&(g.forEach(S=>{let _=this._displayIdToParentIds.get(S);if(_){let u=_.indexOf(f);if(u===-1)return;_.length===1?this._displayIdToParentIds.delete(S):(_.splice(u,1),this._displayIdToParentIds.set(S,_))}}),this._msgIdToDisplayIds.delete(f))},n,i,r,this);return this._futures.set(n.header.msg_id,o),o}_sendMessage(e,n=!0){if(this.status==="dead")throw new Error("Kernel is dead");if((this._kernelSession===jd||this._kernelSession===Yt)&&We.isInfoRequestMsg(e))if(this.connectionStatus==="connected"){this._ws.send(this.serverSettings.serializer.serialize(e,this._ws.protocol));return}else throw new Error("Could not send message: status is not connected");if(n&&this._pendingMessages.length>0){this._pendingMessages.push(e);return}if(this.connectionStatus==="connected"&&this._kernelSession!==Yt)this._ws.send(this.serverSettings.serializer.serialize(e,this._ws.protocol));else if(n)this._pendingMessages.push(e);else throw new Error("Could not send message")}async interrupt(){if(this.hasPendingInput=!1,this.status==="dead")throw new Error("Kernel is dead");return hn.interruptKernel(this.id,this.serverSettings)}async restart(){if(this.status==="dead")throw new Error("Kernel is dead");this._updateStatus("restarting"),this._clearKernelState(),this._kernelSession=Yt,await hn.restartKernel(this.id,this.serverSettings),await this.reconnect(),this.hasPendingInput=!1}reconnect(){this._errorIfDisposed();let e=new Mt.PromiseDelegate,n=(i,r)=>{r==="connected"?(e.resolve(),this.connectionStatusChanged.disconnect(n,this)):r==="disconnected"&&(e.reject(new Error("Kernel connection disconnected")),this.connectionStatusChanged.disconnect(n,this))};return this.connectionStatusChanged.connect(n,this),this._reconnectAttempt=0,this._reconnect(),e.promise}async shutdown(){this.status!=="dead"&&await hn.shutdownKernel(this.id,this.serverSettings),this.handleShutdown()}handleShutdown(){this._updateStatus("dead"),this.dispose()}async requestKernelInfo(){let e=We.createMessage({msgType:"kernel_info_request",channel:"shell",username:this._username,session:this._clientId,content:{}}),n;try{n=await Qe.handleShellMessage(this,e)}catch(i){if(this.isDisposed)return;throw i}if(this._errorIfDisposed(),!!n)return n.content.status===void 0&&(n.content.status="ok"),n.content.status!=="ok"?(this._info.reject("Kernel info reply errored"),n):(this._info.resolve(n.content),this._kernelSession=n.header.session,n)}requestComplete(e){let n=We.createMessage({msgType:"complete_request",channel:"shell",username:this._username,session:this._clientId,content:e});return Qe.handleShellMessage(this,n)}requestInspect(e){let n=We.createMessage({msgType:"inspect_request",channel:"shell",username:this._username,session:this._clientId,content:e});return Qe.handleShellMessage(this,n)}requestHistory(e){let n=We.createMessage({msgType:"history_request",channel:"shell",username:this._username,session:this._clientId,content:e});return Qe.handleShellMessage(this,n)}requestExecute(e,n=!0,i){let r={silent:!1,store_history:!0,user_expressions:{},allow_stdin:!0,stop_on_error:!1},o=We.createMessage({msgType:"execute_request",channel:"shell",username:this._username,session:this._clientId,content:{...r,...e},metadata:i});return this.sendShellMessage(o,!0,n)}requestDebug(e,n=!0){let i=We.createMessage({msgType:"debug_request",channel:"control",username:this._username,session:this._clientId,content:e});return this.sendControlMessage(i,!0,n)}requestIsComplete(e){let n=We.createMessage({msgType:"is_complete_request",channel:"shell",username:this._username,session:this._clientId,content:e});return Qe.handleShellMessage(this,n)}requestCommInfo(e){let n=We.createMessage({msgType:"comm_info_request",channel:"shell",username:this._username,session:this._clientId,content:e});return Qe.handleShellMessage(this,n)}sendInputReply(e,n){let i=We.createMessage({msgType:"input_reply",channel:"stdin",username:this._username,session:this._clientId,content:e});i.parent_header=n,this._sendMessage(i),this._anyMessage.emit({msg:i,direction:"send"}),this.hasPendingInput=!1}createComm(e,n=Mt.UUID.uuid4()){if(!this.handleComms)throw new Error("Comms are disabled on this kernel connection");if(this._comms.has(n))throw new Error("Comm is already created");let i=new Ba.CommHandler(e,n,this,()=>{this._unregisterComm(n)});return this._comms.set(n,i),i}hasComm(e){return this._comms.has(e)}registerCommTarget(e,n){this.handleComms&&(this._targetRegistry[e]=n)}removeCommTarget(e,n){this.handleComms&&!this.isDisposed&&this._targetRegistry[e]===n&&delete this._targetRegistry[e]}registerMessageHook(e,n){var i;let r=(i=this._futures)===null||i===void 0?void 0:i.get(e);r&&r.registerMessageHook(n)}removeMessageHook(e,n){var i;let r=(i=this._futures)===null||i===void 0?void 0:i.get(e);r&&r.removeMessageHook(n)}removeInputGuard(){this.hasPendingInput=!1}async _handleDisplayId(e,n){var i,r;let o=n.parent_header.msg_id,f=this._displayIdToParentIds.get(e);if(f){let S={header:Mt.JSONExt.deepCopy(n.header),parent_header:Mt.JSONExt.deepCopy(n.parent_header),metadata:Mt.JSONExt.deepCopy(n.metadata),content:Mt.JSONExt.deepCopy(n.content),channel:n.channel,buffers:n.buffers?n.buffers.slice():[]};S.header.msg_type="update_display_data",await Promise.all(f.map(async _=>{let u=this._futures&&this._futures.get(_);u&&await u.handleMsg(S)}))}if(n.header.msg_type==="update_display_data")return!0;f=(i=this._displayIdToParentIds.get(e))!==null&&i!==void 0?i:[],f.indexOf(o)===-1&&f.push(o),this._displayIdToParentIds.set(e,f);let g=(r=this._msgIdToDisplayIds.get(o))!==null&&r!==void 0?r:[];return g.indexOf(o)===-1&&g.push(o),this._msgIdToDisplayIds.set(o,g),!1}_clearSocket(){this._ws!==null&&(this._ws.onopen=this._noOp,this._ws.onclose=this._noOp,this._ws.onerror=this._noOp,this._ws.onmessage=this._noOp,this._ws.close(),this._ws=null)}_updateStatus(e){this._status===e||this._status==="dead"||(this._status=e,Qe.logKernelStatus(this),this._statusChanged.emit(e),e==="dead"&&this.dispose())}_sendPending(){for(;this.connectionStatus==="connected"&&this._kernelSession!==Yt&&this._pendingMessages.length>0;)this._sendMessage(this._pendingMessages[0],!1),this._pendingMessages.shift()}_clearKernelState(){this._kernelSession="",this._pendingMessages=[],this._futures.forEach(e=>{e.dispose()}),this._comms.forEach(e=>{e.dispose()}),this._msgChain=Promise.resolve(),this._futures=new Map,this._comms=new Map,this._displayIdToParentIds.clear(),this._msgIdToDisplayIds.clear()}_assertCurrentMessage(e){if(this._errorIfDisposed(),e.header.session!==this._kernelSession)throw new Error(`Canceling handling of old message: ${e.header.msg_type}`)}async _handleCommOpen(e){this._assertCurrentMessage(e);let n=e.content,i=new Ba.CommHandler(n.target_name,n.comm_id,this,()=>{this._unregisterComm(n.comm_id)});this._comms.set(n.comm_id,i);try{await(await Qe.loadObject(n.target_name,n.target_module,this._targetRegistry))(i,e)}catch(r){throw i.close(),console.error("Exception opening new comm"),r}}async _handleCommClose(e){this._assertCurrentMessage(e);let n=e.content,i=this._comms.get(n.comm_id);if(!i){console.error("Comm not found for comm id "+n.comm_id);return}this._unregisterComm(i.commId);let r=i.onClose;r&&await r(e),i.dispose()}async _handleCommMsg(e){this._assertCurrentMessage(e);let n=e.content,i=this._comms.get(n.comm_id);if(!i)return;let r=i.onMsg;r&&await r(e)}_unregisterComm(e){this._comms.delete(e)}_updateConnectionStatus(e){if(this._connectionStatus!==e){if(this._connectionStatus=e,e!=="connecting"&&(this._reconnectAttempt=0,clearTimeout(this._reconnectTimeout)),this.status!=="dead")if(e==="connected"){let n=this._kernelSession===Yt,i=this.requestKernelInfo(),r=!1,o=()=>{r||(r=!0,n&&this._kernelSession===Yt&&(this._kernelSession=""),clearTimeout(f),this._pendingMessages.length>0&&this._sendPending())};i.then(o);let f=setTimeout(o,kd)}else this._updateStatus("unknown");this._connectionStatusChanged.emit(e)}}async _handleMessage(e){var n,i;let r=!1;if(e.parent_header&&e.channel==="iopub"&&(We.isDisplayDataMsg(e)||We.isUpdateDisplayDataMsg(e)||We.isExecuteResultMsg(e))){let f=((n=e.content.transient)!==null&&n!==void 0?n:{}).display_id;f&&(r=await this._handleDisplayId(f,e),this._assertCurrentMessage(e))}if(!r&&e.parent_header){let o=e.parent_header,f=(i=this._futures)===null||i===void 0?void 0:i.get(o.msg_id);if(f)await f.handleMsg(e),this._assertCurrentMessage(e);else{let g=o.session===this.clientId;e.channel!=="iopub"&&g&&this._unhandledMessage.emit(e)}}if(e.channel==="iopub"){switch(e.header.msg_type){case"status":{let o=e.content.execution_state;o==="restarting"&&Promise.resolve().then(async()=>{this._updateStatus("autorestarting"),this._clearKernelState(),await this.reconnect()}),this._updateStatus(o);break}case"comm_open":this.handleComms&&await this._handleCommOpen(e);break;case"comm_msg":this.handleComms&&await this._handleCommMsg(e);break;case"comm_close":this.handleComms&&await this._handleCommClose(e);break;default:break}this.isDisposed||(this._assertCurrentMessage(e),this._iopubMessage.emit(e))}}_reconnect(){if(this._errorIfDisposed(),clearTimeout(this._reconnectTimeout),this._reconnectAttempt<this._reconnectLimit){this._updateConnectionStatus("connecting");let e=Qe.getRandomIntInclusive(0,1e3*(Math.pow(2,this._reconnectAttempt)-1));console.warn(`Connection lost, reconnecting in ${Math.floor(e/1e3)} seconds.`);let n=this._selectedProtocol!=="";this._reconnectTimeout=setTimeout(this._createSocket,e,n),this._reconnectAttempt+=1}else this._updateConnectionStatus("disconnected");this._clearSocket()}_errorIfDisposed(){if(this.isDisposed)throw new Error("Kernel connection is disposed")}get hasPendingInput(){return this._hasPendingInput}set hasPendingInput(e){this._hasPendingInput=e,this._pendingInput.emit(e)}};pt.KernelConnection=$r;var Qe;(function(t){function e(o){switch(o.status){case"idle":case"busy":case"unknown":return;default:console.debug(`Kernel: ${o.status} (${o.id})`);break}}t.logKernelStatus=e;async function n(o,f){return o.sendShellMessage(f,!0).done}t.handleShellMessage=n;function i(o,f,g){return new Promise((S,_)=>{if(f){if(typeof requirejs=="undefined")throw new Error("requirejs not found");requirejs([f],u=>{if(u[o]===void 0){let s=`Object '${o}' not found in module '${f}'`;_(new Error(s))}else S(u[o])},_)}else g!=null&&g[o]?S(g[o]):_(new Error(`Object '${o}' not found in registry`))})}t.loadObject=i;function r(o,f){return o=Math.ceil(o),f=Math.floor(f),Math.floor(Math.random()*(f-o+1))+o}t.getRandomIntInclusive=r})(Qe||(Qe={}))});var za=te(gn=>{"use strict";A();Object.defineProperty(gn,"__esModule",{value:!0});gn.KernelManager=void 0;var xd=Ot(),$a=He(),Ud=ct(),qd=At(),Ei=pi(),Wd=Si(),pn=class extends qd.BaseManager{constructor(e={}){var n;super(e),this._isReady=!1,this._kernelConnections=new Set,this._models=new Map,this._runningChanged=new $a.Signal(this),this._connectionFailure=new $a.Signal(this),this._pollModels=new xd.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:10*1e3,backoff:!0,max:300*1e3},name:"@jupyterlab/services:KernelManager#models",standby:(n=e.standby)!==null&&n!==void 0?n:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._models.clear(),this._kernelConnections.forEach(e=>e.dispose()),this._pollModels.dispose(),super.dispose())}connectTo(e){var n;let{id:i}=e.model,r=(n=e.handleComms)!==null&&n!==void 0?n:!0;if(e.handleComms===void 0){for(let f of this._kernelConnections)if(f.id===i&&f.handleComms){r=!1;break}}let o=new Wd.KernelConnection({handleComms:r,...e,serverSettings:this.serverSettings});return this._onStarted(o),this._models.has(i)||this.refreshRunning().catch(()=>{}),o}running(){return this._models.values()}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(e={},n={}){let i=await(0,Ei.startNew)(e,this.serverSettings);return this.connectTo({...n,model:i})}async shutdown(e){await(0,Ei.shutdownKernel)(e,this.serverSettings),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all([...this._models.keys()].map(e=>(0,Ei.shutdownKernel)(e,this.serverSettings))),await this.refreshRunning()}async findById(e){return this._models.has(e)?this._models.get(e):(await this.refreshRunning(),this._models.get(e))}async requestRunning(){var e,n;let i;try{i=await(0,Ei.listRunning)(this.serverSettings)}catch(r){throw(r instanceof Ud.ServerConnection.NetworkError||((e=r.response)===null||e===void 0?void 0:e.status)===503||((n=r.response)===null||n===void 0?void 0:n.status)===424)&&this._connectionFailure.emit(r),r}this.isDisposed||this._models.size===i.length&&i.every(r=>{let o=this._models.get(r.id);return o?o.connections===r.connections&&o.execution_state===r.execution_state&&o.last_activity===r.last_activity&&o.name===r.name&&o.reason===r.reason&&o.traceback===r.traceback:!1})||(this._models=new Map(i.map(r=>[r.id,r])),this._kernelConnections.forEach(r=>{this._models.has(r.id)||r.handleShutdown()}),this._runningChanged.emit(i))}_onStarted(e){this._kernelConnections.add(e),e.statusChanged.connect(this._onStatusChanged,this),e.disposed.connect(this._onDisposed,this)}_onDisposed(e){this._kernelConnections.delete(e),this.refreshRunning().catch(()=>{})}_onStatusChanged(e,n){n==="dead"&&this.refreshRunning().catch(()=>{})}};gn.KernelManager=pn;(function(t){class e extends t{constructor(){super(...arguments),this._readyPromise=new Promise(()=>{})}get isActive(){return!1}get parentReady(){return super.ready}async startNew(i={},r={}){return Promise.reject(new Error("Not implemented in no-op Kernel Manager"))}connectTo(i){throw new Error("Not implemented in no-op Kernel Manager")}async shutdown(i){return Promise.reject(new Error("Not implemented in no-op Kernel Manager"))}get ready(){return this.parentReady.then(()=>this._readyPromise)}async requestRunning(){return Promise.resolve()}}t.NoopManager=e})(pn||(gn.KernelManager=pn={}))});var Gr=te(Ie=>{"use strict";A();var Ja=Ie&&Ie.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Kd=Ie&&Ie.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Jr=Ie&&Ie.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Ja(e,t,n);return Kd(e,t),e},Vd=Ie&&Ie.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Ja(e,t,n)};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.KernelConnection=Ie.KernelAPI=Ie.KernelMessage=Ie.Kernel=void 0;var Fd=Jr(Sa());Ie.Kernel=Fd;var Bd=Jr(Bt());Ie.KernelMessage=Bd;var Hd=Jr(pi());Ie.KernelAPI=Hd;var $d=Si();Object.defineProperty(Ie,"KernelConnection",{enumerable:!0,get:function(){return $d.KernelConnection}});Vd(za(),Ie)});var Ga=te(Ii=>{"use strict";A();Object.defineProperty(Ii,"__esModule",{value:!0});Ii.BuildManager=void 0;var Yr=Te(),Rt=Oe(),zd="api/build",Xr=class{constructor(e={}){var n;this._url="",this.serverSettings=(n=e.serverSettings)!==null&&n!==void 0?n:Rt.ServerConnection.makeSettings();let{baseUrl:i,appUrl:r}=this.serverSettings;this._url=Yr.URLExt.join(i,r,zd)}get isAvailable(){return Yr.PageConfig.getOption("buildAvailable").toLowerCase()==="true"}get shouldCheck(){return Yr.PageConfig.getOption("buildCheck").toLowerCase()==="true"}getStatus(){let{_url:e,serverSettings:n}=this;return Rt.ServerConnection.makeRequest(e,{},n).then(r=>{if(r.status!==200)throw new Rt.ServerConnection.ResponseError(r);return r.json()}).then(r=>{if(typeof r.status!="string")throw new Error("Invalid data");if(typeof r.message!="string")throw new Error("Invalid data");return r})}build(){let{_url:e,serverSettings:n}=this,i={method:"POST"};return Rt.ServerConnection.makeRequest(e,i,n).then(o=>{if(o.status===400)throw new Rt.ServerConnection.ResponseError(o,"Build aborted");if(o.status!==200){let f=`Build failed with ${o.status}.

        If you are experiencing the build failure after installing an extension (or trying to include previously installed extension after updating JupyterLab) please check the extension repository for new installation instructions as many extensions migrated to the prebuilt extensions system which no longer requires rebuilding JupyterLab (but uses a different installation procedure, typically involving a package manager such as 'pip' or 'conda').

        If you specifically intended to install a source extension, please run 'jupyter lab build' on the server for full output.`;throw new Rt.ServerConnection.ResponseError(o,f)}})}cancel(){let{_url:e,serverSettings:n}=this,i={method:"DELETE"};return Rt.ServerConnection.makeRequest(e,i,n).then(o=>{if(o.status!==204)throw new Rt.ServerConnection.ResponseError(o)})}};Ii.BuildManager=Xr});var es=te(Mi=>{"use strict";A();Object.defineProperty(Mi,"__esModule",{value:!0});Mi.NbConvertManager=void 0;var Jd=Te(),Qr=Oe(),Gd=st(),Yd="api/nbconvert",Zr=class{constructor(e={}){var n;this._exportFormats=null,this.serverSettings=(n=e.serverSettings)!==null&&n!==void 0?n:Qr.ServerConnection.makeSettings()}async fetchExportFormats(){this._requestingFormats=new Gd.PromiseDelegate,this._exportFormats=null;let e=this.serverSettings.baseUrl,n=Jd.URLExt.join(e,Yd),{serverSettings:i}=this,r=await Qr.ServerConnection.makeRequest(n,{},i);if(r.status!==200)throw await Qr.ServerConnection.ResponseError.create(r);let o=await r.json(),f={};return Object.keys(o).forEach(function(S){let _=o[S].output_mimetype;f[S]={output_mimetype:_}}),this._exportFormats=f,this._requestingFormats.resolve(f),f}async getExportFormats(e=!0){return this._requestingFormats?this._requestingFormats.promise:e||!this._exportFormats?await this.fetchExportFormats():this._exportFormats}};Mi.NbConvertManager=Zr});var Xa=te(Ya=>{"use strict";A();Object.defineProperty(Ya,"__esModule",{value:!0})});var Za=te(Ct=>{"use strict";A();Object.defineProperty(Ct,"__esModule",{value:!0});Ct.validateModels=Ct.updateLegacySessionModel=Ct.validateModel=void 0;var Xd=fi(),mn=dn();function Qa(t){(0,mn.validateProperty)(t,"id","string"),(0,mn.validateProperty)(t,"type","string"),(0,mn.validateProperty)(t,"name","string"),(0,mn.validateProperty)(t,"path","string"),(0,mn.validateProperty)(t,"kernel","object"),(0,Xd.validateModel)(t.kernel)}Ct.validateModel=Qa;function Qd(t){t.path===void 0&&t.notebook!==void 0&&(t.path=t.notebook.path,t.type="notebook",t.name="")}Ct.updateLegacySessionModel=Qd;function Zd(t){if(!Array.isArray(t))throw new Error("Invalid session list");t.forEach(e=>Qa(e))}Ct.validateModels=Zd});var Ci=te(Me=>{"use strict";A();Object.defineProperty(Me,"__esModule",{value:!0});Me.updateSession=Me.startSession=Me.getSessionModel=Me.shutdownSession=Me.getSessionUrl=Me.listRunning=Me.SESSION_SERVICE_URL=void 0;var Ae=Oe(),Pi=Te(),Dt=Za();Me.SESSION_SERVICE_URL="api/sessions";async function ef(t=Ae.ServerConnection.makeSettings()){let e=Pi.URLExt.join(t.baseUrl,Me.SESSION_SERVICE_URL),n=await Ae.ServerConnection.makeRequest(e,{},t);if(n.status!==200)throw await Ae.ServerConnection.ResponseError.create(n);let i=await n.json();if(!Array.isArray(i))throw new Error("Invalid Session list");return i.forEach(r=>{(0,Dt.updateLegacySessionModel)(r),(0,Dt.validateModel)(r)}),i}Me.listRunning=ef;function Ri(t,e){let n=Pi.URLExt.join(t,Me.SESSION_SERVICE_URL),i=Pi.URLExt.join(n,e);if(!i.startsWith(n))throw new Error("Can only be used for services requests");return i}Me.getSessionUrl=Ri;async function tf(t,e=Ae.ServerConnection.makeSettings()){var n;let i=Ri(e.baseUrl,t),r={method:"DELETE"},o=await Ae.ServerConnection.makeRequest(i,r,e);if(o.status===404){let g=(n=(await o.json()).message)!==null&&n!==void 0?n:`The session "${t}"" does not exist on the server`;console.warn(g)}else{if(o.status===410)throw new Ae.ServerConnection.ResponseError(o,"The kernel was deleted but the session was not");if(o.status!==204)throw await Ae.ServerConnection.ResponseError.create(o)}}Me.shutdownSession=tf;async function nf(t,e=Ae.ServerConnection.makeSettings()){let n=Ri(e.baseUrl,t),i=await Ae.ServerConnection.makeRequest(n,{},e);if(i.status!==200)throw await Ae.ServerConnection.ResponseError.create(i);let r=await i.json();return(0,Dt.updateLegacySessionModel)(r),(0,Dt.validateModel)(r),r}Me.getSessionModel=nf;async function rf(t,e=Ae.ServerConnection.makeSettings()){let n=Pi.URLExt.join(e.baseUrl,Me.SESSION_SERVICE_URL),i={method:"POST",body:JSON.stringify(t)},r=await Ae.ServerConnection.makeRequest(n,i,e);if(r.status!==201)throw await Ae.ServerConnection.ResponseError.create(r);let o=await r.json();return(0,Dt.updateLegacySessionModel)(o),(0,Dt.validateModel)(o),o}Me.startSession=rf;async function sf(t,e=Ae.ServerConnection.makeSettings()){let n=Ri(e.baseUrl,t.id),i={method:"PATCH",body:JSON.stringify(t)},r=await Ae.ServerConnection.makeRequest(n,i,e);if(r.status!==200)throw await Ae.ServerConnection.ResponseError.create(r);let o=await r.json();return(0,Dt.updateLegacySessionModel)(o),(0,Dt.validateModel)(o),o}Me.updateSession=sf});var tl=te(Di=>{"use strict";A();Object.defineProperty(Di,"__esModule",{value:!0});Di.SessionConnection=void 0;var gt=He(),of=ct(),el=Ci(),af=st(),ts=class{constructor(e){var n,i,r,o;this._id="",this._path="",this._name="",this._type="",this._kernel=null,this._isDisposed=!1,this._disposed=new gt.Signal(this),this._kernelChanged=new gt.Signal(this),this._statusChanged=new gt.Signal(this),this._connectionStatusChanged=new gt.Signal(this),this._pendingInput=new gt.Signal(this),this._iopubMessage=new gt.Signal(this),this._unhandledMessage=new gt.Signal(this),this._anyMessage=new gt.Signal(this),this._propertyChanged=new gt.Signal(this),this._id=e.model.id,this._name=e.model.name,this._path=e.model.path,this._type=e.model.type,this._username=(n=e.username)!==null&&n!==void 0?n:"",this._clientId=(i=e.clientId)!==null&&i!==void 0?i:af.UUID.uuid4(),this._connectToKernel=e.connectToKernel,this._kernelConnectionOptions=(r=e.kernelConnectionOptions)!==null&&r!==void 0?r:{},this.serverSettings=(o=e.serverSettings)!==null&&o!==void 0?o:of.ServerConnection.makeSettings(),this.setupKernel(e.model.kernel)}get disposed(){return this._disposed}get kernelChanged(){return this._kernelChanged}get statusChanged(){return this._statusChanged}get connectionStatusChanged(){return this._connectionStatusChanged}get pendingInput(){return this._pendingInput}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get anyMessage(){return this._anyMessage}get propertyChanged(){return this._propertyChanged}get id(){return this._id}get kernel(){return this._kernel}get path(){return this._path}get type(){return this._type}get name(){return this._name}get model(){return{id:this.id,kernel:this.kernel&&{id:this.kernel.id,name:this.kernel.name},path:this._path,type:this._type,name:this._name}}get isDisposed(){return this._isDisposed}update(e){let n=this.model;if(this._path=e.path,this._name=e.name,this._type=e.type,this._kernel===null&&e.kernel!==null||this._kernel!==null&&e.kernel===null||this._kernel!==null&&e.kernel!==null&&this._kernel.id!==e.kernel.id){this._kernel!==null&&this._kernel.dispose();let i=this._kernel||null;this.setupKernel(e.kernel);let r=this._kernel||null;this._kernelChanged.emit({name:"kernel",oldValue:i,newValue:r})}this._handleModelChange(n)}dispose(){if(!this.isDisposed){if(this._isDisposed=!0,this._disposed.emit(),this._kernel){this._kernel.dispose();let e=this._kernel;this._kernel=null;let n=this._kernel;this._kernelChanged.emit({name:"kernel",oldValue:e,newValue:n})}gt.Signal.clearData(this)}}async setPath(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({path:e})}async setName(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({name:e})}async setType(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({type:e})}async changeKernel(e){if(this.isDisposed)throw new Error("Session is disposed");return await this._patch({kernel:e}),this.kernel}async shutdown(){if(this.isDisposed)throw new Error("Session is disposed");await(0,el.shutdownSession)(this.id,this.serverSettings),this.dispose()}setupKernel(e){if(e===null){this._kernel=null;return}let n=this._connectToKernel({...this._kernelConnectionOptions,model:e,username:this._username,clientId:this._clientId,serverSettings:this.serverSettings});this._kernel=n,n.statusChanged.connect(this.onKernelStatus,this),n.connectionStatusChanged.connect(this.onKernelConnectionStatus,this),n.pendingInput.connect(this.onPendingInput,this),n.unhandledMessage.connect(this.onUnhandledMessage,this),n.iopubMessage.connect(this.onIOPubMessage,this),n.anyMessage.connect(this.onAnyMessage,this)}onKernelStatus(e,n){this._statusChanged.emit(n)}onKernelConnectionStatus(e,n){this._connectionStatusChanged.emit(n)}onPendingInput(e,n){this._pendingInput.emit(n)}onIOPubMessage(e,n){this._iopubMessage.emit(n)}onUnhandledMessage(e,n){this._unhandledMessage.emit(n)}onAnyMessage(e,n){this._anyMessage.emit(n)}async _patch(e){let n=await(0,el.updateSession)({...e,id:this._id},this.serverSettings);return this.update(n),n}_handleModelChange(e){e.name!==this._name&&this._propertyChanged.emit("name"),e.type!==this._type&&this._propertyChanged.emit("type"),e.path!==this._path&&this._propertyChanged.emit("path")}};Di.SessionConnection=ts});var il=te(yn=>{"use strict";A();Object.defineProperty(yn,"__esModule",{value:!0});yn.SessionManager=void 0;var lf=Ot(),nl=He(),uf=Oe(),cf=At(),df=tl(),_n=Ci(),vn=class extends cf.BaseManager{constructor(e){var n;super(e),this._isReady=!1,this._sessionConnections=new Set,this._models=new Map,this._runningChanged=new nl.Signal(this),this._connectionFailure=new nl.Signal(this),this._connectToKernel=i=>this._kernelManager.connectTo(i),this._kernelManager=e.kernelManager,this._pollModels=new lf.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:10*1e3,backoff:!0,max:300*1e3},name:"@jupyterlab/services:SessionManager#models",standby:(n=e.standby)!==null&&n!==void 0?n:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,this._kernelManager.isActive&&await this._kernelManager.ready,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._models.clear(),this._sessionConnections.forEach(e=>e.dispose()),this._pollModels.dispose(),super.dispose())}connectTo(e){let n=new df.SessionConnection({...e,connectToKernel:this._connectToKernel,serverSettings:this.serverSettings});return this._onStarted(n),this._models.has(e.model.id)||this.refreshRunning().catch(()=>{}),n}running(){return this._models.values()}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(e,n={}){let i=await(0,_n.startSession)(e,this.serverSettings);return await this.refreshRunning(),this.connectTo({...n,model:i})}async shutdown(e){await(0,_n.shutdownSession)(e,this.serverSettings),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all([...this._models.keys()].map(e=>(0,_n.shutdownSession)(e,this.serverSettings))),await this.refreshRunning()}async stopIfNeeded(e){try{let i=(await(0,_n.listRunning)(this.serverSettings)).filter(r=>r.path===e);if(i.length===1){let r=i[0].id;await this.shutdown(r)}}catch(n){}}async findById(e){return this._models.has(e)?this._models.get(e):(await this.refreshRunning(),this._models.get(e))}async findByPath(e){for(let n of this._models.values())if(n.path===e)return n;await this.refreshRunning();for(let n of this._models.values())if(n.path===e)return n}async requestRunning(){var e,n;let i;try{i=await(0,_n.listRunning)(this.serverSettings)}catch(r){throw(r instanceof uf.ServerConnection.NetworkError||((e=r.response)===null||e===void 0?void 0:e.status)===503||((n=r.response)===null||n===void 0?void 0:n.status)===424)&&this._connectionFailure.emit(r),r}this.isDisposed||this._models.size===i.length&&i.every(r=>{var o,f,g,S;let _=this._models.get(r.id);return _?((o=_.kernel)===null||o===void 0?void 0:o.id)===((f=r.kernel)===null||f===void 0?void 0:f.id)&&((g=_.kernel)===null||g===void 0?void 0:g.name)===((S=r.kernel)===null||S===void 0?void 0:S.name)&&_.name===r.name&&_.path===r.path&&_.type===r.type:!1})||(this._models=new Map(i.map(r=>[r.id,r])),this._sessionConnections.forEach(r=>{this._models.has(r.id)?r.update(this._models.get(r.id)):r.dispose()}),this._runningChanged.emit(i))}_onStarted(e){this._sessionConnections.add(e),e.disposed.connect(this._onDisposed,this),e.propertyChanged.connect(this._onChanged,this),e.kernelChanged.connect(this._onChanged,this)}_onDisposed(e){this._sessionConnections.delete(e),this.refreshRunning().catch(()=>{})}_onChanged(){this.refreshRunning().catch(()=>{})}};yn.SessionManager=vn;(function(t){class e extends t{constructor(){super(...arguments),this._readyPromise=new Promise(()=>{})}get isActive(){return!1}get parentReady(){return super.ready}async startNew(i,r={}){return Promise.reject(new Error("Not implemented in no-op Session Manager"))}connectTo(i){throw Error("Not implemented in no-op Session Manager")}get ready(){return this.parentReady.then(()=>this._readyPromise)}async shutdown(i){return Promise.reject(new Error("Not implemented in no-op Session Manager"))}async requestRunning(){return Promise.resolve()}}t.NoopManager=e})(vn||(yn.SessionManager=vn={}))});var ns=te(Le=>{"use strict";A();var rl=Le&&Le.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),ff=Le&&Le.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),sl=Le&&Le.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&rl(e,t,n);return ff(e,t),e},hf=Le&&Le.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&rl(e,t,n)};Object.defineProperty(Le,"__esModule",{value:!0});Le.SessionAPI=Le.Session=void 0;var pf=sl(Xa());Le.Session=pf;var gf=sl(Ci());Le.SessionAPI=gf;hf(il(),Le)});var ol=te(Ti=>{"use strict";A();Object.defineProperty(Ti,"__esModule",{value:!0});Ti.DataConnector=void 0;var is=class{async list(e){throw new Error("DataConnector#list method has not been implemented.")}async remove(e){throw new Error("DataConnector#remove method has not been implemented.")}async save(e,n){throw new Error("DataConnector#save method has not been implemented.")}};Ti.DataConnector=is});var ll=te(al=>{"use strict";A();Object.defineProperty(al,"__esModule",{value:!0})});var rs=te((Ai,ul)=>{A();(function(t,e){typeof Ai=="object"&&typeof ul!="undefined"?e(Ai):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.lumino_algorithm={}))})(Ai,function(t){"use strict";t.ArrayExt=void 0,function(d){function p(h,m,a=0,l=-1){let c=h.length;if(c===0)return-1;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;l<a?y=l+1+(c-a):y=l-a+1;for(let E=0;E<y;++E){let F=(a+E)%c;if(h[F]===m)return F}return-1}d.firstIndexOf=p;function v(h,m,a=-1,l=0){let c=h.length;if(c===0)return-1;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;a<l?y=a+1+(c-l):y=a-l+1;for(let E=0;E<y;++E){let F=(a-E+c)%c;if(h[F]===m)return F}return-1}d.lastIndexOf=v;function w(h,m,a=0,l=-1){let c=h.length;if(c===0)return-1;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;l<a?y=l+1+(c-a):y=l-a+1;for(let E=0;E<y;++E){let F=(a+E)%c;if(m(h[F],F))return F}return-1}d.findFirstIndex=w;function K(h,m,a=-1,l=0){let c=h.length;if(c===0)return-1;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;a<l?y=a+1+(c-l):y=a-l+1;for(let E=0;E<y;++E){let F=(a-E+c)%c;if(m(h[F],F))return F}return-1}d.findLastIndex=K;function G(h,m,a=0,l=-1){let c=w(h,m,a,l);return c!==-1?h[c]:void 0}d.findFirstValue=G;function V(h,m,a=-1,l=0){let c=K(h,m,a,l);return c!==-1?h[c]:void 0}d.findLastValue=V;function B(h,m,a,l=0,c=-1){let y=h.length;if(y===0)return 0;l<0?l=Math.max(0,l+y):l=Math.min(l,y-1),c<0?c=Math.max(0,c+y):c=Math.min(c,y-1);let E=l,F=c-l+1;for(;F>0;){let ne=F>>1,ue=E+ne;a(h[ue],m)<0?(E=ue+1,F-=ne+1):F=ne}return E}d.lowerBound=B;function Y(h,m,a,l=0,c=-1){let y=h.length;if(y===0)return 0;l<0?l=Math.max(0,l+y):l=Math.min(l,y-1),c<0?c=Math.max(0,c+y):c=Math.min(c,y-1);let E=l,F=c-l+1;for(;F>0;){let ne=F>>1,ue=E+ne;a(h[ue],m)>0?F=ne:(E=ue+1,F-=ne+1)}return E}d.upperBound=Y;function z(h,m,a){if(h===m)return!0;if(h.length!==m.length)return!1;for(let l=0,c=h.length;l<c;++l)if(a?!a(h[l],m[l]):h[l]!==m[l])return!1;return!0}d.shallowEqual=z;function Q(h,m={}){let{start:a,stop:l,step:c}=m;if(c===void 0&&(c=1),c===0)throw new Error("Slice `step` cannot be zero.");let y=h.length;a===void 0?a=c<0?y-1:0:a<0?a=Math.max(a+y,c<0?-1:0):a>=y&&(a=c<0?y-1:y),l===void 0?l=c<0?-1:y:l<0?l=Math.max(l+y,c<0?-1:0):l>=y&&(l=c<0?y-1:y);let E;c<0&&l>=a||c>0&&a>=l?E=0:c<0?E=Math.floor((l-a+1)/c+1):E=Math.floor((l-a-1)/c+1);let F=[];for(let ne=0;ne<E;++ne)F[ne]=h[a+ne*c];return F}d.slice=Q;function J(h,m,a){let l=h.length;if(l<=1||(m<0?m=Math.max(0,m+l):m=Math.min(m,l-1),a<0?a=Math.max(0,a+l):a=Math.min(a,l-1),m===a))return;let c=h[m],y=m<a?1:-1;for(let E=m;E!==a;E+=y)h[E]=h[E+y];h[a]=c}d.move=J;function ie(h,m=0,a=-1){let l=h.length;if(!(l<=1))for(m<0?m=Math.max(0,m+l):m=Math.min(m,l-1),a<0?a=Math.max(0,a+l):a=Math.min(a,l-1);m<a;){let c=h[m],y=h[a];h[m++]=y,h[a--]=c}}d.reverse=ie;function ae(h,m,a=0,l=-1){let c=h.length;if(c<=1||(a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1),a>=l))return;let y=l-a+1;if(m>0?m=m%y:m<0&&(m=(m%y+y)%y),m===0)return;let E=a+m;ie(h,a,E-1),ie(h,E,l),ie(h,a,l)}d.rotate=ae;function le(h,m,a=0,l=-1){let c=h.length;if(c===0)return;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y;l<a?y=l+1+(c-a):y=l-a+1;for(let E=0;E<y;++E)h[(a+E)%c]=m}d.fill=le;function ze(h,m,a){let l=h.length;m<0?m=Math.max(0,m+l):m=Math.min(m,l);for(let c=l;c>m;--c)h[c]=h[c-1];h[m]=a}d.insert=ze;function pe(h,m){let a=h.length;if(m<0&&(m+=a),m<0||m>=a)return;let l=h[m];for(let c=m+1;c<a;++c)h[c-1]=h[c];return h.length=a-1,l}d.removeAt=pe;function Je(h,m,a=0,l=-1){let c=p(h,m,a,l);return c!==-1&&pe(h,c),c}d.removeFirstOf=Je;function Ve(h,m,a=-1,l=0){let c=v(h,m,a,l);return c!==-1&&pe(h,c),c}d.removeLastOf=Ve;function Ge(h,m,a=0,l=-1){let c=h.length;if(c===0)return 0;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y=0;for(let E=0;E<c;++E)a<=l&&E>=a&&E<=l&&h[E]===m||l<a&&(E<=l||E>=a)&&h[E]===m?y++:y>0&&(h[E-y]=h[E]);return y>0&&(h.length=c-y),y}d.removeAllOf=Ge;function Fe(h,m,a=0,l=-1){let c,y=w(h,m,a,l);return y!==-1&&(c=pe(h,y)),{index:y,value:c}}d.removeFirstWhere=Fe;function k(h,m,a=-1,l=0){let c,y=K(h,m,a,l);return y!==-1&&(c=pe(h,y)),{index:y,value:c}}d.removeLastWhere=k;function x(h,m,a=0,l=-1){let c=h.length;if(c===0)return 0;a<0?a=Math.max(0,a+c):a=Math.min(a,c-1),l<0?l=Math.max(0,l+c):l=Math.min(l,c-1);let y=0;for(let E=0;E<c;++E)a<=l&&E>=a&&E<=l&&m(h[E],E)||l<a&&(E<=l||E>=a)&&m(h[E],E)?y++:y>0&&(h[E-y]=h[E]);return y>0&&(h.length=c-y),y}d.removeAllWhere=x}(t.ArrayExt||(t.ArrayExt={}));function*e(...d){for(let p of d)yield*p}function*n(){}function*i(d,p=0){for(let v of d)yield[p++,v]}function*r(d,p){let v=0;for(let w of d)p(w,v++)&&(yield w)}function o(d,p){let v=0;for(let w of d)if(p(w,v++))return w}function f(d,p){let v=0;for(let w of d)if(p(w,v++))return v-1;return-1}function g(d,p){let v;for(let w of d){if(v===void 0){v=w;continue}p(w,v)<0&&(v=w)}return v}function S(d,p){let v;for(let w of d){if(v===void 0){v=w;continue}p(w,v)>0&&(v=w)}return v}function _(d,p){let v=!0,w,K;for(let G of d)v?(w=G,K=G,v=!1):p(G,w)<0?w=G:p(G,K)>0&&(K=G);return v?void 0:[w,K]}function u(d){return Array.from(d)}function s(d){let p={};for(let[v,w]of d)p[v]=w;return p}function b(d,p){let v=0;for(let w of d)if(p(w,v++)===!1)return}function C(d,p){let v=0;for(let w of d)if(p(w,v++)===!1)return!1;return!0}function I(d,p){let v=0;for(let w of d)if(p(w,v++))return!0;return!1}function*T(d,p){let v=0;for(let w of d)yield p(w,v++)}function*D(d,p,v){p===void 0?(p=d,d=0,v=1):v===void 0&&(v=1);let w=L.rangeLength(d,p,v);for(let K=0;K<w;K++)yield d+v*K}var L;(function(d){function p(v,w,K){return K===0?1/0:v>w&&K>0||v<w&&K<0?0:Math.ceil((w-v)/K)}d.rangeLength=p})(L||(L={}));function U(d,p,v){let w=d[Symbol.iterator](),K=0,G=w.next();if(G.done&&v===void 0)throw new TypeError("Reduce of empty iterable with no initial value.");if(G.done)return v;let V=w.next();if(V.done&&v===void 0)return G.value;if(V.done)return p(v,G.value,K++);let B;v===void 0?B=p(G.value,V.value,K++):B=p(p(v,G.value,K++),V.value,K++);let Y;for(;!(Y=w.next()).done;)B=p(B,Y.value,K++);return B}function*M(d,p){for(;0<p--;)yield d}function*R(d){yield d}function*O(d){if(typeof d.retro=="function")yield*d.retro();else for(let p=d.length-1;p>-1;p--)yield d[p]}function j(d){let p=[],v=new Set,w=new Map;for(let V of d)K(V);for(let[V]of w)G(V);return p;function K(V){let[B,Y]=V,z=w.get(Y);z?z.push(B):w.set(Y,[B])}function G(V){if(v.has(V))return;v.add(V);let B=w.get(V);if(B)for(let Y of B)G(Y);p.push(V)}}function*H(d,p){let v=0;for(let w of d)v++%p===0&&(yield w)}t.StringExt=void 0,function(d){function p(V,B,Y=0){let z=new Array(B.length);for(let Q=0,J=Y,ie=B.length;Q<ie;++Q,++J){if(J=V.indexOf(B[Q],J),J===-1)return null;z[Q]=J}return z}d.findIndices=p;function v(V,B,Y=0){let z=p(V,B,Y);if(!z)return null;let Q=0;for(let J=0,ie=z.length;J<ie;++J){let ae=z[J]-Y;Q+=ae*ae}return{score:Q,indices:z}}d.matchSumOfSquares=v;function w(V,B,Y=0){let z=p(V,B,Y);if(!z)return null;let Q=0,J=Y-1;for(let ie=0,ae=z.length;ie<ae;++ie){let le=z[ie];Q+=le-J-1,J=le}return{score:Q,indices:z}}d.matchSumOfDeltas=w;function K(V,B,Y){let z=[],Q=0,J=0,ie=B.length;for(;Q<ie;){let ae=B[Q],le=B[Q];for(;++Q<ie&&B[Q]===le+1;)le++;J<ae&&z.push(V.slice(J,ae)),ae<le+1&&z.push(Y(V.slice(ae,le+1))),J=le+1}return J<V.length&&z.push(V.slice(J)),z}d.highlight=K;function G(V,B){return V<B?-1:V>B?1:0}d.cmp=G}(t.StringExt||(t.StringExt={}));function*P(d,p){if(p<1)return;let v=d[Symbol.iterator](),w;for(;0<p--&&!(w=v.next()).done;)yield w.value}function*N(...d){let p=d.map(w=>w[Symbol.iterator]()),v=p.map(w=>w.next());for(;C(v,w=>!w.done);v=p.map(w=>w.next()))yield v.map(w=>w.value)}t.chain=e,t.each=b,t.empty=n,t.enumerate=i,t.every=C,t.filter=r,t.find=o,t.findIndex=f,t.map=T,t.max=S,t.min=g,t.minmax=_,t.once=R,t.range=D,t.reduce=U,t.repeat=M,t.retro=O,t.some=I,t.stride=H,t.take=P,t.toArray=u,t.toObject=s,t.topologicSort=j,t.zip=N})});var Ni=te((Oi,cl)=>{A();(function(t,e){typeof Oi=="object"&&typeof cl!="undefined"?e(Oi,rs()):typeof define=="function"&&define.amd?define(["exports","@lumino/algorithm"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.lumino_coreutils={},t.lumino_algorithm))})(Oi,function(t,e){"use strict";t.JSONExt=void 0,function(_){_.emptyObject=Object.freeze({}),_.emptyArray=Object.freeze([]);function u(M){return M===null||typeof M=="boolean"||typeof M=="number"||typeof M=="string"}_.isPrimitive=u;function s(M){return Array.isArray(M)}_.isArray=s;function b(M){return!u(M)&&!s(M)}_.isObject=b;function C(M,R){if(M===R)return!0;if(u(M)||u(R))return!1;let O=s(M),j=s(R);return O!==j?!1:O&&j?T(M,R):D(M,R)}_.deepEqual=C;function I(M){return u(M)?M:s(M)?L(M):U(M)}_.deepCopy=I;function T(M,R){if(M===R)return!0;if(M.length!==R.length)return!1;for(let O=0,j=M.length;O<j;++O)if(!C(M[O],R[O]))return!1;return!0}function D(M,R){if(M===R)return!0;for(let O in M)if(M[O]!==void 0&&!(O in R))return!1;for(let O in R)if(R[O]!==void 0&&!(O in M))return!1;for(let O in M){let j=M[O],H=R[O];if(!(j===void 0&&H===void 0)&&(j===void 0||H===void 0||!C(j,H)))return!1}return!0}function L(M){let R=new Array(M.length);for(let O=0,j=M.length;O<j;++O)R[O]=I(M[O]);return R}function U(M){let R={};for(let O in M){let j=M[O];j!==void 0&&(R[O]=I(j))}return R}}(t.JSONExt||(t.JSONExt={}));class n{constructor(){this._types=[],this._values=[]}types(){return this._types.slice()}hasData(u){return this._types.indexOf(u)!==-1}getData(u){let s=this._types.indexOf(u);return s!==-1?this._values[s]:void 0}setData(u,s){this.clearData(u),this._types.push(u),this._values.push(s)}clearData(u){let s=this._types.indexOf(u);s!==-1&&(this._types.splice(s,1),this._values.splice(s,1))}clear(){this._types.length=0,this._values.length=0}}class i{constructor(u={}){this._application=null,this._validatePlugin=()=>!0,this._plugins=new Map,this._services=new Map,u.validatePlugin&&(console.info("Plugins may be rejected by the custom validation plugin method."),this._validatePlugin=u.validatePlugin)}get application(){return this._application}set application(u){if(this._application!==null)throw Error("PluginRegistry.application is already set. It cannot be overridden.");this._application=u}get deferredPlugins(){return Array.from(this._plugins).filter(([u,s])=>s.autoStart==="defer").map(([u,s])=>u)}getPluginDescription(u){var s,b;return(b=(s=this._plugins.get(u))===null||s===void 0?void 0:s.description)!==null&&b!==void 0?b:""}hasPlugin(u){return this._plugins.has(u)}isPluginActivated(u){var s,b;return(b=(s=this._plugins.get(u))===null||s===void 0?void 0:s.activated)!==null&&b!==void 0?b:!1}listPlugins(){return Array.from(this._plugins.keys())}registerPlugin(u){if(this._plugins.has(u.id))throw new TypeError(`Plugin '${u.id}' is already registered.`);if(!this._validatePlugin(u))throw new Error(`Plugin '${u.id}' is not valid.`);let s=r.createPluginData(u);r.ensureNoCycle(s,this._plugins,this._services),s.provides&&this._services.set(s.provides,s.id),this._plugins.set(s.id,s)}registerPlugins(u){for(let s of u)this.registerPlugin(s)}deregisterPlugin(u,s){let b=this._plugins.get(u);if(b){if(b.activated&&!s)throw new Error(`Plugin '${u}' is still active.`);this._plugins.delete(u)}}async activatePlugin(u){let s=this._plugins.get(u);if(!s)throw new ReferenceError(`Plugin '${u}' is not registered.`);if(s.activated)return;if(s.promise)return s.promise;let b=s.requires.map(I=>this.resolveRequiredService(I)),C=s.optional.map(I=>this.resolveOptionalService(I));return s.promise=Promise.all([...b,...C]).then(I=>s.activate.apply(void 0,[this.application,...I])).then(I=>{s.service=I,s.activated=!0,s.promise=null}).catch(I=>{throw s.promise=null,I}),s.promise}async activatePlugins(u,s={}){switch(u){case"defer":{let b=this.deferredPlugins.filter(C=>this._plugins.get(C).autoStart).map(C=>this.activatePlugin(C));await Promise.all(b);break}case"startUp":{let C=r.collectStartupPlugins(this._plugins,s).map(async I=>{try{return await this.activatePlugin(I)}catch(T){console.error(`Plugin '${I}' failed to activate.`,T)}});await Promise.all(C);break}}}async deactivatePlugin(u){let s=this._plugins.get(u);if(!s)throw new ReferenceError(`Plugin '${u}' is not registered.`);if(!s.activated)return[];if(!s.deactivate)throw new TypeError(`Plugin '${u}'#deactivate() method missing`);let b=r.findDependents(u,this._plugins,this._services),C=b.map(I=>this._plugins.get(I));for(let I of C)if(!I.deactivate)throw new TypeError(`Plugin ${I.id}#deactivate() method missing (depends on ${u})`);for(let I of C){let T=[...I.requires,...I.optional].map(D=>{let L=this._services.get(D);return L?this._plugins.get(L).service:null});await I.deactivate(this.application,...T),I.service=null,I.activated=!1}return b.pop(),b}async resolveRequiredService(u){let s=this._services.get(u);if(!s)throw new TypeError(`No provider for: ${u.name}.`);let b=this._plugins.get(s);return b.activated||await this.activatePlugin(s),b.service}async resolveOptionalService(u){let s=this._services.get(u);if(!s)return null;let b=this._plugins.get(s);if(!b.activated)try{await this.activatePlugin(s)}catch(C){return console.error(C),null}return b.service}}var r;(function(_){class u{constructor(D){var L,U,M,R;this._activated=!1,this._promise=null,this._service=null,this.id=D.id,this.description=(L=D.description)!==null&&L!==void 0?L:"",this.activate=D.activate,this.deactivate=(U=D.deactivate)!==null&&U!==void 0?U:null,this.provides=(M=D.provides)!==null&&M!==void 0?M:null,this.autoStart=(R=D.autoStart)!==null&&R!==void 0?R:!1,this.requires=D.requires?D.requires.slice():[],this.optional=D.optional?D.optional.slice():[]}get activated(){return this._activated}set activated(D){this._activated=D}get service(){return this._service}set service(D){this._service=D}get promise(){return this._promise}set promise(D){this._promise=D}}function s(T){return new u(T)}_.createPluginData=s;function b(T,D,L){let U=[...T.requires,...T.optional],M=O=>{if(O===T.provides)return!0;let j=L.get(O);if(!j)return!1;let H=D.get(j),P=[...H.requires,...H.optional];return P.length===0?!1:(R.push(j),P.some(M)?!0:(R.pop(),!1))};if(!T.provides||U.length===0)return;let R=[T.id];if(U.some(M))throw new ReferenceError(`Cycle detected: ${R.join(" -> ")}.`)}_.ensureNoCycle=b;function C(T,D,L){let U=new Array,M=P=>{let N=D.get(P),d=[...N.requires,...N.optional];U.push(...d.reduce((p,v)=>{let w=L.get(v);return w&&p.push([P,w]),p},[]))};for(let P of D.keys())M(P);let R=U.filter(P=>P[1]===T),O=0;for(;R.length>O;){let P=R.length,N=new Set(R.map(d=>d[0]));for(let d of N)U.filter(p=>p[1]===d).forEach(p=>{R.includes(p)||R.push(p)});O=P}let j=e.topologicSort(R),H=j.findIndex(P=>P===T);return H===-1?[T]:j.slice(0,H+1)}_.findDependents=C;function I(T,D){let L=new Set;for(let U of T.keys())T.get(U).autoStart===!0&&L.add(U);if(D.startPlugins)for(let U of D.startPlugins)L.add(U);if(D.ignorePlugins)for(let U of D.ignorePlugins)L.delete(U);return Array.from(L)}_.collectStartupPlugins=I})(r||(r={}));class o{constructor(){this.promise=new Promise((u,s)=>{this._resolve=u,this._reject=s})}resolve(u){let s=this._resolve;s(u)}reject(u){let s=this._reject;s(u)}}class f{constructor(u,s){this.name=u,this.description=s!=null?s:"",this._tokenStructuralPropertyT=null}}function g(_){let u=0;for(let s=0,b=_.length;s<b;++s)s%4===0&&(u=Math.random()*4294967295>>>0),_[s]=u&255,u>>>=8}t.Random=void 0,function(_){_.getRandomValues=(()=>{let u=typeof window!="undefined"&&(window.crypto||window.msCrypto)||null;return u&&typeof u.getRandomValues=="function"?function(b){return u.getRandomValues(b)}:g})()}(t.Random||(t.Random={}));function S(_){let u=new Uint8Array(16),s=new Array(256);for(let b=0;b<16;++b)s[b]="0"+b.toString(16);for(let b=16;b<256;++b)s[b]=b.toString(16);return function(){return _(u),u[6]=64|u[6]&15,u[8]=128|u[8]&63,s[u[0]]+s[u[1]]+s[u[2]]+s[u[3]]+"-"+s[u[4]]+s[u[5]]+"-"+s[u[6]]+s[u[7]]+"-"+s[u[8]]+s[u[9]]+"-"+s[u[10]]+s[u[11]]+s[u[12]]+s[u[13]]+s[u[14]]+s[u[15]]}}t.UUID=void 0,function(_){_.uuid4=S(t.Random.getRandomValues)}(t.UUID||(t.UUID={})),t.MimeData=n,t.PluginRegistry=i,t.PromiseDelegate=o,t.Token=f})});var fl=te((Li,dl)=>{A();(function(t,e){typeof Li=="object"&&typeof dl!="undefined"?e(Li):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.lumino_properties={}))})(Li,function(t){"use strict";class e{constructor(r){this._pid=n.nextPID(),this.name=r.name,this._create=r.create,this._coerce=r.coerce||null,this._compare=r.compare||null,this._changed=r.changed||null}get(r){let o,f=n.ensureMap(r);return this._pid in f?o=f[this._pid]:o=f[this._pid]=this._createValue(r),o}set(r,o){let f,g=n.ensureMap(r);this._pid in g?f=g[this._pid]:f=g[this._pid]=this._createValue(r);let S=this._coerceValue(r,o);this._maybeNotify(r,f,g[this._pid]=S)}coerce(r){let o,f=n.ensureMap(r);this._pid in f?o=f[this._pid]:o=f[this._pid]=this._createValue(r);let g=this._coerceValue(r,o);this._maybeNotify(r,o,f[this._pid]=g)}_createValue(r){let o=this._create;return o(r)}_coerceValue(r,o){let f=this._coerce;return f?f(r,o):o}_compareValue(r,o){let f=this._compare;return f?f(r,o):r===o}_maybeNotify(r,o,f){let g=this._changed;g&&!this._compareValue(o,f)&&g(r,o,f)}}(function(i){function r(o){n.ownerData.delete(o)}i.clearData=r})(e||(e={}));var n;(function(i){i.ownerData=new WeakMap,i.nextPID=(()=>{let o=0;return()=>`pid-${`${Math.random()}`.slice(2)}-${o++}`})();function r(o){let f=i.ownerData.get(o);return f||(f=Object.create(null),i.ownerData.set(o,f),f)}i.ensureMap=r})(n||(n={})),t.AttachedProperty=e})});var ss=te((ki,hl)=>{A();(function(t,e){typeof ki=="object"&&typeof hl!="undefined"?e(ki,rs(),Ni()):typeof define=="function"&&define.amd?define(["exports","@lumino/algorithm","@lumino/coreutils"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.lumino_signaling={},t.lumino_algorithm,t.lumino_coreutils))})(ki,function(t,e,n){"use strict";class i{constructor(g){this.sender=g}connect(g,S){return o.connect(this,g,S)}disconnect(g,S){return o.disconnect(this,g,S)}emit(g){o.emit(this,g)}}(function(f){function g(I,T){o.disconnectBetween(I,T)}f.disconnectBetween=g;function S(I){o.disconnectSender(I)}f.disconnectSender=S;function _(I){o.disconnectReceiver(I)}f.disconnectReceiver=_;function u(I){o.disconnectAll(I)}f.disconnectAll=u;function s(I){o.disconnectAll(I)}f.clearData=s;function b(){return o.exceptionHandler}f.getExceptionHandler=b;function C(I){let T=o.exceptionHandler;return o.exceptionHandler=I,T}f.setExceptionHandler=C})(i||(i={}));class r extends i{constructor(){super(...arguments),this._pending=new n.PromiseDelegate}async*[Symbol.asyncIterator](){let g=this._pending;for(;;)try{let{args:S,next:_}=await g.promise;g=_,yield S}catch(S){return}}emit(g){let S=this._pending,_=this._pending=new n.PromiseDelegate;S.resolve({args:g,next:_}),super.emit(g)}stop(){this._pending.promise.catch(()=>{}),this._pending.reject("stop"),this._pending=new n.PromiseDelegate}}var o;(function(f){f.exceptionHandler=P=>{console.error(P)};function g(P,N,d){d=d||void 0;let p=I.get(P.sender);if(p||(p=[],I.set(P.sender,p)),U(p,P,N,d))return!1;let v=d||N,w=T.get(v);w||(w=[],T.set(v,w));let K={signal:P,slot:N,thisArg:d};return p.push(K),w.push(K),!0}f.connect=g;function S(P,N,d){d=d||void 0;let p=I.get(P.sender);if(!p||p.length===0)return!1;let v=U(p,P,N,d);if(!v)return!1;let w=d||N,K=T.get(w);return v.signal=null,R(p),R(K),!0}f.disconnect=S;function _(P,N){let d=I.get(P);if(!d||d.length===0)return;let p=T.get(N);if(!(!p||p.length===0)){for(let v of p)v.signal&&v.signal.sender===P&&(v.signal=null);R(d),R(p)}}f.disconnectBetween=_;function u(P){let N=I.get(P);if(!(!N||N.length===0)){for(let d of N){if(!d.signal)continue;let p=d.thisArg||d.slot;d.signal=null,R(T.get(p))}R(N)}}f.disconnectSender=u;function s(P){let N=T.get(P);if(!(!N||N.length===0)){for(let d of N){if(!d.signal)continue;let p=d.signal.sender;d.signal=null,R(I.get(p))}R(N)}}f.disconnectReceiver=s;function b(P){u(P),s(P)}f.disconnectAll=b;function C(P,N){let d=I.get(P.sender);if(!(!d||d.length===0))for(let p=0,v=d.length;p<v;++p){let w=d[p];w.signal===P&&M(w,N)}}f.emit=C;let I=new WeakMap,T=new WeakMap,D=new Set,L=(()=>typeof requestAnimationFrame=="function"?requestAnimationFrame:setImmediate)();function U(P,N,d,p){return e.find(P,v=>v.signal===N&&v.slot===d&&v.thisArg===p)}function M(P,N){let{signal:d,slot:p,thisArg:v}=P;try{p.call(v,d.sender,N)}catch(w){f.exceptionHandler(w)}}function R(P){D.size===0&&L(O),D.add(P)}function O(){D.forEach(j),D.clear()}function j(P){e.ArrayExt.removeAllWhere(P,H)}function H(P){return P.signal===null}})(o||(o={})),t.Signal=i,t.Stream=r})});var gl=te(xi=>{"use strict";A();Object.defineProperty(xi,"__esModule",{value:!0});xi.RestorablePool=void 0;var mf=Ni(),pl=fl(),ji=ss(),os=class{constructor(e){this._added=new ji.Signal(this),this._current=null,this._currentChanged=new ji.Signal(this),this._hasRestored=!1,this._isDisposed=!1,this._objects=new Set,this._restore=null,this._restored=new mf.PromiseDelegate,this._updated=new ji.Signal(this),this.namespace=e.namespace}get added(){return this._added}get current(){return this._current}set current(e){this._current!==e&&e!==null&&this._objects.has(e)&&(this._current=e,this._currentChanged.emit(this._current))}get currentChanged(){return this._currentChanged}get isDisposed(){return this._isDisposed}get restored(){return this._restored.promise}get size(){return this._objects.size}get updated(){return this._updated}async add(e){var n,i;if(e.isDisposed){let r="A disposed object cannot be added.";throw console.warn(r,e),new Error(r)}if(this._objects.has(e)){let r="This object already exists in the pool.";throw console.warn(r,e),new Error(r)}if(this._objects.add(e),e.disposed.connect(this._onInstanceDisposed,this),!mt.injectedProperty.get(e)){if(this._restore){let{connector:r}=this._restore,o=this._restore.name(e);if(o){let f=`${this.namespace}:${o}`,g=(i=(n=this._restore).args)===null||i===void 0?void 0:i.call(n,e);mt.nameProperty.set(e,f),await r.save(f,{data:g})}}this._added.emit(e)}}dispose(){this.isDisposed||(this._current=null,this._isDisposed=!0,this._objects.clear(),ji.Signal.clearData(this))}find(e){let n=this._objects.values();for(let i of n)if(e(i))return i}forEach(e){this._objects.forEach(e)}filter(e){let n=[];return this.forEach(i=>{e(i)&&n.push(i)}),n}inject(e){return mt.injectedProperty.set(e,!0),this.add(e)}has(e){return this._objects.has(e)}async restore(e){if(this._hasRestored)throw new Error("This pool has already been restored.");this._hasRestored=!0;let{command:n,connector:i,registry:r,when:o}=e,f=this.namespace,g=o?[i.list(f)].concat(o):[i.list(f)];this._restore=e;let[S]=await Promise.all(g),_=await Promise.all(S.ids.map(async(u,s)=>{let b=S.values[s],C=b&&b.data;return C===void 0?i.remove(u):r.execute(n,C).catch(()=>i.remove(u))}));return this._restored.resolve(),_}async save(e){var n,i;let r=mt.injectedProperty.get(e);if(!this._restore||!this.has(e)||r)return;let{connector:o}=this._restore,f=this._restore.name(e),g=mt.nameProperty.get(e),S=f?`${this.namespace}:${f}`:"";if(g&&g!==S&&await o.remove(g),mt.nameProperty.set(e,S),S){let _=(i=(n=this._restore).args)===null||i===void 0?void 0:i.call(n,e);await o.save(S,{data:_})}g!==S&&this._updated.emit(e)}_onInstanceDisposed(e){if(this._objects.delete(e),e===this._current&&(this._current=null,this._currentChanged.emit(this._current)),mt.injectedProperty.get(e)||!this._restore)return;let{connector:n}=this._restore,i=mt.nameProperty.get(e);i&&n.remove(i)}};xi.RestorablePool=os;var mt;(function(t){t.injectedProperty=new pl.AttachedProperty({name:"injected",create:()=>!1}),t.nameProperty=new pl.AttachedProperty({name:"name",create:()=>""})})(mt||(mt={}))});var ml=te(bn=>{"use strict";A();Object.defineProperty(bn,"__esModule",{value:!0});bn.StateDB=void 0;var _f=ss(),wn=class t{constructor(e={}){this._changed=new _f.Signal(this);let{connector:n,transform:i}=e;this._connector=n||new t.Connector,i?this._ready=i.then(r=>{let{contents:o,type:f}=r;switch(f){case"cancel":return;case"clear":return this._clear();case"merge":return this._merge(o||{});case"overwrite":return this._overwrite(o||{});default:return}}):this._ready=Promise.resolve(void 0)}get changed(){return this._changed}async clear(){await this._ready,await this._clear()}async fetch(e){return await this._ready,this._fetch(e)}async list(e){return await this._ready,this._list(e)}async remove(e){await this._ready,await this._remove(e),this._changed.emit({id:e,type:"remove"})}async save(e,n){await this._ready,await this._save(e,n),this._changed.emit({id:e,type:"save"})}async toJSON(){await this._ready;let{ids:e,values:n}=await this._list();return n.reduce((i,r,o)=>(i[e[o]]=r,i),{})}async _clear(){await Promise.all((await this._list()).ids.map(e=>this._remove(e)))}async _fetch(e){let n=await this._connector.fetch(e);if(n)return JSON.parse(n).v}async _list(e=""){let{ids:n,values:i}=await this._connector.list(e);return{ids:n,values:i.map(r=>JSON.parse(r).v)}}async _merge(e){await Promise.all(Object.keys(e).map(n=>e[n]&&this._save(n,e[n])))}async _overwrite(e){await this._clear(),await this._merge(e)}async _remove(e){return this._connector.remove(e)}async _save(e,n){return this._connector.save(e,JSON.stringify({v:n}))}};bn.StateDB=wn;(function(t){class e{constructor(){this._storage={}}async fetch(i){return this._storage[i]}async list(i=""){return Object.keys(this._storage).reduce((r,o)=>((i===""||i===o.split(":")[0])&&(r.ids.push(o),r.values.push(this._storage[o])),r),{ids:[],values:[]})}async remove(i){delete this._storage[i]}async save(i,r){this._storage[i]=r}}t.Connector=e})(wn||(bn.StateDB=wn={}))});var _l=te(Ui=>{"use strict";A();Object.defineProperty(Ui,"__esModule",{value:!0});Ui.IStateDB=void 0;var vf=Ni();Ui.IStateDB=new vf.Token("@jupyterlab/coreutils:IStateDB",`A service for the JupyterLab state database.
  Use this if you want to store data that will persist across page loads.
  See "state database" for more information.`)});var as=te(tt=>{"use strict";A();var yf=tt&&tt.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Sn=tt&&tt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&yf(e,t,n)};Object.defineProperty(tt,"__esModule",{value:!0});Sn(ol(),tt);Sn(ll(),tt);Sn(gl(),tt);Sn(ml(),tt);Sn(_l(),tt)});var cs=te(Wi=>{"use strict";A();Object.defineProperty(Wi,"__esModule",{value:!0});Wi.SettingManager=void 0;var ls=Te(),wf=as(),qi=Oe(),bf="api/settings",us=class extends wf.DataConnector{constructor(e={}){var n;super(),this.serverSettings=(n=e.serverSettings)!==null&&n!==void 0?n:qi.ServerConnection.makeSettings()}async fetch(e){if(!e)throw new Error("Plugin `id` parameter is required for settings fetch.");let{serverSettings:n}=this,{baseUrl:i,appUrl:r}=n,{makeRequest:o,ResponseError:f}=qi.ServerConnection,g=i+r,S=En.url(g,e),_=await o(S,{},n);if(_.status!==200)throw await f.create(_);return _.json()}async list(e){var n,i,r,o;let{serverSettings:f}=this,{baseUrl:g,appUrl:S}=f,{makeRequest:_,ResponseError:u}=qi.ServerConnection,s=g+S,b=En.url(s,"",e==="ids"),C=await _(b,{},f);if(C.status!==200)throw new u(C);let I=await C.json(),T=(i=(n=I==null?void 0:I.settings)===null||n===void 0?void 0:n.map(L=>L.id))!==null&&i!==void 0?i:[],D=[];return e||(D=(o=(r=I==null?void 0:I.settings)===null||r===void 0?void 0:r.map(L=>(L.data={composite:{},user:{}},L)))!==null&&o!==void 0?o:[]),{ids:T,values:D}}async save(e,n){let{serverSettings:i}=this,{baseUrl:r,appUrl:o}=i,{makeRequest:f,ResponseError:g}=qi.ServerConnection,S=r+o,_=En.url(S,e),u={body:JSON.stringify({raw:n}),method:"PUT"},s=await f(_,u,i);if(s.status!==204)throw new g(s)}};Wi.SettingManager=us;var En;(function(t){function e(n,i,r){let o=r?ls.URLExt.objectToQueryString({ids_only:!0}):"",f=ls.URLExt.join(n,bf),g=ls.URLExt.join(f,i);if(!g.startsWith(f))throw new Error("Can only be used for workspaces requests");return`${g}${o}`}t.url=e})(En||(En={}))});var Pn=te(ke=>{"use strict";A();Object.defineProperty(ke,"__esModule",{value:!0});ke.shutdownTerminal=ke.listRunning=ke.startNew=ke.isAvailable=ke.TERMINAL_SERVICE_URL=void 0;var In=Te(),wt=Oe();ke.TERMINAL_SERVICE_URL="api/terminals";function vl(){return String(In.PageConfig.getOption("terminalsAvailable")).toLowerCase()==="true"}ke.isAvailable=vl;async function Sf(t=wt.ServerConnection.makeSettings(),e,n){Mn.errorIfNotAvailable();let i=In.URLExt.join(t.baseUrl,ke.TERMINAL_SERVICE_URL),r={method:"POST",body:JSON.stringify({name:e,cwd:n})},o=await wt.ServerConnection.makeRequest(i,r,t);if(o.status!==200)throw await wt.ServerConnection.ResponseError.create(o);return await o.json()}ke.startNew=Sf;async function Ef(t=wt.ServerConnection.makeSettings()){Mn.errorIfNotAvailable();let e=In.URLExt.join(t.baseUrl,ke.TERMINAL_SERVICE_URL),n=await wt.ServerConnection.makeRequest(e,{},t);if(n.status!==200)throw await wt.ServerConnection.ResponseError.create(n);let i=await n.json();if(!Array.isArray(i))throw new Error("Invalid terminal list");return i}ke.listRunning=Ef;async function If(t,e=wt.ServerConnection.makeSettings()){var n;Mn.errorIfNotAvailable();let i=In.URLExt.join(e.baseUrl,ke.TERMINAL_SERVICE_URL),r=In.URLExt.join(i,t);if(!r.startsWith(i))throw new Error("Can only be used for terminal requests");let o={method:"DELETE"},f=await wt.ServerConnection.makeRequest(r,o,e);if(f.status===404){let S=(n=(await f.json()).message)!==null&&n!==void 0?n:`The terminal session "${t}"" does not exist on the server`;console.warn(S)}else if(f.status!==204)throw await wt.ServerConnection.ResponseError.create(f)}ke.shutdownTerminal=If;var Mn;(function(t){function e(){if(!vl())throw new Error("Terminals Unavailable")}t.errorIfNotAvailable=e})(Mn||(Mn={}))});var yl=te(Ki=>{"use strict";A();Object.defineProperty(Ki,"__esModule",{value:!0});Ki.isAvailable=void 0;var Mf=Pn();Object.defineProperty(Ki,"isAvailable",{enumerable:!0,get:function(){return Mf.isAvailable}})});var Sl=te(Fi=>{"use strict";A();Object.defineProperty(Fi,"__esModule",{value:!0});Fi.TerminalConnection=void 0;var wl=Te(),Pf=st(),Vi=He(),Rf=ct(),bl=Pn(),ds=class t{constructor(e){var n;this._createSocket=()=>{this._errorIfDisposed(),this._clearSocket(),this._updateConnectionStatus("connecting");let i=this._name,r=this.serverSettings,o=wl.URLExt.join(r.wsUrl,"terminals","websocket",encodeURIComponent(i)),f=r.token;r.appendToken&&f!==""&&(o=o+`?token=${encodeURIComponent(f)}`),this._ws=new r.WebSocket(o),this._ws.onmessage=this._onWSMessage,this._ws.onclose=this._onWSClose,this._ws.onerror=this._onWSClose},this._onWSMessage=i=>{if(this._isDisposed)return;let r=JSON.parse(i.data);if(r[0]==="disconnect"&&this.dispose(),this._connectionStatus==="connecting"){r[0]==="setup"&&this._updateConnectionStatus("connected");return}this._messageReceived.emit({type:r[0],content:r.slice(1)})},this._onWSClose=i=>{console.warn(`Terminal websocket closed: ${i.code}`),this.isDisposed||this._reconnect()},this._connectionStatus="connecting",this._connectionStatusChanged=new Vi.Signal(this),this._isDisposed=!1,this._disposed=new Vi.Signal(this),this._messageReceived=new Vi.Signal(this),this._reconnectTimeout=null,this._ws=null,this._noOp=()=>{},this._reconnectLimit=7,this._reconnectAttempt=0,this._pendingMessages=[],this._name=e.model.name,this.serverSettings=(n=e.serverSettings)!==null&&n!==void 0?n:Rf.ServerConnection.makeSettings(),this._createSocket()}get disposed(){return this._disposed}get messageReceived(){return this._messageReceived}get name(){return this._name}get model(){return{name:this._name}}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._updateConnectionStatus("disconnected"),this._clearSocket(),Vi.Signal.clearData(this))}send(e){this._sendMessage(e)}_sendMessage(e,n=!0){if(!(this._isDisposed||!e.content))if(this.connectionStatus==="connected"&&this._ws){let i=[e.type,...e.content];this._ws.send(JSON.stringify(i))}else if(n)this._pendingMessages.push(e);else throw new Error(`Could not send message: ${JSON.stringify(e)}`)}_sendPending(){for(;this.connectionStatus==="connected"&&this._pendingMessages.length>0;)this._sendMessage(this._pendingMessages[0],!1),this._pendingMessages.shift()}reconnect(){this._errorIfDisposed();let e=new Pf.PromiseDelegate,n=(i,r)=>{r==="connected"?(e.resolve(),this.connectionStatusChanged.disconnect(n,this)):r==="disconnected"&&(e.reject(new Error("Terminal connection disconnected")),this.connectionStatusChanged.disconnect(n,this))};return this.connectionStatusChanged.connect(n,this),this._reconnectAttempt=0,this._reconnect(),e.promise}_reconnect(){if(this._errorIfDisposed(),clearTimeout(this._reconnectTimeout),this._reconnectAttempt<this._reconnectLimit){this._updateConnectionStatus("connecting");let e=fs.getRandomIntInclusive(0,1e3*(Math.pow(2,this._reconnectAttempt)-1));console.error(`Connection lost, reconnecting in ${Math.floor(e/1e3)} seconds.`),this._reconnectTimeout=setTimeout(this._createSocket,e),this._reconnectAttempt+=1}else this._updateConnectionStatus("disconnected");this._clearSocket()}_clearSocket(){this._ws!==null&&(this._ws.onopen=this._noOp,this._ws.onclose=this._noOp,this._ws.onerror=this._noOp,this._ws.onmessage=this._noOp,this._ws.close(),this._ws=null)}async shutdown(){await(0,bl.shutdownTerminal)(this.name,this.serverSettings),this.dispose()}clone(){return new t(this)}_updateConnectionStatus(e){this._connectionStatus!==e&&(this._connectionStatus=e,e!=="connecting"&&(this._reconnectAttempt=0,clearTimeout(this._reconnectTimeout)),e==="connected"&&this._sendPending(),this._connectionStatusChanged.emit(e))}_errorIfDisposed(){if(this.isDisposed)throw new Error("Terminal connection is disposed")}get connectionStatusChanged(){return this._connectionStatusChanged}get connectionStatus(){return this._connectionStatus}};Fi.TerminalConnection=ds;var fs;(function(t){function e(i,r){return wl.URLExt.join(i,bl.TERMINAL_SERVICE_URL,encodeURIComponent(r))}t.getTermUrl=e;function n(i,r){return i=Math.ceil(i),r=Math.floor(r),Math.floor(Math.random()*(r-i+1))+i}t.getRandomIntInclusive=n})(fs||(fs={}))});var Il=te(Dn=>{"use strict";A();Object.defineProperty(Dn,"__esModule",{value:!0});Dn.TerminalManager=void 0;var Cf=Ot(),El=He(),Df=ct(),Tf=At(),Rn=Pn(),Af=Sl(),Cn=class extends Tf.BaseManager{constructor(e={}){var n;if(super(e),this._isReady=!1,this._names=[],this._terminalConnections=new Set,this._runningChanged=new El.Signal(this),this._connectionFailure=new El.Signal(this),!this.isAvailable()){this._ready=Promise.reject("Terminals unavailable"),this._ready.catch(i=>{});return}this._pollModels=new Cf.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:10*1e3,backoff:!0,max:300*1e3},name:"@jupyterlab/services:TerminalManager#models",standby:(n=e.standby)!==null&&n!==void 0?n:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._names.length=0,this._terminalConnections.forEach(e=>e.dispose()),this._pollModels.dispose(),super.dispose())}isAvailable(){return(0,Rn.isAvailable)()}connectTo(e){let n=new Af.TerminalConnection({...e,serverSettings:this.serverSettings});return this._onStarted(n),this._names.includes(e.model.name)||this.refreshRunning().catch(()=>{}),n}running(){return this._models[Symbol.iterator]()}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(e){let n=await(0,Rn.startNew)(this.serverSettings,e==null?void 0:e.name,e==null?void 0:e.cwd);return await this.refreshRunning(),this.connectTo({model:n})}async shutdown(e){await(0,Rn.shutdownTerminal)(e,this.serverSettings),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all(this._names.map(e=>(0,Rn.shutdownTerminal)(e,this.serverSettings))),await this.refreshRunning()}async requestRunning(){var e,n;let i;try{i=await(0,Rn.listRunning)(this.serverSettings)}catch(o){throw(o instanceof Df.ServerConnection.NetworkError||((e=o.response)===null||e===void 0?void 0:e.status)===503||((n=o.response)===null||n===void 0?void 0:n.status)===424)&&this._connectionFailure.emit(o),o}if(this.isDisposed)return;let r=i.map(({name:o})=>o).sort();r!==this._names&&(this._names=r,this._terminalConnections.forEach(o=>{r.includes(o.name)||o.dispose()}),this._runningChanged.emit(this._models))}_onStarted(e){this._terminalConnections.add(e),e.disposed.connect(this._onDisposed,this)}_onDisposed(e){this._terminalConnections.delete(e),this.refreshRunning().catch(()=>{})}get _models(){return this._names.map(e=>({name:e}))}};Dn.TerminalManager=Cn;(function(t){class e extends t{constructor(){super(...arguments),this._readyPromise=new Promise(()=>{})}get isActive(){return!1}get parentReady(){return super.ready}get ready(){return this.parentReady.then(()=>this._readyPromise)}async startNew(i){return Promise.reject(new Error("Not implemented in no-op Terminal Manager"))}connectTo(i){throw Error("Not implemented in no-op Terminal Manager")}async shutdown(i){return Promise.reject(new Error("Not implemented in no-op Terminal Manager"))}async requestRunning(){return Promise.resolve()}}t.NoopManager=e})(Cn||(Dn.TerminalManager=Cn={}))});var hs=te(je=>{"use strict";A();var Ml=je&&je.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Of=je&&je.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Pl=je&&je.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Ml(e,t,n);return Of(e,t),e},Nf=je&&je.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Ml(e,t,n)};Object.defineProperty(je,"__esModule",{value:!0});je.TerminalAPI=je.Terminal=void 0;var Lf=Pl(yl());je.Terminal=Lf;var kf=Pl(Pn());je.TerminalAPI=kf;Nf(Il(),je)});var _s=te(Bi=>{"use strict";A();Object.defineProperty(Bi,"__esModule",{value:!0});Bi.UserManager=void 0;var jf=Te(),xf=st(),Uf=Ot(),Rl=He(),qf=Oe(),Wf=At(),Kf="api/me",ps="@jupyterlab/services:UserManager#user",gs=class extends Wf.BaseManager{constructor(e={}){var n;super(e),this._isReady=!1,this._userChanged=new Rl.Signal(this),this._connectionFailure=new Rl.Signal(this),this._ready=this.requestUser().then(()=>{this.isDisposed||(this._isReady=!0)}).catch(i=>new Promise(()=>{})),this._pollSpecs=new Uf.Poll({auto:!1,factory:()=>this.requestUser(),frequency:{interval:61*1e3,backoff:!0,max:300*1e3},name:ps,standby:(n=e.standby)!==null&&n!==void 0?n:"when-hidden"}),this.ready.then(()=>{this._pollSpecs.start()})}get isReady(){return this._isReady}get ready(){return this._ready}get identity(){return this._identity}get permissions(){return this._permissions}get userChanged(){return this._userChanged}get connectionFailure(){return this._connectionFailure}dispose(){this._pollSpecs.dispose(),super.dispose()}async refreshUser(){await this._pollSpecs.refresh(),await this._pollSpecs.tick}async requestUser(){if(this.isDisposed)return;let{baseUrl:e}=this.serverSettings,{makeRequest:n,ResponseError:i}=qf.ServerConnection,r=jf.URLExt.join(e,Kf),o=await n(r,{},this.serverSettings);if(o.status!==200)throw await i.create(o);let f={identity:this._identity,permissions:this._permissions},g=await o.json(),S=g.identity,{localStorage:_}=window,u=_.getItem(ps);if(u&&(!S.initials||!S.color)){let s=JSON.parse(u);S.initials=S.initials||s.initials||S.name.substring(0,1),S.color=S.color||s.color||ms.getRandomColor()}xf.JSONExt.deepEqual(g,f)||(this._identity=S,this._permissions=g.permissions,_.setItem(ps,JSON.stringify(S)),this._userChanged.emit(g))}};Bi.UserManager=gs;var ms;(function(t){let e=["var(--jp-collaborator-color1)","var(--jp-collaborator-color2)","var(--jp-collaborator-color3)","var(--jp-collaborator-color4)","var(--jp-collaborator-color5)","var(--jp-collaborator-color6)","var(--jp-collaborator-color7)"];t.getRandomColor=()=>e[Math.floor(Math.random()*e.length)]})(ms||(ms={}))});var ys=te(Hi=>{"use strict";A();Object.defineProperty(Hi,"__esModule",{value:!0});Hi.WorkspaceManager=void 0;var Cl=Te(),Vf=as(),Tn=Oe(),Ff="api/workspaces",vs=class extends Vf.DataConnector{constructor(e={}){var n;super(),this.serverSettings=(n=e.serverSettings)!==null&&n!==void 0?n:Tn.ServerConnection.makeSettings()}async fetch(e){let{serverSettings:n}=this,{baseUrl:i,appUrl:r}=n,{makeRequest:o,ResponseError:f}=Tn.ServerConnection,g=i+r,S=Xt.url(g,e),_=await o(S,{},n);if(_.status!==200)throw await f.create(_);return _.json()}async list(){let{serverSettings:e}=this,{baseUrl:n,appUrl:i}=e,{makeRequest:r,ResponseError:o}=Tn.ServerConnection,f=n+i,g=Xt.url(f,""),S=await r(g,{},e);if(S.status!==200)throw await o.create(S);return(await S.json()).workspaces}async remove(e){let{serverSettings:n}=this,{baseUrl:i,appUrl:r}=n,{makeRequest:o,ResponseError:f}=Tn.ServerConnection,g=i+r,S=Xt.url(g,e),u=await o(S,{method:"DELETE"},n);if(u.status!==204)throw await f.create(u)}async save(e,n){let{serverSettings:i}=this,{baseUrl:r,appUrl:o}=i,{makeRequest:f,ResponseError:g}=Tn.ServerConnection,S=r+o,_=Xt.url(S,e),u={body:JSON.stringify(n),method:"PUT"},s=await f(_,u,i);if(s.status!==204)throw await g.create(s)}};Hi.WorkspaceManager=vs;var Xt;(function(t){function e(n,i){let r=Cl.URLExt.join(n,Ff),o=Cl.URLExt.join(r,i);if(!o.startsWith(r))throw new Error("Can only be used for workspaces requests");return o}t.url=e})(Xt||(Xt={}))});var Tl=te($i=>{"use strict";A();Object.defineProperty($i,"__esModule",{value:!0});$i.ServiceManager=void 0;var Dl=He(),Bf=Ga(),Hf=Nr(),$f=xr(),zf=Gr(),Jf=bi(),Gf=es(),Yf=Oe(),Xf=ns(),Qf=cs(),Zf=hs(),eh=_s(),th=ys(),ws=class{constructor(e={}){var n,i;this._isDisposed=!1,this._connectionFailure=new Dl.Signal(this),this._isReady=!1;let r=e.defaultDrive,o=(n=e.serverSettings)!==null&&n!==void 0?n:Yf.ServerConnection.makeSettings(),f=(i=e.standby)!==null&&i!==void 0?i:"when-hidden",g={defaultDrive:r,serverSettings:o,standby:f};this.serverSettings=o,this.contents=e.contents||new Hf.ContentsManager(g),this.events=e.events||new $f.EventManager(g),this.kernels=e.kernels||new zf.KernelManager(g),this.sessions=e.sessions||new Xf.SessionManager({...g,kernelManager:this.kernels}),this.settings=e.settings||new Qf.SettingManager(g),this.terminals=e.terminals||new Zf.TerminalManager(g),this.builder=e.builder||new Bf.BuildManager(g),this.workspaces=e.workspaces||new th.WorkspaceManager(g),this.nbconvert=e.nbconvert||new Gf.NbConvertManager(g),this.kernelspecs=e.kernelspecs||new Jf.KernelSpecManager(g),this.user=e.user||new eh.UserManager(g),this.kernelspecs.connectionFailure.connect(this._onConnectionFailure,this),this.sessions.connectionFailure.connect(this._onConnectionFailure,this),this.terminals.connectionFailure.connect(this._onConnectionFailure,this);let S=[this.sessions.ready,this.kernelspecs.ready];this.terminals.isAvailable()&&S.push(this.terminals.ready),this._readyPromise=Promise.all(S).then(()=>{this._isReady=!0})}get connectionFailure(){return this._connectionFailure}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,Dl.Signal.clearData(this),this.contents.dispose(),this.events.dispose(),this.sessions.dispose(),this.terminals.dispose())}get isReady(){return this._isReady}get ready(){return this._readyPromise}_onConnectionFailure(e,n){this._connectionFailure.emit(n)}};$i.ServiceManager=ws});var ct=te(Ee=>{"use strict";A();var nh=Ee&&Ee.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Ke=Ee&&Ee.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&nh(e,t,n)};Object.defineProperty(Ee,"__esModule",{value:!0});Ke(At(),Ee);Ke(ua(),Ee);Ke(Nr(),Ee);Ke(xr(),Ee);Ke(Gr(),Ee);Ke(bi(),Ee);Ke(Tl(),Ee);Ke(Oe(),Ee);Ke(ns(),Ee);Ke(cs(),Ee);Ke(hs(),Ee);Ke(_s(),Ee);Ke(ys(),Ee);Ke(es(),Ee)});var Wl=te((zi,ql)=>{A();(function(t,e){typeof zi=="object"&&typeof ql!="undefined"?e(zi):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.lumino_algorithm={}))})(zi,function(t){"use strict";t.ArrayExt=void 0,function(k){function x(Z,ee,W,q){W===void 0&&(W=0),q===void 0&&(q=-1);var $=Z.length;if($===0)return-1;W<0?W=Math.max(0,W+$):W=Math.min(W,$-1),q<0?q=Math.max(0,q+$):q=Math.min(q,$-1);var se;q<W?se=q+1+($-W):se=q-W+1;for(var oe=0;oe<se;++oe){var ve=(W+oe)%$;if(Z[ve]===ee)return ve}return-1}k.firstIndexOf=x;function h(Z,ee,W,q){W===void 0&&(W=-1),q===void 0&&(q=0);var $=Z.length;if($===0)return-1;W<0?W=Math.max(0,W+$):W=Math.min(W,$-1),q<0?q=Math.max(0,q+$):q=Math.min(q,$-1);var se;W<q?se=W+1+($-q):se=W-q+1;for(var oe=0;oe<se;++oe){var ve=(W-oe+$)%$;if(Z[ve]===ee)return ve}return-1}k.lastIndexOf=h;function m(Z,ee,W,q){W===void 0&&(W=0),q===void 0&&(q=-1);var $=Z.length;if($===0)return-1;W<0?W=Math.max(0,W+$):W=Math.min(W,$-1),q<0?q=Math.max(0,q+$):q=Math.min(q,$-1);var se;q<W?se=q+1+($-W):se=q-W+1;for(var oe=0;oe<se;++oe){var ve=(W+oe)%$;if(ee(Z[ve],ve))return ve}return-1}k.findFirstIndex=m;function a(Z,ee,W,q){W===void 0&&(W=-1),q===void 0&&(q=0);var $=Z.length;if($===0)return-1;W<0?W=Math.max(0,W+$):W=Math.min(W,$-1),q<0?q=Math.max(0,q+$):q=Math.min(q,$-1);var se;W<q?se=W+1+($-q):se=W-q+1;for(var oe=0;oe<se;++oe){var ve=(W-oe+$)%$;if(ee(Z[ve],ve))return ve}return-1}k.findLastIndex=a;function l(Z,ee,W,q){W===void 0&&(W=0),q===void 0&&(q=-1);var $=m(Z,ee,W,q);return $!==-1?Z[$]:void 0}k.findFirstValue=l;function c(Z,ee,W,q){W===void 0&&(W=-1),q===void 0&&(q=0);var $=a(Z,ee,W,q);return $!==-1?Z[$]:void 0}k.findLastValue=c;function y(Z,ee,W,q,$){q===void 0&&(q=0),$===void 0&&($=-1);var se=Z.length;if(se===0)return 0;q<0?q=Math.max(0,q+se):q=Math.min(q,se-1),$<0?$=Math.max(0,$+se):$=Math.min($,se-1);for(var oe=q,ve=$-q+1;ve>0;){var Be=ve>>1,Wt=oe+Be;W(Z[Wt],ee)<0?(oe=Wt+1,ve-=Be+1):ve=Be}return oe}k.lowerBound=y;function E(Z,ee,W,q,$){q===void 0&&(q=0),$===void 0&&($=-1);var se=Z.length;if(se===0)return 0;q<0?q=Math.max(0,q+se):q=Math.min(q,se-1),$<0?$=Math.max(0,$+se):$=Math.min($,se-1);for(var oe=q,ve=$-q+1;ve>0;){var Be=ve>>1,Wt=oe+Be;W(Z[Wt],ee)>0?ve=Be:(oe=Wt+1,ve-=Be+1)}return oe}k.upperBound=E;function F(Z,ee,W){if(Z===ee)return!0;if(Z.length!==ee.length)return!1;for(var q=0,$=Z.length;q<$;++q)if(W?!W(Z[q],ee[q]):Z[q]!==ee[q])return!1;return!0}k.shallowEqual=F;function ne(Z,ee){ee===void 0&&(ee={});var W=ee.start,q=ee.stop,$=ee.step;if($===void 0&&($=1),$===0)throw new Error("Slice `step` cannot be zero.");var se=Z.length;W===void 0?W=$<0?se-1:0:W<0?W=Math.max(W+se,$<0?-1:0):W>=se&&(W=$<0?se-1:se),q===void 0?q=$<0?-1:se:q<0?q=Math.max(q+se,$<0?-1:0):q>=se&&(q=$<0?se-1:se);var oe;$<0&&q>=W||$>0&&W>=q?oe=0:$<0?oe=Math.floor((q-W+1)/$+1):oe=Math.floor((q-W-1)/$+1);for(var ve=[],Be=0;Be<oe;++Be)ve[Be]=Z[W+Be*$];return ve}k.slice=ne;function ue(Z,ee,W){var q=Z.length;if(!(q<=1)&&(ee<0?ee=Math.max(0,ee+q):ee=Math.min(ee,q-1),W<0?W=Math.max(0,W+q):W=Math.min(W,q-1),ee!==W)){for(var $=Z[ee],se=ee<W?1:-1,oe=ee;oe!==W;oe+=se)Z[oe]=Z[oe+se];Z[W]=$}}k.move=ue;function Ce(Z,ee,W){ee===void 0&&(ee=0),W===void 0&&(W=-1);var q=Z.length;if(!(q<=1))for(ee<0?ee=Math.max(0,ee+q):ee=Math.min(ee,q-1),W<0?W=Math.max(0,W+q):W=Math.min(W,q-1);ee<W;){var $=Z[ee],se=Z[W];Z[ee++]=se,Z[W--]=$}}k.reverse=Ce;function Ye(Z,ee,W,q){W===void 0&&(W=0),q===void 0&&(q=-1);var $=Z.length;if(!($<=1)&&(W<0?W=Math.max(0,W+$):W=Math.min(W,$-1),q<0?q=Math.max(0,q+$):q=Math.min(q,$-1),!(W>=q))){var se=q-W+1;if(ee>0?ee=ee%se:ee<0&&(ee=(ee%se+se)%se),ee!==0){var oe=W+ee;Ce(Z,W,oe-1),Ce(Z,oe,q),Ce(Z,W,q)}}}k.rotate=Ye;function et(Z,ee,W,q){W===void 0&&(W=0),q===void 0&&(q=-1);var $=Z.length;if($!==0){W<0?W=Math.max(0,W+$):W=Math.min(W,$-1),q<0?q=Math.max(0,q+$):q=Math.min(q,$-1);var se;q<W?se=q+1+($-W):se=q-W+1;for(var oe=0;oe<se;++oe)Z[(W+oe)%$]=ee}}k.fill=et;function Zs(Z,ee,W){var q=Z.length;ee<0?ee=Math.max(0,ee+q):ee=Math.min(ee,q);for(var $=q;$>ee;--$)Z[$]=Z[$-1];Z[ee]=W}k.insert=Zs;function qt(Z,ee){var W=Z.length;if(ee<0&&(ee+=W),!(ee<0||ee>=W)){for(var q=Z[ee],$=ee+1;$<W;++$)Z[$-1]=Z[$];return Z.length=W-1,q}}k.removeAt=qt;function eo(Z,ee,W,q){W===void 0&&(W=0),q===void 0&&(q=-1);var $=x(Z,ee,W,q);return $!==-1&&qt(Z,$),$}k.removeFirstOf=eo;function to(Z,ee,W,q){W===void 0&&(W=-1),q===void 0&&(q=0);var $=h(Z,ee,W,q);return $!==-1&&qt(Z,$),$}k.removeLastOf=to;function no(Z,ee,W,q){W===void 0&&(W=0),q===void 0&&(q=-1);var $=Z.length;if($===0)return 0;W<0?W=Math.max(0,W+$):W=Math.min(W,$-1),q<0?q=Math.max(0,q+$):q=Math.min(q,$-1);for(var se=0,oe=0;oe<$;++oe)W<=q&&oe>=W&&oe<=q&&Z[oe]===ee||q<W&&(oe<=q||oe>=W)&&Z[oe]===ee?se++:se>0&&(Z[oe-se]=Z[oe]);return se>0&&(Z.length=$-se),se}k.removeAllOf=no;function io(Z,ee,W,q){W===void 0&&(W=0),q===void 0&&(q=-1);var $,se=m(Z,ee,W,q);return se!==-1&&($=qt(Z,se)),{index:se,value:$}}k.removeFirstWhere=io;function ro(Z,ee,W,q){W===void 0&&(W=-1),q===void 0&&(q=0);var $,se=a(Z,ee,W,q);return se!==-1&&($=qt(Z,se)),{index:se,value:$}}k.removeLastWhere=ro;function so(Z,ee,W,q){W===void 0&&(W=0),q===void 0&&(q=-1);var $=Z.length;if($===0)return 0;W<0?W=Math.max(0,W+$):W=Math.min(W,$-1),q<0?q=Math.max(0,q+$):q=Math.min(q,$-1);for(var se=0,oe=0;oe<$;++oe)W<=q&&oe>=W&&oe<=q&&ee(Z[oe],oe)||q<W&&(oe<=q||oe>=W)&&ee(Z[oe],oe)?se++:se>0&&(Z[oe-se]=Z[oe]);return se>0&&(Z.length=$-se),se}k.removeAllWhere=so}(t.ArrayExt||(t.ArrayExt={}));function e(k){var x;return typeof k.iter=="function"?x=k.iter():x=new s(k),x}function n(k){return new b(k)}function i(k){return new C(k)}function r(k){return new I(k)}function o(k){return new T(k)}function f(k,x){for(var h=0,m=e(k),a;(a=m.next())!==void 0;)if(x(a,h++)===!1)return}function g(k,x){for(var h=0,m=e(k),a;(a=m.next())!==void 0;)if(!x(a,h++))return!1;return!0}function S(k,x){for(var h=0,m=e(k),a;(a=m.next())!==void 0;)if(x(a,h++))return!0;return!1}function _(k){for(var x=0,h=[],m=e(k),a;(a=m.next())!==void 0;)h[x++]=a;return h}function u(k){for(var x=e(k),h,m={};(h=x.next())!==void 0;)m[h[0]]=h[1];return m}var s=function(){function k(x){this._index=0,this._source=x}return k.prototype.iter=function(){return this},k.prototype.clone=function(){var x=new k(this._source);return x._index=this._index,x},k.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},k}(),b=function(){function k(x,h){h===void 0&&(h=Object.keys(x)),this._index=0,this._source=x,this._keys=h}return k.prototype.iter=function(){return this},k.prototype.clone=function(){var x=new k(this._source,this._keys);return x._index=this._index,x},k.prototype.next=function(){if(!(this._index>=this._keys.length)){var x=this._keys[this._index++];return x in this._source?x:this.next()}},k}(),C=function(){function k(x,h){h===void 0&&(h=Object.keys(x)),this._index=0,this._source=x,this._keys=h}return k.prototype.iter=function(){return this},k.prototype.clone=function(){var x=new k(this._source,this._keys);return x._index=this._index,x},k.prototype.next=function(){if(!(this._index>=this._keys.length)){var x=this._keys[this._index++];return x in this._source?this._source[x]:this.next()}},k}(),I=function(){function k(x,h){h===void 0&&(h=Object.keys(x)),this._index=0,this._source=x,this._keys=h}return k.prototype.iter=function(){return this},k.prototype.clone=function(){var x=new k(this._source,this._keys);return x._index=this._index,x},k.prototype.next=function(){if(!(this._index>=this._keys.length)){var x=this._keys[this._index++];return x in this._source?[x,this._source[x]]:this.next()}},k}(),T=function(){function k(x){this._fn=x}return k.prototype.iter=function(){return this},k.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},k.prototype.next=function(){return this._fn.call(void 0)},k}();function D(){for(var k=[],x=0;x<arguments.length;x++)k[x]=arguments[x];return new L(e(k.map(e)))}var L=function(){function k(x){this._cloned=!1,this._source=x,this._active=void 0}return k.prototype.iter=function(){return this},k.prototype.clone=function(){var x=new k(this._source.clone());return x._active=this._active&&this._active.clone(),x._cloned=!0,this._cloned=!0,x},k.prototype.next=function(){if(this._active===void 0){var x=this._source.next();if(x===void 0)return;this._active=this._cloned?x.clone():x}var h=this._active.next();return h!==void 0?h:(this._active=void 0,this.next())},k}();function U(){return new M}var M=function(){function k(){}return k.prototype.iter=function(){return this},k.prototype.clone=function(){return new k},k.prototype.next=function(){},k}();function R(k,x){return x===void 0&&(x=0),new O(e(k),x)}var O=function(){function k(x,h){this._source=x,this._index=h}return k.prototype.iter=function(){return this},k.prototype.clone=function(){return new k(this._source.clone(),this._index)},k.prototype.next=function(){var x=this._source.next();if(x!==void 0)return[this._index++,x]},k}();function j(k,x){return new H(e(k),x)}var H=function(){function k(x,h){this._index=0,this._source=x,this._fn=h}return k.prototype.iter=function(){return this},k.prototype.clone=function(){var x=new k(this._source.clone(),this._fn);return x._index=this._index,x},k.prototype.next=function(){for(var x=this._fn,h=this._source,m;(m=h.next())!==void 0;)if(x(m,this._index++))return m},k}();function P(k,x){for(var h=0,m=e(k),a;(a=m.next())!==void 0;)if(x(a,h++))return a}function N(k,x){for(var h=0,m=e(k),a;(a=m.next())!==void 0;)if(x(a,h++))return h-1;return-1}function d(k,x){var h=e(k),m=h.next();if(m!==void 0){for(var a=m;(m=h.next())!==void 0;)x(m,a)<0&&(a=m);return a}}function p(k,x){var h=e(k),m=h.next();if(m!==void 0){for(var a=m;(m=h.next())!==void 0;)x(m,a)>0&&(a=m);return a}}function v(k,x){var h=e(k),m=h.next();if(m!==void 0){for(var a=m,l=m;(m=h.next())!==void 0;)x(m,a)<0?a=m:x(m,l)>0&&(l=m);return[a,l]}}function w(k,x){return new K(e(k),x)}var K=function(){function k(x,h){this._index=0,this._source=x,this._fn=h}return k.prototype.iter=function(){return this},k.prototype.clone=function(){var x=new k(this._source.clone(),this._fn);return x._index=this._index,x},k.prototype.next=function(){var x=this._source.next();if(x!==void 0)return this._fn.call(void 0,x,this._index++)},k}();function G(k,x,h){return x===void 0?new V(0,k,1):h===void 0?new V(k,x,1):new V(k,x,h)}var V=function(){function k(x,h,m){this._index=0,this._start=x,this._stop=h,this._step=m,this._length=B.rangeLength(x,h,m)}return k.prototype.iter=function(){return this},k.prototype.clone=function(){var x=new k(this._start,this._stop,this._step);return x._index=this._index,x},k.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},k}(),B;(function(k){function x(h,m,a){return a===0?1/0:h>m&&a>0||h<m&&a<0?0:Math.ceil((m-h)/a)}k.rangeLength=x})(B||(B={}));function Y(k,x,h){var m=0,a=e(k),l=a.next();if(l===void 0&&h===void 0)throw new TypeError("Reduce of empty iterable with no initial value.");if(l===void 0)return h;var c=a.next();if(c===void 0&&h===void 0)return l;if(c===void 0)return x(h,l,m++);var y;h===void 0?y=x(l,c,m++):y=x(x(h,l,m++),c,m++);for(var E;(E=a.next())!==void 0;)y=x(y,E,m++);return y}function z(k,x){return new J(k,x)}function Q(k){return new J(k,1)}var J=function(){function k(x,h){this._value=x,this._count=h}return k.prototype.iter=function(){return this},k.prototype.clone=function(){return new k(this._value,this._count)},k.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},k}();function ie(k){var x;return typeof k.retro=="function"?x=k.retro():x=new ae(k),x}var ae=function(){function k(x){this._source=x,this._index=x.length-1}return k.prototype.iter=function(){return this},k.prototype.clone=function(){var x=new k(this._source);return x._index=this._index,x},k.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},k}();function le(k){var x=[],h=new Set,m=new Map;return f(k,a),m.forEach(function(c,y){l(y)}),x;function a(c){var y=c[0],E=c[1],F=m.get(E);F?F.push(y):m.set(E,[y])}function l(c){if(!h.has(c)){h.add(c);var y=m.get(c);y&&y.forEach(l),x.push(c)}}}function ze(k,x){return new pe(e(k),x)}var pe=function(){function k(x,h){this._source=x,this._step=h}return k.prototype.iter=function(){return this},k.prototype.clone=function(){return new k(this._source.clone(),this._step)},k.prototype.next=function(){for(var x=this._source.next(),h=this._step-1;h>0;--h)this._source.next();return x},k}();t.StringExt=void 0,function(k){function x(c,y,E){E===void 0&&(E=0);for(var F=new Array(y.length),ne=0,ue=E,Ce=y.length;ne<Ce;++ne,++ue){if(ue=c.indexOf(y[ne],ue),ue===-1)return null;F[ne]=ue}return F}k.findIndices=x;function h(c,y,E){E===void 0&&(E=0);var F=x(c,y,E);if(!F)return null;for(var ne=0,ue=0,Ce=F.length;ue<Ce;++ue){var Ye=F[ue]-E;ne+=Ye*Ye}return{score:ne,indices:F}}k.matchSumOfSquares=h;function m(c,y,E){E===void 0&&(E=0);var F=x(c,y,E);if(!F)return null;for(var ne=0,ue=E-1,Ce=0,Ye=F.length;Ce<Ye;++Ce){var et=F[Ce];ne+=et-ue-1,ue=et}return{score:ne,indices:F}}k.matchSumOfDeltas=m;function a(c,y,E){for(var F=[],ne=0,ue=0,Ce=y.length;ne<Ce;){for(var Ye=y[ne],et=y[ne];++ne<Ce&&y[ne]===et+1;)et++;ue<Ye&&F.push(c.slice(ue,Ye)),Ye<et+1&&F.push(E(c.slice(Ye,et+1))),ue=et+1}return ue<c.length&&F.push(c.slice(ue)),F}k.highlight=a;function l(c,y){return c<y?-1:c>y?1:0}k.cmp=l}(t.StringExt||(t.StringExt={}));function Je(k,x){return new Ve(e(k),x)}var Ve=function(){function k(x,h){this._source=x,this._count=h}return k.prototype.iter=function(){return this},k.prototype.clone=function(){return new k(this._source.clone(),this._count)},k.prototype.next=function(){if(!(this._count<=0)){var x=this._source.next();if(x!==void 0)return this._count--,x}},k}();function Ge(){for(var k=[],x=0;x<arguments.length;x++)k[x]=arguments[x];return new Fe(k.map(e))}var Fe=function(){function k(x){this._source=x}return k.prototype.iter=function(){return this},k.prototype.clone=function(){return new k(this._source.map(function(x){return x.clone()}))},k.prototype.next=function(){for(var x=new Array(this._source.length),h=0,m=this._source.length;h<m;++h){var a=this._source[h].next();if(a===void 0)return;x[h]=a}return x},k}();t.ArrayIterator=s,t.ChainIterator=L,t.EmptyIterator=M,t.EnumerateIterator=O,t.FilterIterator=H,t.FnIterator=T,t.ItemIterator=I,t.KeyIterator=b,t.MapIterator=K,t.RangeIterator=V,t.RepeatIterator=J,t.RetroArrayIterator=ae,t.StrideIterator=pe,t.TakeIterator=Ve,t.ValueIterator=C,t.ZipIterator=Fe,t.chain=D,t.each=f,t.empty=U,t.enumerate=R,t.every=g,t.filter=j,t.find=P,t.findIndex=N,t.iter=e,t.iterFn=o,t.iterItems=r,t.iterKeys=n,t.iterValues=i,t.map=w,t.max=p,t.min=d,t.minmax=v,t.once=Q,t.range=G,t.reduce=Y,t.repeat=z,t.retro=ie,t.some=S,t.stride=ze,t.take=Je,t.toArray=_,t.toObject=u,t.topologicSort=le,t.zip=Ge,Object.defineProperty(t,"__esModule",{value:!0})})});var Vl=te((Ji,Kl)=>{A();(function(t,e){typeof Ji=="object"&&typeof Kl!="undefined"?e(Ji):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.lumino_properties={}))})(Ji,function(t){"use strict";t.AttachedProperty=function(){function n(i){this._pid=e.nextPID(),this.name=i.name,this._create=i.create,this._coerce=i.coerce||null,this._compare=i.compare||null,this._changed=i.changed||null}return n.prototype.get=function(i){var r,o=e.ensureMap(i);return this._pid in o?r=o[this._pid]:r=o[this._pid]=this._createValue(i),r},n.prototype.set=function(i,r){var o,f=e.ensureMap(i);this._pid in f?o=f[this._pid]:o=f[this._pid]=this._createValue(i);var g=this._coerceValue(i,r);this._maybeNotify(i,o,f[this._pid]=g)},n.prototype.coerce=function(i){var r,o=e.ensureMap(i);this._pid in o?r=o[this._pid]:r=o[this._pid]=this._createValue(i);var f=this._coerceValue(i,r);this._maybeNotify(i,r,o[this._pid]=f)},n.prototype._createValue=function(i){var r=this._create;return r(i)},n.prototype._coerceValue=function(i,r){var o=this._coerce;return o?o(i,r):r},n.prototype._compareValue=function(i,r){var o=this._compare;return o?o(i,r):i===r},n.prototype._maybeNotify=function(i,r,o){var f=this._changed;f&&!this._compareValue(r,o)&&f(i,r,o)},n}(),function(n){function i(r){e.ownerData.delete(r)}n.clearData=i}(t.AttachedProperty||(t.AttachedProperty={}));var e;(function(n){n.ownerData=new WeakMap,n.nextPID=function(){var r=0;return function(){var o=Math.random(),f=(""+o).slice(2);return"pid-"+f+"-"+r++}}();function i(r){var o=n.ownerData.get(r);return o||(o=Object.create(null),n.ownerData.set(r,o),o)}n.ensureMap=i})(e||(e={})),Object.defineProperty(t,"__esModule",{value:!0})})});var Bl=te((Gi,Fl)=>{A();(function(t,e){typeof Gi=="object"&&typeof Fl!="undefined"?e(Gi,Wl(),Vl()):typeof define=="function"&&define.amd?define(["exports","@lumino/algorithm","@lumino/properties"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.lumino_signaling={},t.lumino_algorithm,t.lumino_properties))})(Gi,function(t,e,n){"use strict";t.Signal=function(){function r(o){this._blockedCount=0,this.sender=o}return r.prototype.block=function(o){this._blockedCount++;try{o()}finally{this._blockedCount--}},r.prototype.connect=function(o,f){return i.connect(this,o,f)},r.prototype.disconnect=function(o,f){return i.disconnect(this,o,f)},r.prototype.emit=function(o){this._blockedCount||i.emit(this,o)},r}(),function(r){function o(C,I){var T=i.blockedProperty;T.set(C,T.get(C)+1);try{I()}finally{T.set(C,T.get(C)-1)}}r.blockAll=o;function f(C,I){i.disconnectBetween(C,I)}r.disconnectBetween=f;function g(C){i.disconnectSender(C)}r.disconnectSender=g;function S(C){i.disconnectReceiver(C)}r.disconnectReceiver=S;function _(C){i.disconnectAll(C)}r.disconnectAll=_;function u(C){i.disconnectAll(C)}r.clearData=u;function s(){return i.exceptionHandler}r.getExceptionHandler=s;function b(C){var I=i.exceptionHandler;return i.exceptionHandler=C,I}r.setExceptionHandler=b}(t.Signal||(t.Signal={}));var i;(function(r){r.exceptionHandler=function(j){console.error(j)};function o(j,H,P){P=P||void 0;var N=b.get(j.sender);if(N||(N=[],b.set(j.sender,N)),D(N,j,H,P))return!1;var d=P||H,p=C.get(d);p||(p=[],C.set(d,p));var v={signal:j,slot:H,thisArg:P};return N.push(v),p.push(v),!0}r.connect=o;function f(j,H,P){P=P||void 0;var N=b.get(j.sender);if(!N||N.length===0)return!1;var d=D(N,j,H,P);if(!d)return!1;var p=P||H,v=C.get(p);return d.signal=null,U(N),U(v),!0}r.disconnect=f;function g(j,H){var P=b.get(j);if(!(!P||P.length===0)){var N=C.get(H);!N||N.length===0||(e.each(N,function(d){d.signal&&d.signal.sender===j&&(d.signal=null)}),U(P),U(N))}}r.disconnectBetween=g;function S(j){var H=b.get(j);!H||H.length===0||(e.each(H,function(P){if(P.signal){var N=P.thisArg||P.slot;P.signal=null,U(C.get(N))}}),U(H))}r.disconnectSender=S;function _(j){var H=C.get(j);!H||H.length===0||(e.each(H,function(P){if(P.signal){var N=P.signal.sender;P.signal=null,U(b.get(N))}}),U(H))}r.disconnectReceiver=_;function u(j){S(j),_(j)}r.disconnectAll=u;function s(j,H){if(!(r.blockedProperty.get(j.sender)>0)){var P=b.get(j.sender);if(!(!P||P.length===0))for(var N=0,d=P.length;N<d;++N){var p=P[N];p.signal===j&&L(p,H)}}}r.emit=s;var b=new WeakMap,C=new WeakMap,I=new Set,T=function(){var j=typeof requestAnimationFrame=="function";return j?requestAnimationFrame:setImmediate}();function D(j,H,P,N){return e.find(j,function(d){return d.signal===H&&d.slot===P&&d.thisArg===N})}function L(j,H){var P=j.signal,N=j.slot,d=j.thisArg;try{N.call(d,P.sender,H)}catch(p){r.exceptionHandler(p)}}function U(j){I.size===0&&T(M),I.add(j)}function M(){I.forEach(R),I.clear()}function R(j){e.ArrayExt.removeAllWhere(j,O)}function O(j){return j.signal===null}r.blockedProperty=new n.AttachedProperty({name:"blocked",create:function(){return 0}})})(i||(i={})),Object.defineProperty(t,"__esModule",{value:!0})})});var su=te((nv,Rs)=>{"use strict";A();var Zt=typeof Reflect=="object"?Reflect:null,Gl=Zt&&typeof Zt.apply=="function"?Zt.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},Yi;Zt&&typeof Zt.ownKeys=="function"?Yi=Zt.ownKeys:Object.getOwnPropertySymbols?Yi=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Yi=function(e){return Object.getOwnPropertyNames(e)};function oh(t){console&&console.warn&&console.warn(t)}var Xl=Number.isNaN||function(e){return e!==e};function _e(){_e.init.call(this)}Rs.exports=_e;Rs.exports.once=ch;_e.EventEmitter=_e;_e.prototype._events=void 0;_e.prototype._eventsCount=0;_e.prototype._maxListeners=void 0;var Yl=10;function Xi(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(_e,"defaultMaxListeners",{enumerable:!0,get:function(){return Yl},set:function(t){if(typeof t!="number"||t<0||Xl(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Yl=t}});_e.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};_e.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Xl(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Ql(t){return t._maxListeners===void 0?_e.defaultMaxListeners:t._maxListeners}_e.prototype.getMaxListeners=function(){return Ql(this)};_e.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",o=this._events;if(o!==void 0)r=r&&o.error===void 0;else if(!r)return!1;if(r){var f;if(n.length>0&&(f=n[0]),f instanceof Error)throw f;var g=new Error("Unhandled error."+(f?" ("+f.message+")":""));throw g.context=f,g}var S=o[e];if(S===void 0)return!1;if(typeof S=="function")Gl(S,this,n);else for(var _=S.length,u=iu(S,_),i=0;i<_;++i)Gl(u[i],this,n);return!0};function Zl(t,e,n,i){var r,o,f;if(Xi(n),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),f=o[e]),f===void 0)f=o[e]=n,++t._eventsCount;else if(typeof f=="function"?f=o[e]=i?[n,f]:[f,n]:i?f.unshift(n):f.push(n),r=Ql(t),r>0&&f.length>r&&!f.warned){f.warned=!0;var g=new Error("Possible EventEmitter memory leak detected. "+f.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");g.name="MaxListenersExceededWarning",g.emitter=t,g.type=e,g.count=f.length,oh(g)}return t}_e.prototype.addListener=function(e,n){return Zl(this,e,n,!1)};_e.prototype.on=_e.prototype.addListener;_e.prototype.prependListener=function(e,n){return Zl(this,e,n,!0)};function ah(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function eu(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=ah.bind(i);return r.listener=n,i.wrapFn=r,r}_e.prototype.once=function(e,n){return Xi(n),this.on(e,eu(this,e,n)),this};_e.prototype.prependOnceListener=function(e,n){return Xi(n),this.prependListener(e,eu(this,e,n)),this};_e.prototype.removeListener=function(e,n){var i,r,o,f,g;if(Xi(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(o=-1,f=i.length-1;f>=0;f--)if(i[f]===n||i[f].listener===n){g=i[f].listener,o=f;break}if(o<0)return this;o===0?i.shift():lh(i,o),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,g||n)}return this};_e.prototype.off=_e.prototype.removeListener;_e.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var o=Object.keys(i),f;for(r=0;r<o.length;++r)f=o[r],f!=="removeListener"&&this.removeAllListeners(f);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function tu(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?uh(r):iu(r,r.length)}_e.prototype.listeners=function(e){return tu(this,e,!0)};_e.prototype.rawListeners=function(e){return tu(this,e,!1)};_e.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):nu.call(t,e)};_e.prototype.listenerCount=nu;function nu(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}_e.prototype.eventNames=function(){return this._eventsCount>0?Yi(this._events):[]};function iu(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function lh(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function uh(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function ch(t,e){return new Promise(function(n,i){function r(f){t.removeListener(e,o),i(f)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}ru(t,e,o,{once:!0}),e!=="error"&&dh(t,r,{once:!0})})}function dh(t,e,n){typeof t.on=="function"&&ru(t,"error",e,n)}function ru(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(o){i.once&&t.removeEventListener(e,r),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var Mu=te((ce,Iu)=>{A();ce=Iu.exports=he;var me;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?me=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:me=function(){};ce.SEMVER_SPEC_VERSION="2.0.0";var An=256,tr=Number.MAX_SAFE_INTEGER||9007199254740991,As=16,mh=An-6,On=ce.re=[],ye=ce.safeRe=[],X=ce.src=[],fe=0,js="[a-zA-Z0-9-]",Os=[["\\s",1],["\\d",An],[js,mh]];function ar(t){for(var e=0;e<Os.length;e++){var n=Os[e][0],i=Os[e][1];t=t.split(n+"*").join(n+"{0,"+i+"}").split(n+"+").join(n+"{1,"+i+"}")}return t}var en=fe++;X[en]="0|[1-9]\\d*";var tn=fe++;X[tn]="\\d+";var xs=fe++;X[xs]="\\d*[a-zA-Z-]"+js+"*";var cu=fe++;X[cu]="("+X[en]+")\\.("+X[en]+")\\.("+X[en]+")";var du=fe++;X[du]="("+X[tn]+")\\.("+X[tn]+")\\.("+X[tn]+")";var Ns=fe++;X[Ns]="(?:"+X[en]+"|"+X[xs]+")";var Ls=fe++;X[Ls]="(?:"+X[tn]+"|"+X[xs]+")";var Us=fe++;X[Us]="(?:-("+X[Ns]+"(?:\\."+X[Ns]+")*))";var qs=fe++;X[qs]="(?:-?("+X[Ls]+"(?:\\."+X[Ls]+")*))";var ks=fe++;X[ks]=js+"+";var Ln=fe++;X[Ln]="(?:\\+("+X[ks]+"(?:\\."+X[ks]+")*))";var Ws=fe++,fu="v?"+X[cu]+X[Us]+"?"+X[Ln]+"?";X[Ws]="^"+fu+"$";var Ks="[v=\\s]*"+X[du]+X[qs]+"?"+X[Ln]+"?",Vs=fe++;X[Vs]="^"+Ks+"$";var an=fe++;X[an]="((?:<|>)?=?)";var nr=fe++;X[nr]=X[tn]+"|x|X|\\*";var ir=fe++;X[ir]=X[en]+"|x|X|\\*";var jt=fe++;X[jt]="[v=\\s]*("+X[ir]+")(?:\\.("+X[ir]+")(?:\\.("+X[ir]+")(?:"+X[Us]+")?"+X[Ln]+"?)?)?";var rn=fe++;X[rn]="[v=\\s]*("+X[nr]+")(?:\\.("+X[nr]+")(?:\\.("+X[nr]+")(?:"+X[qs]+")?"+X[Ln]+"?)?)?";var hu=fe++;X[hu]="^"+X[an]+"\\s*"+X[jt]+"$";var pu=fe++;X[pu]="^"+X[an]+"\\s*"+X[rn]+"$";var gu=fe++;X[gu]="(?:^|[^\\d])(\\d{1,"+As+"})(?:\\.(\\d{1,"+As+"}))?(?:\\.(\\d{1,"+As+"}))?(?:$|[^\\d])";var lr=fe++;X[lr]="(?:~>?)";var sn=fe++;X[sn]="(\\s*)"+X[lr]+"\\s+";On[sn]=new RegExp(X[sn],"g");ye[sn]=new RegExp(ar(X[sn]),"g");var _h="$1~",mu=fe++;X[mu]="^"+X[lr]+X[jt]+"$";var _u=fe++;X[_u]="^"+X[lr]+X[rn]+"$";var ur=fe++;X[ur]="(?:\\^)";var on=fe++;X[on]="(\\s*)"+X[ur]+"\\s+";On[on]=new RegExp(X[on],"g");ye[on]=new RegExp(ar(X[on]),"g");var vh="$1^",vu=fe++;X[vu]="^"+X[ur]+X[jt]+"$";var yu=fe++;X[yu]="^"+X[ur]+X[rn]+"$";var Fs=fe++;X[Fs]="^"+X[an]+"\\s*("+Ks+")$|^$";var Bs=fe++;X[Bs]="^"+X[an]+"\\s*("+fu+")$|^$";var xt=fe++;X[xt]="(\\s*)"+X[an]+"\\s*("+Ks+"|"+X[jt]+")";On[xt]=new RegExp(X[xt],"g");ye[xt]=new RegExp(ar(X[xt]),"g");var yh="$1$2$3",wu=fe++;X[wu]="^\\s*("+X[jt]+")\\s+-\\s+("+X[jt]+")\\s*$";var bu=fe++;X[bu]="^\\s*("+X[rn]+")\\s+-\\s+("+X[rn]+")\\s*$";var Su=fe++;X[Su]="(<|>)?=?\\s*\\*";for(_t=0;_t<fe;_t++)me(_t,X[_t]),On[_t]||(On[_t]=new RegExp(X[_t]),ye[_t]=new RegExp(ar(X[_t])));var _t;ce.parse=Ut;function Ut(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof he)return t;if(typeof t!="string"||t.length>An)return null;var n=e.loose?ye[Vs]:ye[Ws];if(!n.test(t))return null;try{return new he(t,e)}catch(i){return null}}ce.valid=wh;function wh(t,e){var n=Ut(t,e);return n?n.version:null}ce.clean=bh;function bh(t,e){var n=Ut(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null}ce.SemVer=he;function he(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof he){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>An)throw new TypeError("version is longer than "+An+" characters");if(!(this instanceof he))return new he(t,e);me("SemVer",t,e),this.options=e,this.loose=!!e.loose;var n=t.trim().match(e.loose?ye[Vs]:ye[Ws]);if(!n)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>tr||this.major<0)throw new TypeError("Invalid major version");if(this.minor>tr||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>tr||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(function(i){if(/^[0-9]+$/.test(i)){var r=+i;if(r>=0&&r<tr)return r}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}he.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};he.prototype.toString=function(){return this.version};he.prototype.compare=function(t){return me("SemVer.compare",this.version,this.options,t),t instanceof he||(t=new he(t,this.options)),this.compareMain(t)||this.comparePre(t)};he.prototype.compareMain=function(t){return t instanceof he||(t=new he(t,this.options)),nn(this.major,t.major)||nn(this.minor,t.minor)||nn(this.patch,t.patch)};he.prototype.comparePre=function(t){if(t instanceof he||(t=new he(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var n=this.prerelease[e],i=t.prerelease[e];if(me("prerelease compare",e,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return nn(n,i)}while(++e)};he.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};ce.inc=Sh;function Sh(t,e,n,i){typeof n=="string"&&(i=n,n=void 0);try{return new he(t,n).inc(e,i).version}catch(r){return null}}ce.diff=Eh;function Eh(t,e){if(Hs(t,e))return null;var n=Ut(t),i=Ut(e),r="";if(n.prerelease.length||i.prerelease.length){r="pre";var o="prerelease"}for(var f in n)if((f==="major"||f==="minor"||f==="patch")&&n[f]!==i[f])return r+f;return o}ce.compareIdentifiers=nn;var uu=/^[0-9]+$/;function nn(t,e){var n=uu.test(t),i=uu.test(e);return n&&i&&(t=+t,e=+e),t===e?0:n&&!i?-1:i&&!n?1:t<e?-1:1}ce.rcompareIdentifiers=Ih;function Ih(t,e){return nn(e,t)}ce.major=Mh;function Mh(t,e){return new he(t,e).major}ce.minor=Ph;function Ph(t,e){return new he(t,e).minor}ce.patch=Rh;function Rh(t,e){return new he(t,e).patch}ce.compare=bt;function bt(t,e,n){return new he(t,n).compare(new he(e,n))}ce.compareLoose=Ch;function Ch(t,e){return bt(t,e,!0)}ce.rcompare=Dh;function Dh(t,e,n){return bt(e,t,n)}ce.sort=Th;function Th(t,e){return t.sort(function(n,i){return ce.compare(n,i,e)})}ce.rsort=Ah;function Ah(t,e){return t.sort(function(n,i){return ce.rcompare(n,i,e)})}ce.gt=Nn;function Nn(t,e,n){return bt(t,e,n)>0}ce.lt=rr;function rr(t,e,n){return bt(t,e,n)<0}ce.eq=Hs;function Hs(t,e,n){return bt(t,e,n)===0}ce.neq=Eu;function Eu(t,e,n){return bt(t,e,n)!==0}ce.gte=$s;function $s(t,e,n){return bt(t,e,n)>=0}ce.lte=zs;function zs(t,e,n){return bt(t,e,n)<=0}ce.cmp=sr;function sr(t,e,n,i){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return Hs(t,n,i);case"!=":return Eu(t,n,i);case">":return Nn(t,n,i);case">=":return $s(t,n,i);case"<":return rr(t,n,i);case"<=":return zs(t,n,i);default:throw new TypeError("Invalid operator: "+e)}}ce.Comparator=Ze;function Ze(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Ze){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof Ze))return new Ze(t,e);t=t.trim().split(/\s+/).join(" "),me("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===kn?this.value="":this.value=this.operator+this.semver.version,me("comp",this)}var kn={};Ze.prototype.parse=function(t){var e=this.options.loose?ye[Fs]:ye[Bs],n=t.match(e);if(!n)throw new TypeError("Invalid comparator: "+t);this.operator=n[1],this.operator==="="&&(this.operator=""),n[2]?this.semver=new he(n[2],this.options.loose):this.semver=kn};Ze.prototype.toString=function(){return this.value};Ze.prototype.test=function(t){return me("Comparator.test",t,this.options.loose),this.semver===kn?!0:(typeof t=="string"&&(t=new he(t,this.options)),sr(t,this.operator,this.semver,this.options))};Ze.prototype.intersects=function(t,e){if(!(t instanceof Ze))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var n;if(this.operator==="")return n=new we(t.value,e),or(this.value,n,e);if(t.operator==="")return n=new we(this.value,e),or(t.semver,n,e);var i=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),r=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),o=this.semver.version===t.semver.version,f=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),g=sr(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),S=sr(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return i||r||o&&f||g||S};ce.Range=we;function we(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof we)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new we(t.raw,e);if(t instanceof Ze)return new we(t.value,e);if(!(this instanceof we))return new we(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(n){return this.parseRange(n.trim())},this).filter(function(n){return n.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}we.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};we.prototype.toString=function(){return this.range};we.prototype.parseRange=function(t){var e=this.options.loose,n=e?ye[bu]:ye[wu];t=t.replace(n,Kh),me("hyphen replace",t),t=t.replace(ye[xt],yh),me("comparator trim",t,ye[xt]),t=t.replace(ye[sn],_h),t=t.replace(ye[on],vh);var i=e?ye[Fs]:ye[Bs],r=t.split(" ").map(function(o){return Nh(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(r=r.filter(function(o){return!!o.match(i)})),r=r.map(function(o){return new Ze(o,this.options)},this),r};we.prototype.intersects=function(t,e){if(!(t instanceof we))throw new TypeError("a Range is required");return this.set.some(function(n){return n.every(function(i){return t.set.some(function(r){return r.every(function(o){return i.intersects(o,e)})})})})};ce.toComparators=Oh;function Oh(t,e){return new we(t,e).set.map(function(n){return n.map(function(i){return i.value}).join(" ").trim().split(" ")})}function Nh(t,e){return me("comp",t,e),t=jh(t,e),me("caret",t),t=Lh(t,e),me("tildes",t),t=Uh(t,e),me("xrange",t),t=Wh(t,e),me("stars",t),t}function xe(t){return!t||t.toLowerCase()==="x"||t==="*"}function Lh(t,e){return t.trim().split(/\s+/).map(function(n){return kh(n,e)}).join(" ")}function kh(t,e){var n=e.loose?ye[_u]:ye[mu];return t.replace(n,function(i,r,o,f,g){me("tilde",t,i,r,o,f,g);var S;return xe(r)?S="":xe(o)?S=">="+r+".0.0 <"+(+r+1)+".0.0":xe(f)?S=">="+r+"."+o+".0 <"+r+"."+(+o+1)+".0":g?(me("replaceTilde pr",g),S=">="+r+"."+o+"."+f+"-"+g+" <"+r+"."+(+o+1)+".0"):S=">="+r+"."+o+"."+f+" <"+r+"."+(+o+1)+".0",me("tilde return",S),S})}function jh(t,e){return t.trim().split(/\s+/).map(function(n){return xh(n,e)}).join(" ")}function xh(t,e){me("caret",t,e);var n=e.loose?ye[yu]:ye[vu];return t.replace(n,function(i,r,o,f,g){me("caret",t,i,r,o,f,g);var S;return xe(r)?S="":xe(o)?S=">="+r+".0.0 <"+(+r+1)+".0.0":xe(f)?r==="0"?S=">="+r+"."+o+".0 <"+r+"."+(+o+1)+".0":S=">="+r+"."+o+".0 <"+(+r+1)+".0.0":g?(me("replaceCaret pr",g),r==="0"?o==="0"?S=">="+r+"."+o+"."+f+"-"+g+" <"+r+"."+o+"."+(+f+1):S=">="+r+"."+o+"."+f+"-"+g+" <"+r+"."+(+o+1)+".0":S=">="+r+"."+o+"."+f+"-"+g+" <"+(+r+1)+".0.0"):(me("no pr"),r==="0"?o==="0"?S=">="+r+"."+o+"."+f+" <"+r+"."+o+"."+(+f+1):S=">="+r+"."+o+"."+f+" <"+r+"."+(+o+1)+".0":S=">="+r+"."+o+"."+f+" <"+(+r+1)+".0.0"),me("caret return",S),S})}function Uh(t,e){return me("replaceXRanges",t,e),t.split(/\s+/).map(function(n){return qh(n,e)}).join(" ")}function qh(t,e){t=t.trim();var n=e.loose?ye[pu]:ye[hu];return t.replace(n,function(i,r,o,f,g,S){me("xRange",t,i,r,o,f,g,S);var _=xe(o),u=_||xe(f),s=u||xe(g),b=s;return r==="="&&b&&(r=""),_?r===">"||r==="<"?i="<0.0.0":i="*":r&&b?(u&&(f=0),g=0,r===">"?(r=">=",u?(o=+o+1,f=0,g=0):(f=+f+1,g=0)):r==="<="&&(r="<",u?o=+o+1:f=+f+1),i=r+o+"."+f+"."+g):u?i=">="+o+".0.0 <"+(+o+1)+".0.0":s&&(i=">="+o+"."+f+".0 <"+o+"."+(+f+1)+".0"),me("xRange return",i),i})}function Wh(t,e){return me("replaceStars",t,e),t.trim().replace(ye[Su],"")}function Kh(t,e,n,i,r,o,f,g,S,_,u,s,b){return xe(n)?e="":xe(i)?e=">="+n+".0.0":xe(r)?e=">="+n+"."+i+".0":e=">="+e,xe(S)?g="":xe(_)?g="<"+(+S+1)+".0.0":xe(u)?g="<"+S+"."+(+_+1)+".0":s?g="<="+S+"."+_+"."+u+"-"+s:g="<="+g,(e+" "+g).trim()}we.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new he(t,this.options));for(var e=0;e<this.set.length;e++)if(Vh(this.set[e],t,this.options))return!0;return!1};function Vh(t,e,n){for(var i=0;i<t.length;i++)if(!t[i].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(i=0;i<t.length;i++)if(me(t[i].semver),t[i].semver!==kn&&t[i].semver.prerelease.length>0){var r=t[i].semver;if(r.major===e.major&&r.minor===e.minor&&r.patch===e.patch)return!0}return!1}return!0}ce.satisfies=or;function or(t,e,n){try{e=new we(e,n)}catch(i){return!1}return e.test(t)}ce.maxSatisfying=Fh;function Fh(t,e,n){var i=null,r=null;try{var o=new we(e,n)}catch(f){return null}return t.forEach(function(f){o.test(f)&&(!i||r.compare(f)===-1)&&(i=f,r=new he(i,n))}),i}ce.minSatisfying=Bh;function Bh(t,e,n){var i=null,r=null;try{var o=new we(e,n)}catch(f){return null}return t.forEach(function(f){o.test(f)&&(!i||r.compare(f)===1)&&(i=f,r=new he(i,n))}),i}ce.minVersion=Hh;function Hh(t,e){t=new we(t,e);var n=new he("0.0.0");if(t.test(n)||(n=new he("0.0.0-0"),t.test(n)))return n;n=null;for(var i=0;i<t.set.length;++i){var r=t.set[i];r.forEach(function(o){var f=new he(o.semver.version);switch(o.operator){case">":f.prerelease.length===0?f.patch++:f.prerelease.push(0),f.raw=f.format();case"":case">=":(!n||Nn(n,f))&&(n=f);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return n&&t.test(n)?n:null}ce.validRange=$h;function $h(t,e){try{return new we(t,e).range||"*"}catch(n){return null}}ce.ltr=zh;function zh(t,e,n){return Js(t,e,"<",n)}ce.gtr=Jh;function Jh(t,e,n){return Js(t,e,">",n)}ce.outside=Js;function Js(t,e,n,i){t=new he(t,i),e=new we(e,i);var r,o,f,g,S;switch(n){case">":r=Nn,o=zs,f=rr,g=">",S=">=";break;case"<":r=rr,o=$s,f=Nn,g="<",S="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(or(t,e,i))return!1;for(var _=0;_<e.set.length;++_){var u=e.set[_],s=null,b=null;if(u.forEach(function(C){C.semver===kn&&(C=new Ze(">=0.0.0")),s=s||C,b=b||C,r(C.semver,s.semver,i)?s=C:f(C.semver,b.semver,i)&&(b=C)}),s.operator===g||s.operator===S||(!b.operator||b.operator===g)&&o(t,b.semver))return!1;if(b.operator===S&&f(t,b.semver))return!1}return!0}ce.prerelease=Gh;function Gh(t,e){var n=Ut(t,e);return n&&n.prerelease.length?n.prerelease:null}ce.intersects=Yh;function Yh(t,e,n){return t=new we(t,n),e=new we(e,n),t.intersects(e)}ce.coerce=Xh;function Xh(t){if(t instanceof he)return t;if(typeof t!="string")return null;var e=t.match(ye[gu]);return e==null?null:Ut(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});A();A();A();var ln;function ge(t){ln&&ln("verbose",t)}function rt(t){ln&&ln("error",t)}function ao(t){ln=t}var pr=class{constructor(){this.registered=!1;this.baseHandler=this.handleVSCodeApiMessages.bind(this)}register(e){if(this.messageCallback=e,!this.vscodeApi&&typeof acquireVsCodeApi!="undefined"?this.vscodeApi=acquireVsCodeApi():!this.vscodeApi&&typeof window.acquireVsCodeApi!="undefined"&&(this.vscodeApi=window.acquireVsCodeApi()),this.vscodeApi||console.error("The vscode api is not set"),!this.registered){this.registered=!0,window.addEventListener("message",this.baseHandler);try{let n=this.vscodeApi;n&&n.handleMessage&&n.handleMessage(this.handleVSCodeApiMessages.bind(this))}catch(n){}}}sendMessage(e,n){this.vscodeApi?this.vscodeApi.postMessage({type:e,payload:n}):e==="IPyWidgets_logMessage"?ge(`Logging message ${e}, ${n}`):ge(`No vscode API to post message ${e}`)}dispose(){this.registered&&(this.registered=!1,window.removeEventListener("message",this.baseHandler))}async handleVSCodeApiMessages(e){let n=e.data;n&&this.messageCallback&&await this.messageCallback(n)}},gr=class{constructor(e){this.kernelMessagingApi=e||{onDidReceiveKernelMessage,postKernelMessage}}register(e){this.messageCallback=e,this.kernelHandler||(this.kernelHandler=this.kernelMessagingApi.onDidReceiveKernelMessage(this.handleKernelMessage.bind(this)))}sendMessage(e,n){this.kernelMessagingApi.postKernelMessage({type:e,payload:n})}dispose(){this.kernelHandler&&this.kernelHandler.dispose()}async handleKernelMessage(e){let n=e;n&&this.messageCallback&&await this.messageCallback(n)}},xn=class{constructor(e){this.kernelMessagingApi=e;this.handlers=[]}dispose(){this.messageApi&&this.messageApi.dispose()}sendMessage(e,n){return this.sendUnsafeMessage(e.toString(),n)}sendUnsafeMessage(e,n){this.messageApi?this.messageApi.sendMessage(e,n):e==="IPyWidgets_logMessage"?console.log("Message not sent",e,n):ge(`No message API to post message ${e}`)}addHandler(e){this.acquireApi(),this.handlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(n=>n!==e)}acquireApi(){this.messageApi||(this.useKernelMessageApi()?this.messageApi=new gr(this.kernelMessagingApi):this.messageApi=new pr,this.messageApi.register(this.handleMessage.bind(this)))}useKernelMessageApi(){return!!(this.kernelMessagingApi&&typeof this.kernelMessagingApi.postKernelMessage!="undefined"||typeof postKernelMessage!="undefined")}async handleMessage(e){this.handlers&&e&&this.handlers.forEach(n=>{n&&n.handleMessage(e.type,e.payload)})}};A();A();A();A();function lo(t){if(typeof document!="undefined"){var e=document.createElement("style"),n=document.createTextNode(t);e.appendChild(n),document.head.appendChild(e)}}var uo=`:root{--md-red-50: #ffebee;--md-red-100: #ffcdd2;--md-red-200: #ef9a9a;--md-red-300: #e57373;--md-red-400: #ef5350;--md-red-500: #f44336;--md-red-600: #e53935;--md-red-700: #d32f2f;--md-red-800: #c62828;--md-red-900: #b71c1c;--md-red-A100: #ff8a80;--md-red-A200: #ff5252;--md-red-A400: #ff1744;--md-red-A700: #d50000;--md-pink-50: #fce4ec;--md-pink-100: #f8bbd0;--md-pink-200: #f48fb1;--md-pink-300: #f06292;--md-pink-400: #ec407a;--md-pink-500: #e91e63;--md-pink-600: #d81b60;--md-pink-700: #c2185b;--md-pink-800: #ad1457;--md-pink-900: #880e4f;--md-pink-A100: #ff80ab;--md-pink-A200: #ff4081;--md-pink-A400: #f50057;--md-pink-A700: #c51162;--md-purple-50: #f3e5f5;--md-purple-100: #e1bee7;--md-purple-200: #ce93d8;--md-purple-300: #ba68c8;--md-purple-400: #ab47bc;--md-purple-500: #9c27b0;--md-purple-600: #8e24aa;--md-purple-700: #7b1fa2;--md-purple-800: #6a1b9a;--md-purple-900: #4a148c;--md-purple-A100: #ea80fc;--md-purple-A200: #e040fb;--md-purple-A400: #d500f9;--md-purple-A700: #aa00ff;--md-deep-purple-50: #ede7f6;--md-deep-purple-100: #d1c4e9;--md-deep-purple-200: #b39ddb;--md-deep-purple-300: #9575cd;--md-deep-purple-400: #7e57c2;--md-deep-purple-500: #673ab7;--md-deep-purple-600: #5e35b1;--md-deep-purple-700: #512da8;--md-deep-purple-800: #4527a0;--md-deep-purple-900: #311b92;--md-deep-purple-A100: #b388ff;--md-deep-purple-A200: #7c4dff;--md-deep-purple-A400: #651fff;--md-deep-purple-A700: #6200ea;--md-indigo-50: #e8eaf6;--md-indigo-100: #c5cae9;--md-indigo-200: #9fa8da;--md-indigo-300: #7986cb;--md-indigo-400: #5c6bc0;--md-indigo-500: #3f51b5;--md-indigo-600: #3949ab;--md-indigo-700: #303f9f;--md-indigo-800: #283593;--md-indigo-900: #1a237e;--md-indigo-A100: #8c9eff;--md-indigo-A200: #536dfe;--md-indigo-A400: #3d5afe;--md-indigo-A700: #304ffe;--md-blue-50: #e3f2fd;--md-blue-100: #bbdefb;--md-blue-200: #90caf9;--md-blue-300: #64b5f6;--md-blue-400: #42a5f5;--md-blue-500: #2196f3;--md-blue-600: #1e88e5;--md-blue-700: #1976d2;--md-blue-800: #1565c0;--md-blue-900: #0d47a1;--md-blue-A100: #82b1ff;--md-blue-A200: #448aff;--md-blue-A400: #2979ff;--md-blue-A700: #2962ff;--md-light-blue-50: #e1f5fe;--md-light-blue-100: #b3e5fc;--md-light-blue-200: #81d4fa;--md-light-blue-300: #4fc3f7;--md-light-blue-400: #29b6f6;--md-light-blue-500: #03a9f4;--md-light-blue-600: #039be5;--md-light-blue-700: #0288d1;--md-light-blue-800: #0277bd;--md-light-blue-900: #01579b;--md-light-blue-A100: #80d8ff;--md-light-blue-A200: #40c4ff;--md-light-blue-A400: #00b0ff;--md-light-blue-A700: #0091ea;--md-cyan-50: #e0f7fa;--md-cyan-100: #b2ebf2;--md-cyan-200: #80deea;--md-cyan-300: #4dd0e1;--md-cyan-400: #26c6da;--md-cyan-500: #00bcd4;--md-cyan-600: #00acc1;--md-cyan-700: #0097a7;--md-cyan-800: #00838f;--md-cyan-900: #006064;--md-cyan-A100: #84ffff;--md-cyan-A200: #18ffff;--md-cyan-A400: #00e5ff;--md-cyan-A700: #00b8d4;--md-teal-50: #e0f2f1;--md-teal-100: #b2dfdb;--md-teal-200: #80cbc4;--md-teal-300: #4db6ac;--md-teal-400: #26a69a;--md-teal-500: #009688;--md-teal-600: #00897b;--md-teal-700: #00796b;--md-teal-800: #00695c;--md-teal-900: #004d40;--md-teal-A100: #a7ffeb;--md-teal-A200: #64ffda;--md-teal-A400: #1de9b6;--md-teal-A700: #00bfa5;--md-green-50: #e8f5e9;--md-green-100: #c8e6c9;--md-green-200: #a5d6a7;--md-green-300: #81c784;--md-green-400: #66bb6a;--md-green-500: #4caf50;--md-green-600: #43a047;--md-green-700: #388e3c;--md-green-800: #2e7d32;--md-green-900: #1b5e20;--md-green-A100: #b9f6ca;--md-green-A200: #69f0ae;--md-green-A400: #00e676;--md-green-A700: #00c853;--md-light-green-50: #f1f8e9;--md-light-green-100: #dcedc8;--md-light-green-200: #c5e1a5;--md-light-green-300: #aed581;--md-light-green-400: #9ccc65;--md-light-green-500: #8bc34a;--md-light-green-600: #7cb342;--md-light-green-700: #689f38;--md-light-green-800: #558b2f;--md-light-green-900: #33691e;--md-light-green-A100: #ccff90;--md-light-green-A200: #b2ff59;--md-light-green-A400: #76ff03;--md-light-green-A700: #64dd17;--md-lime-50: #f9fbe7;--md-lime-100: #f0f4c3;--md-lime-200: #e6ee9c;--md-lime-300: #dce775;--md-lime-400: #d4e157;--md-lime-500: #cddc39;--md-lime-600: #c0ca33;--md-lime-700: #afb42b;--md-lime-800: #9e9d24;--md-lime-900: #827717;--md-lime-A100: #f4ff81;--md-lime-A200: #eeff41;--md-lime-A400: #c6ff00;--md-lime-A700: #aeea00;--md-yellow-50: #fffde7;--md-yellow-100: #fff9c4;--md-yellow-200: #fff59d;--md-yellow-300: #fff176;--md-yellow-400: #ffee58;--md-yellow-500: #ffeb3b;--md-yellow-600: #fdd835;--md-yellow-700: #fbc02d;--md-yellow-800: #f9a825;--md-yellow-900: #f57f17;--md-yellow-A100: #ffff8d;--md-yellow-A200: #ffff00;--md-yellow-A400: #ffea00;--md-yellow-A700: #ffd600;--md-amber-50: #fff8e1;--md-amber-100: #ffecb3;--md-amber-200: #ffe082;--md-amber-300: #ffd54f;--md-amber-400: #ffca28;--md-amber-500: #ffc107;--md-amber-600: #ffb300;--md-amber-700: #ffa000;--md-amber-800: #ff8f00;--md-amber-900: #ff6f00;--md-amber-A100: #ffe57f;--md-amber-A200: #ffd740;--md-amber-A400: #ffc400;--md-amber-A700: #ffab00;--md-orange-50: #fff3e0;--md-orange-100: #ffe0b2;--md-orange-200: #ffcc80;--md-orange-300: #ffb74d;--md-orange-400: #ffa726;--md-orange-500: #ff9800;--md-orange-600: #fb8c00;--md-orange-700: #f57c00;--md-orange-800: #ef6c00;--md-orange-900: #e65100;--md-orange-A100: #ffd180;--md-orange-A200: #ffab40;--md-orange-A400: #ff9100;--md-orange-A700: #ff6d00;--md-deep-orange-50: #fbe9e7;--md-deep-orange-100: #ffccbc;--md-deep-orange-200: #ffab91;--md-deep-orange-300: #ff8a65;--md-deep-orange-400: #ff7043;--md-deep-orange-500: #ff5722;--md-deep-orange-600: #f4511e;--md-deep-orange-700: #e64a19;--md-deep-orange-800: #d84315;--md-deep-orange-900: #bf360c;--md-deep-orange-A100: #ff9e80;--md-deep-orange-A200: #ff6e40;--md-deep-orange-A400: #ff3d00;--md-deep-orange-A700: #dd2c00;--md-brown-50: #efebe9;--md-brown-100: #d7ccc8;--md-brown-200: #bcaaa4;--md-brown-300: #a1887f;--md-brown-400: #8d6e63;--md-brown-500: #795548;--md-brown-600: #6d4c41;--md-brown-700: #5d4037;--md-brown-800: #4e342e;--md-brown-900: #3e2723;--md-grey-50: #fafafa;--md-grey-100: #f5f5f5;--md-grey-200: #eeeeee;--md-grey-300: #e0e0e0;--md-grey-400: #bdbdbd;--md-grey-500: #9e9e9e;--md-grey-600: #757575;--md-grey-700: #616161;--md-grey-800: #424242;--md-grey-900: #212121;--md-blue-grey-50: #eceff1;--md-blue-grey-100: #cfd8dc;--md-blue-grey-200: #b0bec5;--md-blue-grey-300: #90a4ae;--md-blue-grey-400: #78909c;--md-blue-grey-500: #607d8b;--md-blue-grey-600: #546e7a;--md-blue-grey-700: #455a64;--md-blue-grey-800: #37474f;--md-blue-grey-900: #263238}:root{--jp-icon-search: none;--jp-ui-select-caret: none}:root{--jp-border-width: 1px;--jp-border-color0: var(--md-grey-700);--jp-border-color1: var(--md-grey-500);--jp-border-color2: var(--md-grey-300);--jp-border-color3: var(--md-grey-100);--jp-ui-icon-font-size: 14px;--jp-ui-font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;--jp-ui-font-color0: rgba(0, 0, 0, 1);--jp-ui-font-color1: rgba(0, 0, 0, .8);--jp-ui-font-color2: rgba(0, 0, 0, .5);--jp-ui-font-color3: rgba(0, 0, 0, .3);--jp-ui-inverse-font-color0: rgba(255, 255, 255, 1);--jp-ui-inverse-font-color1: rgba(255, 255, 255, 1);--jp-ui-inverse-font-color2: rgba(255, 255, 255, .7);--jp-ui-inverse-font-color3: rgba(255, 255, 255, .5);--jp-content-font-size: 13px;--jp-content-line-height: 1.5;--jp-content-font-color0: black;--jp-content-font-color1: black;--jp-content-font-color2: var(--md-grey-700);--jp-content-font-color3: var(--md-grey-500);--jp-ui-font-scale-factor: 1.2;--jp-ui-font-size0: calc( var(--jp-ui-font-size1) / var(--jp-ui-font-scale-factor) );--jp-ui-font-size1: 13px;--jp-ui-font-size2: calc( var(--jp-ui-font-size1) * var(--jp-ui-font-scale-factor) );--jp-ui-font-size3: calc( var(--jp-ui-font-size2) * var(--jp-ui-font-scale-factor) );--jp-code-font-size: 13px;--jp-code-line-height: 1.307;--jp-code-padding: 5px;--jp-code-font-family: monospace;--jp-layout-color0: white;--jp-layout-color1: white;--jp-layout-color2: var(--md-grey-200);--jp-layout-color3: var(--md-grey-400);--jp-brand-color0: var(--md-blue-700);--jp-brand-color1: var(--md-blue-500);--jp-brand-color2: var(--md-blue-300);--jp-brand-color3: var(--md-blue-100);--jp-accent-color0: var(--md-green-700);--jp-accent-color1: var(--md-green-500);--jp-accent-color2: var(--md-green-300);--jp-accent-color3: var(--md-green-100);--jp-warn-color0: var(--md-orange-700);--jp-warn-color1: var(--md-orange-500);--jp-warn-color2: var(--md-orange-300);--jp-warn-color3: var(--md-orange-100);--jp-error-color0: var(--md-red-700);--jp-error-color1: var(--md-red-500);--jp-error-color2: var(--md-red-300);--jp-error-color3: var(--md-red-100);--jp-success-color0: var(--md-green-700);--jp-success-color1: var(--md-green-500);--jp-success-color2: var(--md-green-300);--jp-success-color3: var(--md-green-100);--jp-info-color0: var(--md-cyan-700);--jp-info-color1: var(--md-cyan-500);--jp-info-color2: var(--md-cyan-300);--jp-info-color3: var(--md-cyan-100);--jp-cell-padding: 5px;--jp-cell-editor-background: #f7f7f7;--jp-cell-editor-border-color: #cfcfcf;--jp-cell-editor-background-edit: var(--jp-ui-layout-color1);--jp-cell-editor-border-color-edit: var(--jp-brand-color1);--jp-cell-prompt-width: 100px;--jp-cell-prompt-font-family: "Roboto Mono", monospace;--jp-cell-prompt-letter-spacing: 0px;--jp-cell-prompt-opacity: 1;--jp-cell-prompt-opacity-not-active: .4;--jp-cell-prompt-font-color-not-active: var(--md-grey-700);--jp-cell-inprompt-font-color: #307fc1;--jp-cell-outprompt-font-color: #bf5b3d;--jp-notebook-padding: 10px;--jp-notebook-scroll-padding: 100px;--jp-console-background: var(--md-grey-100);--jp-toolbar-border-color: var(--md-grey-400);--jp-toolbar-micro-height: 8px;--jp-toolbar-background: var(--jp-layout-color0);--jp-toolbar-box-shadow: 0px 0px 2px 0px rgba(0, 0, 0, .24);--jp-toolbar-header-margin: 4px 4px 0px 4px;--jp-toolbar-active-background: var(--md-grey-300)}
`;lo(uo);var Jl=Kt(mr());A();var un=class{constructor(){this.event=(e,n,i)=>{let r=this.add(n?e.bind(n):e);return i==null||i.push(r),r}}get size(){return this.listeners?typeof this.listeners=="function"?1:this.listeners.length:0}fire(e){if(this.listeners)if(typeof this.listeners=="function")this.listeners(e);else for(let n of this.listeners)n(e)}dispose(){this.listeners=void 0}add(e){return this.listeners?typeof this.listeners=="function"?this.listeners=[this.listeners,e]:this.listeners.push(e):this.listeners=e,{dispose:()=>this.rm(e)}}rm(e){if(!this.listeners)return;if(typeof this.listeners=="function"){this.listeners===e&&(this.listeners=void 0);return}let n=this.listeners.indexOf(e);n!==-1&&(this.listeners.length===2?this.listeners=n===0?this.listeners[1]:this.listeners[0]:this.listeners=this.listeners.slice(0,n).concat(this.listeners.slice(n+1)))}};A();var Hl=Kt(ct()),$l=Kt(Si());A();A();A();A();var ih="ms-toolsai.jupyter";var Al;(n=>(n.PythonInteractiveHelpLink="https://aka.ms/pyaiinstall",n.JupyterDataRateHelpLink="https://aka.ms/AA5ggm0"))(Al||(Al={}));var Ol;(o=>(o.JupyterServerRemoteLaunchNameSeparator=`
`,o.JupyterServerRemoteLaunchService=ih,o.JupyterServerUriListMax=10,o.IntellisenseTimeout=2e3,o.IntellisenseResolveTimeout=5e3))(Ol||(Ol={}));var bs;(T=>(T.GeneratedThemeName="ipython-theme",T.MatplotLibDefaultParams="_VSCode_defaultMatplotlib_Params",T.MatplotLibFigureFormats="_VSCode_matplotLib_FigureFormats",T.DefaultCodeCellMarker="# %%",T.DefaultCommTarget="jupyter.widget",T.ALL_VARIABLES="ALL_VARIABLES",T.KERNEL_VARIABLES="KERNEL_VARIABLES",T.DEBUGGER_VARIABLES="DEBUGGER_VARIABLES",T.PYTHON_VARIABLES_REQUESTER="PYTHON_VARIABLES_REQUESTER",T.MULTIPLEXING_DEBUGSERVICE="MULTIPLEXING_DEBUGSERVICE",T.RUN_BY_LINE_DEBUGSERVICE="RUN_BY_LINE_DEBUGSERVICE",T.REMOTE_URI="https://remote/",T.REMOTE_URI_ID_PARAM="id",T.REMOTE_URI_HANDLE_PARAM="uriHandle",T.REMOTE_URI_EXTENSION_ID_PARAM="extensionId"))(bs||(bs={}));var Nl;(i=>(i.ImportIPython=`{0}
from IPython import get_ipython

{1}`,i.MatplotLibInit=`import matplotlib
%matplotlib inline
${bs.MatplotLibDefaultParams} = dict(matplotlib.rcParams)
`,i.DisableJedi="%config Completer.use_jedi = False"))(Nl||(Nl={}));var nt;(re=>(re.RunAllCells="jupyter.runallcells",re.RunAllCellsAbove="jupyter.runallcellsabove",re.RunCellAndAllBelow="jupyter.runcellandallbelow",re.RunAllCellsAbovePalette="jupyter.runallcellsabove.palette",re.RunCellAndAllBelowPalette="jupyter.runcurrentcellandallbelow.palette",re.RunToLine="jupyter.runtoline",re.RunFromLine="jupyter.runfromline",re.RunCell="jupyter.runcell",re.RunCurrentCell="jupyter.runcurrentcell",re.RunCurrentCellAdvance="jupyter.runcurrentcelladvance",re.CreateNewInteractive="jupyter.createnewinteractive",re.ImportNotebook="jupyter.importnotebook",re.ImportNotebookFile="jupyter.importnotebookfile",re.ExportFileAsNotebook="jupyter.exportfileasnotebook",re.ExportFileAndOutputAsNotebook="jupyter.exportfileandoutputasnotebook",re.InterruptKernel="jupyter.interruptkernel",re.RestartKernel="jupyter.restartkernel",re.RestartKernelAndRunAllCells="jupyter.restartkernelandrunallcells",re.RestartKernelAndRunUpToSelectedCell="jupyter.restartkernelandrunuptoselectedcell",re.NotebookEditorRemoveAllCells="jupyter.notebookeditor.removeallcells",re.NotebookEditorRunAllCells="jupyter.notebookeditor.runallcells",re.NotebookEditorRunSelectedCell="jupyter.notebookeditor.runselectedcell",re.NotebookEditorAddCellBelow="jupyter.notebookeditor.addcellbelow",re.ExpandAllCells="jupyter.expandallcells",re.CollapseAllCells="jupyter.collapseallcells",re.ExportOutputAsNotebook="jupyter.exportoutputasnotebook",re.ExecSelectionInInteractiveWindow="jupyter.execSelectionInteractive",re.RunFileInInteractiveWindows="jupyter.runFileInteractive",re.DebugFileInInteractiveWindows="jupyter.debugFileInteractive",re.AddCellBelow="jupyter.addcellbelow",re.DebugCurrentCellPalette="jupyter.debugcurrentcell.palette",re.DebugCell="jupyter.debugcell",re.DebugStepOver="jupyter.debugstepover",re.DebugContinue="jupyter.debugcontinue",re.DebugStop="jupyter.debugstop",re.RunCurrentCellAndAddBelow="jupyter.runcurrentcellandaddbelow",re.InsertCellBelowPosition="jupyter.insertCellBelowPosition",re.InsertCellBelow="jupyter.insertCellBelow",re.InsertCellAbove="jupyter.insertCellAbove",re.DeleteCells="jupyter.deleteCells",re.SelectCell="jupyter.selectCell",re.SelectCellContents="jupyter.selectCellContents",re.ExtendSelectionByCellAbove="jupyter.extendSelectionByCellAbove",re.ExtendSelectionByCellBelow="jupyter.extendSelectionByCellBelow",re.MoveCellsUp="jupyter.moveCellsUp",re.MoveCellsDown="jupyter.moveCellsDown",re.ChangeCellToMarkdown="jupyter.changeCellToMarkdown",re.ChangeCellToCode="jupyter.changeCellToCode",re.GotoNextCellInFile="jupyter.gotoNextCellInFile",re.GotoPrevCellInFile="jupyter.gotoPrevCellInFile",re.ScrollToCell="jupyter.scrolltocell",re.CreateNewNotebook="jupyter.createnewnotebook",re.ViewJupyterOutput="jupyter.viewOutput",re.ExportAsPythonScript="jupyter.exportAsPythonScript",re.ExportToHTML="jupyter.exportToHTML",re.ExportToPDF="jupyter.exportToPDF",re.Export="jupyter.export",re.NativeNotebookExport="jupyter.notebookeditor.export",re.LatestExtension="jupyter.latestExtension",re.EnableLoadingWidgetsFrom3rdPartySource="jupyter.enableLoadingWidgetScriptsFromThirdPartySource",re.ShowDataViewer="jupyter.showDataViewer",re.ShowJupyterDataViewer="jupyter.showJupyterDataViewer",re.RefreshDataViewer="jupyter.refreshDataViewer",re.ClearSavedJupyterUris="jupyter.clearSavedJupyterUris",re.OpenVariableView="jupyter.openVariableView",re.OpenOutlineView="jupyter.openOutlineView",re.InteractiveClearAll="jupyter.interactive.clearAllCells",re.InteractiveGoToCode="jupyter.interactive.goToCode",re.InteractiveCopyCell="jupyter.interactive.copyCell",re.InteractiveExportAsNotebook="jupyter.interactive.exportasnotebook",re.InteractiveExportAs="jupyter.interactive.exportas",re.RunByLine="jupyter.runByLine",re.RunAndDebugCell="jupyter.runAndDebugCell",re.RunByLineNext="jupyter.runByLineNext",re.RunByLineStop="jupyter.runByLineStop",re.ReplayPylanceLog="jupyter.replayPylanceLog",re.ReplayPylanceLogStep="jupyter.replayPylanceLogStep",re.InstallPythonExtensionViaKernelPicker="jupyter.installPythonExtensionViaKernelPicker",re.InstallPythonViaKernelPicker="jupyter.installPythonViaKernelPicker",re.ContinueEditSessionInCodespace="jupyter.continueEditSessionInCodespace"))(nt||(nt={}));var Ll;(i=>(i.DefaultDesignLenses=[nt.RunCurrentCell,nt.RunAllCellsAbove,nt.DebugCell],i.DefaultDebuggingLenses=[nt.DebugContinue,nt.DebugStop,nt.DebugStepOver],i.DebuggerCommands=[nt.DebugContinue,nt.DebugStop,nt.DebugStepOver]))(Ll||(Ll={}));var kl;(P=>(P.HasCodeCells="jupyter.hascodecells",P.IsInteractiveActive="jupyter.isinteractiveactive",P.OwnsSelection="jupyter.ownsSelection",P.HaveNativeCells="jupyter.havenativecells",P.HaveNative="jupyter.havenative",P.IsNativeActive="jupyter.isnativeactive",P.IsInteractiveOrNativeActive="jupyter.isinteractiveornativeactive",P.IsPythonOrNativeActive="jupyter.ispythonornativeactive",P.IsPythonOrInteractiveActive="jupyter.ispythonorinteractiveeactive",P.IsPythonOrInteractiveOrNativeActive="jupyter.ispythonorinteractiveornativeeactive",P.CanRestartNotebookKernel="jupyter.notebookeditor.canrestartNotebookkernel",P.CanInterruptNotebookKernel="jupyter.notebookeditor.canInterruptNotebookKernel",P.CanRestartInteractiveWindowKernel="jupyter.interactive.canRestartNotebookKernel",P.CanInterruptInteractiveWindowKernel="jupyter.interactive.canInterruptNotebookKernel",P.RunByLineCells="jupyter.notebookeditor.runByLineCells",P.RunByLineDocuments="jupyter.notebookeditor.runByLineDocuments",P.DebugDocuments="jupyter.notebookeditor.debugDocuments",P.IsPythonNotebook="jupyter.ispythonnotebook",P.IsJupyterKernelSelected="jupyter.kernel.isjupyter",P.IsDataViewerActive="jupyter.dataViewerActive",P.HasNativeNotebookOrInteractiveWindowOpen="jupyter.hasNativeNotebookOrInteractiveWindowOpen",P.ZmqAvailable="jupyter.zmqavailable",P.ReplayLogLoaded="jupyter.replayLogLoaded",P.KernelSource="jupyter.kernelSource"))(kl||(kl={}));var jl;(S=>(S.PythonCellMarker=/^(#\s*%%|#\s*\<codecell\>|#\s*In\[\d*?\]|#\s*In\[ \])/,S.PythonMarkdownCellMarker=/^(#\s*%%\s*\[markdown\]|#\s*\<markdowncell\>)/,S.UrlPatternRegEx="(?<PREFIX>https?:\\/\\/)((\\(.+\\s+or\\s+(?<IP>.+)\\))|(?<LOCAL>[^\\s]+))(?<REST>:.+)",S.HttpPattern=/https?:\/\//,S.ShapeSplitterRegEx=/.*,\s*(\d+).*/,S.SvgHeightRegex=/(\<svg.*height=\")(.*?)\"/,S.SvgWidthRegex=/(\<svg.*width=\")(.*?)\"/,S.SvgSizeTagRegex=/\<svg.*tag=\"sizeTag=\{(.*),\s*(.*)\}\"/))(jl||(jl={}));var f_=Symbol("DataScienceStartupTime");var Ss="application/vnd.jupyter.widget-view+json",Es="application/vnd.jupyter.widget-state+json";function kt(){}A();var rh=Symbol("MicrotaskDelay");var Is=class{constructor(e=null){this.scope=e;this._resolved=!1;this._rejected=!1;this._promise=new Promise((n,i)=>{this._resolve=n,this._reject=i})}get value(){return this._value}resolve(e){this._value=e,this._resolve.apply(this.scope?this.scope:this,arguments),this._resolved=!0}reject(e){this._reject.apply(this.scope?this.scope:this,arguments),this._rejected=!0}get promise(){return this._promise}get resolved(){return this._resolved}get rejected(){return this._rejected}get completed(){return this._rejected||this._resolved}};function it(t=null){return new Is(t)}A();function xl(t){if(!t||!Array.isArray(t)||t.length===0)return;let e=[];for(let n=0;n<t.length;n+=1){let i=t[n];if("buffer"in i&&"byteOffset"in i){let r=Array.apply(null,new Uint8Array(i.buffer));e.push({...i,byteLength:i.byteLength,byteOffset:i.byteOffset,buffer:r})}else e.push([...new Uint8Array(i)])}return e}function Ul(t){if(!Array.isArray(t)||t.length===0)return t;let e=[];for(let n=0;n<t.length;n+=1){let i=t[n];if("buffer"in i&&"byteOffset"in i){let r=new Uint8Array(i.buffer).buffer,o=new DataView(r,i.byteOffset,i.byteLength);e.push(o)}else{let r=new Uint8Array(i).buffer;e.push(r)}}return e}var Ms=class t{constructor(e,n){this.postOffice=n;this.hookResults=new Map;let i,r=e.protocol;class o{constructor(){this.sendEnabled=!0;this.protocol=r;i=this}close(_,u){}send(_){this.sendEnabled&&(typeof _=="string"?n.sendMessage("IPyWidgets_msg",_):n.sendMessage("IPyWidgets_binary_msg",xl([_])))}}let f=Hl.ServerConnection.makeSettings({WebSocket:o,wsUrl:"BOGUS_PVSC"});this.awaitingExtensionMessage=new Map,this.realKernel=new $l.KernelConnection({serverSettings:f,clientId:e.clientId,handleComms:!0,username:e.userName,model:e.model});let g=Bl();this._ioPubMessageSignal=new g.Signal(this),this.realKernel.iopubMessage.connect(this.onIOPubMessage,this),this.realKernel.pendingInput.connect(this.onPendingInput,this),this._options=e,n.addHandler(this),this.websocket=i,this.messageHook=this.messageHookInterceptor.bind(this),this.messageHooks=new Map,this.fakeOpenSocket()}get iopubMessage(){return this._ioPubMessageSignal}get statusChanged(){return this.realKernel.statusChanged}get connectionStatusChanged(){return this.realKernel.connectionStatusChanged}get unhandledMessage(){return this.realKernel.unhandledMessage}get anyMessage(){return this.realKernel.anyMessage}get serverSettings(){return this.realKernel.serverSettings}get id(){return this.realKernel.id}get name(){return this.realKernel.name}get model(){return this.realKernel.model}get username(){return this.realKernel.username}get clientId(){return this.realKernel.clientId}get status(){return this.realKernel.status}get handleComms(){return this.realKernel.handleComms}get isDisposed(){return this.realKernel.isDisposed}get connectionStatus(){return this.realKernel.connectionStatus}get spec(){return this.realKernel.spec}get info(){return this.realKernel.info}get hasComm(){return this.realKernel.hasComm}createComm(e,n){return this.realKernel.createComm(e,n)}removeInputGuard(){return this.realKernel.removeInputGuard()}get hasPendingInput(){return this.realKernel.hasPendingInput}get disposed(){return this.realKernel.disposed}get pendingInput(){return this.realKernel.pendingInput}clone(e){return new t({...this._options,clientId:(e==null?void 0:e.clientId)||this._options.clientId,userName:(e==null?void 0:e.username)||this._options.userName},this.postOffice)}shutdown(){return this.realKernel.shutdown()}sendShellMessage(e,n,i){return this.realKernel.sendShellMessage(e,n,i)}sendControlMessage(e,n,i){return this.realKernel.sendControlMessage(e,n,i)}reconnect(){return this.realKernel.reconnect()}interrupt(){return this.realKernel.interrupt()}restart(){return this.realKernel.restart()}requestKernelInfo(){return this.realKernel.requestKernelInfo()}requestComplete(e){return this.realKernel.requestComplete(e)}requestInspect(e){return this.realKernel.requestInspect(e)}requestHistory(e){return this.realKernel.requestHistory(e)}requestExecute(e,n,i){return this.realKernel.requestExecute(e,n,i)}requestDebug(e,n){return this.realKernel.requestDebug(e,n)}requestIsComplete(e){return this.realKernel.requestIsComplete(e)}requestCommInfo(e){return this.realKernel.requestCommInfo(e)}sendInputReply(e,n){return this.realKernel.sendInputReply(e,n)}registerCommTarget(e,n){return this.postOffice.sendMessage("IPyWidgets_registerCommTarget",e),this.realKernel.registerCommTarget(e,n)}removeCommTarget(e,n){return this.realKernel.removeCommTarget(e,n)}dispose(){return this.postOffice.removeHandler(this),this.realKernel.dispose()}handleMessage(e,n){switch(e){case"IPyWidgets_MessageHookCall":this.sendHookResult(n);break;case"IPyWidgets_msg":this.websocket&&this.websocket.onmessage&&this.websocket.onmessage({target:this.websocket,data:n.data,type:""}),this.sendResponse(n.id);break;case"IPyWidgets_binary_msg":if(this.websocket&&this.websocket.onmessage){let i=Ul(n.data)[0];this.websocket.onmessage({target:this.websocket,data:i,type:""})}this.sendResponse(n.id);break;case"IPyWidgets_mirror_execute":this.handleMirrorExecute(n);break;case"IPyWidgets_ExtensionOperationHandled":this.extensionOperationFinished(n);break;case"IPyWidgets_registerCommTarget":this.realKernel.registerCommTarget(n,kt);break;default:break}return!0}registerMessageHook(e,n){let i=it(),r=this.generateExtensionResponseKey(e,"IPyWidgets_RegisterMessageHook".toString());this.awaitingExtensionMessage.set(r,i),this.postOffice.sendMessage("IPyWidgets_RegisterMessageHook",e),this.messageHooks.set(e,n),this.realKernel.registerMessageHook(e,this.messageHook)}removeMessageHook(e,n){let i=it(),r=this.generateExtensionResponseKey(e,"IPyWidgets_RemoveMessageHook".toString());this.awaitingExtensionMessage.set(r,i),this.postOffice.sendMessage("IPyWidgets_RemoveMessageHook",{hookMsgId:e,lastHookedMsgId:this.lastHookedMessageId}),this.messageHooks.delete(e),this.lastHookedMessageId=void 0,this.realKernel.removeMessageHook(e,this.messageHook)}extensionOperationFinished(e){let n=`${e.id}${e.type}`,i=this.awaitingExtensionMessage.get(n);i&&(i.resolve(),this.awaitingExtensionMessage.delete(n))}sendResponse(e){this.postOffice.sendMessage("IPyWidgets_msg_received",{id:e})}generateExtensionResponseKey(e,n){return`${e}${n}`}fakeOpenSocket(){let e=this.realKernel.requestKernelInfo.bind(this.realKernel);this.realKernel.requestKernelInfo=()=>(this.realKernel.requestKernelInfo=e,Promise.resolve()),this.websocket&&this.websocket.onopen({target:this.websocket}),this.realKernel.requestKernelInfo=e}messageHookInterceptor(e){try{this.lastHookedMessageId=e.header.msg_id;let n=this.messageHooks.get(e.parent_header.msg_id);if(n){let i=n(e);return this.hookResults.set(e.header.msg_id,i),i.then?i.then(r=>r):i}}catch(n){}return!1}sendHookResult(e){let n=this.hookResults.get(e.msg.header.msg_id);n!==void 0?(this.hookResults.delete(e.msg.header.msg_id),n.then?n.then(i=>{this.postOffice.sendMessage("IPyWidgets_MessageHookResult",{requestId:e.requestId,parentId:e.parentId,msgType:e.msg.header.msg_type,result:i})}):this.postOffice.sendMessage("IPyWidgets_MessageHookResult",{requestId:e.requestId,parentId:e.parentId,msgType:e.msg.header.msg_type,result:n===!0})):this.postOffice.sendMessage("IPyWidgets_MessageHookResult",{requestId:e.requestId,parentId:e.parentId,msgType:e.msg.header.msg_type,result:!0})}handleMirrorExecute(e){try{this.websocket.sendEnabled=!1,this.realKernel.sendShellMessage(e.msg,!1,e.msg.content.silent)}finally{this.websocket.sendEnabled=!0}this.sendResponse(e.id)}onIOPubMessage(e,n){if(this.awaitingExtensionMessage.size<=0)this.finishIOPubMessage(n);else{let i=Array.from(this.awaitingExtensionMessage.values()).map(r=>r.promise);Promise.all(i).then(()=>{this.finishIOPubMessage(n)}).catch(r=>{window.console.error("Failed to send iopub_msg_handled message",r)})}}onPendingInput(e,n){this.pendingInput.emit(n)}finishIOPubMessage(e){this.postOffice.sendMessage("IPyWidgets_iopub_msg_handled",{id:e.header.msg_id}),this._ioPubMessageSignal.emit(e)}};function zl(t,e,n){let i=new Ms(t,e);return n.forEach(r=>i.handleMessage(r.message,r.payload)),i}var Tt=class Tt{constructor(e,n,i,r,o){this.widgetContainer=e;this.postOffice=n;this.scriptLoader=i;this.JupyterLabWidgetManager=r;this.widgetState=o;this.pendingMessages=[];this.modelIdsToBeDisplayed=new Map;this.offlineModelIds=new Set;this.postOffice.addHandler(this),this.postOffice.sendMessage("IPyWidgets_Ready"),ao((f,g)=>{this.postOffice.sendMessage("IPyWidgets_logMessage",{category:f,message:g}),f==="error"&&console.error(g)}),o&&this.initializeKernelAndWidgetManager({clientId:"",id:"",model:{id:"",name:""},userName:"",protocol:""},o)}static get onDidChangeInstance(){return Tt._onDidChangeInstance.event}dispose(){var e;(e=this.proxyKernel)==null||e.dispose(),this.postOffice.removeHandler(this),this.clear().catch(kt)}async clear(){var e;await((e=this.manager)==null?void 0:e.clear_state())}handleMessage(e,n){var i,r;return e==="IPyWidgets_kernelOptions"?(ge("Received IPyWidgetMessages.IPyWidgets_kernelOptions"),this.initializeKernelAndWidgetManager(n)):e==="IPyWidgets_IsReadyRequest"?(ge("Received IPyWidgetMessages.IPyWidgets_IsReadyRequest"),this.postOffice.sendMessage("IPyWidgets_Ready")):e==="IPyWidgets_onRestartKernel"?(ge("Received IPyWidgetMessages.IPyWidgets_onRestartKernel"),(i=this.manager)==null||i.dispose(),this.manager=void 0,(r=this.proxyKernel)==null||r.dispose(),this.proxyKernel=void 0,Tt.instance=void 0,Tt._onDidChangeInstance.fire(void 0)):this.proxyKernel||(ge(`Received some pending message ${e}`),this.pendingMessages.push({message:e,payload:n})),!0}async restoreWidgets(e,n){if(!e||!(n!=null&&n.loadNotebook))return;if(!this.manager)throw new Error("DS IPyWidgetManager not initialized.");await this.manager.restoreWidgets(e,n);let i=e.metadata.get("widgets"),r=i&&i[Es]?i[Es]:void 0;if(r){let o=it();o.resolve(),Object.keys(r.state).forEach(f=>{this.modelIdsToBeDisplayed.set(f,o),this.offlineModelIds.add(f)})}}async renderWidget(e,n){if(!e)throw new Error("application/vnd.jupyter.widget-view+json not in msg.content.data, as msg.content.data is 'undefined'.");if(!this.manager)throw new Error("DS IPyWidgetManager not initialized.");if(!e||e.version_major!==2){console.warn("Widget data not available to render an ipywidget");return}let i=e.model_id;this.modelIdsToBeDisplayed.has(i)||this.modelIdsToBeDisplayed.set(i,it()),ge(`Waiting for model to be available before rendering it ${e.model_id}`),await this.modelIdsToBeDisplayed.get(i).promise;let r=this.manager.get_model(e.model_id);if(!r){console.warn("Widget model not available to render an ipywidget");return}let o=await r;this.widgetState&&this.offlineModelIds.has(i)&&(o.comm_live=!1);let f=await this.manager.create_view(o,{el:n});return this.widgetState&&f.initialize({model:o,el:n,options:{}}),this.manager.display_view(e,f,{node:n})}initializeKernelAndWidgetManager(e,n){var i,r;if(!(this.manager&&this.proxyKernel&&(0,Jl.default)(e,this.options))){this.options=e,(i=this.proxyKernel)==null||i.dispose(),this.proxyKernel=zl(e,this.postOffice,this.pendingMessages),this.pendingMessages=[],(r=this.manager)==null||r.dispose();try{this.manager=new this.JupyterLabWidgetManager(this.proxyKernel,this.widgetContainer,this.scriptLoader,ge,n),this.proxyKernel.iopubMessage.connect(this.handleDisplayDataMessage.bind(this)),this.manager.onUnhandledIOPubMessage.connect(this.handleUnhandledIOPubMessage.bind(this)),Tt.instance=this,Tt._onDidChangeInstance.fire(this)}catch(o){console.error("Failed to initialize WidgetManager",o)}}}handleDisplayDataMessage(e,n){let i=ct();if(!i.KernelMessage.isDisplayDataMsg(n)&&!i.KernelMessage.isExecuteResultMsg(n))return;let r=n;if(r.content&&r.content.data&&r.content.data[Ss]){let o=r.content.data[Ss],f=o.model_id;ge(`Received display data message ${f}`);let g=this.modelIdsToBeDisplayed.get(f);if(g||(g=it(),this.modelIdsToBeDisplayed.set(f,g)),!this.manager)throw new Error("DS IPyWidgetManager not initialized");let S=this.manager.get_model(o.model_id);S?S.then(_=>g==null?void 0:g.resolve()).catch(_=>g==null?void 0:g.reject(_)):g.resolve()}}handleUnhandledIOPubMessage(e,n){this.postOffice.sendMessage("ipywidget_unhandled_kernel_message",n)}};Tt._onDidChangeInstance=new un;var Qt=Tt;A();var Tu=Kt(mr()),Au=Kt(su());A();var fh="https://unpkg.com/",hh="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/bin/r.min.js",ph=1e3,Cs=!1;async function Ds(){if(Cs)return!0;let t=new AbortController,e,n=new Promise(i=>{e=setTimeout(()=>{i(!1),t.abort()},ph)});n.catch(()=>{});try{return Cs=await Promise.race([ou(fh,t.signal),ou(hh,t.signal),n]),Cs}finally{e&&clearInterval(e)}}async function ou(t,e){let n=1;try{for(n=0;n<=5;n++)if((await fetch(t,{signal:e})).ok)return!0;return!1}catch(i){return rt(`Failed to access CDN ${t} after ${n} attempt(s), ${(i||"").toString()}`),!1}}A();A();A();var Qi;(D=>{function t(L){return L&&typeof L=="object"&&typeof L[Symbol.iterator]=="function"}D.is=t;let e=Object.freeze([]);function n(){return e}D.empty=n;function*i(L){yield L}D.single=i;function r(L){return t(L)?L:i(L)}D.wrap=r;function o(L){return L||e}D.from=o;function f(L){return!L||L[Symbol.iterator]().next().done===!0}D.isEmpty=f;function g(L){return L[Symbol.iterator]().next().value}D.first=g;function S(L,U){for(let M of L)if(U(M))return!0;return!1}D.some=S;function _(L,U){for(let M of L)if(U(M))return M}D.find=_;function*u(L,U){for(let M of L)U(M)&&(yield M)}D.filter=u;function*s(L,U){let M=0;for(let R of L)yield U(R,M++)}D.map=s;function*b(...L){for(let U of L)for(let M of U)yield M}D.concat=b;function C(L,U,M){let R=M;for(let O of L)R=U(R,O);return R}D.reduce=C;function*I(L,U,M=L.length){for(U<0&&(U+=L.length),M<0?M+=L.length:M>L.length&&(M=L.length);U<M;U++)yield L[U]}D.slice=I;function T(L,U=Number.POSITIVE_INFINITY){let M=[];if(U===0)return[M,L];let R=L[Symbol.iterator]();for(let O=0;O<U;O++){let j=R.next();if(j.done)return[M,D.empty()];M.push(j.value)}return[M,{[Symbol.iterator](){return R}}]}D.consume=T})(Qi||(Qi={}));var Ts;function gh(t){return Ts==null||Ts.push(t),t}function er(t){if(Qi.is(t)){for(let e of t)if(e)try{e.dispose()}catch(n){console.warn(`dispose() failed for ${e}`,n)}return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}var Zi=class Zi{constructor(...e){this._toDispose=new Set;this._isDisposed=!1;e.forEach(n=>this.add(n)),gh(this)}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{er(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?Zi.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}};Zi.DISABLE_DISPOSED_WARNING=!1;var au=Zi;var lu=class{constructor(){this._store=new Map;this._isDisposed=!1}dispose(){this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{er(this._store.values())}finally{this._store.clear()}}has(e){return this._store.has(e)}get(e){return this._store.get(e)}set(e,n,i=!1){var r;this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||(r=this._store.get(e))==null||r.dispose(),this._store.set(e,n)}deleteAndDispose(e){var n;(n=this._store.get(e))==null||n.dispose(),this._store.delete(e)}[Symbol.iterator](){return this._store[Symbol.iterator]()}};A();var cr=Kt(Mu()),Pu="1.1.1",Qh="qgrid";function Ru(t,e,n,i){if(t.source==="cdn"||!n||t.moduleName!==Qh)return!1;try{if(!e.startsWith("^")&&cr.compare(e,Pu)<=0||e.startsWith("^")&&cr.satisfies(Pu,e))return!1}catch(r){return!1}i({moduleName:t.moduleName,moduleVersion:e})}A();var dr=new Map;function Zh(t){return t.filter(e=>!(dr.has(e.moduleName)&&dr.get(e.moduleName)===e.scriptUri))}function ep(t){return t.filter(e=>e.scriptUri?(ge(`Source for IPyWidget ${e.moduleName} found in ${e.source} @ ${e.scriptUri}.`),!0):(console.error(`Source for IPyWidget ${e.moduleName} not found.`),!1)).map(e=>e)}function Ys(){let t=window.requirejs;if(!t)throw window.console.error("Requirejs not found"),new Error("Requirejs not found");return t}function tp(t,e){let n=Ys(),i={paths:{}};t&&(i.baseUrl=t),Gs(),e.forEach(r=>{ge(`Registering IPyWidget ${r.moduleName} found in ${r.scriptUri}.`),dr.set(r.moduleName,r.scriptUri);let o=r.scriptUri.toLowerCase().endsWith(".js")?r.scriptUri.substring(0,r.scriptUri.length-3):r.scriptUri;i.paths[r.moduleName]=o}),n.config(i)}function Cu(t){dr.delete(t),Ys().undef(t)}function Du(t,e){let n=Zh(e),i=ep(n);tp(t,i)}function Gs(){Gs.invoked||(Gs.invoked=!0,Ys().config({map:{"*":{"jupyter-js-widgets":"@jupyter-widgets/base"}}}))}var fr=class extends Au.EventEmitter{constructor(n,i=Ds()){super();this.postOffice=n;this.widgetsRegisteredInRequireJs=new Set;this.disposables=[];this.widgetSourceRequests=new Map;this.registeredWidgetSources=new Map;this.widgetModulesFailedToLoad=new Set;this.isOnline=it();this.widgetsCanLoadFromCDN=!1;this.timeoutWaitingForScriptToLoad=6e4;this.isOnline.promise.catch(kt),i.then(r=>{this.isOnline.resolve(r),this.postOffice.sendMessage("IPyWidgets_IsOnline",{isOnline:r})}).catch(r=>rt(`Failed to check if online ${r.toString()}`)),n.addHandler({handleMessage:(r,o)=>{if(r==="update_settings"){let f=JSON.parse(o);this.widgetsCanLoadFromCDN=f.widgetScriptSources.length>0}else if(r==="IPyWidgets_WidgetScriptSource_Response")this.registerScriptSourceInRequirejs(o);else if(r==="IPyWidgets_AttemptToDownloadFailedWidgetsAgain")Array.from(this.widgetModulesFailedToLoad.values()).forEach(f=>{this.clearWidgetModuleScriptSource(f)}),this.widgetModulesFailedToLoad.clear();else if(r==="IPyWidgets_BaseUrl_Response"){let f=o;f&&(this.baseUrl=f,document.body.dataset.baseUrl=f.endsWith("/")?f:`${f}/`,ge(`data-base-url set to ${f}`))}else r==="IPyWidgets_kernelOptions"?(ge("Received IPyWidgets_kernelOptions in ScriptManager"),this.previousKernelOptions&&!(0,Tu.default)(this.previousKernelOptions,o)&&(ge("Received IPyWidgets_kernelOptions in ScriptManager with new kernel options"),this.previousKernelOptions=o,this.clear())):r==="IPyWidgets_onKernelChanged"&&(ge("Received IPyWidgets_onKernelChanged in ScriptManager"),this.clear());return!0}})}dispose(){er(this.disposables)}getScriptLoader(){return{widgetsRegisteredInRequireJs:this.widgetsRegisteredInRequireJs,errorHandler:(n,i,r,o)=>this.handleLoadError(n,i,r,o).catch(()=>{}),loadWidgetScript:(n,i)=>this.loadWidgetScript(n,i),successHandler:(n,i,r)=>this.handleLoadSuccess(n,i,r)}}onWidgetLoadSuccess(n){return this.on("onWidgetLoadSuccess",n)}onWidgetLoadError(n){return this.on("onWidgetLoadError",n)}onWidgetVersionNotSupported(n){return this.on("onWidgetVersionNotSupported",n)}async loadWidgetScript(n,i){ge(`Fetch IPyWidget source for ${n}`);let r=await this.isOnline.promise,o=this.widgetSourceRequests.get(n),f=`${n}:${i}:${Date.now().toString()}`;if(r&&o&&!o.explicitlyRequested&&o.source!=="cdn"&&(o=void 0),!o){o={deferred:it(),timer:void 0,explicitlyRequested:!0,requestId:f};let g=this.timedoutWaitingForWidgetsToGetLoaded?5e3:this.timeoutWaitingForScriptToLoad;o.timer=setTimeout(()=>{o&&!o.deferred.resolved&&(console.error(`Timeout waiting to get widget source for ${n}, ${i}`),this.handleLoadError("<class>",n,i,new Error(`Timeout getting source for ${n}:${i}`),!0).catch(()=>{}),o.deferred.resolve(),this.timedoutWaitingForWidgetsToGetLoaded=!0)},g),this.disposables.push({dispose(){try{o!=null&&o.timer&&clearTimeout(o.timer)}catch(S){}}}),this.widgetSourceRequests.set(n,o)}this.postOffice.sendMessage("IPyWidgets_WidgetScriptSourceRequest",{moduleName:n,moduleVersion:i,requestId:f});try{await o.deferred.promise;let g=this.registeredWidgetSources.get(n);g&&Ru(g,i,this.widgetsCanLoadFromCDN,S=>this.emit("onWidgetVersionNotSupported",{moduleName:S.moduleName,moduleVersion:S.moduleVersion}))}catch(g){console.error(`Failed to load Widget Script from Extension for ${n}, ${i}`,g)}}handleLoadSuccess(n,i,r){this.emit("onWidgetLoadSuccess",{className:n,moduleName:i,moduleVersion:r})}clearWidgetModuleScriptSource(n){this.widgetSourceRequests.delete(n),this.registeredWidgetSources.delete(n),this.widgetsRegisteredInRequireJs.delete(n),Cu(n)}clear(){this.widgetSourceRequests.clear(),this.registeredWidgetSources.clear()}registerScriptSourcesInRequirejs(n){ge(`Received IPyWidget scripts ${JSON.stringify(n||[])}`),!(!Array.isArray(n)||n.length===0)&&n.forEach(i=>{let r=this.registeredWidgetSources.get(i.moduleName);(!r||r.source&&r.source!=="cdn")&&(Du(this.baseUrl,[i]),this.registeredWidgetSources.set(i.moduleName,i),this.widgetsRegisteredInRequireJs.add(i.moduleName));let o=this.widgetSourceRequests.get(i.moduleName);o||(o={deferred:it(),timer:void 0,source:i.source,requestId:i.requestId||"",explicitlyRequested:!1},this.widgetSourceRequests.set(i.moduleName,o)),i.requestId&&i.requestId===o.requestId?(o.source=i.source,o.deferred.resolve()):i.requestId||(o.source=i.source,o.deferred.resolve()),o.deferred.completed&&o.timer!==void 0&&clearTimeout(o.timer)})}registerScriptSourceInRequirejs(n){if(!n){ge("No widget script source");return}this.registerScriptSourcesInRequirejs([n])}async handleLoadError(n,i,r,o,f=!1){this.widgetModulesFailedToLoad.add(i);let g=await Ds();this.emit("onWidgetLoadError",{className:n,moduleName:i,moduleVersion:r,error:o,timedout:f,isOnline:g})}};var Xs=class{constructor(e,n,i){this.postOffice=e;this.scriptManager=new fr(e),this.scriptManager.onWidgetLoadError(this.handleLoadError.bind(this)),this.scriptManager.onWidgetLoadSuccess(this.handleLoadSuccess.bind(this)),this.scriptManager.onWidgetVersionNotSupported(this.handleUnsupportedWidgetVersion.bind(this)),this.widgetManager=new Qt(void 0,e,this.scriptManager.getScriptLoader(),n,i),e.addHandler({handleMessage:(r,o)=>!0})}dispose(){this.widgetManager.dispose()}async handleLoadError(e){this.postOffice.sendMessage("ipywidget_load_failure",{className:e.className,moduleName:e.moduleName,moduleVersion:e.moduleVersion,isOnline:e.isOnline,timedout:e.timedout,error:JSON.stringify(e.error)}),console.error(`Failed to to Widget load class ${e.moduleName}${e.className}`,e)}handleUnsupportedWidgetVersion(e){this.postOffice.sendMessage("ipywidget_widget_version_not_supported",{moduleName:e.moduleName,moduleVersion:e.moduleVersion})}handleLoadSuccess(e){this.postOffice.sendMessage("ipywidget_load_success",{className:e.className,moduleName:e.moduleName,moduleVersion:e.moduleVersion})}},np=new Map,vt=new Map,hr=[];async function ip(t,e,n,i){try{hr.push({outputId:t.id,container:n}),sp(t.id,e,n,i)}catch(r){throw i(`Error: render output ${t.id} failed ${r.toString()}`,"error"),r}}function rp(t){t&&(hr=hr.filter(e=>!(t in e)))}function sp(t,e,n,i){var o,f,g,S;if(i(`Rendering IPyWidget ${t} with model ${e.model_id} in ${n.id}`),vt.has(t)&&((o=vt.get(t))==null?void 0:o.container)===n&&((f=vt.get(t))==null?void 0:f.modelId)===e.model_id)return i("already rendering");let r=0;if(vt.has(t)){r=100,i("Widget was already rendering for another container, dispose that widget so we can re-render it");try{(S=(g=vt.get(t))==null?void 0:g.widget)==null||S.dispose()}catch(_){}}if(n.firstChild)try{n.removeChild(n.firstChild)}catch(_){}new Promise(_=>setTimeout(_,r)).then(()=>{let _=document.createElement("div");_.className="cell-output cell-output",typeof e._vsc_test_cellIndex=="number"&&(n.className+=` vsc-test-cell-index-${e._vsc_test_cellIndex}`);let u=document.createElement("div");u.className="cell-output-ipywidget-background",n.appendChild(u),u.appendChild(_),vt.set(t,{container:n,modelId:e.model_id}),op(e,u).then(s=>{var I;if(((I=vt.get(t))==null?void 0:I.container)!==n){i("Widget container changed, hence disposing the widget"),s==null||s.dispose();return}vt.has(t)&&(vt.get(t).widget=s);let b={dispose:()=>{vt.delete(t),s==null||s.dispose()}};np.set(t,b);let C=hr.find(T=>T.outputId===t);C&&(C.success=!0)}).catch(s=>{i(`Error: Failed to render ${t}, ${s.toString()}`,"error")})}).catch(_=>{i(`Error: Failed to render ${t}, ${_.toString()}`,"error")})}var jn;async function Lu(){if(!jn){let e=function(n){function i(){let r=Qt.instance;if(r){let o=r.dispose.bind(r);r.dispose=()=>(jn=void 0,o()),n&&(n(r),n=void 0),jn=Promise.resolve(r)}}i(),Qt.onDidChangeInstance(i)};var t=e;jn=new Promise(n=>e(n))}return jn}async function op(t,e){try{let n=await Lu();return await(n==null?void 0:n.renderWidget(t,e))}catch(n){rt(`Error: Failed to render widget ${t.model_id}, ${n.toString()}`)}}async function ap(t){await new Promise(e=>{let n=()=>{if(window.vscIPyWidgets)return e();setTimeout(n,1e3)};setTimeout(n,1e3)});try{ju(t);let e=await Lu(),n={metadata:{get:i=>t}};return await(e==null?void 0:e.restoreWidgets(n,{loadKernel:!1,loadNotebook:!0}))}catch(e){rt(`Error: Failed to render widget state ${t}, ${e.toString()}`)}}var Ou=!1;function lp(t,e,n){if(Ou){rt("Error: WidgetManager already initialized");return}try{let i=new xn(e),r=new Xs(i,t,n);window._mgr=r,Ou=!0}catch(i){rt(`Error: Exception initializing WidgetManager, ${i.toString()}`)}}var Qs;window.ipywidgetsKernel={renderOutput:ip,disposeOutput:rp,restoreWidgets:ap,initialize:()=>{ku(Qs)}};function ku(t){t.postKernelMessage({type:"IPyWidgets_Request_Widget_Version"})}function ju(t){ge("IPyWidget kernel initializing...");let e=window.vscIPyWidgets.WidgetManager;if(!e)throw new Error("JupyterLabWidgetManager not defined. Please include/check ipywidgets.js file");lp(e,Qs,t)}var Nu=!1;function Bv(t){Qs=t,up(t),ge(`Attempt Initialize IpyWidgets kernel.js : ${JSON.stringify(t)}`),t.onDidReceiveKernelMessage(async e=>{if(typeof e=="object"&&e&&"type"in e&&e.type==="IPyWidgets_Reply_Widget_Version"&&"payload"in e&&typeof e.payload=="number"){if(Nu)return;Nu=!0;try{let n=e.payload;ge(`Loading IPyWidget Version ${n}`);let i=new Promise(g=>{let S=()=>{if(window.vscIPyWidgets7)return g();setTimeout(S,500)};setTimeout(S,500)}),r=new Promise(g=>{let S=()=>{if(window.vscIPyWidgets8)return g();setTimeout(S,500)};setTimeout(S,500)});await Promise.all([i,r]),n===7?((()=>{try{window.vscIPyWidgets8.unload()}catch(g){}})(),window.vscIPyWidgets7.load(),ge("Loaded IPYWidgets 7.x from Kernel")):n===8&&((()=>{try{window.vscIPyWidgets7.unload()}catch(g){}})(),window.vscIPyWidgets8.load(),ge("Loaded IPYWidgets 8.x from Kernel")),ju()}catch(n){rt(`Failed to load IPyWidget Version ${e.payload}, ${n}`)}}}),ku(t)}function up(t){t.postKernelMessage&&(window.alert=e=>{var n;throw console.log("window.alert",e),(n=t.postKernelMessage)==null||n.call(t,{type:"IPyWidgets_Window_Alert",message:e.toString()}),new Error("window.alert not supported in VS Code Renderers")},window.open=e=>{var n;if(console.log("window.open",e),e)throw(n=t.postKernelMessage)==null||n.call(t,{type:"IPyWidgets_Window_Open",url:e.toString()}),new Error("window.open not supported in VS Code Renderers");return null})}export{Bv as activate,rp as disposeOutput,ip as renderOutput};
