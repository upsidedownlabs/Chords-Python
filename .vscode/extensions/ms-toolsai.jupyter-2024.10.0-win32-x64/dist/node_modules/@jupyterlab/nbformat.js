var we=Object.create;var J=Object.defineProperty;var Me=Object.getOwnPropertyDescriptor;var ye=Object.getOwnPropertyNames;var Pe=Object.getPrototypeOf,Se=Object.prototype.hasOwnProperty;var ne=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),Oe=(r,t)=>{for(var l in t)J(r,l,{get:t[l],enumerable:!0})},ie=(r,t,l,g)=>{if(t&&typeof t=="object"||typeof t=="function")for(let _ of ye(t))!Se.call(r,_)&&_!==l&&J(r,_,{get:()=>t[_],enumerable:!(g=Me(t,_))||g.enumerable});return r};var je=(r,t,l)=>(l=r!=null?we(Pe(r)):{},ie(t||!r||!r.__esModule?J(l,"default",{value:r,enumerable:!0}):l,r)),be=r=>ie(J({},"__esModule",{value:!0}),r);var le=ne((K,te)=>{(function(r,t){typeof K=="object"&&typeof te<"u"?t(K):typeof define=="function"&&define.amd?define(["exports"],t):(r=typeof globalThis<"u"?globalThis:r||self,t(r.lumino_algorithm={}))})(K,function(r){"use strict";r.ArrayExt=void 0,function(f){function d(u,o,n=0,e=-1){let i=u.length;if(i===0)return-1;n<0?n=Math.max(0,n+i):n=Math.min(n,i-1),e<0?e=Math.max(0,e+i):e=Math.min(e,i-1);let c;e<n?c=e+1+(i-n):c=e-n+1;for(let h=0;h<c;++h){let j=(n+h)%i;if(u[j]===o)return j}return-1}f.firstIndexOf=d;function s(u,o,n=-1,e=0){let i=u.length;if(i===0)return-1;n<0?n=Math.max(0,n+i):n=Math.min(n,i-1),e<0?e=Math.max(0,e+i):e=Math.min(e,i-1);let c;n<e?c=n+1+(i-e):c=n-e+1;for(let h=0;h<c;++h){let j=(n-h+i)%i;if(u[j]===o)return j}return-1}f.lastIndexOf=s;function a(u,o,n=0,e=-1){let i=u.length;if(i===0)return-1;n<0?n=Math.max(0,n+i):n=Math.min(n,i-1),e<0?e=Math.max(0,e+i):e=Math.min(e,i-1);let c;e<n?c=e+1+(i-n):c=e-n+1;for(let h=0;h<c;++h){let j=(n+h)%i;if(o(u[j],j))return j}return-1}f.findFirstIndex=a;function O(u,o,n=-1,e=0){let i=u.length;if(i===0)return-1;n<0?n=Math.max(0,n+i):n=Math.min(n,i-1),e<0?e=Math.max(0,e+i):e=Math.min(e,i-1);let c;n<e?c=n+1+(i-e):c=n-e+1;for(let h=0;h<c;++h){let j=(n-h+i)%i;if(o(u[j],j))return j}return-1}f.findLastIndex=O;function q(u,o,n=0,e=-1){let i=a(u,o,n,e);return i!==-1?u[i]:void 0}f.findFirstValue=q;function y(u,o,n=-1,e=0){let i=O(u,o,n,e);return i!==-1?u[i]:void 0}f.findLastValue=y;function P(u,o,n,e=0,i=-1){let c=u.length;if(c===0)return 0;e<0?e=Math.max(0,e+c):e=Math.min(e,c-1),i<0?i=Math.max(0,i+c):i=Math.min(i,c-1);let h=e,j=i-e+1;for(;j>0;){let A=j>>1,G=h+A;n(u[G],o)<0?(h=G+1,j-=A+1):j=A}return h}f.lowerBound=P;function x(u,o,n,e=0,i=-1){let c=u.length;if(c===0)return 0;e<0?e=Math.max(0,e+c):e=Math.min(e,c-1),i<0?i=Math.max(0,i+c):i=Math.min(i,c-1);let h=e,j=i-e+1;for(;j>0;){let A=j>>1,G=h+A;n(u[G],o)>0?j=A:(h=G+1,j-=A+1)}return h}f.upperBound=x;function R(u,o,n){if(u===o)return!0;if(u.length!==o.length)return!1;for(let e=0,i=u.length;e<i;++e)if(n?!n(u[e],o[e]):u[e]!==o[e])return!1;return!0}f.shallowEqual=R;function $(u,o={}){let{start:n,stop:e,step:i}=o;if(i===void 0&&(i=1),i===0)throw new Error("Slice `step` cannot be zero.");let c=u.length;n===void 0?n=i<0?c-1:0:n<0?n=Math.max(n+c,i<0?-1:0):n>=c&&(n=i<0?c-1:c),e===void 0?e=i<0?-1:c:e<0?e=Math.max(e+c,i<0?-1:0):e>=c&&(e=i<0?c-1:c);let h;i<0&&e>=n||i>0&&n>=e?h=0:i<0?h=Math.floor((e-n+1)/i+1):h=Math.floor((e-n-1)/i+1);let j=[];for(let A=0;A<h;++A)j[A]=u[n+A*i];return j}f.slice=$;function k(u,o,n){let e=u.length;if(e<=1||(o<0?o=Math.max(0,o+e):o=Math.min(o,e-1),n<0?n=Math.max(0,n+e):n=Math.min(n,e-1),o===n))return;let i=u[o],c=o<n?1:-1;for(let h=o;h!==n;h+=c)u[h]=u[h+c];u[n]=i}f.move=k;function L(u,o=0,n=-1){let e=u.length;if(!(e<=1))for(o<0?o=Math.max(0,o+e):o=Math.min(o,e-1),n<0?n=Math.max(0,n+e):n=Math.min(n,e-1);o<n;){let i=u[o],c=u[n];u[o++]=c,u[n--]=i}}f.reverse=L;function U(u,o,n=0,e=-1){let i=u.length;if(i<=1||(n<0?n=Math.max(0,n+i):n=Math.min(n,i-1),e<0?e=Math.max(0,e+i):e=Math.min(e,i-1),n>=e))return;let c=e-n+1;if(o>0?o=o%c:o<0&&(o=(o%c+c)%c),o===0)return;let h=n+o;L(u,n,h-1),L(u,h,e),L(u,n,e)}f.rotate=U;function N(u,o,n=0,e=-1){let i=u.length;if(i===0)return;n<0?n=Math.max(0,n+i):n=Math.min(n,i-1),e<0?e=Math.max(0,e+i):e=Math.min(e,i-1);let c;e<n?c=e+1+(i-n):c=e-n+1;for(let h=0;h<c;++h)u[(n+h)%i]=o}f.fill=N;function he(u,o,n){let e=u.length;o<0?o=Math.max(0,o+e):o=Math.min(o,e);for(let i=e;i>o;--i)u[i]=u[i-1];u[o]=n}f.insert=he;function E(u,o){let n=u.length;if(o<0&&(o+=n),o<0||o>=n)return;let e=u[o];for(let i=o+1;i<n;++i)u[i-1]=u[i];return u.length=n-1,e}f.removeAt=E;function de(u,o,n=0,e=-1){let i=d(u,o,n,e);return i!==-1&&E(u,i),i}f.removeFirstOf=de;function ge(u,o,n=-1,e=0){let i=s(u,o,n,e);return i!==-1&&E(u,i),i}f.removeLastOf=ge;function me(u,o,n=0,e=-1){let i=u.length;if(i===0)return 0;n<0?n=Math.max(0,n+i):n=Math.min(n,i-1),e<0?e=Math.max(0,e+i):e=Math.min(e,i-1);let c=0;for(let h=0;h<i;++h)n<=e&&h>=n&&h<=e&&u[h]===o||e<n&&(h<=e||h>=n)&&u[h]===o?c++:c>0&&(u[h-c]=u[h]);return c>0&&(u.length=i-c),c}f.removeAllOf=me;function ve(u,o,n=0,e=-1){let i,c=a(u,o,n,e);return c!==-1&&(i=E(u,c)),{index:c,value:i}}f.removeFirstWhere=ve;function pe(u,o,n=-1,e=0){let i,c=O(u,o,n,e);return c!==-1&&(i=E(u,c)),{index:c,value:i}}f.removeLastWhere=pe;function _e(u,o,n=0,e=-1){let i=u.length;if(i===0)return 0;n<0?n=Math.max(0,n+i):n=Math.min(n,i-1),e<0?e=Math.max(0,e+i):e=Math.min(e,i-1);let c=0;for(let h=0;h<i;++h)n<=e&&h>=n&&h<=e&&o(u[h],h)||e<n&&(h<=e||h>=n)&&o(u[h],h)?c++:c>0&&(u[h-c]=u[h]);return c>0&&(u.length=i-c),c}f.removeAllWhere=_e}(r.ArrayExt||(r.ArrayExt={}));function*t(...f){for(let d of f)yield*d}function*l(){}function*g(f,d=0){for(let s of f)yield[d++,s]}function*_(f,d){let s=0;for(let a of f)d(a,s++)&&(yield a)}function v(f,d){let s=0;for(let a of f)if(d(a,s++))return a}function S(f,d){let s=0;for(let a of f)if(d(a,s++))return s-1;return-1}function w(f,d){let s;for(let a of f){if(s===void 0){s=a;continue}d(a,s)<0&&(s=a)}return s}function V(f,d){let s;for(let a of f){if(s===void 0){s=a;continue}d(a,s)>0&&(s=a)}return s}function D(f,d){let s=!0,a,O;for(let q of f)s?(a=q,O=q,s=!1):d(q,a)<0?a=q:d(q,O)>0&&(O=q);return s?void 0:[a,O]}function m(f){return Array.from(f)}function p(f){let d={};for(let[s,a]of f)d[s]=a;return d}function M(f,d){let s=0;for(let a of f)if(d(a,s++)===!1)return}function b(f,d){let s=0;for(let a of f)if(d(a,s++)===!1)return!1;return!0}function C(f,d){let s=0;for(let a of f)if(d(a,s++))return!0;return!1}function*F(f,d){let s=0;for(let a of f)yield d(a,s++)}function*I(f,d,s){d===void 0?(d=f,f=0,s=1):s===void 0&&(s=1);let a=z.rangeLength(f,d,s);for(let O=0;O<a;O++)yield f+s*O}var z;(function(f){function d(s,a,O){return O===0?1/0:s>a&&O>0||s<a&&O<0?0:Math.ceil((a-s)/O)}f.rangeLength=d})(z||(z={}));function B(f,d,s){let a=f[Symbol.iterator](),O=0,q=a.next();if(q.done&&s===void 0)throw new TypeError("Reduce of empty iterable with no initial value.");if(q.done)return s;let y=a.next();if(y.done&&s===void 0)return q.value;if(y.done)return d(s,q.value,O++);let P;s===void 0?P=d(q.value,y.value,O++):P=d(d(s,q.value,O++),y.value,O++);let x;for(;!(x=a.next()).done;)P=d(P,x.value,O++);return P}function*Q(f,d){for(;0<d--;)yield f}function*H(f){yield f}function*fe(f){if(typeof f.retro=="function")yield*f.retro();else for(let d=f.length-1;d>-1;d--)yield f[d]}function oe(f){let d=[],s=new Set,a=new Map;for(let y of f)O(y);for(let[y]of a)q(y);return d;function O(y){let[P,x]=y,R=a.get(x);R?R.push(P):a.set(x,[P])}function q(y){if(s.has(y))return;s.add(y);let P=a.get(y);if(P)for(let x of P)q(x);d.push(y)}}function*ce(f,d){let s=0;for(let a of f)s++%d===0&&(yield a)}r.StringExt=void 0,function(f){function d(y,P,x=0){let R=new Array(P.length);for(let $=0,k=x,L=P.length;$<L;++$,++k){if(k=y.indexOf(P[$],k),k===-1)return null;R[$]=k}return R}f.findIndices=d;function s(y,P,x=0){let R=d(y,P,x);if(!R)return null;let $=0;for(let k=0,L=R.length;k<L;++k){let U=R[k]-x;$+=U*U}return{score:$,indices:R}}f.matchSumOfSquares=s;function a(y,P,x=0){let R=d(y,P,x);if(!R)return null;let $=0,k=x-1;for(let L=0,U=R.length;L<U;++L){let N=R[L];$+=N-k-1,k=N}return{score:$,indices:R}}f.matchSumOfDeltas=a;function O(y,P,x){let R=[],$=0,k=0,L=P.length;for(;$<L;){let U=P[$],N=P[$];for(;++$<L&&P[$]===N+1;)N++;k<U&&R.push(y.slice(k,U)),U<N+1&&R.push(x(y.slice(U,N+1))),k=N+1}return k<y.length&&R.push(y.slice(k)),R}f.highlight=O;function q(y,P){return y<P?-1:y>P?1:0}f.cmp=q}(r.StringExt||(r.StringExt={}));function*se(f,d){if(d<1)return;let s=f[Symbol.iterator](),a;for(;0<d--&&!(a=s.next()).done;)yield a.value}function*ae(...f){let d=f.map(a=>a[Symbol.iterator]()),s=d.map(a=>a.next());for(;b(s,a=>!a.done);s=d.map(a=>a.next()))yield s.map(a=>a.value)}r.chain=t,r.each=M,r.empty=l,r.enumerate=g,r.every=b,r.filter=_,r.find=v,r.findIndex=S,r.map=F,r.max=V,r.min=w,r.minmax=D,r.once=H,r.range=I,r.reduce=B,r.repeat=Q,r.retro=fe,r.some=C,r.stride=ce,r.take=se,r.toArray=m,r.toObject=p,r.topologicSort=oe,r.zip=ae})});var re=ne(T=>{"use strict";var Re=le();T.JSONExt=void 0;(function(r){r.emptyObject=Object.freeze({}),r.emptyArray=Object.freeze([]);function t(m){return m===null||typeof m=="boolean"||typeof m=="number"||typeof m=="string"}r.isPrimitive=t;function l(m){return Array.isArray(m)}r.isArray=l;function g(m){return!t(m)&&!l(m)}r.isObject=g;function _(m,p){if(m===p)return!0;if(t(m)||t(p))return!1;let M=l(m),b=l(p);return M!==b?!1:M&&b?S(m,p):w(m,p)}r.deepEqual=_;function v(m){return t(m)?m:l(m)?V(m):D(m)}r.deepCopy=v;function S(m,p){if(m===p)return!0;if(m.length!==p.length)return!1;for(let M=0,b=m.length;M<b;++M)if(!_(m[M],p[M]))return!1;return!0}function w(m,p){if(m===p)return!0;for(let M in m)if(m[M]!==void 0&&!(M in p))return!1;for(let M in p)if(p[M]!==void 0&&!(M in m))return!1;for(let M in m){let b=m[M],C=p[M];if(!(b===void 0&&C===void 0)&&(b===void 0||C===void 0||!_(b,C)))return!1}return!0}function V(m){let p=new Array(m.length);for(let M=0,b=m.length;M<b;++M)p[M]=v(m[M]);return p}function D(m){let p={};for(let M in m){let b=m[M];b!==void 0&&(p[M]=v(b))}return p}})(T.JSONExt||(T.JSONExt={}));var X=class{constructor(){this._types=[],this._values=[]}types(){return this._types.slice()}hasData(t){return this._types.indexOf(t)!==-1}getData(t){let l=this._types.indexOf(t);return l!==-1?this._values[l]:void 0}setData(t,l){this.clearData(t),this._types.push(t),this._values.push(l)}clearData(t){let l=this._types.indexOf(t);l!==-1&&(this._types.splice(l,1),this._values.splice(l,1))}clear(){this._types.length=0,this._values.length=0}},Y=class{constructor(t={}){this._application=null,this._validatePlugin=()=>!0,this._plugins=new Map,this._services=new Map,t.validatePlugin&&(console.info("Plugins may be rejected by the custom validation plugin method."),this._validatePlugin=t.validatePlugin)}get application(){return this._application}set application(t){if(this._application!==null)throw Error("PluginRegistry.application is already set. It cannot be overridden.");this._application=t}get deferredPlugins(){return Array.from(this._plugins).filter(([t,l])=>l.autoStart==="defer").map(([t,l])=>t)}getPluginDescription(t){var l,g;return(g=(l=this._plugins.get(t))===null||l===void 0?void 0:l.description)!==null&&g!==void 0?g:""}hasPlugin(t){return this._plugins.has(t)}isPluginActivated(t){var l,g;return(g=(l=this._plugins.get(t))===null||l===void 0?void 0:l.activated)!==null&&g!==void 0?g:!1}listPlugins(){return Array.from(this._plugins.keys())}registerPlugin(t){if(this._plugins.has(t.id))throw new TypeError(`Plugin '${t.id}' is already registered.`);if(!this._validatePlugin(t))throw new Error(`Plugin '${t.id}' is not valid.`);let l=W.createPluginData(t);W.ensureNoCycle(l,this._plugins,this._services),l.provides&&this._services.set(l.provides,l.id),this._plugins.set(l.id,l)}registerPlugins(t){for(let l of t)this.registerPlugin(l)}deregisterPlugin(t,l){let g=this._plugins.get(t);if(g){if(g.activated&&!l)throw new Error(`Plugin '${t}' is still active.`);this._plugins.delete(t)}}async activatePlugin(t){let l=this._plugins.get(t);if(!l)throw new ReferenceError(`Plugin '${t}' is not registered.`);if(l.activated)return;if(l.promise)return l.promise;let g=l.requires.map(v=>this.resolveRequiredService(v)),_=l.optional.map(v=>this.resolveOptionalService(v));return l.promise=Promise.all([...g,..._]).then(v=>l.activate.apply(void 0,[this.application,...v])).then(v=>{l.service=v,l.activated=!0,l.promise=null}).catch(v=>{throw l.promise=null,v}),l.promise}async activatePlugins(t,l={}){switch(t){case"defer":{let g=this.deferredPlugins.filter(_=>this._plugins.get(_).autoStart).map(_=>this.activatePlugin(_));await Promise.all(g);break}case"startUp":{let _=W.collectStartupPlugins(this._plugins,l).map(async v=>{try{return await this.activatePlugin(v)}catch(S){console.error(`Plugin '${v}' failed to activate.`,S)}});await Promise.all(_);break}}}async deactivatePlugin(t){let l=this._plugins.get(t);if(!l)throw new ReferenceError(`Plugin '${t}' is not registered.`);if(!l.activated)return[];if(!l.deactivate)throw new TypeError(`Plugin '${t}'#deactivate() method missing`);let g=W.findDependents(t,this._plugins,this._services),_=g.map(v=>this._plugins.get(v));for(let v of _)if(!v.deactivate)throw new TypeError(`Plugin ${v.id}#deactivate() method missing (depends on ${t})`);for(let v of _){let S=[...v.requires,...v.optional].map(w=>{let V=this._services.get(w);return V?this._plugins.get(V).service:null});await v.deactivate(this.application,...S),v.service=null,v.activated=!1}return g.pop(),g}async resolveRequiredService(t){let l=this._services.get(t);if(!l)throw new TypeError(`No provider for: ${t.name}.`);let g=this._plugins.get(l);return g.activated||await this.activatePlugin(l),g.service}async resolveOptionalService(t){let l=this._services.get(t);if(!l)return null;let g=this._plugins.get(l);if(!g.activated)try{await this.activatePlugin(l)}catch(_){return console.error(_),null}return g.service}},W;(function(r){class t{constructor(w){var V,D,m,p;this._activated=!1,this._promise=null,this._service=null,this.id=w.id,this.description=(V=w.description)!==null&&V!==void 0?V:"",this.activate=w.activate,this.deactivate=(D=w.deactivate)!==null&&D!==void 0?D:null,this.provides=(m=w.provides)!==null&&m!==void 0?m:null,this.autoStart=(p=w.autoStart)!==null&&p!==void 0?p:!1,this.requires=w.requires?w.requires.slice():[],this.optional=w.optional?w.optional.slice():[]}get activated(){return this._activated}set activated(w){this._activated=w}get service(){return this._service}set service(w){this._service=w}get promise(){return this._promise}set promise(w){this._promise=w}}function l(S){return new t(S)}r.createPluginData=l;function g(S,w,V){let D=[...S.requires,...S.optional],m=M=>{if(M===S.provides)return!0;let b=V.get(M);if(!b)return!1;let C=w.get(b),F=[...C.requires,...C.optional];return F.length===0?!1:(p.push(b),F.some(m)?!0:(p.pop(),!1))};if(!S.provides||D.length===0)return;let p=[S.id];if(D.some(m))throw new ReferenceError(`Cycle detected: ${p.join(" -> ")}.`)}r.ensureNoCycle=g;function _(S,w,V){let D=new Array,m=F=>{let I=w.get(F),z=[...I.requires,...I.optional];D.push(...z.reduce((B,Q)=>{let H=V.get(Q);return H&&B.push([F,H]),B},[]))};for(let F of w.keys())m(F);let p=D.filter(F=>F[1]===S),M=0;for(;p.length>M;){let F=p.length,I=new Set(p.map(z=>z[0]));for(let z of I)D.filter(B=>B[1]===z).forEach(B=>{p.includes(B)||p.push(B)});M=F}let b=Re.topologicSort(p),C=b.findIndex(F=>F===S);return C===-1?[S]:b.slice(0,C+1)}r.findDependents=_;function v(S,w){let V=new Set;for(let D of S.keys())S.get(D).autoStart===!0&&V.add(D);if(w.startPlugins)for(let D of w.startPlugins)V.add(D);if(w.ignorePlugins)for(let D of w.ignorePlugins)V.delete(D);return Array.from(V)}r.collectStartupPlugins=v})(W||(W={}));var Z=class{constructor(){this.promise=new Promise((t,l)=>{this._resolve=t,this._reject=l})}resolve(t){let l=this._resolve;l(t)}reject(t){let l=this._reject;l(t)}},ee=class{constructor(t,l){this.name=t,this.description=l??"",this._tokenStructuralPropertyT=null}};function De(r){let t=0;for(let l=0,g=r.length;l<g;++l)l%4===0&&(t=Math.random()*4294967295>>>0),r[l]=t&255,t>>>=8}T.Random=void 0;(function(r){r.getRandomValues=(()=>{let t=typeof require<"u"&&require("crypto")||null;return t&&typeof t.randomFillSync=="function"?function(g){return t.randomFillSync(g)}:t&&typeof t.randomBytes=="function"?function(g){let _=t.randomBytes(g.length);for(let v=0,S=_.length;v<S;++v)g[v]=_[v]}:De})()})(T.Random||(T.Random={}));function qe(r){let t=new Uint8Array(16),l=new Array(256);for(let g=0;g<16;++g)l[g]="0"+g.toString(16);for(let g=16;g<256;++g)l[g]=g.toString(16);return function(){return r(t),t[6]=64|t[6]&15,t[8]=128|t[8]&63,l[t[0]]+l[t[1]]+l[t[2]]+l[t[3]]+"-"+l[t[4]]+l[t[5]]+"-"+l[t[6]]+l[t[7]]+"-"+l[t[8]]+l[t[9]]+"-"+l[t[10]]+l[t[11]]+l[t[12]]+l[t[13]]+l[t[14]]+l[t[15]]}}T.UUID=void 0;(function(r){r.uuid4=qe(T.Random.getRandomValues)})(T.UUID||(T.UUID={}));T.MimeData=X;T.PluginRegistry=Y;T.PromiseDelegate=Z;T.Token=ee});var ze={};Oe(ze,{MAJOR_VERSION:()=>ke,MINOR_VERSION:()=>Ve,isCode:()=>Le,isDisplayData:()=>Ae,isDisplayUpdate:()=>Ce,isError:()=>Ne,isExecuteResult:()=>Te,isMarkdown:()=>Fe,isRaw:()=>$e,isStream:()=>Ue,validateMimeValue:()=>xe});module.exports=be(ze);var ue=je(re()),ke=4,Ve=4;function xe(r,t){let g=r==="application/json"||/^application\/.+\+json$/.test(r),_=v=>Object.prototype.toString.call(v)==="[object String]";if(Array.isArray(t)){if(g)return!1;let v=!0;return t.forEach(S=>{_(S)||(v=!1)}),v}return _(t)?!g:g?ue.JSONExt.isObject(t):!1}function $e(r){return r.cell_type==="raw"}function Fe(r){return r.cell_type==="markdown"}function Le(r){return r.cell_type==="code"}function Te(r){return r.output_type==="execute_result"}function Ae(r){return r.output_type==="display_data"}function Ce(r){return r.output_type==="update_display_data"}function Ue(r){return r.output_type==="stream"}function Ne(r){return r.output_type==="error"}0&&(module.exports={MAJOR_VERSION,MINOR_VERSION,isCode,isDisplayData,isDisplayUpdate,isError,isExecuteResult,isMarkdown,isRaw,isStream,validateMimeValue});
