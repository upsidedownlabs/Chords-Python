"use strict";var ie=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports);var oe=ie((ne,fe)=>{(function(t,i){typeof ne=="object"&&typeof fe<"u"?i(ne):typeof define=="function"&&define.amd?define(["exports"],i):(t=typeof globalThis<"u"?globalThis:t||self,i(t.lumino_algorithm={}))})(ne,function(t){"use strict";t.ArrayExt=void 0,function(u){function c(s,f,n=0,e=-1){let r=s.length;if(r===0)return-1;n<0?n=Math.max(0,n+r):n=Math.min(n,r-1),e<0?e=Math.max(0,e+r):e=Math.min(e,r-1);let o;e<n?o=e+1+(r-n):o=e-n+1;for(let g=0;g<o;++g){let V=(n+g)%r;if(s[V]===f)return V}return-1}u.firstIndexOf=c;function d(s,f,n=-1,e=0){let r=s.length;if(r===0)return-1;n<0?n=Math.max(0,n+r):n=Math.min(n,r-1),e<0?e=Math.max(0,e+r):e=Math.min(e,r-1);let o;n<e?o=n+1+(r-e):o=n-e+1;for(let g=0;g<o;++g){let V=(n-g+r)%r;if(s[V]===f)return V}return-1}u.lastIndexOf=d;function h(s,f,n=0,e=-1){let r=s.length;if(r===0)return-1;n<0?n=Math.max(0,n+r):n=Math.min(n,r-1),e<0?e=Math.max(0,e+r):e=Math.min(e,r-1);let o;e<n?o=e+1+(r-n):o=e-n+1;for(let g=0;g<o;++g){let V=(n+g)%r;if(f(s[V],V))return V}return-1}u.findFirstIndex=h;function z(s,f,n=-1,e=0){let r=s.length;if(r===0)return-1;n<0?n=Math.max(0,n+r):n=Math.min(n,r-1),e<0?e=Math.max(0,e+r):e=Math.min(e,r-1);let o;n<e?o=n+1+(r-e):o=n-e+1;for(let g=0;g<o;++g){let V=(n-g+r)%r;if(f(s[V],V))return V}return-1}u.findLastIndex=z;function C(s,f,n=0,e=-1){let r=h(s,f,n,e);return r!==-1?s[r]:void 0}u.findFirstValue=C;function R(s,f,n=-1,e=0){let r=z(s,f,n,e);return r!==-1?s[r]:void 0}u.findLastValue=R;function q(s,f,n,e=0,r=-1){let o=s.length;if(o===0)return 0;e<0?e=Math.max(0,e+o):e=Math.min(e,o-1),r<0?r=Math.max(0,r+o):r=Math.min(r,o-1);let g=e,V=r-e+1;for(;V>0;){let K=V>>1,Z=g+K;n(s[Z],f)<0?(g=Z+1,V-=K+1):V=K}return g}u.lowerBound=q;function I(s,f,n,e=0,r=-1){let o=s.length;if(o===0)return 0;e<0?e=Math.max(0,e+o):e=Math.min(e,o-1),r<0?r=Math.max(0,r+o):r=Math.min(r,o-1);let g=e,V=r-e+1;for(;V>0;){let K=V>>1,Z=g+K;n(s[Z],f)>0?V=K:(g=Z+1,V-=K+1)}return g}u.upperBound=I;function k(s,f,n){if(s===f)return!0;if(s.length!==f.length)return!1;for(let e=0,r=s.length;e<r;++e)if(n?!n(s[e],f[e]):s[e]!==f[e])return!1;return!0}u.shallowEqual=k;function W(s,f={}){let{start:n,stop:e,step:r}=f;if(r===void 0&&(r=1),r===0)throw new Error("Slice `step` cannot be zero.");let o=s.length;n===void 0?n=r<0?o-1:0:n<0?n=Math.max(n+o,r<0?-1:0):n>=o&&(n=r<0?o-1:o),e===void 0?e=r<0?-1:o:e<0?e=Math.max(e+o,r<0?-1:0):e>=o&&(e=r<0?o-1:o);let g;r<0&&e>=n||r>0&&n>=e?g=0:r<0?g=Math.floor((e-n+1)/r+1):g=Math.floor((e-n-1)/r+1);let V=[];for(let K=0;K<g;++K)V[K]=s[n+K*r];return V}u.slice=W;function E(s,f,n){let e=s.length;if(e<=1||(f<0?f=Math.max(0,f+e):f=Math.min(f,e-1),n<0?n=Math.max(0,n+e):n=Math.min(n,e-1),f===n))return;let r=s[f],o=f<n?1:-1;for(let g=f;g!==n;g+=o)s[g]=s[g+o];s[n]=r}u.move=E;function J(s,f=0,n=-1){let e=s.length;if(!(e<=1))for(f<0?f=Math.max(0,f+e):f=Math.min(f,e-1),n<0?n=Math.max(0,n+e):n=Math.min(n,e-1);f<n;){let r=s[f],o=s[n];s[f++]=o,s[n--]=r}}u.reverse=J;function T(s,f,n=0,e=-1){let r=s.length;if(r<=1||(n<0?n=Math.max(0,n+r):n=Math.min(n,r-1),e<0?e=Math.max(0,e+r):e=Math.min(e,r-1),n>=e))return;let o=e-n+1;if(f>0?f=f%o:f<0&&(f=(f%o+o)%o),f===0)return;let g=n+f;J(s,n,g-1),J(s,g,e),J(s,n,e)}u.rotate=T;function F(s,f,n=0,e=-1){let r=s.length;if(r===0)return;n<0?n=Math.max(0,n+r):n=Math.min(n,r-1),e<0?e=Math.max(0,e+r):e=Math.min(e,r-1);let o;e<n?o=e+1+(r-n):o=e-n+1;for(let g=0;g<o;++g)s[(n+g)%r]=f}u.fill=F;function ge(s,f,n){let e=s.length;f<0?f=Math.max(0,f+e):f=Math.min(f,e);for(let r=e;r>f;--r)s[r]=s[r-1];s[f]=n}u.insert=ge;function Y(s,f){let n=s.length;if(f<0&&(f+=n),f<0||f>=n)return;let e=s[f];for(let r=f+1;r<n;++r)s[r-1]=s[r];return s.length=n-1,e}u.removeAt=Y;function me(s,f,n=0,e=-1){let r=c(s,f,n,e);return r!==-1&&Y(s,r),r}u.removeFirstOf=me;function ve(s,f,n=-1,e=0){let r=d(s,f,n,e);return r!==-1&&Y(s,r),r}u.removeLastOf=ve;function pe(s,f,n=0,e=-1){let r=s.length;if(r===0)return 0;n<0?n=Math.max(0,n+r):n=Math.min(n,r-1),e<0?e=Math.max(0,e+r):e=Math.min(e,r-1);let o=0;for(let g=0;g<r;++g)n<=e&&g>=n&&g<=e&&s[g]===f||e<n&&(g<=e||g>=n)&&s[g]===f?o++:o>0&&(s[g-o]=s[g]);return o>0&&(s.length=r-o),o}u.removeAllOf=pe;function _e(s,f,n=0,e=-1){let r,o=h(s,f,n,e);return o!==-1&&(r=Y(s,o)),{index:o,value:r}}u.removeFirstWhere=_e;function ye(s,f,n=-1,e=0){let r,o=z(s,f,n,e);return o!==-1&&(r=Y(s,o)),{index:o,value:r}}u.removeLastWhere=ye;function Me(s,f,n=0,e=-1){let r=s.length;if(r===0)return 0;n<0?n=Math.max(0,n+r):n=Math.min(n,r-1),e<0?e=Math.max(0,e+r):e=Math.min(e,r-1);let o=0;for(let g=0;g<r;++g)n<=e&&g>=n&&g<=e&&f(s[g],g)||e<n&&(g<=e||g>=n)&&f(s[g],g)?o++:o>0&&(s[g-o]=s[g]);return o>0&&(s.length=r-o),o}u.removeAllWhere=Me}(t.ArrayExt||(t.ArrayExt={}));function*i(...u){for(let c of u)yield*c}function*l(){}function*m(u,c=0){for(let d of u)yield[c++,d]}function*D(u,c){let d=0;for(let h of u)c(h,d++)&&(yield h)}function w(u,c){let d=0;for(let h of u)if(c(h,d++))return h}function U(u,c){let d=0;for(let h of u)if(c(h,d++))return d-1;return-1}function a(u,c){let d;for(let h of u){if(d===void 0){d=h;continue}c(h,d)<0&&(d=h)}return d}function y(u,c){let d;for(let h of u){if(d===void 0){d=h;continue}c(h,d)>0&&(d=h)}return d}function M(u,c){let d=!0,h,z;for(let C of u)d?(h=C,z=C,d=!1):c(C,h)<0?h=C:c(C,z)>0&&(z=C);return d?void 0:[h,z]}function v(u){return Array.from(u)}function p(u){let c={};for(let[d,h]of u)c[d]=h;return c}function _(u,c){let d=0;for(let h of u)if(c(h,d++)===!1)return}function O(u,c){let d=0;for(let h of u)if(c(h,d++)===!1)return!1;return!0}function P(u,c){let d=0;for(let h of u)if(c(h,d++))return!0;return!1}function*j(u,c){let d=0;for(let h of u)yield c(h,d++)}function*S(u,c,d){c===void 0?(c=u,u=0,d=1):d===void 0&&(d=1);let h=B.rangeLength(u,c,d);for(let z=0;z<h;z++)yield u+d*z}var B;(function(u){function c(d,h,z){return z===0?1/0:d>h&&z>0||d<h&&z<0?0:Math.ceil((h-d)/z)}u.rangeLength=c})(B||(B={}));function N(u,c,d){let h=u[Symbol.iterator](),z=0,C=h.next();if(C.done&&d===void 0)throw new TypeError("Reduce of empty iterable with no initial value.");if(C.done)return d;let R=h.next();if(R.done&&d===void 0)return C.value;if(R.done)return c(d,C.value,z++);let q;d===void 0?q=c(C.value,R.value,z++):q=c(c(d,C.value,z++),R.value,z++);let I;for(;!(I=h.next()).done;)q=c(q,I.value,z++);return q}function*A(u,c){for(;0<c--;)yield u}function*x(u){yield u}function*$(u){if(typeof u.retro=="function")yield*u.retro();else for(let c=u.length-1;c>-1;c--)yield u[c]}function ee(u){let c=[],d=new Set,h=new Map;for(let R of u)z(R);for(let[R]of h)C(R);return c;function z(R){let[q,I]=R,k=h.get(I);k?k.push(q):h.set(I,[q])}function C(R){if(d.has(R))return;d.add(R);let q=h.get(R);if(q)for(let I of q)C(I);c.push(R)}}function*H(u,c){let d=0;for(let h of u)d++%c===0&&(yield h)}t.StringExt=void 0,function(u){function c(R,q,I=0){let k=new Array(q.length);for(let W=0,E=I,J=q.length;W<J;++W,++E){if(E=R.indexOf(q[W],E),E===-1)return null;k[W]=E}return k}u.findIndices=c;function d(R,q,I=0){let k=c(R,q,I);if(!k)return null;let W=0;for(let E=0,J=k.length;E<J;++E){let T=k[E]-I;W+=T*T}return{score:W,indices:k}}u.matchSumOfSquares=d;function h(R,q,I=0){let k=c(R,q,I);if(!k)return null;let W=0,E=I-1;for(let J=0,T=k.length;J<T;++J){let F=k[J];W+=F-E-1,E=F}return{score:W,indices:k}}u.matchSumOfDeltas=h;function z(R,q,I){let k=[],W=0,E=0,J=q.length;for(;W<J;){let T=q[W],F=q[W];for(;++W<J&&q[W]===F+1;)F++;E<T&&k.push(R.slice(E,T)),T<F+1&&k.push(I(R.slice(T,F+1))),E=F+1}return E<R.length&&k.push(R.slice(E)),k}u.highlight=z;function C(R,q){return R<q?-1:R>q?1:0}u.cmp=C}(t.StringExt||(t.StringExt={}));function*X(u,c){if(c<1)return;let d=u[Symbol.iterator](),h;for(;0<c--&&!(h=d.next()).done;)yield h.value}function*te(...u){let c=u.map(h=>h[Symbol.iterator]()),d=c.map(h=>h.next());for(;O(d,h=>!h.done);d=c.map(h=>h.next()))yield d.map(h=>h.value)}t.chain=i,t.each=_,t.empty=l,t.enumerate=m,t.every=O,t.filter=D,t.find=w,t.findIndex=U,t.map=j,t.max=y,t.min=a,t.minmax=M,t.once=x,t.range=S,t.reduce=N,t.repeat=A,t.retro=$,t.some=P,t.stride=H,t.take=X,t.toArray=v,t.toObject=p,t.topologicSort=ee,t.zip=te})});var ce=ie(L=>{"use strict";var we=oe();L.JSONExt=void 0;(function(t){t.emptyObject=Object.freeze({}),t.emptyArray=Object.freeze([]);function i(v){return v===null||typeof v=="boolean"||typeof v=="number"||typeof v=="string"}t.isPrimitive=i;function l(v){return Array.isArray(v)}t.isArray=l;function m(v){return!i(v)&&!l(v)}t.isObject=m;function D(v,p){if(v===p)return!0;if(i(v)||i(p))return!1;let _=l(v),O=l(p);return _!==O?!1:_&&O?U(v,p):a(v,p)}t.deepEqual=D;function w(v){return i(v)?v:l(v)?y(v):M(v)}t.deepCopy=w;function U(v,p){if(v===p)return!0;if(v.length!==p.length)return!1;for(let _=0,O=v.length;_<O;++_)if(!D(v[_],p[_]))return!1;return!0}function a(v,p){if(v===p)return!0;for(let _ in v)if(v[_]!==void 0&&!(_ in p))return!1;for(let _ in p)if(p[_]!==void 0&&!(_ in v))return!1;for(let _ in v){let O=v[_],P=p[_];if(!(O===void 0&&P===void 0)&&(O===void 0||P===void 0||!D(O,P)))return!1}return!0}function y(v){let p=new Array(v.length);for(let _=0,O=v.length;_<O;++_)p[_]=w(v[_]);return p}function M(v){let p={};for(let _ in v){let O=v[_];O!==void 0&&(p[_]=w(O))}return p}})(L.JSONExt||(L.JSONExt={}));var re=class{constructor(){this._types=[],this._values=[]}types(){return this._types.slice()}hasData(i){return this._types.indexOf(i)!==-1}getData(i){let l=this._types.indexOf(i);return l!==-1?this._values[l]:void 0}setData(i,l){this.clearData(i),this._types.push(i),this._values.push(l)}clearData(i){let l=this._types.indexOf(i);l!==-1&&(this._types.splice(l,1),this._values.splice(l,1))}clear(){this._types.length=0,this._values.length=0}},le=class{constructor(i={}){this._application=null,this._validatePlugin=()=>!0,this._plugins=new Map,this._services=new Map,i.validatePlugin&&(console.info("Plugins may be rejected by the custom validation plugin method."),this._validatePlugin=i.validatePlugin)}get application(){return this._application}set application(i){if(this._application!==null)throw Error("PluginRegistry.application is already set. It cannot be overridden.");this._application=i}get deferredPlugins(){return Array.from(this._plugins).filter(([i,l])=>l.autoStart==="defer").map(([i,l])=>i)}getPluginDescription(i){var l,m;return(m=(l=this._plugins.get(i))===null||l===void 0?void 0:l.description)!==null&&m!==void 0?m:""}hasPlugin(i){return this._plugins.has(i)}isPluginActivated(i){var l,m;return(m=(l=this._plugins.get(i))===null||l===void 0?void 0:l.activated)!==null&&m!==void 0?m:!1}listPlugins(){return Array.from(this._plugins.keys())}registerPlugin(i){if(this._plugins.has(i.id))throw new TypeError(`Plugin '${i.id}' is already registered.`);if(!this._validatePlugin(i))throw new Error(`Plugin '${i.id}' is not valid.`);let l=G.createPluginData(i);G.ensureNoCycle(l,this._plugins,this._services),l.provides&&this._services.set(l.provides,l.id),this._plugins.set(l.id,l)}registerPlugins(i){for(let l of i)this.registerPlugin(l)}deregisterPlugin(i,l){let m=this._plugins.get(i);if(m){if(m.activated&&!l)throw new Error(`Plugin '${i}' is still active.`);this._plugins.delete(i)}}async activatePlugin(i){let l=this._plugins.get(i);if(!l)throw new ReferenceError(`Plugin '${i}' is not registered.`);if(l.activated)return;if(l.promise)return l.promise;let m=l.requires.map(w=>this.resolveRequiredService(w)),D=l.optional.map(w=>this.resolveOptionalService(w));return l.promise=Promise.all([...m,...D]).then(w=>l.activate.apply(void 0,[this.application,...w])).then(w=>{l.service=w,l.activated=!0,l.promise=null}).catch(w=>{throw l.promise=null,w}),l.promise}async activatePlugins(i,l={}){switch(i){case"defer":{let m=this.deferredPlugins.filter(D=>this._plugins.get(D).autoStart).map(D=>this.activatePlugin(D));await Promise.all(m);break}case"startUp":{let D=G.collectStartupPlugins(this._plugins,l).map(async w=>{try{return await this.activatePlugin(w)}catch(U){console.error(`Plugin '${w}' failed to activate.`,U)}});await Promise.all(D);break}}}async deactivatePlugin(i){let l=this._plugins.get(i);if(!l)throw new ReferenceError(`Plugin '${i}' is not registered.`);if(!l.activated)return[];if(!l.deactivate)throw new TypeError(`Plugin '${i}'#deactivate() method missing`);let m=G.findDependents(i,this._plugins,this._services),D=m.map(w=>this._plugins.get(w));for(let w of D)if(!w.deactivate)throw new TypeError(`Plugin ${w.id}#deactivate() method missing (depends on ${i})`);for(let w of D){let U=[...w.requires,...w.optional].map(a=>{let y=this._services.get(a);return y?this._plugins.get(y).service:null});await w.deactivate(this.application,...U),w.service=null,w.activated=!1}return m.pop(),m}async resolveRequiredService(i){let l=this._services.get(i);if(!l)throw new TypeError(`No provider for: ${i.name}.`);let m=this._plugins.get(l);return m.activated||await this.activatePlugin(l),m.service}async resolveOptionalService(i){let l=this._services.get(i);if(!l)return null;let m=this._plugins.get(l);if(!m.activated)try{await this.activatePlugin(l)}catch(D){return console.error(D),null}return m.service}},G;(function(t){class i{constructor(a){var y,M,v,p;this._activated=!1,this._promise=null,this._service=null,this.id=a.id,this.description=(y=a.description)!==null&&y!==void 0?y:"",this.activate=a.activate,this.deactivate=(M=a.deactivate)!==null&&M!==void 0?M:null,this.provides=(v=a.provides)!==null&&v!==void 0?v:null,this.autoStart=(p=a.autoStart)!==null&&p!==void 0?p:!1,this.requires=a.requires?a.requires.slice():[],this.optional=a.optional?a.optional.slice():[]}get activated(){return this._activated}set activated(a){this._activated=a}get service(){return this._service}set service(a){this._service=a}get promise(){return this._promise}set promise(a){this._promise=a}}function l(U){return new i(U)}t.createPluginData=l;function m(U,a,y){let M=[...U.requires,...U.optional],v=_=>{if(_===U.provides)return!0;let O=y.get(_);if(!O)return!1;let P=a.get(O),j=[...P.requires,...P.optional];return j.length===0?!1:(p.push(O),j.some(v)?!0:(p.pop(),!1))};if(!U.provides||M.length===0)return;let p=[U.id];if(M.some(v))throw new ReferenceError(`Cycle detected: ${p.join(" -> ")}.`)}t.ensureNoCycle=m;function D(U,a,y){let M=new Array,v=j=>{let S=a.get(j),B=[...S.requires,...S.optional];M.push(...B.reduce((N,A)=>{let x=y.get(A);return x&&N.push([j,x]),N},[]))};for(let j of a.keys())v(j);let p=M.filter(j=>j[1]===U),_=0;for(;p.length>_;){let j=p.length,S=new Set(p.map(B=>B[0]));for(let B of S)M.filter(N=>N[1]===B).forEach(N=>{p.includes(N)||p.push(N)});_=j}let O=we.topologicSort(p),P=O.findIndex(j=>j===U);return P===-1?[U]:O.slice(0,P+1)}t.findDependents=D;function w(U,a){let y=new Set;for(let M of U.keys())U.get(M).autoStart===!0&&y.add(M);if(a.startPlugins)for(let M of a.startPlugins)y.add(M);if(a.ignorePlugins)for(let M of a.ignorePlugins)y.delete(M);return Array.from(y)}t.collectStartupPlugins=w})(G||(G={}));var ue=class{constructor(){this.promise=new Promise((i,l)=>{this._resolve=i,this._reject=l})}resolve(i){let l=this._resolve;l(i)}reject(i){let l=this._reject;l(i)}},se=class{constructor(i,l){this.name=i,this.description=l??"",this._tokenStructuralPropertyT=null}};function be(t){let i=0;for(let l=0,m=t.length;l<m;++l)l%4===0&&(i=Math.random()*4294967295>>>0),t[l]=i&255,i>>>=8}L.Random=void 0;(function(t){t.getRandomValues=(()=>{let i=typeof require<"u"&&require("crypto")||null;return i&&typeof i.randomFillSync=="function"?function(m){return i.randomFillSync(m)}:i&&typeof i.randomBytes=="function"?function(m){let D=i.randomBytes(m.length);for(let w=0,U=D.length;w<U;++w)m[w]=D[w]}:be})()})(L.Random||(L.Random={}));function Oe(t){let i=new Uint8Array(16),l=new Array(256);for(let m=0;m<16;++m)l[m]="0"+m.toString(16);for(let m=16;m<256;++m)l[m]=m.toString(16);return function(){return t(i),i[6]=64|i[6]&15,i[8]=128|i[8]&63,l[i[0]]+l[i[1]]+l[i[2]]+l[i[3]]+"-"+l[i[4]]+l[i[5]]+"-"+l[i[6]]+l[i[7]]+"-"+l[i[8]]+l[i[9]]+"-"+l[i[10]]+l[i[11]]+l[i[12]]+l[i[13]]+l[i[14]]+l[i[15]]}}L.UUID=void 0;(function(t){t.uuid4=Oe(L.Random.getRandomValues)})(L.UUID||(L.UUID={}));L.MimeData=re;L.PluginRegistry=le;L.PromiseDelegate=ue;L.Token=se});var de=ie(b=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.supportedKernelWebSocketProtocols=b.isInputReplyMsg=b.isInputRequestMsg=b.isDebugReplyMsg=b.isDebugRequestMsg=b.isExecuteReplyMsg=b.isInfoRequestMsg=b.isCommMsgMsg=b.isCommCloseMsg=b.isCommOpenMsg=b.isDebugEventMsg=b.isClearOutputMsg=b.isStatusMsg=b.isErrorMsg=b.isExecuteResultMsg=b.isExecuteInputMsg=b.isUpdateDisplayDataMsg=b.isDisplayDataMsg=b.isStreamMsg=b.createMessage=void 0;var De=ce();function Pe(t){var i,l,m,D,w;return{buffers:(i=t.buffers)!==null&&i!==void 0?i:[],channel:t.channel,content:t.content,header:{date:new Date().toISOString(),msg_id:(l=t.msgId)!==null&&l!==void 0?l:De.UUID.uuid4(),msg_type:t.msgType,session:t.session,username:(m=t.username)!==null&&m!==void 0?m:"",version:"5.2"},metadata:(D=t.metadata)!==null&&D!==void 0?D:{},parent_header:(w=t.parentHeader)!==null&&w!==void 0?w:{}}}b.createMessage=Pe;function Se(t){return t.header.msg_type==="stream"}b.isStreamMsg=Se;function Re(t){return t.header.msg_type==="display_data"}b.isDisplayDataMsg=Re;function qe(t){return t.header.msg_type==="update_display_data"}b.isUpdateDisplayDataMsg=qe;function je(t){return t.header.msg_type==="execute_input"}b.isExecuteInputMsg=je;function Ue(t){return t.header.msg_type==="execute_result"}b.isExecuteResultMsg=Ue;function ze(t){return t.header.msg_type==="error"}b.isErrorMsg=ze;function Ve(t){return t.header.msg_type==="status"}b.isStatusMsg=Ve;function Be(t){return t.header.msg_type==="clear_output"}b.isClearOutputMsg=Be;function ke(t){return t.header.msg_type==="debug_event"}b.isDebugEventMsg=ke;function Ce(t){return t.header.msg_type==="comm_open"}b.isCommOpenMsg=Ce;function Ee(t){return t.header.msg_type==="comm_close"}b.isCommCloseMsg=Ee;function Ie(t){return t.header.msg_type==="comm_msg"}b.isCommMsgMsg=Ie;function Ne(t){return t.header.msg_type==="kernel_info_request"}b.isInfoRequestMsg=Ne;function We(t){return t.header.msg_type==="execute_reply"}b.isExecuteReplyMsg=We;function Ae(t){return t.header.msg_type==="debug_request"}b.isDebugRequestMsg=Ae;function Je(t){return t.header.msg_type==="debug_reply"}b.isDebugReplyMsg=Je;function Le(t){return t.header.msg_type==="input_request"}b.isInputRequestMsg=Le;function Ke(t){return t.header.msg_type==="input_reply"}b.isInputReplyMsg=Ke;var ae;(function(t){t.v1KernelWebsocketJupyterOrg="v1.kernel.websocket.jupyter.org"})(ae||(b.supportedKernelWebSocketProtocols=ae={}))});var Te=exports&&exports.__createBinding||(Object.create?function(t,i,l,m){m===void 0&&(m=l);var D=Object.getOwnPropertyDescriptor(i,l);(!D||("get"in D?!i.__esModule:D.writable||D.configurable))&&(D={enumerable:!0,get:function(){return i[l]}}),Object.defineProperty(t,m,D)}:function(t,i,l,m){m===void 0&&(m=l),t[m]=i[l]}),Fe=exports&&exports.__setModuleDefault||(Object.create?function(t,i){Object.defineProperty(t,"default",{enumerable:!0,value:i})}:function(t,i){t.default=i}),$e=exports&&exports.__importStar||function(t){if(t&&t.__esModule)return t;var i={};if(t!=null)for(var l in t)l!=="default"&&Object.prototype.hasOwnProperty.call(t,l)&&Te(i,t,l);return Fe(i,t),i};Object.defineProperty(exports,"__esModule",{value:!0});exports.deserialize=exports.serialize=void 0;var he=$e(de());function xe(t,i=""){switch(i){case he.supportedKernelWebSocketProtocols.v1KernelWebsocketJupyterOrg:return Q.serializeV1KernelWebsocketJupyterOrg(t);default:return Q.serializeDefault(t)}}exports.serialize=xe;function He(t,i=""){switch(i){case he.supportedKernelWebSocketProtocols.v1KernelWebsocketJupyterOrg:return Q.deserializeV1KernelWebsocketJupyterOrg(t);default:return Q.deserializeDefault(t)}}exports.deserialize=He;var Q;(function(t){function i(a){let y,M=new DataView(a),v=Number(M.getBigUint64(0,!0)),p=[];for(let A=0;A<v;A++)p.push(Number(M.getBigUint64(8*(A+1),!0)));let _=new TextDecoder("utf8"),O=_.decode(a.slice(p[0],p[1])),P=JSON.parse(_.decode(a.slice(p[1],p[2]))),j=JSON.parse(_.decode(a.slice(p[2],p[3]))),S=JSON.parse(_.decode(a.slice(p[3],p[4]))),B=JSON.parse(_.decode(a.slice(p[4],p[5]))),N=[];for(let A=5;A<p.length-1;A++)N.push(new DataView(a.slice(p[A],p[A+1])));return y={channel:O,header:P,parent_header:j,metadata:S,content:B,buffers:N},y}t.deserializeV1KernelWebsocketJupyterOrg=i;function l(a){let y=JSON.stringify(a.header),M=a.parent_header==null?"{}":JSON.stringify(a.parent_header),v=JSON.stringify(a.metadata),p=JSON.stringify(a.content),_=a.buffers!==void 0?a.buffers:[],O=1+4+_.length+1,P=[];P.push(8*(1+O)),P.push(a.channel.length+P[P.length-1]);let j=new TextEncoder,S=j.encode(a.channel),B=j.encode(y),N=j.encode(M),A=j.encode(v),x=j.encode(p),$=new Uint8Array(S.length+B.length+N.length+A.length+x.length);$.set(S),$.set(B,S.length),$.set(N,S.length+B.length),$.set(A,S.length+B.length+N.length),$.set(x,S.length+B.length+N.length+A.length);for(let u of[B.length,N.length,A.length,x.length])P.push(u+P[P.length-1]);let ee=0;for(let u of _){let c=u.byteLength;P.push(c+P[P.length-1]),ee+=c}let H=new Uint8Array(8*(1+O)+$.byteLength+ee),X=new ArrayBuffer(8),te=new DataView(X);te.setBigUint64(0,BigInt(O),!0),H.set(new Uint8Array(X),0);for(let u=0;u<P.length;u++)te.setBigUint64(0,BigInt(P[u]),!0),H.set(new Uint8Array(X),8*(u+1));H.set($,P[0]);for(let u=0;u<_.length;u++){let c=_[u];H.set(new Uint8Array(ArrayBuffer.isView(c)?c.buffer:c),P[5+u])}return H.buffer}t.serializeV1KernelWebsocketJupyterOrg=l;function m(a){let y;return typeof a=="string"?y=JSON.parse(a):y=w(a),y}t.deserializeDefault=m;function D(a){var y;let M;return!((y=a.buffers)===null||y===void 0)&&y.length?M=U(a):M=JSON.stringify(a),M}t.serializeDefault=D;function w(a){let y=new DataView(a),M=y.getUint32(0),v=[];if(M<2)throw new Error("Invalid incoming Kernel Message");for(let O=1;O<=M;O++)v.push(y.getUint32(O*4));let p=new Uint8Array(a.slice(v[0],v[1])),_=JSON.parse(new TextDecoder("utf8").decode(p));_.buffers=[];for(let O=1;O<M;O++){let P=v[O],j=v[O+1]||a.byteLength;_.buffers.push(new DataView(a.slice(P,j)))}return _}function U(a){let y=[],M=[],v=new TextEncoder,p=[];a.buffers!==void 0&&(p=a.buffers,delete a.buffers);let _=v.encode(JSON.stringify(a));M.push(_.buffer);for(let S=0;S<p.length;S++){let B=p[S];M.push(ArrayBuffer.isView(B)?B.buffer:B)}let O=M.length;y.push(4*(O+1));for(let S=0;S+1<M.length;S++)y.push(y[y.length-1]+M[S].byteLength);let P=new Uint8Array(y[y.length-1]+M[M.length-1].byteLength),j=new DataView(P.buffer);j.setUint32(0,O);for(let S=0;S<y.length;S++)j.setUint32(4*(S+1),y[S]);for(let S=0;S<M.length;S++)P.set(new Uint8Array(M[S]),y[S]);return P.buffer}})(Q||(Q={}));
