"use strict";var T=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Ci=T((n_,Gc)=>{var qh="2.0.0",Ph=Number.MAX_SAFE_INTEGER||9007199254740991,Eh=16,Ih=256-6,kh=["major","premajor","minor","preminor","patch","prepatch","prerelease"];Gc.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:Eh,MAX_SAFE_BUILD_LENGTH:Ih,MAX_SAFE_INTEGER:Ph,RELEASE_TYPES:kh,SEMVER_SPEC_VERSION:qh,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Ri=T((i_,Xc)=>{var Fh=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{};Xc.exports=Fh});var Un=T((Ut,Bc)=>{var{MAX_SAFE_COMPONENT_LENGTH:lr,MAX_SAFE_BUILD_LENGTH:xh}=Ci(),Oh=Ri();Ut=Bc.exports={};var Nh=Ut.re=[],Lh=Ut.safeRe=[],M=Ut.src=[],H=Ut.t={},Ah=0,bo="[a-zA-Z0-9-]",Mh=[["\\s",1],["\\d",lr],[bo,xh]],Hh=n=>{for(let[e,t]of Mh)n=n.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return n},X=(n,e,t)=>{let i=Hh(e),r=Ah++;Oh(n,r,e),H[n]=r,M[r]=e,Nh[r]=new RegExp(e,t?"g":void 0),Lh[r]=new RegExp(i,t?"g":void 0)};X("NUMERICIDENTIFIER","0|[1-9]\\d*");X("NUMERICIDENTIFIERLOOSE","\\d+");X("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${bo}*`);X("MAINVERSION",`(${M[H.NUMERICIDENTIFIER]})\\.(${M[H.NUMERICIDENTIFIER]})\\.(${M[H.NUMERICIDENTIFIER]})`);X("MAINVERSIONLOOSE",`(${M[H.NUMERICIDENTIFIERLOOSE]})\\.(${M[H.NUMERICIDENTIFIERLOOSE]})\\.(${M[H.NUMERICIDENTIFIERLOOSE]})`);X("PRERELEASEIDENTIFIER",`(?:${M[H.NUMERICIDENTIFIER]}|${M[H.NONNUMERICIDENTIFIER]})`);X("PRERELEASEIDENTIFIERLOOSE",`(?:${M[H.NUMERICIDENTIFIERLOOSE]}|${M[H.NONNUMERICIDENTIFIER]})`);X("PRERELEASE",`(?:-(${M[H.PRERELEASEIDENTIFIER]}(?:\\.${M[H.PRERELEASEIDENTIFIER]})*))`);X("PRERELEASELOOSE",`(?:-?(${M[H.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${M[H.PRERELEASEIDENTIFIERLOOSE]})*))`);X("BUILDIDENTIFIER",`${bo}+`);X("BUILD",`(?:\\+(${M[H.BUILDIDENTIFIER]}(?:\\.${M[H.BUILDIDENTIFIER]})*))`);X("FULLPLAIN",`v?${M[H.MAINVERSION]}${M[H.PRERELEASE]}?${M[H.BUILD]}?`);X("FULL",`^${M[H.FULLPLAIN]}$`);X("LOOSEPLAIN",`[v=\\s]*${M[H.MAINVERSIONLOOSE]}${M[H.PRERELEASELOOSE]}?${M[H.BUILD]}?`);X("LOOSE",`^${M[H.LOOSEPLAIN]}$`);X("GTLT","((?:<|>)?=?)");X("XRANGEIDENTIFIERLOOSE",`${M[H.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);X("XRANGEIDENTIFIER",`${M[H.NUMERICIDENTIFIER]}|x|X|\\*`);X("XRANGEPLAIN",`[v=\\s]*(${M[H.XRANGEIDENTIFIER]})(?:\\.(${M[H.XRANGEIDENTIFIER]})(?:\\.(${M[H.XRANGEIDENTIFIER]})(?:${M[H.PRERELEASE]})?${M[H.BUILD]}?)?)?`);X("XRANGEPLAINLOOSE",`[v=\\s]*(${M[H.XRANGEIDENTIFIERLOOSE]})(?:\\.(${M[H.XRANGEIDENTIFIERLOOSE]})(?:\\.(${M[H.XRANGEIDENTIFIERLOOSE]})(?:${M[H.PRERELEASELOOSE]})?${M[H.BUILD]}?)?)?`);X("XRANGE",`^${M[H.GTLT]}\\s*${M[H.XRANGEPLAIN]}$`);X("XRANGELOOSE",`^${M[H.GTLT]}\\s*${M[H.XRANGEPLAINLOOSE]}$`);X("COERCE",`(^|[^\\d])(\\d{1,${lr}})(?:\\.(\\d{1,${lr}}))?(?:\\.(\\d{1,${lr}}))?(?:$|[^\\d])`);X("COERCERTL",M[H.COERCE],!0);X("LONETILDE","(?:~>?)");X("TILDETRIM",`(\\s*)${M[H.LONETILDE]}\\s+`,!0);Ut.tildeTrimReplace="$1~";X("TILDE",`^${M[H.LONETILDE]}${M[H.XRANGEPLAIN]}$`);X("TILDELOOSE",`^${M[H.LONETILDE]}${M[H.XRANGEPLAINLOOSE]}$`);X("LONECARET","(?:\\^)");X("CARETTRIM",`(\\s*)${M[H.LONECARET]}\\s+`,!0);Ut.caretTrimReplace="$1^";X("CARET",`^${M[H.LONECARET]}${M[H.XRANGEPLAIN]}$`);X("CARETLOOSE",`^${M[H.LONECARET]}${M[H.XRANGEPLAINLOOSE]}$`);X("COMPARATORLOOSE",`^${M[H.GTLT]}\\s*(${M[H.LOOSEPLAIN]})$|^$`);X("COMPARATOR",`^${M[H.GTLT]}\\s*(${M[H.FULLPLAIN]})$|^$`);X("COMPARATORTRIM",`(\\s*)${M[H.GTLT]}\\s*(${M[H.LOOSEPLAIN]}|${M[H.XRANGEPLAIN]})`,!0);Ut.comparatorTrimReplace="$1$2$3";X("HYPHENRANGE",`^\\s*(${M[H.XRANGEPLAIN]})\\s+-\\s+(${M[H.XRANGEPLAIN]})\\s*$`);X("HYPHENRANGELOOSE",`^\\s*(${M[H.XRANGEPLAINLOOSE]})\\s+-\\s+(${M[H.XRANGEPLAINLOOSE]})\\s*$`);X("STAR","(<|>)?=?\\s*\\*");X("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");X("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var dr=T((r_,Qc)=>{var jh=Object.freeze({loose:!0}),$h=Object.freeze({}),Uh=n=>n?typeof n!="object"?jh:n:$h;Qc.exports=Uh});var To=T((o_,Zc)=>{var Yc=/^[0-9]+$/,Jc=(n,e)=>{let t=Yc.test(n),i=Yc.test(e);return t&&i&&(n=+n,e=+e),n===e?0:t&&!i?-1:i&&!t?1:n<e?-1:1},Wh=(n,e)=>Jc(e,n);Zc.exports={compareIdentifiers:Jc,rcompareIdentifiers:Wh}});var He=T((s_,iu)=>{var fr=Ri(),{MAX_LENGTH:eu,MAX_SAFE_INTEGER:hr}=Ci(),{safeRe:tu,t:nu}=Un(),Kh=dr(),{compareIdentifiers:Wn}=To(),qo=class n{constructor(e,t){if(t=Kh(t),e instanceof n){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>eu)throw new TypeError(`version is longer than ${eu} characters`);fr("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let i=e.trim().match(t.loose?tu[nu.LOOSE]:tu[nu.FULL]);if(!i)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>hr||this.major<0)throw new TypeError("Invalid major version");if(this.minor>hr||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>hr||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(r=>{if(/^[0-9]+$/.test(r)){let o=+r;if(o>=0&&o<hr)return o}return r}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(fr("SemVer.compare",this.version,this.options,e),!(e instanceof n)){if(typeof e=="string"&&e===this.version)return 0;e=new n(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof n||(e=new n(e,this.options)),Wn(this.major,e.major)||Wn(this.minor,e.minor)||Wn(this.patch,e.patch)}comparePre(e){if(e instanceof n||(e=new n(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let i=this.prerelease[t],r=e.prerelease[t];if(fr("prerelease compare",t,i,r),i===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(i===void 0)return-1;if(i===r)continue;return Wn(i,r)}while(++t)}compareBuild(e){e instanceof n||(e=new n(e,this.options));let t=0;do{let i=this.build[t],r=e.build[t];if(fr("prerelease compare",t,i,r),i===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(i===void 0)return-1;if(i===r)continue;return Wn(i,r)}while(++t)}inc(e,t,i){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,i),this.inc("pre",t,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,i),this.inc("pre",t,i);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let r=Number(i)?1:0;if(!t&&i===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[r];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(t===this.prerelease.join(".")&&i===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(t){let o=[t,r];i===!1&&(o=[t]),Wn(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};iu.exports=qo});var vn=T((a_,ou)=>{var ru=He(),zh=(n,e,t=!1)=>{if(n instanceof ru)return n;try{return new ru(n,e)}catch(i){if(!t)return null;throw i}};ou.exports=zh});var au=T((c_,su)=>{var Vh=vn(),Gh=(n,e)=>{let t=Vh(n,e);return t?t.version:null};su.exports=Gh});var uu=T((u_,cu)=>{var Xh=vn(),Bh=(n,e)=>{let t=Xh(n.trim().replace(/^[=v]+/,""),e);return t?t.version:null};cu.exports=Bh});var fu=T((l_,du)=>{var lu=He(),Qh=(n,e,t,i,r)=>{typeof t=="string"&&(r=i,i=t,t=void 0);try{return new lu(n instanceof lu?n.version:n,t).inc(e,i,r).version}catch{return null}};du.exports=Qh});var gu=T((d_,pu)=>{var hu=vn(),Yh=(n,e)=>{let t=hu(n,null,!0),i=hu(e,null,!0),r=t.compare(i);if(r===0)return null;let o=r>0,s=o?t:i,c=o?i:t,u=!!s.prerelease.length;if(!!c.prerelease.length&&!u)return!c.patch&&!c.minor?"major":s.patch?"patch":s.minor?"minor":"major";let g=u?"pre":"";return t.major!==i.major?g+"major":t.minor!==i.minor?g+"minor":t.patch!==i.patch?g+"patch":"prerelease"};pu.exports=Yh});var vu=T((f_,mu)=>{var Jh=He(),Zh=(n,e)=>new Jh(n,e).major;mu.exports=Zh});var Cu=T((h_,yu)=>{var ep=He(),tp=(n,e)=>new ep(n,e).minor;yu.exports=tp});var Du=T((p_,Ru)=>{var np=He(),ip=(n,e)=>new np(n,e).patch;Ru.exports=ip});var Su=T((g_,_u)=>{var rp=vn(),op=(n,e)=>{let t=rp(n,e);return t&&t.prerelease.length?t.prerelease:null};_u.exports=op});var dt=T((m_,bu)=>{var wu=He(),sp=(n,e,t)=>new wu(n,t).compare(new wu(e,t));bu.exports=sp});var qu=T((v_,Tu)=>{var ap=dt(),cp=(n,e,t)=>ap(e,n,t);Tu.exports=cp});var Eu=T((y_,Pu)=>{var up=dt(),lp=(n,e)=>up(n,e,!0);Pu.exports=lp});var pr=T((C_,ku)=>{var Iu=He(),dp=(n,e,t)=>{let i=new Iu(n,t),r=new Iu(e,t);return i.compare(r)||i.compareBuild(r)};ku.exports=dp});var xu=T((R_,Fu)=>{var fp=pr(),hp=(n,e)=>n.sort((t,i)=>fp(t,i,e));Fu.exports=hp});var Nu=T((D_,Ou)=>{var pp=pr(),gp=(n,e)=>n.sort((t,i)=>pp(i,t,e));Ou.exports=gp});var Di=T((__,Lu)=>{var mp=dt(),vp=(n,e,t)=>mp(n,e,t)>0;Lu.exports=vp});var gr=T((S_,Au)=>{var yp=dt(),Cp=(n,e,t)=>yp(n,e,t)<0;Au.exports=Cp});var Po=T((w_,Mu)=>{var Rp=dt(),Dp=(n,e,t)=>Rp(n,e,t)===0;Mu.exports=Dp});var Eo=T((b_,Hu)=>{var _p=dt(),Sp=(n,e,t)=>_p(n,e,t)!==0;Hu.exports=Sp});var mr=T((T_,ju)=>{var wp=dt(),bp=(n,e,t)=>wp(n,e,t)>=0;ju.exports=bp});var vr=T((q_,$u)=>{var Tp=dt(),qp=(n,e,t)=>Tp(n,e,t)<=0;$u.exports=qp});var Io=T((P_,Uu)=>{var Pp=Po(),Ep=Eo(),Ip=Di(),kp=mr(),Fp=gr(),xp=vr(),Op=(n,e,t,i)=>{switch(e){case"===":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n===t;case"!==":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n!==t;case"":case"=":case"==":return Pp(n,t,i);case"!=":return Ep(n,t,i);case">":return Ip(n,t,i);case">=":return kp(n,t,i);case"<":return Fp(n,t,i);case"<=":return xp(n,t,i);default:throw new TypeError(`Invalid operator: ${e}`)}};Uu.exports=Op});var Ku=T((E_,Wu)=>{var Np=He(),Lp=vn(),{safeRe:yr,t:Cr}=Un(),Ap=(n,e)=>{if(n instanceof Np)return n;if(typeof n=="number"&&(n=String(n)),typeof n!="string")return null;e=e||{};let t=null;if(!e.rtl)t=n.match(yr[Cr.COERCE]);else{let i;for(;(i=yr[Cr.COERCERTL].exec(n))&&(!t||t.index+t[0].length!==n.length);)(!t||i.index+i[0].length!==t.index+t[0].length)&&(t=i),yr[Cr.COERCERTL].lastIndex=i.index+i[1].length+i[2].length;yr[Cr.COERCERTL].lastIndex=-1}return t===null?null:Lp(`${t[2]}.${t[3]||"0"}.${t[4]||"0"}`,e)};Wu.exports=Ap});var Vu=T((I_,zu)=>{"use strict";zu.exports=function(n){n.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Xu=T((k_,Gu)=>{"use strict";Gu.exports=ne;ne.Node=yn;ne.create=ne;function ne(n){var e=this;if(e instanceof ne||(e=new ne),e.tail=null,e.head=null,e.length=0,n&&typeof n.forEach=="function")n.forEach(function(r){e.push(r)});else if(arguments.length>0)for(var t=0,i=arguments.length;t<i;t++)e.push(arguments[t]);return e}ne.prototype.removeNode=function(n){if(n.list!==this)throw new Error("removing node which does not belong to this list");var e=n.next,t=n.prev;return e&&(e.prev=t),t&&(t.next=e),n===this.head&&(this.head=e),n===this.tail&&(this.tail=t),n.list.length--,n.next=null,n.prev=null,n.list=null,e};ne.prototype.unshiftNode=function(n){if(n!==this.head){n.list&&n.list.removeNode(n);var e=this.head;n.list=this,n.next=e,e&&(e.prev=n),this.head=n,this.tail||(this.tail=n),this.length++}};ne.prototype.pushNode=function(n){if(n!==this.tail){n.list&&n.list.removeNode(n);var e=this.tail;n.list=this,n.prev=e,e&&(e.next=n),this.tail=n,this.head||(this.head=n),this.length++}};ne.prototype.push=function(){for(var n=0,e=arguments.length;n<e;n++)Hp(this,arguments[n]);return this.length};ne.prototype.unshift=function(){for(var n=0,e=arguments.length;n<e;n++)jp(this,arguments[n]);return this.length};ne.prototype.pop=function(){if(this.tail){var n=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,n}};ne.prototype.shift=function(){if(this.head){var n=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,n}};ne.prototype.forEach=function(n,e){e=e||this;for(var t=this.head,i=0;t!==null;i++)n.call(e,t.value,i,this),t=t.next};ne.prototype.forEachReverse=function(n,e){e=e||this;for(var t=this.tail,i=this.length-1;t!==null;i--)n.call(e,t.value,i,this),t=t.prev};ne.prototype.get=function(n){for(var e=0,t=this.head;t!==null&&e<n;e++)t=t.next;if(e===n&&t!==null)return t.value};ne.prototype.getReverse=function(n){for(var e=0,t=this.tail;t!==null&&e<n;e++)t=t.prev;if(e===n&&t!==null)return t.value};ne.prototype.map=function(n,e){e=e||this;for(var t=new ne,i=this.head;i!==null;)t.push(n.call(e,i.value,this)),i=i.next;return t};ne.prototype.mapReverse=function(n,e){e=e||this;for(var t=new ne,i=this.tail;i!==null;)t.push(n.call(e,i.value,this)),i=i.prev;return t};ne.prototype.reduce=function(n,e){var t,i=this.head;if(arguments.length>1)t=e;else if(this.head)i=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var r=0;i!==null;r++)t=n(t,i.value,r),i=i.next;return t};ne.prototype.reduceReverse=function(n,e){var t,i=this.tail;if(arguments.length>1)t=e;else if(this.tail)i=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var r=this.length-1;i!==null;r--)t=n(t,i.value,r),i=i.prev;return t};ne.prototype.toArray=function(){for(var n=new Array(this.length),e=0,t=this.head;t!==null;e++)n[e]=t.value,t=t.next;return n};ne.prototype.toArrayReverse=function(){for(var n=new Array(this.length),e=0,t=this.tail;t!==null;e++)n[e]=t.value,t=t.prev;return n};ne.prototype.slice=function(n,e){e=e||this.length,e<0&&(e+=this.length),n=n||0,n<0&&(n+=this.length);var t=new ne;if(e<n||e<0)return t;n<0&&(n=0),e>this.length&&(e=this.length);for(var i=0,r=this.head;r!==null&&i<n;i++)r=r.next;for(;r!==null&&i<e;i++,r=r.next)t.push(r.value);return t};ne.prototype.sliceReverse=function(n,e){e=e||this.length,e<0&&(e+=this.length),n=n||0,n<0&&(n+=this.length);var t=new ne;if(e<n||e<0)return t;n<0&&(n=0),e>this.length&&(e=this.length);for(var i=this.length,r=this.tail;r!==null&&i>e;i--)r=r.prev;for(;r!==null&&i>n;i--,r=r.prev)t.push(r.value);return t};ne.prototype.splice=function(n,e,...t){n>this.length&&(n=this.length-1),n<0&&(n=this.length+n);for(var i=0,r=this.head;r!==null&&i<n;i++)r=r.next;for(var o=[],i=0;r&&i<e;i++)o.push(r.value),r=this.removeNode(r);r===null&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(var i=0;i<t.length;i++)r=Mp(this,r,t[i]);return o};ne.prototype.reverse=function(){for(var n=this.head,e=this.tail,t=n;t!==null;t=t.prev){var i=t.prev;t.prev=t.next,t.next=i}return this.head=e,this.tail=n,this};function Mp(n,e,t){var i=e===n.head?new yn(t,null,e,n):new yn(t,e,e.next,n);return i.next===null&&(n.tail=i),i.prev===null&&(n.head=i),n.length++,i}function Hp(n,e){n.tail=new yn(e,n.tail,null,n),n.head||(n.head=n.tail),n.length++}function jp(n,e){n.head=new yn(e,null,n.head,n),n.tail||(n.tail=n.head),n.length++}function yn(n,e,t,i){if(!(this instanceof yn))return new yn(n,e,t,i);this.list=i,this.value=n,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{Vu()(ne)}catch{}});var Zu=T((F_,Ju)=>{"use strict";var $p=Xu(),Cn=Symbol("max"),Kt=Symbol("length"),Kn=Symbol("lengthCalculator"),Si=Symbol("allowStale"),Rn=Symbol("maxAge"),Wt=Symbol("dispose"),Bu=Symbol("noDisposeOnSet"),Fe=Symbol("lruList"),wt=Symbol("cache"),Yu=Symbol("updateAgeOnGet"),ko=()=>1,xo=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let t=this[Cn]=e.max||1/0,i=e.length||ko;if(this[Kn]=typeof i!="function"?ko:i,this[Si]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Rn]=e.maxAge||0,this[Wt]=e.dispose,this[Bu]=e.noDisposeOnSet||!1,this[Yu]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Cn]=e||1/0,_i(this)}get max(){return this[Cn]}set allowStale(e){this[Si]=!!e}get allowStale(){return this[Si]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Rn]=e,_i(this)}get maxAge(){return this[Rn]}set lengthCalculator(e){typeof e!="function"&&(e=ko),e!==this[Kn]&&(this[Kn]=e,this[Kt]=0,this[Fe].forEach(t=>{t.length=this[Kn](t.value,t.key),this[Kt]+=t.length})),_i(this)}get lengthCalculator(){return this[Kn]}get length(){return this[Kt]}get itemCount(){return this[Fe].length}rforEach(e,t){t=t||this;for(let i=this[Fe].tail;i!==null;){let r=i.prev;Qu(this,e,i,t),i=r}}forEach(e,t){t=t||this;for(let i=this[Fe].head;i!==null;){let r=i.next;Qu(this,e,i,t),i=r}}keys(){return this[Fe].toArray().map(e=>e.key)}values(){return this[Fe].toArray().map(e=>e.value)}reset(){this[Wt]&&this[Fe]&&this[Fe].length&&this[Fe].forEach(e=>this[Wt](e.key,e.value)),this[wt]=new Map,this[Fe]=new $p,this[Kt]=0}dump(){return this[Fe].map(e=>Rr(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[Fe]}set(e,t,i){if(i=i||this[Rn],i&&typeof i!="number")throw new TypeError("maxAge must be a number");let r=i?Date.now():0,o=this[Kn](t,e);if(this[wt].has(e)){if(o>this[Cn])return zn(this,this[wt].get(e)),!1;let u=this[wt].get(e).value;return this[Wt]&&(this[Bu]||this[Wt](e,u.value)),u.now=r,u.maxAge=i,u.value=t,this[Kt]+=o-u.length,u.length=o,this.get(e),_i(this),!0}let s=new Oo(e,t,o,r,i);return s.length>this[Cn]?(this[Wt]&&this[Wt](e,t),!1):(this[Kt]+=s.length,this[Fe].unshift(s),this[wt].set(e,this[Fe].head),_i(this),!0)}has(e){if(!this[wt].has(e))return!1;let t=this[wt].get(e).value;return!Rr(this,t)}get(e){return Fo(this,e,!0)}peek(e){return Fo(this,e,!1)}pop(){let e=this[Fe].tail;return e?(zn(this,e),e.value):null}del(e){zn(this,this[wt].get(e))}load(e){this.reset();let t=Date.now();for(let i=e.length-1;i>=0;i--){let r=e[i],o=r.e||0;if(o===0)this.set(r.k,r.v);else{let s=o-t;s>0&&this.set(r.k,r.v,s)}}}prune(){this[wt].forEach((e,t)=>Fo(this,t,!1))}},Fo=(n,e,t)=>{let i=n[wt].get(e);if(i){let r=i.value;if(Rr(n,r)){if(zn(n,i),!n[Si])return}else t&&(n[Yu]&&(i.value.now=Date.now()),n[Fe].unshiftNode(i));return r.value}},Rr=(n,e)=>{if(!e||!e.maxAge&&!n[Rn])return!1;let t=Date.now()-e.now;return e.maxAge?t>e.maxAge:n[Rn]&&t>n[Rn]},_i=n=>{if(n[Kt]>n[Cn])for(let e=n[Fe].tail;n[Kt]>n[Cn]&&e!==null;){let t=e.prev;zn(n,e),e=t}},zn=(n,e)=>{if(e){let t=e.value;n[Wt]&&n[Wt](t.key,t.value),n[Kt]-=t.length,n[wt].delete(t.key),n[Fe].removeNode(e)}},Oo=class{constructor(e,t,i,r,o){this.key=e,this.value=t,this.length=i,this.now=r,this.maxAge=o||0}},Qu=(n,e,t,i)=>{let r=t.value;Rr(n,r)&&(zn(n,t),n[Si]||(r=void 0)),r&&e.call(i,r.value,r.key,n)};Ju.exports=xo});var ft=T((x_,il)=>{var No=class n{constructor(e,t){if(t=Wp(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof Lo)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(i=>this.parseRange(i)).filter(i=>i.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let i=this.set[0];if(this.set=this.set.filter(r=>!tl(r[0])),this.set.length===0)this.set=[i];else if(this.set.length>1){for(let r of this.set)if(r.length===1&&Qp(r[0])){this.set=[r];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let i=((this.options.includePrerelease&&Xp)|(this.options.loose&&Bp))+":"+e,r=el.get(i);if(r)return r;let o=this.options.loose,s=o?Ze[Ke.HYPHENRANGELOOSE]:Ze[Ke.HYPHENRANGE];e=e.replace(s,sg(this.options.includePrerelease)),fe("hyphen replace",e),e=e.replace(Ze[Ke.COMPARATORTRIM],zp),fe("comparator trim",e),e=e.replace(Ze[Ke.TILDETRIM],Vp),fe("tilde trim",e),e=e.replace(Ze[Ke.CARETTRIM],Gp),fe("caret trim",e);let c=e.split(" ").map(y=>Yp(y,this.options)).join(" ").split(/\s+/).map(y=>og(y,this.options));o&&(c=c.filter(y=>(fe("loose invalid filter",y,this.options),!!y.match(Ze[Ke.COMPARATORLOOSE])))),fe("range list",c);let u=new Map,f=c.map(y=>new Lo(y,this.options));for(let y of f){if(tl(y))return[y];u.set(y.value,y)}u.size>1&&u.has("")&&u.delete("");let g=[...u.values()];return el.set(i,g),g}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some(i=>nl(i,t)&&e.set.some(r=>nl(r,t)&&i.every(o=>r.every(s=>o.intersects(s,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Kp(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(ag(this.set[t],e,this.options))return!0;return!1}};il.exports=No;var Up=Zu(),el=new Up({max:1e3}),Wp=dr(),Lo=wi(),fe=Ri(),Kp=He(),{safeRe:Ze,t:Ke,comparatorTrimReplace:zp,tildeTrimReplace:Vp,caretTrimReplace:Gp}=Un(),{FLAG_INCLUDE_PRERELEASE:Xp,FLAG_LOOSE:Bp}=Ci(),tl=n=>n.value==="<0.0.0-0",Qp=n=>n.value==="",nl=(n,e)=>{let t=!0,i=n.slice(),r=i.pop();for(;t&&i.length;)t=i.every(o=>r.intersects(o,e)),r=i.pop();return t},Yp=(n,e)=>(fe("comp",n,e),n=eg(n,e),fe("caret",n),n=Jp(n,e),fe("tildes",n),n=ng(n,e),fe("xrange",n),n=rg(n,e),fe("stars",n),n),ze=n=>!n||n.toLowerCase()==="x"||n==="*",Jp=(n,e)=>n.trim().split(/\s+/).map(t=>Zp(t,e)).join(" "),Zp=(n,e)=>{let t=e.loose?Ze[Ke.TILDELOOSE]:Ze[Ke.TILDE];return n.replace(t,(i,r,o,s,c)=>{fe("tilde",n,i,r,o,s,c);let u;return ze(r)?u="":ze(o)?u=`>=${r}.0.0 <${+r+1}.0.0-0`:ze(s)?u=`>=${r}.${o}.0 <${r}.${+o+1}.0-0`:c?(fe("replaceTilde pr",c),u=`>=${r}.${o}.${s}-${c} <${r}.${+o+1}.0-0`):u=`>=${r}.${o}.${s} <${r}.${+o+1}.0-0`,fe("tilde return",u),u})},eg=(n,e)=>n.trim().split(/\s+/).map(t=>tg(t,e)).join(" "),tg=(n,e)=>{fe("caret",n,e);let t=e.loose?Ze[Ke.CARETLOOSE]:Ze[Ke.CARET],i=e.includePrerelease?"-0":"";return n.replace(t,(r,o,s,c,u)=>{fe("caret",n,r,o,s,c,u);let f;return ze(o)?f="":ze(s)?f=`>=${o}.0.0${i} <${+o+1}.0.0-0`:ze(c)?o==="0"?f=`>=${o}.${s}.0${i} <${o}.${+s+1}.0-0`:f=`>=${o}.${s}.0${i} <${+o+1}.0.0-0`:u?(fe("replaceCaret pr",u),o==="0"?s==="0"?f=`>=${o}.${s}.${c}-${u} <${o}.${s}.${+c+1}-0`:f=`>=${o}.${s}.${c}-${u} <${o}.${+s+1}.0-0`:f=`>=${o}.${s}.${c}-${u} <${+o+1}.0.0-0`):(fe("no pr"),o==="0"?s==="0"?f=`>=${o}.${s}.${c}${i} <${o}.${s}.${+c+1}-0`:f=`>=${o}.${s}.${c}${i} <${o}.${+s+1}.0-0`:f=`>=${o}.${s}.${c} <${+o+1}.0.0-0`),fe("caret return",f),f})},ng=(n,e)=>(fe("replaceXRanges",n,e),n.split(/\s+/).map(t=>ig(t,e)).join(" ")),ig=(n,e)=>{n=n.trim();let t=e.loose?Ze[Ke.XRANGELOOSE]:Ze[Ke.XRANGE];return n.replace(t,(i,r,o,s,c,u)=>{fe("xRange",n,i,r,o,s,c,u);let f=ze(o),g=f||ze(s),y=g||ze(c),v=y;return r==="="&&v&&(r=""),u=e.includePrerelease?"-0":"",f?r===">"||r==="<"?i="<0.0.0-0":i="*":r&&v?(g&&(s=0),c=0,r===">"?(r=">=",g?(o=+o+1,s=0,c=0):(s=+s+1,c=0)):r==="<="&&(r="<",g?o=+o+1:s=+s+1),r==="<"&&(u="-0"),i=`${r+o}.${s}.${c}${u}`):g?i=`>=${o}.0.0${u} <${+o+1}.0.0-0`:y&&(i=`>=${o}.${s}.0${u} <${o}.${+s+1}.0-0`),fe("xRange return",i),i})},rg=(n,e)=>(fe("replaceStars",n,e),n.trim().replace(Ze[Ke.STAR],"")),og=(n,e)=>(fe("replaceGTE0",n,e),n.trim().replace(Ze[e.includePrerelease?Ke.GTE0PRE:Ke.GTE0],"")),sg=n=>(e,t,i,r,o,s,c,u,f,g,y,v,R)=>(ze(i)?t="":ze(r)?t=`>=${i}.0.0${n?"-0":""}`:ze(o)?t=`>=${i}.${r}.0${n?"-0":""}`:s?t=`>=${t}`:t=`>=${t}${n?"-0":""}`,ze(f)?u="":ze(g)?u=`<${+f+1}.0.0-0`:ze(y)?u=`<${f}.${+g+1}.0-0`:v?u=`<=${f}.${g}.${y}-${v}`:n?u=`<${f}.${g}.${+y+1}-0`:u=`<=${u}`,`${t} ${u}`.trim()),ag=(n,e,t)=>{for(let i=0;i<n.length;i++)if(!n[i].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let i=0;i<n.length;i++)if(fe(n[i].semver),n[i].semver!==Lo.ANY&&n[i].semver.prerelease.length>0){let r=n[i].semver;if(r.major===e.major&&r.minor===e.minor&&r.patch===e.patch)return!0}return!1}return!0}});var wi=T((O_,ul)=>{var bi=Symbol("SemVer ANY"),Ho=class n{static get ANY(){return bi}constructor(e,t){if(t=rl(t),e instanceof n){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Mo("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===bi?this.value="":this.value=this.operator+this.semver.version,Mo("comp",this)}parse(e){let t=this.options.loose?ol[sl.COMPARATORLOOSE]:ol[sl.COMPARATOR],i=e.match(t);if(!i)throw new TypeError(`Invalid comparator: ${e}`);this.operator=i[1]!==void 0?i[1]:"",this.operator==="="&&(this.operator=""),i[2]?this.semver=new al(i[2],this.options.loose):this.semver=bi}toString(){return this.value}test(e){if(Mo("Comparator.test",e,this.options.loose),this.semver===bi||e===bi)return!0;if(typeof e=="string")try{e=new al(e,this.options)}catch{return!1}return Ao(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new cl(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new cl(this.value,t).test(e.semver):(t=rl(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Ao(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Ao(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};ul.exports=Ho;var rl=dr(),{safeRe:ol,t:sl}=Un(),Ao=Io(),Mo=Ri(),al=He(),cl=ft()});var Ti=T((N_,ll)=>{var cg=ft(),ug=(n,e,t)=>{try{e=new cg(e,t)}catch{return!1}return e.test(n)};ll.exports=ug});var fl=T((L_,dl)=>{var lg=ft(),dg=(n,e)=>new lg(n,e).set.map(t=>t.map(i=>i.value).join(" ").trim().split(" "));dl.exports=dg});var pl=T((A_,hl)=>{var fg=He(),hg=ft(),pg=(n,e,t)=>{let i=null,r=null,o=null;try{o=new hg(e,t)}catch{return null}return n.forEach(s=>{o.test(s)&&(!i||r.compare(s)===-1)&&(i=s,r=new fg(i,t))}),i};hl.exports=pg});var ml=T((M_,gl)=>{var gg=He(),mg=ft(),vg=(n,e,t)=>{let i=null,r=null,o=null;try{o=new mg(e,t)}catch{return null}return n.forEach(s=>{o.test(s)&&(!i||r.compare(s)===1)&&(i=s,r=new gg(i,t))}),i};gl.exports=vg});var Cl=T((H_,yl)=>{var jo=He(),yg=ft(),vl=Di(),Cg=(n,e)=>{n=new yg(n,e);let t=new jo("0.0.0");if(n.test(t)||(t=new jo("0.0.0-0"),n.test(t)))return t;t=null;for(let i=0;i<n.set.length;++i){let r=n.set[i],o=null;r.forEach(s=>{let c=new jo(s.semver.version);switch(s.operator){case">":c.prerelease.length===0?c.patch++:c.prerelease.push(0),c.raw=c.format();case"":case">=":(!o||vl(c,o))&&(o=c);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!t||vl(t,o))&&(t=o)}return t&&n.test(t)?t:null};yl.exports=Cg});var Dl=T((j_,Rl)=>{var Rg=ft(),Dg=(n,e)=>{try{return new Rg(n,e).range||"*"}catch{return null}};Rl.exports=Dg});var Dr=T(($_,bl)=>{var _g=He(),wl=wi(),{ANY:Sg}=wl,wg=ft(),bg=Ti(),_l=Di(),Sl=gr(),Tg=vr(),qg=mr(),Pg=(n,e,t,i)=>{n=new _g(n,i),e=new wg(e,i);let r,o,s,c,u;switch(t){case">":r=_l,o=Tg,s=Sl,c=">",u=">=";break;case"<":r=Sl,o=qg,s=_l,c="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(bg(n,e,i))return!1;for(let f=0;f<e.set.length;++f){let g=e.set[f],y=null,v=null;if(g.forEach(R=>{R.semver===Sg&&(R=new wl(">=0.0.0")),y=y||R,v=v||R,r(R.semver,y.semver,i)?y=R:s(R.semver,v.semver,i)&&(v=R)}),y.operator===c||y.operator===u||(!v.operator||v.operator===c)&&o(n,v.semver))return!1;if(v.operator===u&&s(n,v.semver))return!1}return!0};bl.exports=Pg});var ql=T((U_,Tl)=>{var Eg=Dr(),Ig=(n,e,t)=>Eg(n,e,">",t);Tl.exports=Ig});var El=T((W_,Pl)=>{var kg=Dr(),Fg=(n,e,t)=>kg(n,e,"<",t);Pl.exports=Fg});var Fl=T((K_,kl)=>{var Il=ft(),xg=(n,e,t)=>(n=new Il(n,t),e=new Il(e,t),n.intersects(e,t));kl.exports=xg});var Ol=T((z_,xl)=>{var Og=Ti(),Ng=dt();xl.exports=(n,e,t)=>{let i=[],r=null,o=null,s=n.sort((g,y)=>Ng(g,y,t));for(let g of s)Og(g,e,t)?(o=g,r||(r=g)):(o&&i.push([r,o]),o=null,r=null);r&&i.push([r,null]);let c=[];for(let[g,y]of i)g===y?c.push(g):!y&&g===s[0]?c.push("*"):y?g===s[0]?c.push(`<=${y}`):c.push(`${g} - ${y}`):c.push(`>=${g}`);let u=c.join(" || "),f=typeof e.raw=="string"?e.raw:String(e);return u.length<f.length?u:e}});var jl=T((V_,Hl)=>{var Nl=ft(),Uo=wi(),{ANY:$o}=Uo,qi=Ti(),Wo=dt(),Lg=(n,e,t={})=>{if(n===e)return!0;n=new Nl(n,t),e=new Nl(e,t);let i=!1;e:for(let r of n.set){for(let o of e.set){let s=Mg(r,o,t);if(i=i||s!==null,s)continue e}if(i)return!1}return!0},Ag=[new Uo(">=0.0.0-0")],Ll=[new Uo(">=0.0.0")],Mg=(n,e,t)=>{if(n===e)return!0;if(n.length===1&&n[0].semver===$o){if(e.length===1&&e[0].semver===$o)return!0;t.includePrerelease?n=Ag:n=Ll}if(e.length===1&&e[0].semver===$o){if(t.includePrerelease)return!0;e=Ll}let i=new Set,r,o;for(let R of n)R.operator===">"||R.operator===">="?r=Al(r,R,t):R.operator==="<"||R.operator==="<="?o=Ml(o,R,t):i.add(R.semver);if(i.size>1)return null;let s;if(r&&o){if(s=Wo(r.semver,o.semver,t),s>0)return null;if(s===0&&(r.operator!==">="||o.operator!=="<="))return null}for(let R of i){if(r&&!qi(R,String(r),t)||o&&!qi(R,String(o),t))return null;for(let C of e)if(!qi(R,String(C),t))return!1;return!0}let c,u,f,g,y=o&&!t.includePrerelease&&o.semver.prerelease.length?o.semver:!1,v=r&&!t.includePrerelease&&r.semver.prerelease.length?r.semver:!1;y&&y.prerelease.length===1&&o.operator==="<"&&y.prerelease[0]===0&&(y=!1);for(let R of e){if(g=g||R.operator===">"||R.operator===">=",f=f||R.operator==="<"||R.operator==="<=",r){if(v&&R.semver.prerelease&&R.semver.prerelease.length&&R.semver.major===v.major&&R.semver.minor===v.minor&&R.semver.patch===v.patch&&(v=!1),R.operator===">"||R.operator===">="){if(c=Al(r,R,t),c===R&&c!==r)return!1}else if(r.operator===">="&&!qi(r.semver,String(R),t))return!1}if(o){if(y&&R.semver.prerelease&&R.semver.prerelease.length&&R.semver.major===y.major&&R.semver.minor===y.minor&&R.semver.patch===y.patch&&(y=!1),R.operator==="<"||R.operator==="<="){if(u=Ml(o,R,t),u===R&&u!==o)return!1}else if(o.operator==="<="&&!qi(o.semver,String(R),t))return!1}if(!R.operator&&(o||r)&&s!==0)return!1}return!(r&&f&&!o&&s!==0||o&&g&&!r&&s!==0||v||y)},Al=(n,e,t)=>{if(!n)return e;let i=Wo(n.semver,e.semver,t);return i>0?n:i<0||e.operator===">"&&n.operator===">="?e:n},Ml=(n,e,t)=>{if(!n)return e;let i=Wo(n.semver,e.semver,t);return i<0?n:i>0||e.operator==="<"&&n.operator==="<="?e:n};Hl.exports=Lg});var Kl=T((G_,Wl)=>{var Ko=Un(),$l=Ci(),Hg=He(),Ul=To(),jg=vn(),$g=au(),Ug=uu(),Wg=fu(),Kg=gu(),zg=vu(),Vg=Cu(),Gg=Du(),Xg=Su(),Bg=dt(),Qg=qu(),Yg=Eu(),Jg=pr(),Zg=xu(),em=Nu(),tm=Di(),nm=gr(),im=Po(),rm=Eo(),om=mr(),sm=vr(),am=Io(),cm=Ku(),um=wi(),lm=ft(),dm=Ti(),fm=fl(),hm=pl(),pm=ml(),gm=Cl(),mm=Dl(),vm=Dr(),ym=ql(),Cm=El(),Rm=Fl(),Dm=Ol(),_m=jl();Wl.exports={parse:jg,valid:$g,clean:Ug,inc:Wg,diff:Kg,major:zg,minor:Vg,patch:Gg,prerelease:Xg,compare:Bg,rcompare:Qg,compareLoose:Yg,compareBuild:Jg,sort:Zg,rsort:em,gt:tm,lt:nm,eq:im,neq:rm,gte:om,lte:sm,cmp:am,coerce:cm,Comparator:um,Range:lm,satisfies:dm,toComparators:fm,maxSatisfying:hm,minSatisfying:pm,minVersion:gm,validRange:mm,outside:vm,gtr:ym,ltr:Cm,intersects:Rm,simplifyRange:Dm,subset:_m,SemVer:Hg,re:Ko.re,src:Ko.src,tokens:Ko.t,SEMVER_SPEC_VERSION:$l.SEMVER_SPEC_VERSION,RELEASE_TYPES:$l.RELEASE_TYPES,compareIdentifiers:Ul.compareIdentifiers,rcompareIdentifiers:Ul.rcompareIdentifiers}});var ht=T(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.asPromise=Re.thenable=Re.typedArray=Re.stringArray=Re.array=Re.func=Re.error=Re.number=Re.string=Re.boolean=void 0;function Sm(n){return n===!0||n===!1}Re.boolean=Sm;function zl(n){return typeof n=="string"||n instanceof String}Re.string=zl;function wm(n){return typeof n=="number"||n instanceof Number}Re.number=wm;function bm(n){return n instanceof Error}Re.error=bm;function Vl(n){return typeof n=="function"}Re.func=Vl;function Gl(n){return Array.isArray(n)}Re.array=Gl;function Tm(n){return Gl(n)&&n.every(e=>zl(e))}Re.stringArray=Tm;function qm(n,e){return Array.isArray(n)&&n.every(e)}Re.typedArray=qm;function Xl(n){return n&&Vl(n.then)}Re.thenable=Xl;function Pm(n){return n instanceof Promise?n:Xl(n)?new Promise((e,t)=>{n.then(i=>e(i),i=>t(i))}):Promise.resolve(n)}Re.asPromise=Pm});var Sr=T((Bl,_r)=>{(function(n){if(typeof _r=="object"&&typeof _r.exports=="object"){var e=n(require,Bl);e!==void 0&&(_r.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],n)})(function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var t;(function(d){function D(_){return typeof _=="string"}d.is=D})(t=e.DocumentUri||(e.DocumentUri={}));var i;(function(d){function D(_){return typeof _=="string"}d.is=D})(i=e.URI||(e.URI={}));var r;(function(d){d.MIN_VALUE=-2147483648,d.MAX_VALUE=2147483647;function D(_){return typeof _=="number"&&d.MIN_VALUE<=_&&_<=d.MAX_VALUE}d.is=D})(r=e.integer||(e.integer={}));var o;(function(d){d.MIN_VALUE=0,d.MAX_VALUE=2147483647;function D(_){return typeof _=="number"&&d.MIN_VALUE<=_&&_<=d.MAX_VALUE}d.is=D})(o=e.uinteger||(e.uinteger={}));var s;(function(d){function D(m,l){return m===Number.MAX_VALUE&&(m=o.MAX_VALUE),l===Number.MAX_VALUE&&(l=o.MAX_VALUE),{line:m,character:l}}d.create=D;function _(m){var l=m;return S.objectLiteral(l)&&S.uinteger(l.line)&&S.uinteger(l.character)}d.is=_})(s=e.Position||(e.Position={}));var c;(function(d){function D(m,l,b,I){if(S.uinteger(m)&&S.uinteger(l)&&S.uinteger(b)&&S.uinteger(I))return{start:s.create(m,l),end:s.create(b,I)};if(s.is(m)&&s.is(l))return{start:m,end:l};throw new Error("Range#create called with invalid arguments[".concat(m,", ").concat(l,", ").concat(b,", ").concat(I,"]"))}d.create=D;function _(m){var l=m;return S.objectLiteral(l)&&s.is(l.start)&&s.is(l.end)}d.is=_})(c=e.Range||(e.Range={}));var u;(function(d){function D(m,l){return{uri:m,range:l}}d.create=D;function _(m){var l=m;return S.defined(l)&&c.is(l.range)&&(S.string(l.uri)||S.undefined(l.uri))}d.is=_})(u=e.Location||(e.Location={}));var f;(function(d){function D(m,l,b,I){return{targetUri:m,targetRange:l,targetSelectionRange:b,originSelectionRange:I}}d.create=D;function _(m){var l=m;return S.defined(l)&&c.is(l.targetRange)&&S.string(l.targetUri)&&c.is(l.targetSelectionRange)&&(c.is(l.originSelectionRange)||S.undefined(l.originSelectionRange))}d.is=_})(f=e.LocationLink||(e.LocationLink={}));var g;(function(d){function D(m,l,b,I){return{red:m,green:l,blue:b,alpha:I}}d.create=D;function _(m){var l=m;return S.objectLiteral(l)&&S.numberRange(l.red,0,1)&&S.numberRange(l.green,0,1)&&S.numberRange(l.blue,0,1)&&S.numberRange(l.alpha,0,1)}d.is=_})(g=e.Color||(e.Color={}));var y;(function(d){function D(m,l){return{range:m,color:l}}d.create=D;function _(m){var l=m;return S.objectLiteral(l)&&c.is(l.range)&&g.is(l.color)}d.is=_})(y=e.ColorInformation||(e.ColorInformation={}));var v;(function(d){function D(m,l,b){return{label:m,textEdit:l,additionalTextEdits:b}}d.create=D;function _(m){var l=m;return S.objectLiteral(l)&&S.string(l.label)&&(S.undefined(l.textEdit)||J.is(l))&&(S.undefined(l.additionalTextEdits)||S.typedArray(l.additionalTextEdits,J.is))}d.is=_})(v=e.ColorPresentation||(e.ColorPresentation={}));var R;(function(d){d.Comment="comment",d.Imports="imports",d.Region="region"})(R=e.FoldingRangeKind||(e.FoldingRangeKind={}));var C;(function(d){function D(m,l,b,I,W,de){var ue={startLine:m,endLine:l};return S.defined(b)&&(ue.startCharacter=b),S.defined(I)&&(ue.endCharacter=I),S.defined(W)&&(ue.kind=W),S.defined(de)&&(ue.collapsedText=de),ue}d.create=D;function _(m){var l=m;return S.objectLiteral(l)&&S.uinteger(l.startLine)&&S.uinteger(l.startLine)&&(S.undefined(l.startCharacter)||S.uinteger(l.startCharacter))&&(S.undefined(l.endCharacter)||S.uinteger(l.endCharacter))&&(S.undefined(l.kind)||S.string(l.kind))}d.is=_})(C=e.FoldingRange||(e.FoldingRange={}));var q;(function(d){function D(m,l){return{location:m,message:l}}d.create=D;function _(m){var l=m;return S.defined(l)&&u.is(l.location)&&S.string(l.message)}d.is=_})(q=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var E;(function(d){d.Error=1,d.Warning=2,d.Information=3,d.Hint=4})(E=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var F;(function(d){d.Unnecessary=1,d.Deprecated=2})(F=e.DiagnosticTag||(e.DiagnosticTag={}));var x;(function(d){function D(_){var m=_;return S.objectLiteral(m)&&S.string(m.href)}d.is=D})(x=e.CodeDescription||(e.CodeDescription={}));var N;(function(d){function D(m,l,b,I,W,de){var ue={range:m,message:l};return S.defined(b)&&(ue.severity=b),S.defined(I)&&(ue.code=I),S.defined(W)&&(ue.source=W),S.defined(de)&&(ue.relatedInformation=de),ue}d.create=D;function _(m){var l,b=m;return S.defined(b)&&c.is(b.range)&&S.string(b.message)&&(S.number(b.severity)||S.undefined(b.severity))&&(S.integer(b.code)||S.string(b.code)||S.undefined(b.code))&&(S.undefined(b.codeDescription)||S.string((l=b.codeDescription)===null||l===void 0?void 0:l.href))&&(S.string(b.source)||S.undefined(b.source))&&(S.undefined(b.relatedInformation)||S.typedArray(b.relatedInformation,q.is))}d.is=_})(N=e.Diagnostic||(e.Diagnostic={}));var L;(function(d){function D(m,l){for(var b=[],I=2;I<arguments.length;I++)b[I-2]=arguments[I];var W={title:m,command:l};return S.defined(b)&&b.length>0&&(W.arguments=b),W}d.create=D;function _(m){var l=m;return S.defined(l)&&S.string(l.title)&&S.string(l.command)}d.is=_})(L=e.Command||(e.Command={}));var J;(function(d){function D(b,I){return{range:b,newText:I}}d.replace=D;function _(b,I){return{range:{start:b,end:b},newText:I}}d.insert=_;function m(b){return{range:b,newText:""}}d.del=m;function l(b){var I=b;return S.objectLiteral(I)&&S.string(I.newText)&&c.is(I.range)}d.is=l})(J=e.TextEdit||(e.TextEdit={}));var Ie;(function(d){function D(m,l,b){var I={label:m};return l!==void 0&&(I.needsConfirmation=l),b!==void 0&&(I.description=b),I}d.create=D;function _(m){var l=m;return S.objectLiteral(l)&&S.string(l.label)&&(S.boolean(l.needsConfirmation)||l.needsConfirmation===void 0)&&(S.string(l.description)||l.description===void 0)}d.is=_})(Ie=e.ChangeAnnotation||(e.ChangeAnnotation={}));var Z;(function(d){function D(_){var m=_;return S.string(m)}d.is=D})(Z=e.ChangeAnnotationIdentifier||(e.ChangeAnnotationIdentifier={}));var Pe;(function(d){function D(b,I,W){return{range:b,newText:I,annotationId:W}}d.replace=D;function _(b,I,W){return{range:{start:b,end:b},newText:I,annotationId:W}}d.insert=_;function m(b,I){return{range:b,newText:"",annotationId:I}}d.del=m;function l(b){var I=b;return J.is(I)&&(Ie.is(I.annotationId)||Z.is(I.annotationId))}d.is=l})(Pe=e.AnnotatedTextEdit||(e.AnnotatedTextEdit={}));var xe;(function(d){function D(m,l){return{textDocument:m,edits:l}}d.create=D;function _(m){var l=m;return S.defined(l)&&Me.is(l.textDocument)&&Array.isArray(l.edits)}d.is=_})(xe=e.TextDocumentEdit||(e.TextDocumentEdit={}));var Ue;(function(d){function D(m,l,b){var I={kind:"create",uri:m};return l!==void 0&&(l.overwrite!==void 0||l.ignoreIfExists!==void 0)&&(I.options=l),b!==void 0&&(I.annotationId=b),I}d.create=D;function _(m){var l=m;return l&&l.kind==="create"&&S.string(l.uri)&&(l.options===void 0||(l.options.overwrite===void 0||S.boolean(l.options.overwrite))&&(l.options.ignoreIfExists===void 0||S.boolean(l.options.ignoreIfExists)))&&(l.annotationId===void 0||Z.is(l.annotationId))}d.is=_})(Ue=e.CreateFile||(e.CreateFile={}));var ut;(function(d){function D(m,l,b,I){var W={kind:"rename",oldUri:m,newUri:l};return b!==void 0&&(b.overwrite!==void 0||b.ignoreIfExists!==void 0)&&(W.options=b),I!==void 0&&(W.annotationId=I),W}d.create=D;function _(m){var l=m;return l&&l.kind==="rename"&&S.string(l.oldUri)&&S.string(l.newUri)&&(l.options===void 0||(l.options.overwrite===void 0||S.boolean(l.options.overwrite))&&(l.options.ignoreIfExists===void 0||S.boolean(l.options.ignoreIfExists)))&&(l.annotationId===void 0||Z.is(l.annotationId))}d.is=_})(ut=e.RenameFile||(e.RenameFile={}));var Dt;(function(d){function D(m,l,b){var I={kind:"delete",uri:m};return l!==void 0&&(l.recursive!==void 0||l.ignoreIfNotExists!==void 0)&&(I.options=l),b!==void 0&&(I.annotationId=b),I}d.create=D;function _(m){var l=m;return l&&l.kind==="delete"&&S.string(l.uri)&&(l.options===void 0||(l.options.recursive===void 0||S.boolean(l.options.recursive))&&(l.options.ignoreIfNotExists===void 0||S.boolean(l.options.ignoreIfNotExists)))&&(l.annotationId===void 0||Z.is(l.annotationId))}d.is=_})(Dt=e.DeleteFile||(e.DeleteFile={}));var lt;(function(d){function D(_){var m=_;return m&&(m.changes!==void 0||m.documentChanges!==void 0)&&(m.documentChanges===void 0||m.documentChanges.every(function(l){return S.string(l.kind)?Ue.is(l)||ut.is(l)||Dt.is(l):xe.is(l)}))}d.is=D})(lt=e.WorkspaceEdit||(e.WorkspaceEdit={}));var it=function(){function d(D,_){this.edits=D,this.changeAnnotations=_}return d.prototype.insert=function(D,_,m){var l,b;if(m===void 0?l=J.insert(D,_):Z.is(m)?(b=m,l=Pe.insert(D,_,m)):(this.assertChangeAnnotations(this.changeAnnotations),b=this.changeAnnotations.manage(m),l=Pe.insert(D,_,b)),this.edits.push(l),b!==void 0)return b},d.prototype.replace=function(D,_,m){var l,b;if(m===void 0?l=J.replace(D,_):Z.is(m)?(b=m,l=Pe.replace(D,_,m)):(this.assertChangeAnnotations(this.changeAnnotations),b=this.changeAnnotations.manage(m),l=Pe.replace(D,_,b)),this.edits.push(l),b!==void 0)return b},d.prototype.delete=function(D,_){var m,l;if(_===void 0?m=J.del(D):Z.is(_)?(l=_,m=Pe.del(D,_)):(this.assertChangeAnnotations(this.changeAnnotations),l=this.changeAnnotations.manage(_),m=Pe.del(D,l)),this.edits.push(m),l!==void 0)return l},d.prototype.add=function(D){this.edits.push(D)},d.prototype.all=function(){return this.edits},d.prototype.clear=function(){this.edits.splice(0,this.edits.length)},d.prototype.assertChangeAnnotations=function(D){if(D===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},d}(),We=function(){function d(D){this._annotations=D===void 0?Object.create(null):D,this._counter=0,this._size=0}return d.prototype.all=function(){return this._annotations},Object.defineProperty(d.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),d.prototype.manage=function(D,_){var m;if(Z.is(D)?m=D:(m=this.nextId(),_=D),this._annotations[m]!==void 0)throw new Error("Id ".concat(m," is already in use."));if(_===void 0)throw new Error("No annotation provided for id ".concat(m));return this._annotations[m]=_,this._size++,m},d.prototype.nextId=function(){return this._counter++,this._counter.toString()},d}(),Be=function(){function d(D){var _=this;this._textEditChanges=Object.create(null),D!==void 0?(this._workspaceEdit=D,D.documentChanges?(this._changeAnnotations=new We(D.changeAnnotations),D.changeAnnotations=this._changeAnnotations.all(),D.documentChanges.forEach(function(m){if(xe.is(m)){var l=new it(m.edits,_._changeAnnotations);_._textEditChanges[m.textDocument.uri]=l}})):D.changes&&Object.keys(D.changes).forEach(function(m){var l=new it(D.changes[m]);_._textEditChanges[m]=l})):this._workspaceEdit={}}return Object.defineProperty(d.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),d.prototype.getTextEditChange=function(D){if(Me.is(D)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var _={uri:D.uri,version:D.version},m=this._textEditChanges[_.uri];if(!m){var l=[],b={textDocument:_,edits:l};this._workspaceEdit.documentChanges.push(b),m=new it(l,this._changeAnnotations),this._textEditChanges[_.uri]=m}return m}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var m=this._textEditChanges[D];if(!m){var l=[];this._workspaceEdit.changes[D]=l,m=new it(l),this._textEditChanges[D]=m}return m}},d.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new We,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},d.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},d.prototype.createFile=function(D,_,m){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var l;Ie.is(_)||Z.is(_)?l=_:m=_;var b,I;if(l===void 0?b=Ue.create(D,m):(I=Z.is(l)?l:this._changeAnnotations.manage(l),b=Ue.create(D,m,I)),this._workspaceEdit.documentChanges.push(b),I!==void 0)return I},d.prototype.renameFile=function(D,_,m,l){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var b;Ie.is(m)||Z.is(m)?b=m:l=m;var I,W;if(b===void 0?I=ut.create(D,_,l):(W=Z.is(b)?b:this._changeAnnotations.manage(b),I=ut.create(D,_,l,W)),this._workspaceEdit.documentChanges.push(I),W!==void 0)return W},d.prototype.deleteFile=function(D,_,m){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var l;Ie.is(_)||Z.is(_)?l=_:m=_;var b,I;if(l===void 0?b=Dt.create(D,m):(I=Z.is(l)?l:this._changeAnnotations.manage(l),b=Dt.create(D,m,I)),this._workspaceEdit.documentChanges.push(b),I!==void 0)return I},d}();e.WorkspaceChange=Be;var cn;(function(d){function D(m){return{uri:m}}d.create=D;function _(m){var l=m;return S.defined(l)&&S.string(l.uri)}d.is=_})(cn=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var Se;(function(d){function D(m,l){return{uri:m,version:l}}d.create=D;function _(m){var l=m;return S.defined(l)&&S.string(l.uri)&&S.integer(l.version)}d.is=_})(Se=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var Me;(function(d){function D(m,l){return{uri:m,version:l}}d.create=D;function _(m){var l=m;return S.defined(l)&&S.string(l.uri)&&(l.version===null||S.integer(l.version))}d.is=_})(Me=e.OptionalVersionedTextDocumentIdentifier||(e.OptionalVersionedTextDocumentIdentifier={}));var xt;(function(d){function D(m,l,b,I){return{uri:m,languageId:l,version:b,text:I}}d.create=D;function _(m){var l=m;return S.defined(l)&&S.string(l.uri)&&S.string(l.languageId)&&S.integer(l.version)&&S.string(l.text)}d.is=_})(xt=e.TextDocumentItem||(e.TextDocumentItem={}));var Ot;(function(d){d.PlainText="plaintext",d.Markdown="markdown";function D(_){var m=_;return m===d.PlainText||m===d.Markdown}d.is=D})(Ot=e.MarkupKind||(e.MarkupKind={}));var ke;(function(d){function D(_){var m=_;return S.objectLiteral(_)&&Ot.is(m.kind)&&S.string(m.value)}d.is=D})(ke=e.MarkupContent||(e.MarkupContent={}));var ci;(function(d){d.Text=1,d.Method=2,d.Function=3,d.Constructor=4,d.Field=5,d.Variable=6,d.Class=7,d.Interface=8,d.Module=9,d.Property=10,d.Unit=11,d.Value=12,d.Enum=13,d.Keyword=14,d.Snippet=15,d.Color=16,d.File=17,d.Reference=18,d.Folder=19,d.EnumMember=20,d.Constant=21,d.Struct=22,d.Event=23,d.Operator=24,d.TypeParameter=25})(ci=e.CompletionItemKind||(e.CompletionItemKind={}));var ui;(function(d){d.PlainText=1,d.Snippet=2})(ui=e.InsertTextFormat||(e.InsertTextFormat={}));var In;(function(d){d.Deprecated=1})(In=e.CompletionItemTag||(e.CompletionItemTag={}));var un;(function(d){function D(m,l,b){return{newText:m,insert:l,replace:b}}d.create=D;function _(m){var l=m;return l&&S.string(l.newText)&&c.is(l.insert)&&c.is(l.replace)}d.is=_})(un=e.InsertReplaceEdit||(e.InsertReplaceEdit={}));var ln;(function(d){d.asIs=1,d.adjustIndentation=2})(ln=e.InsertTextMode||(e.InsertTextMode={}));var li;(function(d){function D(_){var m=_;return m&&(S.string(m.detail)||m.detail===void 0)&&(S.string(m.description)||m.description===void 0)}d.is=D})(li=e.CompletionItemLabelDetails||(e.CompletionItemLabelDetails={}));var kn;(function(d){function D(_){return{label:_}}d.create=D})(kn=e.CompletionItem||(e.CompletionItem={}));var Fn;(function(d){function D(_,m){return{items:_||[],isIncomplete:!!m}}d.create=D})(Fn=e.CompletionList||(e.CompletionList={}));var dn;(function(d){function D(m){return m.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}d.fromPlainText=D;function _(m){var l=m;return S.string(l)||S.objectLiteral(l)&&S.string(l.language)&&S.string(l.value)}d.is=_})(dn=e.MarkedString||(e.MarkedString={}));var Nt;(function(d){function D(_){var m=_;return!!m&&S.objectLiteral(m)&&(ke.is(m.contents)||dn.is(m.contents)||S.typedArray(m.contents,dn.is))&&(_.range===void 0||c.is(_.range))}d.is=D})(Nt=e.Hover||(e.Hover={}));var xn;(function(d){function D(_,m){return m?{label:_,documentation:m}:{label:_}}d.create=D})(xn=e.ParameterInformation||(e.ParameterInformation={}));var Qt;(function(d){function D(_,m){for(var l=[],b=2;b<arguments.length;b++)l[b-2]=arguments[b];var I={label:_};return S.defined(m)&&(I.documentation=m),S.defined(l)?I.parameters=l:I.parameters=[],I}d.create=D})(Qt=e.SignatureInformation||(e.SignatureInformation={}));var fn;(function(d){d.Text=1,d.Read=2,d.Write=3})(fn=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var On;(function(d){function D(_,m){var l={range:_};return S.number(m)&&(l.kind=m),l}d.create=D})(On=e.DocumentHighlight||(e.DocumentHighlight={}));var _t;(function(d){d.File=1,d.Module=2,d.Namespace=3,d.Package=4,d.Class=5,d.Method=6,d.Property=7,d.Field=8,d.Constructor=9,d.Enum=10,d.Interface=11,d.Function=12,d.Variable=13,d.Constant=14,d.String=15,d.Number=16,d.Boolean=17,d.Array=18,d.Object=19,d.Key=20,d.Null=21,d.EnumMember=22,d.Struct=23,d.Event=24,d.Operator=25,d.TypeParameter=26})(_t=e.SymbolKind||(e.SymbolKind={}));var hn;(function(d){d.Deprecated=1})(hn=e.SymbolTag||(e.SymbolTag={}));var Qe;(function(d){function D(_,m,l,b,I){var W={name:_,kind:m,location:{uri:b,range:l}};return I&&(W.containerName=I),W}d.create=D})(Qe=e.SymbolInformation||(e.SymbolInformation={}));var di;(function(d){function D(_,m,l,b){return b!==void 0?{name:_,kind:m,location:{uri:l,range:b}}:{name:_,kind:m,location:{uri:l}}}d.create=D})(di=e.WorkspaceSymbol||(e.WorkspaceSymbol={}));var rt;(function(d){function D(m,l,b,I,W,de){var ue={name:m,detail:l,kind:b,range:I,selectionRange:W};return de!==void 0&&(ue.children=de),ue}d.create=D;function _(m){var l=m;return l&&S.string(l.name)&&S.number(l.kind)&&c.is(l.range)&&c.is(l.selectionRange)&&(l.detail===void 0||S.string(l.detail))&&(l.deprecated===void 0||S.boolean(l.deprecated))&&(l.children===void 0||Array.isArray(l.children))&&(l.tags===void 0||Array.isArray(l.tags))}d.is=_})(rt=e.DocumentSymbol||(e.DocumentSymbol={}));var pn;(function(d){d.Empty="",d.QuickFix="quickfix",d.Refactor="refactor",d.RefactorExtract="refactor.extract",d.RefactorInline="refactor.inline",d.RefactorRewrite="refactor.rewrite",d.Source="source",d.SourceOrganizeImports="source.organizeImports",d.SourceFixAll="source.fixAll"})(pn=e.CodeActionKind||(e.CodeActionKind={}));var gn;(function(d){d.Invoked=1,d.Automatic=2})(gn=e.CodeActionTriggerKind||(e.CodeActionTriggerKind={}));var Nn;(function(d){function D(m,l,b){var I={diagnostics:m};return l!=null&&(I.only=l),b!=null&&(I.triggerKind=b),I}d.create=D;function _(m){var l=m;return S.defined(l)&&S.typedArray(l.diagnostics,N.is)&&(l.only===void 0||S.typedArray(l.only,S.string))&&(l.triggerKind===void 0||l.triggerKind===gn.Invoked||l.triggerKind===gn.Automatic)}d.is=_})(Nn=e.CodeActionContext||(e.CodeActionContext={}));var fi;(function(d){function D(m,l,b){var I={title:m},W=!0;return typeof l=="string"?(W=!1,I.kind=l):L.is(l)?I.command=l:I.edit=l,W&&b!==void 0&&(I.kind=b),I}d.create=D;function _(m){var l=m;return l&&S.string(l.title)&&(l.diagnostics===void 0||S.typedArray(l.diagnostics,N.is))&&(l.kind===void 0||S.string(l.kind))&&(l.edit!==void 0||l.command!==void 0)&&(l.command===void 0||L.is(l.command))&&(l.isPreferred===void 0||S.boolean(l.isPreferred))&&(l.edit===void 0||lt.is(l.edit))}d.is=_})(fi=e.CodeAction||(e.CodeAction={}));var Lt;(function(d){function D(m,l){var b={range:m};return S.defined(l)&&(b.data=l),b}d.create=D;function _(m){var l=m;return S.defined(l)&&c.is(l.range)&&(S.undefined(l.command)||L.is(l.command))}d.is=_})(Lt=e.CodeLens||(e.CodeLens={}));var hi;(function(d){function D(m,l){return{tabSize:m,insertSpaces:l}}d.create=D;function _(m){var l=m;return S.defined(l)&&S.uinteger(l.tabSize)&&S.boolean(l.insertSpaces)}d.is=_})(hi=e.FormattingOptions||(e.FormattingOptions={}));var Ln;(function(d){function D(m,l,b){return{range:m,target:l,data:b}}d.create=D;function _(m){var l=m;return S.defined(l)&&c.is(l.range)&&(S.undefined(l.target)||S.string(l.target))}d.is=_})(Ln=e.DocumentLink||(e.DocumentLink={}));var pi;(function(d){function D(m,l){return{range:m,parent:l}}d.create=D;function _(m){var l=m;return S.objectLiteral(l)&&c.is(l.range)&&(l.parent===void 0||d.is(l.parent))}d.is=_})(pi=e.SelectionRange||(e.SelectionRange={}));var An;(function(d){d.namespace="namespace",d.type="type",d.class="class",d.enum="enum",d.interface="interface",d.struct="struct",d.typeParameter="typeParameter",d.parameter="parameter",d.variable="variable",d.property="property",d.enumMember="enumMember",d.event="event",d.function="function",d.method="method",d.macro="macro",d.keyword="keyword",d.modifier="modifier",d.comment="comment",d.string="string",d.number="number",d.regexp="regexp",d.operator="operator",d.decorator="decorator"})(An=e.SemanticTokenTypes||(e.SemanticTokenTypes={}));var gi;(function(d){d.declaration="declaration",d.definition="definition",d.readonly="readonly",d.static="static",d.deprecated="deprecated",d.abstract="abstract",d.async="async",d.modification="modification",d.documentation="documentation",d.defaultLibrary="defaultLibrary"})(gi=e.SemanticTokenModifiers||(e.SemanticTokenModifiers={}));var Mn;(function(d){function D(_){var m=_;return S.objectLiteral(m)&&(m.resultId===void 0||typeof m.resultId=="string")&&Array.isArray(m.data)&&(m.data.length===0||typeof m.data[0]=="number")}d.is=D})(Mn=e.SemanticTokens||(e.SemanticTokens={}));var Hn;(function(d){function D(m,l){return{range:m,text:l}}d.create=D;function _(m){var l=m;return l!=null&&c.is(l.range)&&S.string(l.text)}d.is=_})(Hn=e.InlineValueText||(e.InlineValueText={}));var mi;(function(d){function D(m,l,b){return{range:m,variableName:l,caseSensitiveLookup:b}}d.create=D;function _(m){var l=m;return l!=null&&c.is(l.range)&&S.boolean(l.caseSensitiveLookup)&&(S.string(l.variableName)||l.variableName===void 0)}d.is=_})(mi=e.InlineValueVariableLookup||(e.InlineValueVariableLookup={}));var jn;(function(d){function D(m,l){return{range:m,expression:l}}d.create=D;function _(m){var l=m;return l!=null&&c.is(l.range)&&(S.string(l.expression)||l.expression===void 0)}d.is=_})(jn=e.InlineValueEvaluatableExpression||(e.InlineValueEvaluatableExpression={}));var vi;(function(d){function D(m,l){return{frameId:m,stoppedLocation:l}}d.create=D;function _(m){var l=m;return S.defined(l)&&c.is(m.stoppedLocation)}d.is=_})(vi=e.InlineValueContext||(e.InlineValueContext={}));var mn;(function(d){d.Type=1,d.Parameter=2;function D(_){return _===1||_===2}d.is=D})(mn=e.InlayHintKind||(e.InlayHintKind={}));var Yt;(function(d){function D(m){return{value:m}}d.create=D;function _(m){var l=m;return S.objectLiteral(l)&&(l.tooltip===void 0||S.string(l.tooltip)||ke.is(l.tooltip))&&(l.location===void 0||u.is(l.location))&&(l.command===void 0||L.is(l.command))}d.is=_})(Yt=e.InlayHintLabelPart||(e.InlayHintLabelPart={}));var h;(function(d){function D(m,l,b){var I={position:m,label:l};return b!==void 0&&(I.kind=b),I}d.create=D;function _(m){var l=m;return S.objectLiteral(l)&&s.is(l.position)&&(S.string(l.label)||S.typedArray(l.label,Yt.is))&&(l.kind===void 0||mn.is(l.kind))&&l.textEdits===void 0||S.typedArray(l.textEdits,J.is)&&(l.tooltip===void 0||S.string(l.tooltip)||ke.is(l.tooltip))&&(l.paddingLeft===void 0||S.boolean(l.paddingLeft))&&(l.paddingRight===void 0||S.boolean(l.paddingRight))}d.is=_})(h=e.InlayHint||(e.InlayHint={}));var P;(function(d){function D(_){var m=_;return S.objectLiteral(m)&&i.is(m.uri)&&S.string(m.name)}d.is=D})(P=e.WorkspaceFolder||(e.WorkspaceFolder={})),e.EOL=[`
`,`\r
`,"\r"];var j;(function(d){function D(b,I,W,de){return new re(b,I,W,de)}d.create=D;function _(b){var I=b;return!!(S.defined(I)&&S.string(I.uri)&&(S.undefined(I.languageId)||S.string(I.languageId))&&S.uinteger(I.lineCount)&&S.func(I.getText)&&S.func(I.positionAt)&&S.func(I.offsetAt))}d.is=_;function m(b,I){for(var W=b.getText(),de=l(I,function(Jt,$n){var yi=Jt.range.start.line-$n.range.start.line;return yi===0?Jt.range.start.character-$n.range.start.character:yi}),ue=W.length,ot=de.length-1;ot>=0;ot--){var Ye=de[ot],St=b.offsetAt(Ye.range.start),Q=b.offsetAt(Ye.range.end);if(Q<=ue)W=W.substring(0,St)+Ye.newText+W.substring(Q,W.length);else throw new Error("Overlapping edit");ue=St}return W}d.applyEdits=m;function l(b,I){if(b.length<=1)return b;var W=b.length/2|0,de=b.slice(0,W),ue=b.slice(W);l(de,I),l(ue,I);for(var ot=0,Ye=0,St=0;ot<de.length&&Ye<ue.length;){var Q=I(de[ot],ue[Ye]);Q<=0?b[St++]=de[ot++]:b[St++]=ue[Ye++]}for(;ot<de.length;)b[St++]=de[ot++];for(;Ye<ue.length;)b[St++]=ue[Ye++];return b}})(j=e.TextDocument||(e.TextDocument={}));var re=function(){function d(D,_,m,l){this._uri=D,this._languageId=_,this._version=m,this._content=l,this._lineOffsets=void 0}return Object.defineProperty(d.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),d.prototype.getText=function(D){if(D){var _=this.offsetAt(D.start),m=this.offsetAt(D.end);return this._content.substring(_,m)}return this._content},d.prototype.update=function(D,_){this._content=D.text,this._version=_,this._lineOffsets=void 0},d.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var D=[],_=this._content,m=!0,l=0;l<_.length;l++){m&&(D.push(l),m=!1);var b=_.charAt(l);m=b==="\r"||b===`
`,b==="\r"&&l+1<_.length&&_.charAt(l+1)===`
`&&l++}m&&_.length>0&&D.push(_.length),this._lineOffsets=D}return this._lineOffsets},d.prototype.positionAt=function(D){D=Math.max(Math.min(D,this._content.length),0);var _=this.getLineOffsets(),m=0,l=_.length;if(l===0)return s.create(0,D);for(;m<l;){var b=Math.floor((m+l)/2);_[b]>D?l=b:m=b+1}var I=m-1;return s.create(I,D-_[I])},d.prototype.offsetAt=function(D){var _=this.getLineOffsets();if(D.line>=_.length)return this._content.length;if(D.line<0)return 0;var m=_[D.line],l=D.line+1<_.length?_[D.line+1]:this._content.length;return Math.max(Math.min(m+D.character,l),m)},Object.defineProperty(d.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),d}(),S;(function(d){var D=Object.prototype.toString;function _(Q){return typeof Q<"u"}d.defined=_;function m(Q){return typeof Q>"u"}d.undefined=m;function l(Q){return Q===!0||Q===!1}d.boolean=l;function b(Q){return D.call(Q)==="[object String]"}d.string=b;function I(Q){return D.call(Q)==="[object Number]"}d.number=I;function W(Q,Jt,$n){return D.call(Q)==="[object Number]"&&Jt<=Q&&Q<=$n}d.numberRange=W;function de(Q){return D.call(Q)==="[object Number]"&&-2147483648<=Q&&Q<=2147483647}d.integer=de;function ue(Q){return D.call(Q)==="[object Number]"&&0<=Q&&Q<=2147483647}d.uinteger=ue;function ot(Q){return D.call(Q)==="[object Function]"}d.func=ot;function Ye(Q){return Q!==null&&typeof Q=="object"}d.objectLiteral=Ye;function St(Q,Jt){return Array.isArray(Q)&&Q.every(Jt)}d.typedArray=St})(S||(S={}))})});var ge=T(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.ProtocolNotificationType=pt.ProtocolNotificationType0=pt.ProtocolRequestType=pt.ProtocolRequestType0=pt.RegistrationType=void 0;var Vn=require("vscode-jsonrpc"),zo=class{constructor(e){this.method=e}};pt.RegistrationType=zo;var Vo=class extends Vn.RequestType0{constructor(e){super(e)}};pt.ProtocolRequestType0=Vo;var Go=class extends Vn.RequestType{constructor(e){super(e,Vn.ParameterStructures.byName)}};pt.ProtocolRequestType=Go;var Xo=class extends Vn.NotificationType0{constructor(e){super(e)}};pt.ProtocolNotificationType0=Xo;var Bo=class extends Vn.NotificationType{constructor(e){super(e,Vn.ParameterStructures.byName)}};pt.ProtocolNotificationType=Bo});var wr=T(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.objectLiteral=we.typedArray=we.stringArray=we.array=we.func=we.error=we.number=we.string=we.boolean=void 0;function Em(n){return n===!0||n===!1}we.boolean=Em;function Ql(n){return typeof n=="string"||n instanceof String}we.string=Ql;function Im(n){return typeof n=="number"||n instanceof Number}we.number=Im;function km(n){return n instanceof Error}we.error=km;function Fm(n){return typeof n=="function"}we.func=Fm;function Yl(n){return Array.isArray(n)}we.array=Yl;function xm(n){return Yl(n)&&n.every(e=>Ql(e))}we.stringArray=xm;function Om(n,e){return Array.isArray(n)&&n.every(e)}we.typedArray=Om;function Nm(n){return n!==null&&typeof n=="object"}we.objectLiteral=Nm});var Jl=T(Pi=>{"use strict";Object.defineProperty(Pi,"__esModule",{value:!0});Pi.ImplementationRequest=void 0;var Lm=ge(),Am;(function(n){n.method="textDocument/implementation",n.type=new Lm.ProtocolRequestType(n.method)})(Am=Pi.ImplementationRequest||(Pi.ImplementationRequest={}))});var Zl=T(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.TypeDefinitionRequest=void 0;var Mm=ge(),Hm;(function(n){n.method="textDocument/typeDefinition",n.type=new Mm.ProtocolRequestType(n.method)})(Hm=Ei.TypeDefinitionRequest||(Ei.TypeDefinitionRequest={}))});var td=T(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.DidChangeWorkspaceFoldersNotification=Zt.WorkspaceFoldersRequest=void 0;var ed=ge(),jm;(function(n){n.type=new ed.ProtocolRequestType0("workspace/workspaceFolders")})(jm=Zt.WorkspaceFoldersRequest||(Zt.WorkspaceFoldersRequest={}));var $m;(function(n){n.type=new ed.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")})($m=Zt.DidChangeWorkspaceFoldersNotification||(Zt.DidChangeWorkspaceFoldersNotification={}))});var nd=T(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});Ii.ConfigurationRequest=void 0;var Um=ge(),Wm;(function(n){n.type=new Um.ProtocolRequestType("workspace/configuration")})(Wm=Ii.ConfigurationRequest||(Ii.ConfigurationRequest={}))});var rd=T(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.ColorPresentationRequest=en.DocumentColorRequest=void 0;var id=ge(),Km;(function(n){n.method="textDocument/documentColor",n.type=new id.ProtocolRequestType(n.method)})(Km=en.DocumentColorRequest||(en.DocumentColorRequest={}));var zm;(function(n){n.type=new id.ProtocolRequestType("textDocument/colorPresentation")})(zm=en.ColorPresentationRequest||(en.ColorPresentationRequest={}))});var od=T(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});ki.FoldingRangeRequest=void 0;var Vm=ge(),Gm;(function(n){n.method="textDocument/foldingRange",n.type=new Vm.ProtocolRequestType(n.method)})(Gm=ki.FoldingRangeRequest||(ki.FoldingRangeRequest={}))});var sd=T(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});Fi.DeclarationRequest=void 0;var Xm=ge(),Bm;(function(n){n.method="textDocument/declaration",n.type=new Xm.ProtocolRequestType(n.method)})(Bm=Fi.DeclarationRequest||(Fi.DeclarationRequest={}))});var ad=T(xi=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});xi.SelectionRangeRequest=void 0;var Qm=ge(),Ym;(function(n){n.method="textDocument/selectionRange",n.type=new Qm.ProtocolRequestType(n.method)})(Ym=xi.SelectionRangeRequest||(xi.SelectionRangeRequest={}))});var ud=T(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.WorkDoneProgressCancelNotification=bt.WorkDoneProgressCreateRequest=bt.WorkDoneProgress=void 0;var Jm=require("vscode-jsonrpc"),cd=ge(),Zm;(function(n){n.type=new Jm.ProgressType;function e(t){return t===n.type}n.is=e})(Zm=bt.WorkDoneProgress||(bt.WorkDoneProgress={}));var ev;(function(n){n.method="window/workDoneProgress/create",n.type=new cd.ProtocolRequestType(n.method)})(ev=bt.WorkDoneProgressCreateRequest||(bt.WorkDoneProgressCreateRequest={}));var tv;(function(n){n.method="window/workDoneProgress/cancel",n.type=new cd.ProtocolNotificationType(n.method)})(tv=bt.WorkDoneProgressCancelNotification||(bt.WorkDoneProgressCancelNotification={}))});var ld=T(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.CallHierarchyOutgoingCallsRequest=Tt.CallHierarchyIncomingCallsRequest=Tt.CallHierarchyPrepareRequest=void 0;var Qo=ge(),nv;(function(n){n.method="textDocument/prepareCallHierarchy",n.type=new Qo.ProtocolRequestType(n.method)})(nv=Tt.CallHierarchyPrepareRequest||(Tt.CallHierarchyPrepareRequest={}));var iv;(function(n){n.method="callHierarchy/incomingCalls",n.type=new Qo.ProtocolRequestType(n.method)})(iv=Tt.CallHierarchyIncomingCallsRequest||(Tt.CallHierarchyIncomingCallsRequest={}));var rv;(function(n){n.method="callHierarchy/outgoingCalls",n.type=new Qo.ProtocolRequestType(n.method)})(rv=Tt.CallHierarchyOutgoingCallsRequest||(Tt.CallHierarchyOutgoingCallsRequest={}))});var dd=T(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.SemanticTokensRefreshRequest=be.SemanticTokensRangeRequest=be.SemanticTokensDeltaRequest=be.SemanticTokensRequest=be.SemanticTokensRegistrationType=be.TokenFormat=void 0;var Oi=ge(),ov;(function(n){n.Relative="relative"})(ov=be.TokenFormat||(be.TokenFormat={}));var sv;(function(n){n.method="textDocument/semanticTokens",n.type=new Oi.RegistrationType(n.method)})(sv=be.SemanticTokensRegistrationType||(be.SemanticTokensRegistrationType={}));var av;(function(n){n.method="textDocument/semanticTokens/full",n.type=new Oi.ProtocolRequestType(n.method)})(av=be.SemanticTokensRequest||(be.SemanticTokensRequest={}));var cv;(function(n){n.method="textDocument/semanticTokens/full/delta",n.type=new Oi.ProtocolRequestType(n.method)})(cv=be.SemanticTokensDeltaRequest||(be.SemanticTokensDeltaRequest={}));var uv;(function(n){n.method="textDocument/semanticTokens/range",n.type=new Oi.ProtocolRequestType(n.method)})(uv=be.SemanticTokensRangeRequest||(be.SemanticTokensRangeRequest={}));var lv;(function(n){n.method="workspace/semanticTokens/refresh",n.type=new Oi.ProtocolRequestType0(n.method)})(lv=be.SemanticTokensRefreshRequest||(be.SemanticTokensRefreshRequest={}))});var fd=T(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.ShowDocumentRequest=void 0;var dv=ge(),fv;(function(n){n.method="window/showDocument",n.type=new dv.ProtocolRequestType(n.method)})(fv=Ni.ShowDocumentRequest||(Ni.ShowDocumentRequest={}))});var hd=T(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});Li.LinkedEditingRangeRequest=void 0;var hv=ge(),pv;(function(n){n.method="textDocument/linkedEditingRange",n.type=new hv.ProtocolRequestType(n.method)})(pv=Li.LinkedEditingRangeRequest||(Li.LinkedEditingRangeRequest={}))});var pd=T(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.WillDeleteFilesRequest=me.DidDeleteFilesNotification=me.DidRenameFilesNotification=me.WillRenameFilesRequest=me.DidCreateFilesNotification=me.WillCreateFilesRequest=me.FileOperationPatternKind=void 0;var Gn=ge(),gv;(function(n){n.file="file",n.folder="folder"})(gv=me.FileOperationPatternKind||(me.FileOperationPatternKind={}));var mv;(function(n){n.method="workspace/willCreateFiles",n.type=new Gn.ProtocolRequestType(n.method)})(mv=me.WillCreateFilesRequest||(me.WillCreateFilesRequest={}));var vv;(function(n){n.method="workspace/didCreateFiles",n.type=new Gn.ProtocolNotificationType(n.method)})(vv=me.DidCreateFilesNotification||(me.DidCreateFilesNotification={}));var yv;(function(n){n.method="workspace/willRenameFiles",n.type=new Gn.ProtocolRequestType(n.method)})(yv=me.WillRenameFilesRequest||(me.WillRenameFilesRequest={}));var Cv;(function(n){n.method="workspace/didRenameFiles",n.type=new Gn.ProtocolNotificationType(n.method)})(Cv=me.DidRenameFilesNotification||(me.DidRenameFilesNotification={}));var Rv;(function(n){n.method="workspace/didDeleteFiles",n.type=new Gn.ProtocolNotificationType(n.method)})(Rv=me.DidDeleteFilesNotification||(me.DidDeleteFilesNotification={}));var Dv;(function(n){n.method="workspace/willDeleteFiles",n.type=new Gn.ProtocolRequestType(n.method)})(Dv=me.WillDeleteFilesRequest||(me.WillDeleteFilesRequest={}))});var gd=T(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.MonikerRequest=qt.MonikerKind=qt.UniquenessLevel=void 0;var _v=ge(),Sv;(function(n){n.document="document",n.project="project",n.group="group",n.scheme="scheme",n.global="global"})(Sv=qt.UniquenessLevel||(qt.UniquenessLevel={}));var wv;(function(n){n.$import="import",n.$export="export",n.local="local"})(wv=qt.MonikerKind||(qt.MonikerKind={}));var bv;(function(n){n.method="textDocument/moniker",n.type=new _v.ProtocolRequestType(n.method)})(bv=qt.MonikerRequest||(qt.MonikerRequest={}))});var md=T(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.TypeHierarchySubtypesRequest=Pt.TypeHierarchySupertypesRequest=Pt.TypeHierarchyPrepareRequest=void 0;var Yo=ge(),Tv;(function(n){n.method="textDocument/prepareTypeHierarchy",n.type=new Yo.ProtocolRequestType(n.method)})(Tv=Pt.TypeHierarchyPrepareRequest||(Pt.TypeHierarchyPrepareRequest={}));var qv;(function(n){n.method="typeHierarchy/supertypes",n.type=new Yo.ProtocolRequestType(n.method)})(qv=Pt.TypeHierarchySupertypesRequest||(Pt.TypeHierarchySupertypesRequest={}));var Pv;(function(n){n.method="typeHierarchy/subtypes",n.type=new Yo.ProtocolRequestType(n.method)})(Pv=Pt.TypeHierarchySubtypesRequest||(Pt.TypeHierarchySubtypesRequest={}))});var yd=T(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.InlineValueRefreshRequest=tn.InlineValueRequest=void 0;var vd=ge(),Ev;(function(n){n.method="textDocument/inlineValue",n.type=new vd.ProtocolRequestType(n.method)})(Ev=tn.InlineValueRequest||(tn.InlineValueRequest={}));var Iv;(function(n){n.method="workspace/inlineValue/refresh",n.type=new vd.ProtocolRequestType0(n.method)})(Iv=tn.InlineValueRefreshRequest||(tn.InlineValueRefreshRequest={}))});var Cd=T(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.InlayHintRefreshRequest=Et.InlayHintResolveRequest=Et.InlayHintRequest=void 0;var Jo=ge(),kv;(function(n){n.method="textDocument/inlayHint",n.type=new Jo.ProtocolRequestType(n.method)})(kv=Et.InlayHintRequest||(Et.InlayHintRequest={}));var Fv;(function(n){n.method="inlayHint/resolve",n.type=new Jo.ProtocolRequestType(n.method)})(Fv=Et.InlayHintResolveRequest||(Et.InlayHintResolveRequest={}));var xv;(function(n){n.method="workspace/inlayHint/refresh",n.type=new Jo.ProtocolRequestType0(n.method)})(xv=Et.InlayHintRefreshRequest||(Et.InlayHintRefreshRequest={}))});var Dd=T(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.DiagnosticRefreshRequest=Ne.WorkspaceDiagnosticRequest=Ne.DocumentDiagnosticRequest=Ne.DocumentDiagnosticReportKind=Ne.DiagnosticServerCancellationData=void 0;var Rd=require("vscode-jsonrpc"),Ov=wr(),Zo=ge(),Nv;(function(n){function e(t){let i=t;return i&&Ov.boolean(i.retriggerRequest)}n.is=e})(Nv=Ne.DiagnosticServerCancellationData||(Ne.DiagnosticServerCancellationData={}));var Lv;(function(n){n.Full="full",n.Unchanged="unchanged"})(Lv=Ne.DocumentDiagnosticReportKind||(Ne.DocumentDiagnosticReportKind={}));var Av;(function(n){n.method="textDocument/diagnostic",n.type=new Zo.ProtocolRequestType(n.method),n.partialResult=new Rd.ProgressType})(Av=Ne.DocumentDiagnosticRequest||(Ne.DocumentDiagnosticRequest={}));var Mv;(function(n){n.method="workspace/diagnostic",n.type=new Zo.ProtocolRequestType(n.method),n.partialResult=new Rd.ProgressType})(Mv=Ne.WorkspaceDiagnosticRequest||(Ne.WorkspaceDiagnosticRequest={}));var Hv;(function(n){n.method="workspace/diagnostic/refresh",n.type=new Zo.ProtocolRequestType0(n.method)})(Hv=Ne.DiagnosticRefreshRequest||(Ne.DiagnosticRefreshRequest={}))});var wd=T(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.DidCloseNotebookDocumentNotification=ie.DidSaveNotebookDocumentNotification=ie.DidChangeNotebookDocumentNotification=ie.NotebookCellArrayChange=ie.DidOpenNotebookDocumentNotification=ie.NotebookDocumentSyncRegistrationType=ie.NotebookDocument=ie.NotebookCell=ie.ExecutionSummary=ie.NotebookCellKind=void 0;var Ai=Sr(),It=wr(),Mi=ge(),_d;(function(n){n.Markup=1,n.Code=2;function e(t){return t===1||t===2}n.is=e})(_d=ie.NotebookCellKind||(ie.NotebookCellKind={}));var Sd;(function(n){function e(r,o){let s={executionOrder:r};return(o===!0||o===!1)&&(s.success=o),s}n.create=e;function t(r){let o=r;return It.objectLiteral(o)&&Ai.uinteger.is(o.executionOrder)&&(o.success===void 0||It.boolean(o.success))}n.is=t;function i(r,o){return r===o?!0:r==null||o===null||o===void 0?!1:r.executionOrder===o.executionOrder&&r.success===o.success}n.equals=i})(Sd=ie.ExecutionSummary||(ie.ExecutionSummary={}));var es;(function(n){function e(o,s){return{kind:o,document:s}}n.create=e;function t(o){let s=o;return It.objectLiteral(s)&&_d.is(s.kind)&&Ai.DocumentUri.is(s.document)&&(s.metadata===void 0||It.objectLiteral(s.metadata))}n.is=t;function i(o,s){let c=new Set;return o.document!==s.document&&c.add("document"),o.kind!==s.kind&&c.add("kind"),o.executionSummary!==s.executionSummary&&c.add("executionSummary"),(o.metadata!==void 0||s.metadata!==void 0)&&!r(o.metadata,s.metadata)&&c.add("metadata"),(o.executionSummary!==void 0||s.executionSummary!==void 0)&&!Sd.equals(o.executionSummary,s.executionSummary)&&c.add("executionSummary"),c}n.diff=i;function r(o,s){if(o===s)return!0;if(o==null||s===null||s===void 0||typeof o!=typeof s||typeof o!="object")return!1;let c=Array.isArray(o),u=Array.isArray(s);if(c!==u)return!1;if(c&&u){if(o.length!==s.length)return!1;for(let f=0;f<o.length;f++)if(!r(o[f],s[f]))return!1}if(It.objectLiteral(o)&&It.objectLiteral(s)){let f=Object.keys(o),g=Object.keys(s);if(f.length!==g.length||(f.sort(),g.sort(),!r(f,g)))return!1;for(let y=0;y<f.length;y++){let v=f[y];if(!r(o[v],s[v]))return!1}}return!0}})(es=ie.NotebookCell||(ie.NotebookCell={}));var jv;(function(n){function e(i,r,o,s){return{uri:i,notebookType:r,version:o,cells:s}}n.create=e;function t(i){let r=i;return It.objectLiteral(r)&&It.string(r.uri)&&Ai.integer.is(r.version)&&It.typedArray(r.cells,es.is)}n.is=t})(jv=ie.NotebookDocument||(ie.NotebookDocument={}));var $v;(function(n){n.method="notebookDocument/sync",n.type=new Mi.RegistrationType(n.method)})($v=ie.NotebookDocumentSyncRegistrationType||(ie.NotebookDocumentSyncRegistrationType={}));var Uv;(function(n){n.method="notebookDocument/didOpen",n.type=new Mi.ProtocolNotificationType(n.method)})(Uv=ie.DidOpenNotebookDocumentNotification||(ie.DidOpenNotebookDocumentNotification={}));var Wv;(function(n){function e(i){let r=i;return It.objectLiteral(r)&&Ai.uinteger.is(r.start)&&Ai.uinteger.is(r.deleteCount)&&(r.cells===void 0||It.typedArray(r.cells,es.is))}n.is=e;function t(i,r,o){let s={start:i,deleteCount:r};return o!==void 0&&(s.cells=o),s}n.create=t})(Wv=ie.NotebookCellArrayChange||(ie.NotebookCellArrayChange={}));var Kv;(function(n){n.method="notebookDocument/didChange",n.type=new Mi.ProtocolNotificationType(n.method)})(Kv=ie.DidChangeNotebookDocumentNotification||(ie.DidChangeNotebookDocumentNotification={}));var zv;(function(n){n.method="notebookDocument/didSave",n.type=new Mi.ProtocolNotificationType(n.method)})(zv=ie.DidSaveNotebookDocumentNotification||(ie.DidSaveNotebookDocumentNotification={}));var Vv;(function(n){n.method="notebookDocument/didClose",n.type=new Mi.ProtocolNotificationType(n.method)})(Vv=ie.DidCloseNotebookDocumentNotification||(ie.DidCloseNotebookDocumentNotification={}))});var xd=T(p=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});p.WorkspaceSymbolRequest=p.CodeActionResolveRequest=p.CodeActionRequest=p.DocumentSymbolRequest=p.DocumentHighlightRequest=p.ReferencesRequest=p.DefinitionRequest=p.SignatureHelpRequest=p.SignatureHelpTriggerKind=p.HoverRequest=p.CompletionResolveRequest=p.CompletionRequest=p.CompletionTriggerKind=p.PublishDiagnosticsNotification=p.WatchKind=p.RelativePattern=p.FileChangeType=p.DidChangeWatchedFilesNotification=p.WillSaveTextDocumentWaitUntilRequest=p.WillSaveTextDocumentNotification=p.TextDocumentSaveReason=p.DidSaveTextDocumentNotification=p.DidCloseTextDocumentNotification=p.DidChangeTextDocumentNotification=p.TextDocumentContentChangeEvent=p.DidOpenTextDocumentNotification=p.TextDocumentSyncKind=p.TelemetryEventNotification=p.LogMessageNotification=p.ShowMessageRequest=p.ShowMessageNotification=p.MessageType=p.DidChangeConfigurationNotification=p.ExitNotification=p.ShutdownRequest=p.InitializedNotification=p.InitializeErrorCodes=p.InitializeRequest=p.WorkDoneProgressOptions=p.TextDocumentRegistrationOptions=p.StaticRegistrationOptions=p.PositionEncodingKind=p.FailureHandlingKind=p.ResourceOperationKind=p.UnregistrationRequest=p.RegistrationRequest=p.DocumentSelector=p.NotebookCellTextDocumentFilter=p.NotebookDocumentFilter=p.TextDocumentFilter=void 0;p.TypeHierarchySubtypesRequest=p.TypeHierarchyPrepareRequest=p.MonikerRequest=p.MonikerKind=p.UniquenessLevel=p.WillDeleteFilesRequest=p.DidDeleteFilesNotification=p.WillRenameFilesRequest=p.DidRenameFilesNotification=p.WillCreateFilesRequest=p.DidCreateFilesNotification=p.FileOperationPatternKind=p.LinkedEditingRangeRequest=p.ShowDocumentRequest=p.SemanticTokensRegistrationType=p.SemanticTokensRefreshRequest=p.SemanticTokensRangeRequest=p.SemanticTokensDeltaRequest=p.SemanticTokensRequest=p.TokenFormat=p.CallHierarchyPrepareRequest=p.CallHierarchyOutgoingCallsRequest=p.CallHierarchyIncomingCallsRequest=p.WorkDoneProgressCancelNotification=p.WorkDoneProgressCreateRequest=p.WorkDoneProgress=p.SelectionRangeRequest=p.DeclarationRequest=p.FoldingRangeRequest=p.ColorPresentationRequest=p.DocumentColorRequest=p.ConfigurationRequest=p.DidChangeWorkspaceFoldersNotification=p.WorkspaceFoldersRequest=p.TypeDefinitionRequest=p.ImplementationRequest=p.ApplyWorkspaceEditRequest=p.ExecuteCommandRequest=p.PrepareRenameRequest=p.RenameRequest=p.PrepareSupportDefaultBehavior=p.DocumentOnTypeFormattingRequest=p.DocumentRangeFormattingRequest=p.DocumentFormattingRequest=p.DocumentLinkResolveRequest=p.DocumentLinkRequest=p.CodeLensRefreshRequest=p.CodeLensResolveRequest=p.CodeLensRequest=p.WorkspaceSymbolResolveRequest=void 0;p.DidCloseNotebookDocumentNotification=p.DidSaveNotebookDocumentNotification=p.DidChangeNotebookDocumentNotification=p.NotebookCellArrayChange=p.DidOpenNotebookDocumentNotification=p.NotebookDocumentSyncRegistrationType=p.NotebookDocument=p.NotebookCell=p.ExecutionSummary=p.NotebookCellKind=p.DiagnosticRefreshRequest=p.WorkspaceDiagnosticRequest=p.DocumentDiagnosticRequest=p.DocumentDiagnosticReportKind=p.DiagnosticServerCancellationData=p.InlayHintRefreshRequest=p.InlayHintResolveRequest=p.InlayHintRequest=p.InlineValueRefreshRequest=p.InlineValueRequest=p.TypeHierarchySupertypesRequest=void 0;var z=ge(),bd=Sr(),Le=wr(),Gv=Jl();Object.defineProperty(p,"ImplementationRequest",{enumerable:!0,get:function(){return Gv.ImplementationRequest}});var Xv=Zl();Object.defineProperty(p,"TypeDefinitionRequest",{enumerable:!0,get:function(){return Xv.TypeDefinitionRequest}});var Td=td();Object.defineProperty(p,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return Td.WorkspaceFoldersRequest}});Object.defineProperty(p,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return Td.DidChangeWorkspaceFoldersNotification}});var Bv=nd();Object.defineProperty(p,"ConfigurationRequest",{enumerable:!0,get:function(){return Bv.ConfigurationRequest}});var qd=rd();Object.defineProperty(p,"DocumentColorRequest",{enumerable:!0,get:function(){return qd.DocumentColorRequest}});Object.defineProperty(p,"ColorPresentationRequest",{enumerable:!0,get:function(){return qd.ColorPresentationRequest}});var Qv=od();Object.defineProperty(p,"FoldingRangeRequest",{enumerable:!0,get:function(){return Qv.FoldingRangeRequest}});var Yv=sd();Object.defineProperty(p,"DeclarationRequest",{enumerable:!0,get:function(){return Yv.DeclarationRequest}});var Jv=ad();Object.defineProperty(p,"SelectionRangeRequest",{enumerable:!0,get:function(){return Jv.SelectionRangeRequest}});var ts=ud();Object.defineProperty(p,"WorkDoneProgress",{enumerable:!0,get:function(){return ts.WorkDoneProgress}});Object.defineProperty(p,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return ts.WorkDoneProgressCreateRequest}});Object.defineProperty(p,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return ts.WorkDoneProgressCancelNotification}});var ns=ld();Object.defineProperty(p,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return ns.CallHierarchyIncomingCallsRequest}});Object.defineProperty(p,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return ns.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(p,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return ns.CallHierarchyPrepareRequest}});var Xn=dd();Object.defineProperty(p,"TokenFormat",{enumerable:!0,get:function(){return Xn.TokenFormat}});Object.defineProperty(p,"SemanticTokensRequest",{enumerable:!0,get:function(){return Xn.SemanticTokensRequest}});Object.defineProperty(p,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Xn.SemanticTokensDeltaRequest}});Object.defineProperty(p,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Xn.SemanticTokensRangeRequest}});Object.defineProperty(p,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Xn.SemanticTokensRefreshRequest}});Object.defineProperty(p,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Xn.SemanticTokensRegistrationType}});var Zv=fd();Object.defineProperty(p,"ShowDocumentRequest",{enumerable:!0,get:function(){return Zv.ShowDocumentRequest}});var ey=hd();Object.defineProperty(p,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return ey.LinkedEditingRangeRequest}});var Dn=pd();Object.defineProperty(p,"FileOperationPatternKind",{enumerable:!0,get:function(){return Dn.FileOperationPatternKind}});Object.defineProperty(p,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Dn.DidCreateFilesNotification}});Object.defineProperty(p,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Dn.WillCreateFilesRequest}});Object.defineProperty(p,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Dn.DidRenameFilesNotification}});Object.defineProperty(p,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Dn.WillRenameFilesRequest}});Object.defineProperty(p,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Dn.DidDeleteFilesNotification}});Object.defineProperty(p,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Dn.WillDeleteFilesRequest}});var is=gd();Object.defineProperty(p,"UniquenessLevel",{enumerable:!0,get:function(){return is.UniquenessLevel}});Object.defineProperty(p,"MonikerKind",{enumerable:!0,get:function(){return is.MonikerKind}});Object.defineProperty(p,"MonikerRequest",{enumerable:!0,get:function(){return is.MonikerRequest}});var rs=md();Object.defineProperty(p,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return rs.TypeHierarchyPrepareRequest}});Object.defineProperty(p,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return rs.TypeHierarchySubtypesRequest}});Object.defineProperty(p,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return rs.TypeHierarchySupertypesRequest}});var Pd=yd();Object.defineProperty(p,"InlineValueRequest",{enumerable:!0,get:function(){return Pd.InlineValueRequest}});Object.defineProperty(p,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return Pd.InlineValueRefreshRequest}});var os=Cd();Object.defineProperty(p,"InlayHintRequest",{enumerable:!0,get:function(){return os.InlayHintRequest}});Object.defineProperty(p,"InlayHintResolveRequest",{enumerable:!0,get:function(){return os.InlayHintResolveRequest}});Object.defineProperty(p,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return os.InlayHintRefreshRequest}});var Hi=Dd();Object.defineProperty(p,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return Hi.DiagnosticServerCancellationData}});Object.defineProperty(p,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return Hi.DocumentDiagnosticReportKind}});Object.defineProperty(p,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return Hi.DocumentDiagnosticRequest}});Object.defineProperty(p,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return Hi.WorkspaceDiagnosticRequest}});Object.defineProperty(p,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return Hi.DiagnosticRefreshRequest}});var Mt=wd();Object.defineProperty(p,"NotebookCellKind",{enumerable:!0,get:function(){return Mt.NotebookCellKind}});Object.defineProperty(p,"ExecutionSummary",{enumerable:!0,get:function(){return Mt.ExecutionSummary}});Object.defineProperty(p,"NotebookCell",{enumerable:!0,get:function(){return Mt.NotebookCell}});Object.defineProperty(p,"NotebookDocument",{enumerable:!0,get:function(){return Mt.NotebookDocument}});Object.defineProperty(p,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return Mt.NotebookDocumentSyncRegistrationType}});Object.defineProperty(p,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return Mt.DidOpenNotebookDocumentNotification}});Object.defineProperty(p,"NotebookCellArrayChange",{enumerable:!0,get:function(){return Mt.NotebookCellArrayChange}});Object.defineProperty(p,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return Mt.DidChangeNotebookDocumentNotification}});Object.defineProperty(p,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return Mt.DidSaveNotebookDocumentNotification}});Object.defineProperty(p,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return Mt.DidCloseNotebookDocumentNotification}});var Ed;(function(n){function e(t){let i=t;return Le.string(i.language)||Le.string(i.scheme)||Le.string(i.pattern)}n.is=e})(Ed=p.TextDocumentFilter||(p.TextDocumentFilter={}));var Id;(function(n){function e(t){let i=t;return Le.objectLiteral(i)&&(Le.string(i.notebookType)||Le.string(i.scheme)||Le.string(i.pattern))}n.is=e})(Id=p.NotebookDocumentFilter||(p.NotebookDocumentFilter={}));var kd;(function(n){function e(t){let i=t;return Le.objectLiteral(i)&&(Le.string(i.notebook)||Id.is(i.notebook))&&(i.language===void 0||Le.string(i.language))}n.is=e})(kd=p.NotebookCellTextDocumentFilter||(p.NotebookCellTextDocumentFilter={}));var Fd;(function(n){function e(t){if(!Array.isArray(t))return!1;for(let i of t)if(!Le.string(i)&&!Ed.is(i)&&!kd.is(i))return!1;return!0}n.is=e})(Fd=p.DocumentSelector||(p.DocumentSelector={}));var ty;(function(n){n.type=new z.ProtocolRequestType("client/registerCapability")})(ty=p.RegistrationRequest||(p.RegistrationRequest={}));var ny;(function(n){n.type=new z.ProtocolRequestType("client/unregisterCapability")})(ny=p.UnregistrationRequest||(p.UnregistrationRequest={}));var iy;(function(n){n.Create="create",n.Rename="rename",n.Delete="delete"})(iy=p.ResourceOperationKind||(p.ResourceOperationKind={}));var ry;(function(n){n.Abort="abort",n.Transactional="transactional",n.TextOnlyTransactional="textOnlyTransactional",n.Undo="undo"})(ry=p.FailureHandlingKind||(p.FailureHandlingKind={}));var oy;(function(n){n.UTF8="utf-8",n.UTF16="utf-16",n.UTF32="utf-32"})(oy=p.PositionEncodingKind||(p.PositionEncodingKind={}));var sy;(function(n){function e(t){let i=t;return i&&Le.string(i.id)&&i.id.length>0}n.hasId=e})(sy=p.StaticRegistrationOptions||(p.StaticRegistrationOptions={}));var ay;(function(n){function e(t){let i=t;return i&&(i.documentSelector===null||Fd.is(i.documentSelector))}n.is=e})(ay=p.TextDocumentRegistrationOptions||(p.TextDocumentRegistrationOptions={}));var cy;(function(n){function e(i){let r=i;return Le.objectLiteral(r)&&(r.workDoneProgress===void 0||Le.boolean(r.workDoneProgress))}n.is=e;function t(i){let r=i;return r&&Le.boolean(r.workDoneProgress)}n.hasWorkDoneProgress=t})(cy=p.WorkDoneProgressOptions||(p.WorkDoneProgressOptions={}));var uy;(function(n){n.type=new z.ProtocolRequestType("initialize")})(uy=p.InitializeRequest||(p.InitializeRequest={}));var ly;(function(n){n.unknownProtocolVersion=1})(ly=p.InitializeErrorCodes||(p.InitializeErrorCodes={}));var dy;(function(n){n.type=new z.ProtocolNotificationType("initialized")})(dy=p.InitializedNotification||(p.InitializedNotification={}));var fy;(function(n){n.type=new z.ProtocolRequestType0("shutdown")})(fy=p.ShutdownRequest||(p.ShutdownRequest={}));var hy;(function(n){n.type=new z.ProtocolNotificationType0("exit")})(hy=p.ExitNotification||(p.ExitNotification={}));var py;(function(n){n.type=new z.ProtocolNotificationType("workspace/didChangeConfiguration")})(py=p.DidChangeConfigurationNotification||(p.DidChangeConfigurationNotification={}));var gy;(function(n){n.Error=1,n.Warning=2,n.Info=3,n.Log=4})(gy=p.MessageType||(p.MessageType={}));var my;(function(n){n.type=new z.ProtocolNotificationType("window/showMessage")})(my=p.ShowMessageNotification||(p.ShowMessageNotification={}));var vy;(function(n){n.type=new z.ProtocolRequestType("window/showMessageRequest")})(vy=p.ShowMessageRequest||(p.ShowMessageRequest={}));var yy;(function(n){n.type=new z.ProtocolNotificationType("window/logMessage")})(yy=p.LogMessageNotification||(p.LogMessageNotification={}));var Cy;(function(n){n.type=new z.ProtocolNotificationType("telemetry/event")})(Cy=p.TelemetryEventNotification||(p.TelemetryEventNotification={}));var Ry;(function(n){n.None=0,n.Full=1,n.Incremental=2})(Ry=p.TextDocumentSyncKind||(p.TextDocumentSyncKind={}));var Dy;(function(n){n.method="textDocument/didOpen",n.type=new z.ProtocolNotificationType(n.method)})(Dy=p.DidOpenTextDocumentNotification||(p.DidOpenTextDocumentNotification={}));var _y;(function(n){function e(i){let r=i;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}n.isIncremental=e;function t(i){let r=i;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}n.isFull=t})(_y=p.TextDocumentContentChangeEvent||(p.TextDocumentContentChangeEvent={}));var Sy;(function(n){n.method="textDocument/didChange",n.type=new z.ProtocolNotificationType(n.method)})(Sy=p.DidChangeTextDocumentNotification||(p.DidChangeTextDocumentNotification={}));var wy;(function(n){n.method="textDocument/didClose",n.type=new z.ProtocolNotificationType(n.method)})(wy=p.DidCloseTextDocumentNotification||(p.DidCloseTextDocumentNotification={}));var by;(function(n){n.method="textDocument/didSave",n.type=new z.ProtocolNotificationType(n.method)})(by=p.DidSaveTextDocumentNotification||(p.DidSaveTextDocumentNotification={}));var Ty;(function(n){n.Manual=1,n.AfterDelay=2,n.FocusOut=3})(Ty=p.TextDocumentSaveReason||(p.TextDocumentSaveReason={}));var qy;(function(n){n.method="textDocument/willSave",n.type=new z.ProtocolNotificationType(n.method)})(qy=p.WillSaveTextDocumentNotification||(p.WillSaveTextDocumentNotification={}));var Py;(function(n){n.method="textDocument/willSaveWaitUntil",n.type=new z.ProtocolRequestType(n.method)})(Py=p.WillSaveTextDocumentWaitUntilRequest||(p.WillSaveTextDocumentWaitUntilRequest={}));var Ey;(function(n){n.type=new z.ProtocolNotificationType("workspace/didChangeWatchedFiles")})(Ey=p.DidChangeWatchedFilesNotification||(p.DidChangeWatchedFilesNotification={}));var Iy;(function(n){n.Created=1,n.Changed=2,n.Deleted=3})(Iy=p.FileChangeType||(p.FileChangeType={}));var ky;(function(n){function e(t){let i=t;return Le.objectLiteral(i)&&(bd.URI.is(i.baseUri)||bd.WorkspaceFolder.is(i.baseUri))&&Le.string(i.pattern)}n.is=e})(ky=p.RelativePattern||(p.RelativePattern={}));var Fy;(function(n){n.Create=1,n.Change=2,n.Delete=4})(Fy=p.WatchKind||(p.WatchKind={}));var xy;(function(n){n.type=new z.ProtocolNotificationType("textDocument/publishDiagnostics")})(xy=p.PublishDiagnosticsNotification||(p.PublishDiagnosticsNotification={}));var Oy;(function(n){n.Invoked=1,n.TriggerCharacter=2,n.TriggerForIncompleteCompletions=3})(Oy=p.CompletionTriggerKind||(p.CompletionTriggerKind={}));var Ny;(function(n){n.method="textDocument/completion",n.type=new z.ProtocolRequestType(n.method)})(Ny=p.CompletionRequest||(p.CompletionRequest={}));var Ly;(function(n){n.method="completionItem/resolve",n.type=new z.ProtocolRequestType(n.method)})(Ly=p.CompletionResolveRequest||(p.CompletionResolveRequest={}));var Ay;(function(n){n.method="textDocument/hover",n.type=new z.ProtocolRequestType(n.method)})(Ay=p.HoverRequest||(p.HoverRequest={}));var My;(function(n){n.Invoked=1,n.TriggerCharacter=2,n.ContentChange=3})(My=p.SignatureHelpTriggerKind||(p.SignatureHelpTriggerKind={}));var Hy;(function(n){n.method="textDocument/signatureHelp",n.type=new z.ProtocolRequestType(n.method)})(Hy=p.SignatureHelpRequest||(p.SignatureHelpRequest={}));var jy;(function(n){n.method="textDocument/definition",n.type=new z.ProtocolRequestType(n.method)})(jy=p.DefinitionRequest||(p.DefinitionRequest={}));var $y;(function(n){n.method="textDocument/references",n.type=new z.ProtocolRequestType(n.method)})($y=p.ReferencesRequest||(p.ReferencesRequest={}));var Uy;(function(n){n.method="textDocument/documentHighlight",n.type=new z.ProtocolRequestType(n.method)})(Uy=p.DocumentHighlightRequest||(p.DocumentHighlightRequest={}));var Wy;(function(n){n.method="textDocument/documentSymbol",n.type=new z.ProtocolRequestType(n.method)})(Wy=p.DocumentSymbolRequest||(p.DocumentSymbolRequest={}));var Ky;(function(n){n.method="textDocument/codeAction",n.type=new z.ProtocolRequestType(n.method)})(Ky=p.CodeActionRequest||(p.CodeActionRequest={}));var zy;(function(n){n.method="codeAction/resolve",n.type=new z.ProtocolRequestType(n.method)})(zy=p.CodeActionResolveRequest||(p.CodeActionResolveRequest={}));var Vy;(function(n){n.method="workspace/symbol",n.type=new z.ProtocolRequestType(n.method)})(Vy=p.WorkspaceSymbolRequest||(p.WorkspaceSymbolRequest={}));var Gy;(function(n){n.method="workspaceSymbol/resolve",n.type=new z.ProtocolRequestType(n.method)})(Gy=p.WorkspaceSymbolResolveRequest||(p.WorkspaceSymbolResolveRequest={}));var Xy;(function(n){n.method="textDocument/codeLens",n.type=new z.ProtocolRequestType(n.method)})(Xy=p.CodeLensRequest||(p.CodeLensRequest={}));var By;(function(n){n.method="codeLens/resolve",n.type=new z.ProtocolRequestType(n.method)})(By=p.CodeLensResolveRequest||(p.CodeLensResolveRequest={}));var Qy;(function(n){n.method="workspace/codeLens/refresh",n.type=new z.ProtocolRequestType0(n.method)})(Qy=p.CodeLensRefreshRequest||(p.CodeLensRefreshRequest={}));var Yy;(function(n){n.method="textDocument/documentLink",n.type=new z.ProtocolRequestType(n.method)})(Yy=p.DocumentLinkRequest||(p.DocumentLinkRequest={}));var Jy;(function(n){n.method="documentLink/resolve",n.type=new z.ProtocolRequestType(n.method)})(Jy=p.DocumentLinkResolveRequest||(p.DocumentLinkResolveRequest={}));var Zy;(function(n){n.method="textDocument/formatting",n.type=new z.ProtocolRequestType(n.method)})(Zy=p.DocumentFormattingRequest||(p.DocumentFormattingRequest={}));var eC;(function(n){n.method="textDocument/rangeFormatting",n.type=new z.ProtocolRequestType(n.method)})(eC=p.DocumentRangeFormattingRequest||(p.DocumentRangeFormattingRequest={}));var tC;(function(n){n.method="textDocument/onTypeFormatting",n.type=new z.ProtocolRequestType(n.method)})(tC=p.DocumentOnTypeFormattingRequest||(p.DocumentOnTypeFormattingRequest={}));var nC;(function(n){n.Identifier=1})(nC=p.PrepareSupportDefaultBehavior||(p.PrepareSupportDefaultBehavior={}));var iC;(function(n){n.method="textDocument/rename",n.type=new z.ProtocolRequestType(n.method)})(iC=p.RenameRequest||(p.RenameRequest={}));var rC;(function(n){n.method="textDocument/prepareRename",n.type=new z.ProtocolRequestType(n.method)})(rC=p.PrepareRenameRequest||(p.PrepareRenameRequest={}));var oC;(function(n){n.type=new z.ProtocolRequestType("workspace/executeCommand")})(oC=p.ExecuteCommandRequest||(p.ExecuteCommandRequest={}));var sC;(function(n){n.type=new z.ProtocolRequestType("workspace/applyEdit")})(sC=p.ApplyWorkspaceEditRequest||(p.ApplyWorkspaceEditRequest={}))});var Nd=T(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});br.createProtocolConnection=void 0;var Od=require("vscode-jsonrpc");function aC(n,e,t,i){return Od.ConnectionStrategy.is(i)&&(i={connectionStrategy:i}),(0,Od.createMessageConnection)(n,e,t,i)}br.createProtocolConnection=aC});var Ld=T(Ve=>{"use strict";var cC=Ve&&Ve.__createBinding||(Object.create?function(n,e,t,i){i===void 0&&(i=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,i,r)}:function(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]}),Tr=Ve&&Ve.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&cC(e,n,t)};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.LSPErrorCodes=Ve.createProtocolConnection=void 0;Tr(require("vscode-jsonrpc"),Ve);Tr(Sr(),Ve);Tr(ge(),Ve);Tr(xd(),Ve);var uC=Nd();Object.defineProperty(Ve,"createProtocolConnection",{enumerable:!0,get:function(){return uC.createProtocolConnection}});var lC;(function(n){n.lspReservedErrorRangeStart=-32899,n.RequestFailed=-32803,n.ServerCancelled=-32802,n.ContentModified=-32801,n.RequestCancelled=-32800,n.lspReservedErrorRangeEnd=-32800})(lC=Ve.LSPErrorCodes||(Ve.LSPErrorCodes={}))});var K=T(Ht=>{"use strict";var dC=Ht&&Ht.__createBinding||(Object.create?function(n,e,t,i){i===void 0&&(i=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,i,r)}:function(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]}),Ad=Ht&&Ht.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&dC(e,n,t)};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.createProtocolConnection=void 0;var fC=require("vscode-jsonrpc/node");Ad(require("vscode-jsonrpc/node"),Ht);Ad(Ld(),Ht);function hC(n,e,t,i){return(0,fC.createMessageConnection)(n,e,t,i)}Ht.createProtocolConnection=hC});var Ui=T(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.forEach=gt.mapAsync=gt.map=gt.Semaphore=gt.Delayer=void 0;var $i=K(),ss=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(i=>{this.onSuccess=i}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var i=this.task();return this.task=void 0,i})),(t>=0||this.timeout===void 0)&&(this.timeout=(0,$i.RAL)().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(this.timeout.dispose(),this.timeout=void 0)}};gt.Delayer=ss;var as=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,i)=>{this._waiting.push({thunk:e,resolve:t,reject:i}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,$i.RAL)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(i=>{this._active--,e.resolve(i),this.runNext()},i=>{this._active--,e.reject(i),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};gt.Semaphore=as;var Md=15,ji=class{constructor(e=Md){this.yieldAfter=Math.max(e,Md),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){let e=Date.now()-this.startTime,t=Math.max(0,this.yieldAfter-e);if(this.total+=this.counter,this.counter=0,e>=this.yieldAfter||t<=1)return this.counterInterval=1,this.total=0,!0;switch(e){case 0:case 1:this.counterInterval=this.total*2;break}}return!1}};async function pC(n,e,t,i){if(n.length===0)return[];let r=new Array(n.length),o=new ji(i?.yieldAfter);function s(u){o.start();for(let f=u;f<n.length;f++)if(r[f]=e(n[f]),o.shouldYield())return i?.yieldCallback&&i.yieldCallback(),f+1;return-1}let c=s(0);for(;c!==-1&&!(t!==void 0&&t.isCancellationRequested);)c=await new Promise(u=>{(0,$i.RAL)().timer.setImmediate(()=>{u(s(c))})});return r}gt.map=pC;async function gC(n,e,t,i){if(n.length===0)return[];let r=new Array(n.length),o=new ji(i?.yieldAfter);async function s(u){o.start();for(let f=u;f<n.length;f++)if(r[f]=await e(n[f],t),o.shouldYield())return i?.yieldCallback&&i.yieldCallback(),f+1;return-1}let c=await s(0);for(;c!==-1&&!(t!==void 0&&t.isCancellationRequested);)c=await new Promise(u=>{(0,$i.RAL)().timer.setImmediate(()=>{u(s(c))})});return r}gt.mapAsync=gC;async function mC(n,e,t,i){if(n.length===0)return;let r=new ji(i?.yieldAfter);function o(c){r.start();for(let u=c;u<n.length;u++)if(e(n[u]),r.shouldYield())return i?.yieldCallback&&i.yieldCallback(),u+1;return-1}let s=o(0);for(;s!==-1&&!(t!==void 0&&t.isCancellationRequested);)s=await new Promise(c=>{(0,$i.RAL)().timer.setImmediate(()=>{c(o(s))})})}gt.forEach=mC});var ls=T(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});var vC=require("vscode"),cs=class extends vC.CompletionItem{constructor(e){super(e)}};us.default=cs});var hs=T(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});var yC=require("vscode"),ds=class extends yC.CodeLens{constructor(e){super(e)}};fs.default=ds});var ms=T(gs=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0});var CC=require("vscode"),ps=class extends CC.DocumentLink{constructor(e,t){super(e,t)}};gs.default=ps});var Cs=T(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});var RC=require("vscode"),vs=class extends RC.CodeAction{constructor(e,t){super(e),this.data=t}};ys.default=vs});var _s=T(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.ProtocolDiagnostic=_n.DiagnosticCode=void 0;var DC=require("vscode"),Rs=ht(),_C;(function(n){function e(t){let i=t;return i!=null&&(Rs.number(i.value)||Rs.string(i.value))&&Rs.string(i.target)}n.is=e})(_C=_n.DiagnosticCode||(_n.DiagnosticCode={}));var Ds=class extends DC.Diagnostic{constructor(e,t,i,r){super(e,t,i),this.data=r,this.hasDiagnosticCode=!1}};_n.ProtocolDiagnostic=Ds});var bs=T(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});var SC=require("vscode"),Ss=class extends SC.CallHierarchyItem{constructor(e,t,i,r,o,s,c){super(e,t,i,r,o,s),c!==void 0&&(this.data=c)}};ws.default=Ss});var Ps=T(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});var wC=require("vscode"),Ts=class extends wC.TypeHierarchyItem{constructor(e,t,i,r,o,s,c){super(e,t,i,r,o,s),c!==void 0&&(this.data=c)}};qs.default=Ts});var ks=T(Is=>{"use strict";Object.defineProperty(Is,"__esModule",{value:!0});var qr=require("vscode"),Es=class extends qr.SymbolInformation{constructor(e,t,i,r,o){let s=!(r instanceof qr.Uri);super(e,t,i,s?r:new qr.Location(r,new qr.Range(0,0,0,0))),this.hasRange=s,o!==void 0&&(this.data=o)}};Is.default=Es});var Os=T(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});var bC=require("vscode"),Fs=class extends bC.InlayHint{constructor(e,t,i){super(e,t,i)}};xs.default=Fs});var $d=T(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.createConverter=void 0;var Te=require("vscode"),G=K(),Bn=ht(),Hd=Ui(),TC=ls(),qC=hs(),PC=ms(),EC=Cs(),jd=_s(),IC=bs(),kC=Ps(),FC=ks(),xC=Os(),Ns;(function(n){function e(t){let i=t;return i&&!!i.inserting&&!!i.replacing}n.is=e})(Ns||(Ns={}));function OC(n){let t=n||(h=>h.toString());function i(h){return t(h)}function r(h){return{uri:t(h.uri)}}function o(h){return{uri:t(h.uri),languageId:h.languageId,version:h.version,text:h.getText()}}function s(h){return{uri:t(h.uri),version:h.version}}function c(h){return{textDocument:o(h)}}function u(h){let P=h;return!!P.document&&!!P.contentChanges}function f(h){let P=h;return!!P.uri&&!!P.version}function g(h){if(f(h))return{textDocument:{uri:t(h.uri),version:h.version},contentChanges:[{text:h.getText()}]};if(u(h)){let P=h.document;return{textDocument:{uri:t(P.uri),version:P.version},contentChanges:h.contentChanges.map(re=>{let S=re.range;return{range:{start:{line:S.start.line,character:S.start.character},end:{line:S.end.line,character:S.end.character}},rangeLength:re.rangeLength,text:re.text}})}}else throw Error("Unsupported text document change parameter")}function y(h){return{textDocument:r(h)}}function v(h,P=!1){let j={textDocument:r(h)};return P&&(j.text=h.getText()),j}function R(h){switch(h){case Te.TextDocumentSaveReason.Manual:return G.TextDocumentSaveReason.Manual;case Te.TextDocumentSaveReason.AfterDelay:return G.TextDocumentSaveReason.AfterDelay;case Te.TextDocumentSaveReason.FocusOut:return G.TextDocumentSaveReason.FocusOut}return G.TextDocumentSaveReason.Manual}function C(h){return{textDocument:r(h.document),reason:R(h.reason)}}function q(h){return{files:h.files.map(P=>({uri:t(P)}))}}function E(h){return{files:h.files.map(P=>({oldUri:t(P.oldUri),newUri:t(P.newUri)}))}}function F(h){return{files:h.files.map(P=>({uri:t(P)}))}}function x(h){return{files:h.files.map(P=>({uri:t(P)}))}}function N(h){return{files:h.files.map(P=>({oldUri:t(P.oldUri),newUri:t(P.newUri)}))}}function L(h){return{files:h.files.map(P=>({uri:t(P)}))}}function J(h,P){return{textDocument:r(h),position:We(P)}}function Ie(h){switch(h){case Te.CompletionTriggerKind.TriggerCharacter:return G.CompletionTriggerKind.TriggerCharacter;case Te.CompletionTriggerKind.TriggerForIncompleteCompletions:return G.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return G.CompletionTriggerKind.Invoked}}function Z(h,P,j){return{textDocument:r(h),position:We(P),context:{triggerKind:Ie(j.triggerKind),triggerCharacter:j.triggerCharacter}}}function Pe(h){switch(h){case Te.SignatureHelpTriggerKind.Invoke:return G.SignatureHelpTriggerKind.Invoked;case Te.SignatureHelpTriggerKind.TriggerCharacter:return G.SignatureHelpTriggerKind.TriggerCharacter;case Te.SignatureHelpTriggerKind.ContentChange:return G.SignatureHelpTriggerKind.ContentChange}}function xe(h){return{label:h.label}}function Ue(h){return h.map(xe)}function ut(h){return{label:h.label,parameters:Ue(h.parameters)}}function Dt(h){return h.map(ut)}function lt(h){return h===void 0?h:{signatures:Dt(h.signatures),activeSignature:h.activeSignature,activeParameter:h.activeParameter}}function it(h,P,j){return{textDocument:r(h),position:We(P),context:{isRetrigger:j.isRetrigger,triggerCharacter:j.triggerCharacter,triggerKind:Pe(j.triggerKind),activeSignatureHelp:lt(j.activeSignatureHelp)}}}function We(h){return{line:h.line,character:h.character}}function Be(h){return h==null?h:{line:h.line>G.uinteger.MAX_VALUE?G.uinteger.MAX_VALUE:h.line,character:h.character>G.uinteger.MAX_VALUE?G.uinteger.MAX_VALUE:h.character}}function cn(h,P){return Hd.map(h,Be,P)}function Se(h){return h==null?h:{start:Be(h.start),end:Be(h.end)}}function Me(h){return h==null?h:G.Location.create(i(h.uri),Se(h.range))}function xt(h){switch(h){case Te.DiagnosticSeverity.Error:return G.DiagnosticSeverity.Error;case Te.DiagnosticSeverity.Warning:return G.DiagnosticSeverity.Warning;case Te.DiagnosticSeverity.Information:return G.DiagnosticSeverity.Information;case Te.DiagnosticSeverity.Hint:return G.DiagnosticSeverity.Hint}}function Ot(h){if(!h)return;let P=[];for(let j of h){let re=ke(j);re!==void 0&&P.push(re)}return P.length>0?P:void 0}function ke(h){switch(h){case Te.DiagnosticTag.Unnecessary:return G.DiagnosticTag.Unnecessary;case Te.DiagnosticTag.Deprecated:return G.DiagnosticTag.Deprecated;default:return}}function ci(h){return{message:h.message,location:Me(h.location)}}function ui(h){return h.map(ci)}function In(h){if(h!=null)return Bn.number(h)||Bn.string(h)?h:{value:h.value,target:i(h.target)}}function un(h){let P=G.Diagnostic.create(Se(h.range),h.message),j=h instanceof jd.ProtocolDiagnostic?h:void 0;j!==void 0&&j.data!==void 0&&(P.data=j.data);let re=In(h.code);return jd.DiagnosticCode.is(re)?j!==void 0&&j.hasDiagnosticCode?P.code=re:(P.code=re.value,P.codeDescription={href:re.target}):P.code=re,Bn.number(h.severity)&&(P.severity=xt(h.severity)),Array.isArray(h.tags)&&(P.tags=Ot(h.tags)),h.relatedInformation&&(P.relatedInformation=ui(h.relatedInformation)),h.source&&(P.source=h.source),P}function ln(h,P){return h==null?h:Hd.map(h,un,P)}function li(h,P){switch(h){case"$string":return P;case G.MarkupKind.PlainText:return{kind:h,value:P};case G.MarkupKind.Markdown:return{kind:h,value:P.value};default:return`Unsupported Markup content received. Kind is: ${h}`}}function kn(h){switch(h){case Te.CompletionItemTag.Deprecated:return G.CompletionItemTag.Deprecated}}function Fn(h){if(h===void 0)return h;let P=[];for(let j of h){let re=kn(j);re!==void 0&&P.push(re)}return P}function dn(h,P){return P!==void 0?P:h+1}function Nt(h,P=!1){let j,re;Bn.string(h.label)?j=h.label:(j=h.label.label,P&&(h.label.detail!==void 0||h.label.description!==void 0)&&(re={detail:h.label.detail,description:h.label.description}));let S={label:j};re!==void 0&&(S.labelDetails=re);let d=h instanceof TC.default?h:void 0;h.detail&&(S.detail=h.detail),h.documentation&&(!d||d.documentationFormat==="$string"?S.documentation=h.documentation:S.documentation=li(d.documentationFormat,h.documentation)),h.filterText&&(S.filterText=h.filterText),xn(S,h),Bn.number(h.kind)&&(S.kind=dn(h.kind,d&&d.originalItemKind)),h.sortText&&(S.sortText=h.sortText),h.additionalTextEdits&&(S.additionalTextEdits=On(h.additionalTextEdits)),h.commitCharacters&&(S.commitCharacters=h.commitCharacters.slice()),h.command&&(S.command=Lt(h.command)),(h.preselect===!0||h.preselect===!1)&&(S.preselect=h.preselect);let D=Fn(h.tags);if(d){if(d.data!==void 0&&(S.data=d.data),d.deprecated===!0||d.deprecated===!1){if(d.deprecated===!0&&D!==void 0&&D.length>0){let _=D.indexOf(Te.CompletionItemTag.Deprecated);_!==-1&&D.splice(_,1)}S.deprecated=d.deprecated}d.insertTextMode!==void 0&&(S.insertTextMode=d.insertTextMode)}return D!==void 0&&D.length>0&&(S.tags=D),S.insertTextMode===void 0&&h.keepWhitespace===!0&&(S.insertTextMode=G.InsertTextMode.adjustIndentation),S}function xn(h,P){let j=G.InsertTextFormat.PlainText,re,S;P.textEdit?(re=P.textEdit.newText,S=P.textEdit.range):P.insertText instanceof Te.SnippetString?(j=G.InsertTextFormat.Snippet,re=P.insertText.value):re=P.insertText,P.range&&(S=P.range),h.insertTextFormat=j,P.fromEdit&&re!==void 0&&S!==void 0?h.textEdit=Qt(re,S):h.insertText=re}function Qt(h,P){return Ns.is(P)?G.InsertReplaceEdit.create(h,Se(P.inserting),Se(P.replacing)):{newText:h,range:Se(P)}}function fn(h){return{range:Se(h.range),newText:h.newText}}function On(h){return h==null?h:h.map(fn)}function _t(h){return h<=Te.SymbolKind.TypeParameter?h+1:G.SymbolKind.Property}function hn(h){return h}function Qe(h){return h.map(hn)}function di(h,P,j){return{textDocument:r(h),position:We(P),context:{includeDeclaration:j.includeDeclaration}}}async function rt(h,P){let j=G.CodeAction.create(h.title);if(h instanceof EC.default&&h.data!==void 0&&(j.data=h.data),h.kind!==void 0&&(j.kind=Nn(h.kind)),h.diagnostics!==void 0&&(j.diagnostics=await ln(h.diagnostics,P)),h.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return h.command!==void 0&&(j.command=Lt(h.command)),h.isPreferred!==void 0&&(j.isPreferred=h.isPreferred),h.disabled!==void 0&&(j.disabled={reason:h.disabled.reason}),j}async function pn(h,P){if(h==null)return h;let j;return h.only&&Bn.string(h.only.value)&&(j=[h.only.value]),G.CodeActionContext.create(await ln(h.diagnostics,P),j,gn(h.triggerKind))}function gn(h){switch(h){case Te.CodeActionTriggerKind.Invoke:return G.CodeActionTriggerKind.Invoked;case Te.CodeActionTriggerKind.Automatic:return G.CodeActionTriggerKind.Automatic;default:return}}function Nn(h){if(h!=null)return h.value}function fi(h){return h==null?h:G.InlineValueContext.create(h.frameId,Se(h.stoppedLocation))}function Lt(h){let P=G.Command.create(h.title,h.command);return h.arguments&&(P.arguments=h.arguments),P}function hi(h){let P=G.CodeLens.create(Se(h.range));return h.command&&(P.command=Lt(h.command)),h instanceof qC.default&&h.data&&(P.data=h.data),P}function Ln(h,P){let j={tabSize:h.tabSize,insertSpaces:h.insertSpaces};return P.trimTrailingWhitespace&&(j.trimTrailingWhitespace=!0),P.trimFinalNewlines&&(j.trimFinalNewlines=!0),P.insertFinalNewline&&(j.insertFinalNewline=!0),j}function pi(h){return{textDocument:r(h)}}function An(h){return{textDocument:r(h)}}function gi(h){let P=G.DocumentLink.create(Se(h.range));h.target&&(P.target=i(h.target)),h.tooltip!==void 0&&(P.tooltip=h.tooltip);let j=h instanceof PC.default?h:void 0;return j&&j.data&&(P.data=j.data),P}function Mn(h){return{textDocument:r(h)}}function Hn(h){let P={name:h.name,kind:_t(h.kind),uri:i(h.uri),range:Se(h.range),selectionRange:Se(h.selectionRange)};return h.detail!==void 0&&h.detail.length>0&&(P.detail=h.detail),h.tags!==void 0&&(P.tags=Qe(h.tags)),h instanceof IC.default&&h.data!==void 0&&(P.data=h.data),P}function mi(h){let P={name:h.name,kind:_t(h.kind),uri:i(h.uri),range:Se(h.range),selectionRange:Se(h.selectionRange)};return h.detail!==void 0&&h.detail.length>0&&(P.detail=h.detail),h.tags!==void 0&&(P.tags=Qe(h.tags)),h instanceof kC.default&&h.data!==void 0&&(P.data=h.data),P}function jn(h){let P=h instanceof FC.default?{name:h.name,kind:_t(h.kind),location:h.hasRange?Me(h.location):{uri:t(h.location.uri)},data:h.data}:{name:h.name,kind:_t(h.kind),location:Me(h.location)};return h.tags!==void 0&&(P.tags=Qe(h.tags)),h.containerName!==""&&(P.containerName=h.containerName),P}function vi(h){let P=typeof h.label=="string"?h.label:h.label.map(mn),j=G.InlayHint.create(Be(h.position),P);return h.kind!==void 0&&(j.kind=h.kind),h.textEdits!==void 0&&(j.textEdits=On(h.textEdits)),h.tooltip!==void 0&&(j.tooltip=Yt(h.tooltip)),h.paddingLeft!==void 0&&(j.paddingLeft=h.paddingLeft),h.paddingRight!==void 0&&(j.paddingRight=h.paddingRight),h instanceof xC.default&&h.data!==void 0&&(j.data=h.data),j}function mn(h){let P=G.InlayHintLabelPart.create(h.value);return h.location!==void 0&&(P.location=Me(h.location)),h.command!==void 0&&(P.command=Lt(h.command)),h.tooltip!==void 0&&(P.tooltip=Yt(h.tooltip)),P}function Yt(h){return typeof h=="string"?h:{kind:G.MarkupKind.Markdown,value:h.value}}return{asUri:i,asTextDocumentIdentifier:r,asTextDocumentItem:o,asVersionedTextDocumentIdentifier:s,asOpenTextDocumentParams:c,asChangeTextDocumentParams:g,asCloseTextDocumentParams:y,asSaveTextDocumentParams:v,asWillSaveTextDocumentParams:C,asDidCreateFilesParams:q,asDidRenameFilesParams:E,asDidDeleteFilesParams:F,asWillCreateFilesParams:x,asWillRenameFilesParams:N,asWillDeleteFilesParams:L,asTextDocumentPositionParams:J,asCompletionParams:Z,asSignatureHelpParams:it,asWorkerPosition:We,asRange:Se,asPosition:Be,asPositions:cn,asLocation:Me,asDiagnosticSeverity:xt,asDiagnosticTag:ke,asDiagnostic:un,asDiagnostics:ln,asCompletionItem:Nt,asTextEdit:fn,asSymbolKind:_t,asSymbolTag:hn,asSymbolTags:Qe,asReferenceParams:di,asCodeAction:rt,asCodeActionContext:pn,asInlineValueContext:fi,asCommand:Lt,asCodeLens:hi,asFormattingOptions:Ln,asDocumentSymbolParams:pi,asCodeLensParams:An,asDocumentLink:gi,asDocumentLinkParams:Mn,asCallHierarchyItem:Hn,asTypeHierarchyItem:mi,asInlayHint:vi,asWorkspaceSymbol:jn}}Pr.createConverter=OC});var Kd=T(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.createConverter=void 0;var A=require("vscode"),U=K(),mt=ht(),oe=Ui(),NC=ls(),LC=hs(),AC=ms(),MC=Cs(),Ud=_s(),HC=bs(),jC=Ps(),$C=ks(),UC=Os(),Wd=K(),Er;(function(n){function e(t){let i=t;return i&&mt.string(i.language)&&mt.string(i.value)}n.is=e})(Er||(Er={}));function WC(n,e,t){let r=n||(a=>A.Uri.parse(a));function o(a){return r(a)}function s(a){let w=[];for(let k of a)if(typeof k=="string")w.push(k);else if(Wd.NotebookCellTextDocumentFilter.is(k))if(typeof k.notebook=="string")w.push({notebookType:k.notebook,language:k.language});else{let $=k.notebook.notebookType??"*";w.push({notebookType:$,scheme:k.notebook.scheme,pattern:k.notebook.pattern,language:k.language})}else Wd.TextDocumentFilter.is(k)&&w.push({language:k.language,scheme:k.scheme,pattern:k.pattern});return w}async function c(a,w){return oe.map(a,f,w)}function u(a){let w=new Array(a.length);for(let k=0;k<a.length;k++)w[k]=f(a[k]);return w}function f(a){let w=new Ud.ProtocolDiagnostic(C(a.range),a.message,E(a.severity),a.data);if(a.code!==void 0){if(typeof a.code=="string"||typeof a.code=="number")U.CodeDescription.is(a.codeDescription)?w.code={value:a.code,target:o(a.codeDescription.href)}:w.code=a.code;else if(Ud.DiagnosticCode.is(a.code)){w.hasDiagnosticCode=!0;let k=a.code;w.code={value:k.value,target:o(k.target)}}}return a.source&&(w.source=a.source),a.relatedInformation&&(w.relatedInformation=g(a.relatedInformation)),Array.isArray(a.tags)&&(w.tags=y(a.tags)),w}function g(a){let w=new Array(a.length);for(let k=0;k<a.length;k++){let $=a[k];w[k]=new A.DiagnosticRelatedInformation(ke($.location),$.message)}return w}function y(a){if(!a)return;let w=[];for(let k of a){let $=v(k);$!==void 0&&w.push($)}return w.length>0?w:void 0}function v(a){switch(a){case U.DiagnosticTag.Unnecessary:return A.DiagnosticTag.Unnecessary;case U.DiagnosticTag.Deprecated:return A.DiagnosticTag.Deprecated;default:return}}function R(a){return a?new A.Position(a.line,a.character):void 0}function C(a){return a?new A.Range(a.start.line,a.start.character,a.end.line,a.end.character):void 0}async function q(a,w){return oe.map(a,k=>new A.Range(k.start.line,k.start.character,k.end.line,k.end.character),w)}function E(a){if(a==null)return A.DiagnosticSeverity.Error;switch(a){case U.DiagnosticSeverity.Error:return A.DiagnosticSeverity.Error;case U.DiagnosticSeverity.Warning:return A.DiagnosticSeverity.Warning;case U.DiagnosticSeverity.Information:return A.DiagnosticSeverity.Information;case U.DiagnosticSeverity.Hint:return A.DiagnosticSeverity.Hint}return A.DiagnosticSeverity.Error}function F(a){if(mt.string(a))return N(a);if(Er.is(a))return N().appendCodeblock(a.value,a.language);if(Array.isArray(a)){let w=[];for(let k of a){let $=N();Er.is(k)?$.appendCodeblock(k.value,k.language):$.appendMarkdown(k),w.push($)}return w}else return N(a)}function x(a){if(mt.string(a))return a;switch(a.kind){case U.MarkupKind.Markdown:return N(a.value);case U.MarkupKind.PlainText:return a.value;default:return`Unsupported Markup content received. Kind is: ${a.kind}`}}function N(a){let w;if(a===void 0||typeof a=="string")w=new A.MarkdownString(a);else switch(a.kind){case U.MarkupKind.Markdown:w=new A.MarkdownString(a.value);break;case U.MarkupKind.PlainText:w=new A.MarkdownString,w.appendText(a.value);break;default:w=new A.MarkdownString,w.appendText(`Unsupported Markup content received. Kind is: ${a.kind}`);break}return w.isTrusted=e,w.supportHtml=t,w}function L(a){if(a)return new A.Hover(F(a.contents),C(a.range))}async function J(a,w,k){if(!a)return;if(Array.isArray(a))return oe.map(a,At=>Ue(At,w),k);let $=a,{defaultRange:Je,commitCharacters:Oe}=Ie($,w),ae=await oe.map($.items,At=>Ue(At,Oe,Je,$.itemDefaults?.insertTextMode,$.itemDefaults?.insertTextFormat,$.itemDefaults?.data),k);return new A.CompletionList(ae,$.isIncomplete)}function Ie(a,w){let k=a.itemDefaults?.editRange,$=a.itemDefaults?.commitCharacters??w;return U.Range.is(k)?{defaultRange:C(k),commitCharacters:$}:k!==void 0?{defaultRange:{inserting:C(k.insert),replacing:C(k.replace)},commitCharacters:$}:{defaultRange:void 0,commitCharacters:$}}function Z(a){return U.CompletionItemKind.Text<=a&&a<=U.CompletionItemKind.TypeParameter?[a-1,void 0]:[A.CompletionItemKind.Text,a]}function Pe(a){switch(a){case U.CompletionItemTag.Deprecated:return A.CompletionItemTag.Deprecated}}function xe(a){if(a==null)return[];let w=[];for(let k of a){let $=Pe(k);$!==void 0&&w.push($)}return w}function Ue(a,w,k,$,Je,Oe){let ae=xe(a.tags),At=ut(a),le=new NC.default(At);a.detail&&(le.detail=a.detail),a.documentation&&(le.documentation=x(a.documentation),le.documentationFormat=mt.string(a.documentation)?"$string":a.documentation.kind),a.filterText&&(le.filterText=a.filterText);let ur=Dt(a,k,Je);if(ur&&(le.insertText=ur.text,le.range=ur.range,le.fromEdit=ur.fromEdit),mt.number(a.kind)){let[Th,Vc]=Z(a.kind);le.kind=Th,Vc&&(le.originalItemKind=Vc)}a.sortText&&(le.sortText=a.sortText),a.additionalTextEdits&&(le.additionalTextEdits=Be(a.additionalTextEdits));let Kc=a.commitCharacters!==void 0?mt.stringArray(a.commitCharacters)?a.commitCharacters:void 0:w;Kc&&(le.commitCharacters=Kc.slice()),a.command&&(le.command=Qe(a.command)),(a.deprecated===!0||a.deprecated===!1)&&(le.deprecated=a.deprecated,a.deprecated===!0&&ae.push(A.CompletionItemTag.Deprecated)),(a.preselect===!0||a.preselect===!1)&&(le.preselect=a.preselect);let zc=a.data??Oe;zc!==void 0&&(le.data=zc),ae.length>0&&(le.tags=ae);let wo=a.insertTextMode??$;return wo!==void 0&&(le.insertTextMode=wo,wo===U.InsertTextMode.asIs&&(le.keepWhitespace=!0)),le}function ut(a){return U.CompletionItemLabelDetails.is(a.labelDetails)?{label:a.label,detail:a.labelDetails.detail,description:a.labelDetails.description}:a.label}function Dt(a,w,k){let $=a.insertTextFormat??k;if(a.textEdit!==void 0||w!==void 0){let[Je,Oe]=a.textEdit!==void 0?lt(a.textEdit):[w,a.textEditText??a.label];return $===U.InsertTextFormat.Snippet?{text:new A.SnippetString(Oe),range:Je,fromEdit:!0}:{text:Oe,range:Je,fromEdit:!0}}else return a.insertText?$===U.InsertTextFormat.Snippet?{text:new A.SnippetString(a.insertText),fromEdit:!1}:{text:a.insertText,fromEdit:!1}:void 0}function lt(a){return U.InsertReplaceEdit.is(a)?[{inserting:C(a.insert),replacing:C(a.replace)},a.newText]:[C(a.range),a.newText]}function it(a){if(a)return new A.TextEdit(C(a.range),a.newText)}async function We(a,w){if(a)return oe.map(a,it,w)}function Be(a){if(!a)return;let w=new Array(a.length);for(let k=0;k<a.length;k++)w[k]=it(a[k]);return w}async function cn(a,w){if(!a)return;let k=new A.SignatureHelp;return mt.number(a.activeSignature)?k.activeSignature=a.activeSignature:k.activeSignature=0,mt.number(a.activeParameter)?k.activeParameter=a.activeParameter:k.activeParameter=0,a.signatures&&(k.signatures=await Se(a.signatures,w)),k}async function Se(a,w){return oe.mapAsync(a,Me,w)}async function Me(a,w){let k=new A.SignatureInformation(a.label);return a.documentation!==void 0&&(k.documentation=x(a.documentation)),a.parameters!==void 0&&(k.parameters=await xt(a.parameters,w)),a.activeParameter!==void 0&&(k.activeParameter=a.activeParameter),k}function xt(a,w){return oe.map(a,Ot,w)}function Ot(a){let w=new A.ParameterInformation(a.label);return a.documentation&&(w.documentation=x(a.documentation)),w}function ke(a){return a?new A.Location(r(a.uri),C(a.range)):void 0}async function ci(a,w){if(a)return un(a,w)}async function ui(a,w){if(a)return un(a,w)}function In(a){if(!a)return;let w={targetUri:r(a.targetUri),targetRange:C(a.targetRange),originSelectionRange:C(a.originSelectionRange),targetSelectionRange:C(a.targetSelectionRange)};if(!w.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return w}async function un(a,w){if(a)if(mt.array(a)){if(a.length===0)return[];if(U.LocationLink.is(a[0])){let k=a;return oe.map(k,In,w)}else{let k=a;return oe.map(k,ke,w)}}else return U.LocationLink.is(a)?[In(a)]:ke(a)}async function ln(a,w){if(a)return oe.map(a,ke,w)}async function li(a,w){if(a)return oe.map(a,kn,w)}function kn(a){let w=new A.DocumentHighlight(C(a.range));return mt.number(a.kind)&&(w.kind=Fn(a.kind)),w}function Fn(a){switch(a){case U.DocumentHighlightKind.Text:return A.DocumentHighlightKind.Text;case U.DocumentHighlightKind.Read:return A.DocumentHighlightKind.Read;case U.DocumentHighlightKind.Write:return A.DocumentHighlightKind.Write}return A.DocumentHighlightKind.Text}async function dn(a,w){if(a)return oe.map(a,fn,w)}function Nt(a){return a<=U.SymbolKind.TypeParameter?a-1:A.SymbolKind.Property}function xn(a){switch(a){case U.SymbolTag.Deprecated:return A.SymbolTag.Deprecated;default:return}}function Qt(a){if(a==null)return;let w=[];for(let k of a){let $=xn(k);$!==void 0&&w.push($)}return w.length===0?void 0:w}function fn(a){let w=a.data,k=a.location,$=k.range===void 0||w!==void 0?new $C.default(a.name,Nt(a.kind),a.containerName??"",k.range===void 0?r(k.uri):new A.Location(r(a.location.uri),C(k.range)),w):new A.SymbolInformation(a.name,Nt(a.kind),a.containerName??"",new A.Location(r(a.location.uri),C(k.range)));return hn($,a),$}async function On(a,w){if(a!=null)return oe.map(a,_t,w)}function _t(a){let w=new A.DocumentSymbol(a.name,a.detail||"",Nt(a.kind),C(a.range),C(a.selectionRange));if(hn(w,a),a.children!==void 0&&a.children.length>0){let k=[];for(let $ of a.children)k.push(_t($));w.children=k}return w}function hn(a,w){a.tags=Qt(w.tags),w.deprecated&&(a.tags?a.tags.includes(A.SymbolTag.Deprecated)||(a.tags=a.tags.concat(A.SymbolTag.Deprecated)):a.tags=[A.SymbolTag.Deprecated])}function Qe(a){let w={title:a.title,command:a.command};return a.arguments&&(w.arguments=a.arguments),w}async function di(a,w){if(a)return oe.map(a,Qe,w)}let rt=new Map;rt.set(U.CodeActionKind.Empty,A.CodeActionKind.Empty),rt.set(U.CodeActionKind.QuickFix,A.CodeActionKind.QuickFix),rt.set(U.CodeActionKind.Refactor,A.CodeActionKind.Refactor),rt.set(U.CodeActionKind.RefactorExtract,A.CodeActionKind.RefactorExtract),rt.set(U.CodeActionKind.RefactorInline,A.CodeActionKind.RefactorInline),rt.set(U.CodeActionKind.RefactorRewrite,A.CodeActionKind.RefactorRewrite),rt.set(U.CodeActionKind.Source,A.CodeActionKind.Source),rt.set(U.CodeActionKind.SourceOrganizeImports,A.CodeActionKind.SourceOrganizeImports);function pn(a){if(a==null)return;let w=rt.get(a);if(w)return w;let k=a.split(".");w=A.CodeActionKind.Empty;for(let $ of k)w=w.append($);return w}function gn(a){if(a!=null)return a.map(w=>pn(w))}async function Nn(a,w){if(a==null)return;let k=new MC.default(a.title,a.data);return a.kind!==void 0&&(k.kind=pn(a.kind)),a.diagnostics!==void 0&&(k.diagnostics=u(a.diagnostics)),a.edit!==void 0&&(k.edit=await Ln(a.edit,w)),a.command!==void 0&&(k.command=Qe(a.command)),a.isPreferred!==void 0&&(k.isPreferred=a.isPreferred),a.disabled!==void 0&&(k.disabled={reason:a.disabled.reason}),k}function fi(a,w){return oe.mapAsync(a,async k=>U.Command.is(k)?Qe(k):Nn(k,w),w)}function Lt(a){if(!a)return;let w=new LC.default(C(a.range));return a.command&&(w.command=Qe(a.command)),a.data!==void 0&&a.data!==null&&(w.data=a.data),w}async function hi(a,w){if(a)return oe.map(a,Lt,w)}async function Ln(a,w){if(!a)return;let k=new Map;if(a.changeAnnotations!==void 0){let Oe=a.changeAnnotations;await oe.forEach(Object.keys(Oe),ae=>{let At=pi(Oe[ae]);k.set(ae,At)},w)}let $=Oe=>{if(Oe!==void 0)return k.get(Oe)},Je=new A.WorkspaceEdit;if(a.documentChanges){let Oe=a.documentChanges;await oe.forEach(Oe,ae=>{if(U.CreateFile.is(ae))Je.createFile(r(ae.uri),ae.options,$(ae.annotationId));else if(U.RenameFile.is(ae))Je.renameFile(r(ae.oldUri),r(ae.newUri),ae.options,$(ae.annotationId));else if(U.DeleteFile.is(ae))Je.deleteFile(r(ae.uri),ae.options,$(ae.annotationId));else if(U.TextDocumentEdit.is(ae)){let At=r(ae.textDocument.uri);for(let le of ae.edits)U.AnnotatedTextEdit.is(le)?Je.replace(At,C(le.range),le.newText,$(le.annotationId)):Je.replace(At,C(le.range),le.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(ae,void 0,4)}`)},w)}else if(a.changes){let Oe=a.changes;await oe.forEach(Object.keys(Oe),ae=>{Je.set(r(ae),Be(Oe[ae]))},w)}return Je}function pi(a){if(a!==void 0)return{label:a.label,needsConfirmation:!!a.needsConfirmation,description:a.description}}function An(a){let w=C(a.range),k=a.target?o(a.target):void 0,$=new AC.default(w,k);return a.tooltip!==void 0&&($.tooltip=a.tooltip),a.data!==void 0&&a.data!==null&&($.data=a.data),$}async function gi(a,w){if(a)return oe.map(a,An,w)}function Mn(a){return new A.Color(a.red,a.green,a.blue,a.alpha)}function Hn(a){return new A.ColorInformation(C(a.range),Mn(a.color))}async function mi(a,w){if(a)return oe.map(a,Hn,w)}function jn(a){let w=new A.ColorPresentation(a.label);return w.additionalTextEdits=Be(a.additionalTextEdits),a.textEdit&&(w.textEdit=it(a.textEdit)),w}async function vi(a,w){if(a)return oe.map(a,jn,w)}function mn(a){if(a)switch(a){case U.FoldingRangeKind.Comment:return A.FoldingRangeKind.Comment;case U.FoldingRangeKind.Imports:return A.FoldingRangeKind.Imports;case U.FoldingRangeKind.Region:return A.FoldingRangeKind.Region}}function Yt(a){return new A.FoldingRange(a.startLine,a.endLine,mn(a.kind))}async function h(a,w){if(a)return oe.map(a,Yt,w)}function P(a){return new A.SelectionRange(C(a.range),a.parent?P(a.parent):void 0)}async function j(a,w){return Array.isArray(a)?oe.map(a,P,w):[]}function re(a){return U.InlineValueText.is(a)?new A.InlineValueText(C(a.range),a.text):U.InlineValueVariableLookup.is(a)?new A.InlineValueVariableLookup(C(a.range),a.variableName,a.caseSensitiveLookup):new A.InlineValueEvaluatableExpression(C(a.range),a.expression)}async function S(a,w){return Array.isArray(a)?oe.map(a,re,w):[]}async function d(a,w){let k=typeof a.label=="string"?a.label:await oe.map(a.label,D,w),$=new UC.default(R(a.position),k);return a.kind!==void 0&&($.kind=a.kind),a.textEdits!==void 0&&($.textEdits=await We(a.textEdits,w)),a.tooltip!==void 0&&($.tooltip=_(a.tooltip)),a.paddingLeft!==void 0&&($.paddingLeft=a.paddingLeft),a.paddingRight!==void 0&&($.paddingRight=a.paddingRight),a.data!==void 0&&($.data=a.data),$}function D(a){let w=new A.InlayHintLabelPart(a.value);return a.location!==void 0&&(w.location=ke(a.location)),a.tooltip!==void 0&&(w.tooltip=_(a.tooltip)),a.command!==void 0&&(w.command=Qe(a.command)),w}function _(a){return typeof a=="string"?a:N(a)}async function m(a,w){if(Array.isArray(a))return oe.mapAsync(a,d,w)}function l(a){if(a===null)return;let w=new HC.default(Nt(a.kind),a.name,a.detail||"",o(a.uri),C(a.range),C(a.selectionRange),a.data);return a.tags!==void 0&&(w.tags=Qt(a.tags)),w}async function b(a,w){if(a!==null)return oe.map(a,l,w)}async function I(a,w){return new A.CallHierarchyIncomingCall(l(a.from),await q(a.fromRanges,w))}async function W(a,w){if(a!==null)return oe.mapAsync(a,I,w)}async function de(a,w){return new A.CallHierarchyOutgoingCall(l(a.to),await q(a.fromRanges,w))}async function ue(a,w){if(a!==null)return oe.mapAsync(a,de,w)}async function ot(a,w){if(a!=null)return new A.SemanticTokens(new Uint32Array(a.data),a.resultId)}function Ye(a){return new A.SemanticTokensEdit(a.start,a.deleteCount,a.data!==void 0?new Uint32Array(a.data):void 0)}async function St(a,w){if(a!=null)return new A.SemanticTokensEdits(a.edits.map(Ye),a.resultId)}function Q(a){return a}async function Jt(a,w){if(a!=null)return new A.LinkedEditingRanges(await q(a.ranges,w),$n(a.wordPattern))}function $n(a){if(a!=null)return new RegExp(a)}function yi(a){if(a===null)return;let w=new jC.default(Nt(a.kind),a.name,a.detail||"",o(a.uri),C(a.range),C(a.selectionRange),a.data);return a.tags!==void 0&&(w.tags=Qt(a.tags)),w}async function wh(a,w){if(a!==null)return oe.map(a,yi,w)}function bh(a){if(mt.string(a))return a;if(U.RelativePattern.is(a)){if(U.URI.is(a.baseUri))return new A.RelativePattern(o(a.baseUri),a.pattern);if(U.WorkspaceFolder.is(a.baseUri)){let w=A.workspace.getWorkspaceFolder(o(a.baseUri.uri));return w!==void 0?new A.RelativePattern(w,a.pattern):void 0}}}return{asUri:o,asDocumentSelector:s,asDiagnostics:c,asDiagnostic:f,asRange:C,asRanges:q,asPosition:R,asDiagnosticSeverity:E,asDiagnosticTag:v,asHover:L,asCompletionResult:J,asCompletionItem:Ue,asTextEdit:it,asTextEdits:We,asSignatureHelp:cn,asSignatureInformations:Se,asSignatureInformation:Me,asParameterInformations:xt,asParameterInformation:Ot,asDeclarationResult:ci,asDefinitionResult:ui,asLocation:ke,asReferences:ln,asDocumentHighlights:li,asDocumentHighlight:kn,asDocumentHighlightKind:Fn,asSymbolKind:Nt,asSymbolTag:xn,asSymbolTags:Qt,asSymbolInformations:dn,asSymbolInformation:fn,asDocumentSymbols:On,asDocumentSymbol:_t,asCommand:Qe,asCommands:di,asCodeAction:Nn,asCodeActionKind:pn,asCodeActionKinds:gn,asCodeActionResult:fi,asCodeLens:Lt,asCodeLenses:hi,asWorkspaceEdit:Ln,asDocumentLink:An,asDocumentLinks:gi,asFoldingRangeKind:mn,asFoldingRange:Yt,asFoldingRanges:h,asColor:Mn,asColorInformation:Hn,asColorInformations:mi,asColorPresentation:jn,asColorPresentations:vi,asSelectionRange:P,asSelectionRanges:j,asInlineValue:re,asInlineValues:S,asInlayHint:d,asInlayHints:m,asSemanticTokensLegend:Q,asSemanticTokens:ot,asSemanticTokensEdit:Ye,asSemanticTokensEdits:St,asCallHierarchyItem:l,asCallHierarchyItems:b,asCallHierarchyIncomingCall:I,asCallHierarchyIncomingCalls:W,asCallHierarchyOutgoingCall:de,asCallHierarchyOutgoingCalls:ue,asLinkedEditingRanges:Jt,asTypeHierarchyItem:yi,asTypeHierarchyItems:wh,asGlobPattern:bh}}Ir.createConverter=WC});var ve=T(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.generateUuid=vt.parse=vt.isUUID=vt.v4=vt.empty=void 0;var Wi=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},Ki=class n extends Wi{constructor(){super([n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),"-",n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),"-","4",n._randomHex(),n._randomHex(),n._randomHex(),"-",n._oneOf(n._timeHighBits),n._randomHex(),n._randomHex(),n._randomHex(),"-",n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return n._oneOf(n._chars)}};Ki._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Ki._timeHighBits=["8","9","a","b"];vt.empty=new Wi("00000000-0000-0000-0000-000000000000");function zd(){return new Ki}vt.v4=zd;var KC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Vd(n){return KC.test(n)}vt.isUUID=Vd;function zC(n){if(!Vd(n))throw new Error("invalid uuid");return new Wi(n)}vt.parse=zC;function VC(){return zd().asHex()}vt.generateUuid=VC});var As=T(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.ProgressPart=void 0;var Gd=require("vscode"),Xd=K(),Bd=ht(),Ls=class{constructor(e,t,i){this._client=e,this._token=t,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(Xd.WorkDoneProgress.type,this._token,r=>{switch(r.kind){case"begin":this.begin(r);break;case"report":this.report(r);break;case"end":this.done(),i&&i(this);break}})}begin(e){this._infinite=e.percentage===void 0,this._lspProgressDisposable!==void 0&&Gd.window.withProgress({location:Gd.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(t,i)=>{if(this._lspProgressDisposable!==void 0)return this._progress=t,this._cancellationToken=i,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(Xd.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((r,o)=>{this._resolve=r,this._reject=o})})}report(e){if(this._infinite&&Bd.string(e.message))this._progress!==void 0&&this._progress.report({message:e.message});else if(Bd.number(e.percentage)){let t=Math.max(0,Math.min(e.percentage,100)),i=Math.max(0,t-this._reported);this._reported+=i,this._progress!==void 0&&this._progress.report({message:e.message,increment:i})}}cancel(){this.cleanup(),this._reject!==void 0&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),this._resolve!==void 0&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){this._lspProgressDisposable!==void 0&&(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),this._tokenDisposable!==void 0&&(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}};kr.ProgressPart=Ls});var te=T(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.WorkspaceFeature=qe.TextDocumentLanguageFeature=qe.TextDocumentEventFeature=qe.DynamicDocumentFeature=qe.DynamicFeature=qe.StaticFeature=qe.ensure=qe.LSPCancellationError=void 0;var Sn=require("vscode"),Ms=K(),Ge=ht(),Qd=ve(),Hs=class extends Sn.CancellationError{constructor(e){super(),this.data=e}};qe.LSPCancellationError=Hs;function GC(n,e){return n[e]===void 0&&(n[e]={}),n[e]}qe.ensure=GC;var XC;(function(n){function e(t){let i=t;return i!=null&&Ge.func(i.fillClientCapabilities)&&Ge.func(i.initialize)&&Ge.func(i.getState)&&Ge.func(i.dispose)&&(i.fillInitializeParams===void 0||Ge.func(i.fillInitializeParams))}n.is=e})(XC=qe.StaticFeature||(qe.StaticFeature={}));var BC;(function(n){function e(t){let i=t;return i!=null&&Ge.func(i.fillClientCapabilities)&&Ge.func(i.initialize)&&Ge.func(i.getState)&&Ge.func(i.dispose)&&(i.fillInitializeParams===void 0||Ge.func(i.fillInitializeParams))&&Ge.func(i.register)&&Ge.func(i.unregister)&&i.registrationType!==void 0}n.is=e})(BC=qe.DynamicFeature||(qe.DynamicFeature={}));var zi=class{constructor(e){this._client=e}getState(){let e=this.getDocumentSelectors(),t=0;for(let r of e){t++;for(let o of Sn.workspace.textDocuments)if(Sn.languages.match(r,o)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}let i=t>0;return{kind:"document",id:this.registrationType.method,registrations:i,matches:!1}}};qe.DynamicDocumentFeature=zi;var js=class extends zi{constructor(e,t,i,r,o,s,c){super(e),this._event=t,this._type=i,this._middleware=r,this._createParams=o,this._textDocument=s,this._selectorFilter=c,this._selectors=new Map,this._onNotificationSent=new Sn.EventEmitter}static textDocumentFilter(e,t){for(let i of e)if(Sn.languages.match(i,t)>0)return!0;return!1}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(t=>{this.callback(t).catch(i=>{this._client.error(`Sending document notification ${this._type.method} failed.`,i)})})),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}async callback(e){let t=async i=>{let r=this._createParams(i);await this._client.sendNotification(this._type,r).catch(),this.notificationSent(i,this._type,r)};if(this.matches(e)){let i=this._middleware();return i?i(e,r=>t(r)):t(e)}}matches(e){return this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(e))?!1:!this._selectorFilter||this._selectorFilter(this._selectors.values(),e)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,t,i){this._onNotificationSent.fire({original:e,type:t,params:i})}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let t of this._selectors.values())if(Sn.languages.match(t,e)>0)return{send:i=>this.callback(i)}}};qe.TextDocumentEventFeature=js;var $s=class extends zi{constructor(e,t){super(e),this._registrationType=t,this._registrations=new Map}*getDocumentSelectors(){for(let e of this._registrations.values()){let t=e.data.registerOptions.documentSelector;t!==null&&(yield this._client.protocol2CodeConverter.asDocumentSelector(t))}}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let t=this.registerLanguageProvider(e.registerOptions,e.id);this._registrations.set(e.id,{disposable:t[0],data:e,provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&&t.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,t){if(t){if(Ms.TextDocumentRegistrationOptions.is(t)){let i=Ms.StaticRegistrationOptions.hasId(t)?t.id:Qd.generateUuid(),r=t.documentSelector||e;if(r)return[i,Object.assign({},t,{documentSelector:r})]}else if(Ge.boolean(t)&&t===!0||Ms.WorkDoneProgressOptions.is(t)){if(!e)return[void 0,void 0];let i=Ge.boolean(t)&&t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e});return[Qd.generateUuid(),i]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,t){if(!(!e||!t))return Ge.boolean(t)&&t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e})}getProvider(e){for(let t of this._registrations.values()){let i=t.data.registerOptions.documentSelector;if(i!==null&&Sn.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(i),e)>0)return t.provider}}getAllProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}};qe.TextDocumentLanguageFeature=$s;var Us=class{constructor(e,t){this._client=e,this._registrationType=t,this._registrations=new Map}getState(){let e=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:e}}get registrationType(){return this._registrationType}register(e){let t=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:t[0],provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&&t.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}};qe.WorkspaceFeature=Us});var Jd=T((LS,Yd)=>{Yd.exports=function(n,e){for(var t=[],i=0;i<n.length;i++){var r=e(n[i],i);QC(r)?t.push.apply(t,r):t.push(r)}return t};var QC=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"}});var rf=T((AS,nf)=>{"use strict";nf.exports=ef;function ef(n,e,t){n instanceof RegExp&&(n=Zd(n,t)),e instanceof RegExp&&(e=Zd(e,t));var i=tf(n,e,t);return i&&{start:i[0],end:i[1],pre:t.slice(0,i[0]),body:t.slice(i[0]+n.length,i[1]),post:t.slice(i[1]+e.length)}}function Zd(n,e){var t=e.match(n);return t?t[0]:null}ef.range=tf;function tf(n,e,t){var i,r,o,s,c,u=t.indexOf(n),f=t.indexOf(e,u+1),g=u;if(u>=0&&f>0){if(n===e)return[u,f];for(i=[],o=t.length;g>=0&&!c;)g==u?(i.push(g),u=t.indexOf(n,g+1)):i.length==1?c=[i.pop(),f]:(r=i.pop(),r<o&&(o=r,s=f),f=t.indexOf(e,g+1)),g=u<f&&u>=0?u:f;i.length&&(c=[o,s])}return c}});var ff=T((MS,df)=>{var YC=Jd(),of=rf();df.exports=eR;var sf="\0SLASH"+Math.random()+"\0",af="\0OPEN"+Math.random()+"\0",Ks="\0CLOSE"+Math.random()+"\0",cf="\0COMMA"+Math.random()+"\0",uf="\0PERIOD"+Math.random()+"\0";function Ws(n){return parseInt(n,10)==n?parseInt(n,10):n.charCodeAt(0)}function JC(n){return n.split("\\\\").join(sf).split("\\{").join(af).split("\\}").join(Ks).split("\\,").join(cf).split("\\.").join(uf)}function ZC(n){return n.split(sf).join("\\").split(af).join("{").split(Ks).join("}").split(cf).join(",").split(uf).join(".")}function lf(n){if(!n)return[""];var e=[],t=of("{","}",n);if(!t)return n.split(",");var i=t.pre,r=t.body,o=t.post,s=i.split(",");s[s.length-1]+="{"+r+"}";var c=lf(o);return o.length&&(s[s.length-1]+=c.shift(),s.push.apply(s,c)),e.push.apply(e,s),e}function eR(n){return n?(n.substr(0,2)==="{}"&&(n="\\{\\}"+n.substr(2)),Qn(JC(n),!0).map(ZC)):[]}function tR(n){return"{"+n+"}"}function nR(n){return/^-?0\d/.test(n)}function iR(n,e){return n<=e}function rR(n,e){return n>=e}function Qn(n,e){var t=[],i=of("{","}",n);if(!i||/\$$/.test(i.pre))return[n];var r=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),o=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),s=r||o,c=i.body.indexOf(",")>=0;if(!s&&!c)return i.post.match(/,.*\}/)?(n=i.pre+"{"+i.body+Ks+i.post,Qn(n)):[n];var u;if(s)u=i.body.split(/\.\./);else if(u=lf(i.body),u.length===1&&(u=Qn(u[0],!1).map(tR),u.length===1)){var g=i.post.length?Qn(i.post,!1):[""];return g.map(function(ut){return i.pre+u[0]+ut})}var f=i.pre,g=i.post.length?Qn(i.post,!1):[""],y;if(s){var v=Ws(u[0]),R=Ws(u[1]),C=Math.max(u[0].length,u[1].length),q=u.length==3?Math.abs(Ws(u[2])):1,E=iR,F=R<v;F&&(q*=-1,E=rR);var x=u.some(nR);y=[];for(var N=v;E(N,R);N+=q){var L;if(o)L=String.fromCharCode(N),L==="\\"&&(L="");else if(L=String(N),x){var J=C-L.length;if(J>0){var Ie=new Array(J+1).join("0");N<0?L="-"+Ie+L.slice(1):L=Ie+L}}y.push(L)}}else y=YC(u,function(Ue){return Qn(Ue,!1)});for(var Z=0;Z<y.length;Z++)for(var Pe=0;Pe<g.length;Pe++){var xe=f+y[Z]+g[Pe];(!e||s||xe)&&t.push(xe)}return t}});var Or=T((HS,vf)=>{vf.exports=st;st.Minimatch=Ae;var Vi=function(){try{return require("path")}catch{}}()||{sep:"/"};st.sep=Vi.sep;var Gs=st.GLOBSTAR=Ae.GLOBSTAR={},oR=ff(),hf={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},zs="[^/]",Vs=zs+"*?",sR="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",aR="(?:(?!(?:\\/|^)\\.).)*?",pf=cR("().*{}+?[]^$\\!");function cR(n){return n.split("").reduce(function(e,t){return e[t]=!0,e},{})}var gf=/\/+/;st.filter=uR;function uR(n,e){return e=e||{},function(t,i,r){return st(t,n,e)}}function nn(n,e){e=e||{};var t={};return Object.keys(n).forEach(function(i){t[i]=n[i]}),Object.keys(e).forEach(function(i){t[i]=e[i]}),t}st.defaults=function(n){if(!n||typeof n!="object"||!Object.keys(n).length)return st;var e=st,t=function(r,o,s){return e(r,o,nn(n,s))};return t.Minimatch=function(r,o){return new e.Minimatch(r,nn(n,o))},t.Minimatch.defaults=function(r){return e.defaults(nn(n,r)).Minimatch},t.filter=function(r,o){return e.filter(r,nn(n,o))},t.defaults=function(r){return e.defaults(nn(n,r))},t.makeRe=function(r,o){return e.makeRe(r,nn(n,o))},t.braceExpand=function(r,o){return e.braceExpand(r,nn(n,o))},t.match=function(i,r,o){return e.match(i,r,nn(n,o))},t};Ae.defaults=function(n){return st.defaults(n).Minimatch};function st(n,e,t){return xr(e),t||(t={}),!t.nocomment&&e.charAt(0)==="#"?!1:new Ae(e,t).match(n)}function Ae(n,e){if(!(this instanceof Ae))return new Ae(n,e);xr(n),e||(e={}),n=n.trim(),!e.allowWindowsEscape&&Vi.sep!=="/"&&(n=n.split(Vi.sep).join("/")),this.options=e,this.set=[],this.pattern=n,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.make()}Ae.prototype.debug=function(){};Ae.prototype.make=lR;function lR(){var n=this.pattern,e=this.options;if(!e.nocomment&&n.charAt(0)==="#"){this.comment=!0;return}if(!n){this.empty=!0;return}this.parseNegate();var t=this.globSet=this.braceExpand();e.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,t),t=this.globParts=t.map(function(i){return i.split(gf)}),this.debug(this.pattern,t),t=t.map(function(i,r,o){return i.map(this.parse,this)},this),this.debug(this.pattern,t),t=t.filter(function(i){return i.indexOf(!1)===-1}),this.debug(this.pattern,t),this.set=t}Ae.prototype.parseNegate=dR;function dR(){var n=this.pattern,e=!1,t=this.options,i=0;if(!t.nonegate){for(var r=0,o=n.length;r<o&&n.charAt(r)==="!";r++)e=!e,i++;i&&(this.pattern=n.substr(i)),this.negate=e}}st.braceExpand=function(n,e){return mf(n,e)};Ae.prototype.braceExpand=mf;function mf(n,e){return e||(this instanceof Ae?e=this.options:e={}),n=typeof n>"u"?this.pattern:n,xr(n),e.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:oR(n)}var fR=1024*64,xr=function(n){if(typeof n!="string")throw new TypeError("invalid pattern");if(n.length>fR)throw new TypeError("pattern is too long")};Ae.prototype.parse=hR;var Fr={};function hR(n,e){xr(n);var t=this.options;if(n==="**")if(t.noglobstar)n="*";else return Gs;if(n==="")return"";var i="",r=!!t.nocase,o=!1,s=[],c=[],u,f=!1,g=-1,y=-1,v=n.charAt(0)==="."?"":t.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",R=this;function C(){if(u){switch(u){case"*":i+=Vs,r=!0;break;case"?":i+=zs,r=!0;break;default:i+="\\"+u;break}R.debug("clearStateChar %j %j",u,i),u=!1}}for(var q=0,E=n.length,F;q<E&&(F=n.charAt(q));q++){if(this.debug("%s	%s %s %j",n,q,i,F),o&&pf[F]){i+="\\"+F,o=!1;continue}switch(F){case"/":return!1;case"\\":C(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",n,q,i,F),f){this.debug("  in class"),F==="!"&&q===y+1&&(F="^"),i+=F;continue}R.debug("call clearStateChar %j",u),C(),u=F,t.noext&&C();continue;case"(":if(f){i+="(";continue}if(!u){i+="\\(";continue}s.push({type:u,start:q-1,reStart:i.length,open:hf[u].open,close:hf[u].close}),i+=u==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",u,i),u=!1;continue;case")":if(f||!s.length){i+="\\)";continue}C(),r=!0;var x=s.pop();i+=x.close,x.type==="!"&&c.push(x),x.reEnd=i.length;continue;case"|":if(f||!s.length||o){i+="\\|",o=!1;continue}C(),i+="|";continue;case"[":if(C(),f){i+="\\"+F;continue}f=!0,y=q,g=i.length,i+=F;continue;case"]":if(q===y+1||!f){i+="\\"+F,o=!1;continue}var N=n.substring(y+1,q);try{RegExp("["+N+"]")}catch{var L=this.parse(N,Fr);i=i.substr(0,g)+"\\["+L[0]+"\\]",r=r||L[1],f=!1;continue}r=!0,f=!1,i+=F;continue;default:C(),o?o=!1:pf[F]&&!(F==="^"&&f)&&(i+="\\"),i+=F}}for(f&&(N=n.substr(y+1),L=this.parse(N,Fr),i=i.substr(0,g)+"\\["+L[0],r=r||L[1]),x=s.pop();x;x=s.pop()){var J=i.slice(x.reStart+x.open.length);this.debug("setting tail",i,x),J=J.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(xt,Ot,ke){return ke||(ke="\\"),Ot+Ot+ke+"|"}),this.debug(`tail=%j
   %s`,J,J,x,i);var Ie=x.type==="*"?Vs:x.type==="?"?zs:"\\"+x.type;r=!0,i=i.slice(0,x.reStart)+Ie+"\\("+J}C(),o&&(i+="\\\\");var Z=!1;switch(i.charAt(0)){case"[":case".":case"(":Z=!0}for(var Pe=c.length-1;Pe>-1;Pe--){var xe=c[Pe],Ue=i.slice(0,xe.reStart),ut=i.slice(xe.reStart,xe.reEnd-8),Dt=i.slice(xe.reEnd-8,xe.reEnd),lt=i.slice(xe.reEnd);Dt+=lt;var it=Ue.split("(").length-1,We=lt;for(q=0;q<it;q++)We=We.replace(/\)[+*?]?/,"");lt=We;var Be="";lt===""&&e!==Fr&&(Be="$");var cn=Ue+ut+lt+Be+Dt;i=cn}if(i!==""&&r&&(i="(?=.)"+i),Z&&(i=v+i),e===Fr)return[i,r];if(!r)return gR(n);var Se=t.nocase?"i":"";try{var Me=new RegExp("^"+i+"$",Se)}catch{return new RegExp("$.")}return Me._glob=n,Me._src=i,Me}st.makeRe=function(n,e){return new Ae(n,e||{}).makeRe()};Ae.prototype.makeRe=pR;function pR(){if(this.regexp||this.regexp===!1)return this.regexp;var n=this.set;if(!n.length)return this.regexp=!1,this.regexp;var e=this.options,t=e.noglobstar?Vs:e.dot?sR:aR,i=e.nocase?"i":"",r=n.map(function(o){return o.map(function(s){return s===Gs?t:typeof s=="string"?mR(s):s._src}).join("\\/")}).join("|");r="^(?:"+r+")$",this.negate&&(r="^(?!"+r+").*$");try{this.regexp=new RegExp(r,i)}catch{this.regexp=!1}return this.regexp}st.match=function(n,e,t){t=t||{};var i=new Ae(e,t);return n=n.filter(function(r){return i.match(r)}),i.options.nonull&&!n.length&&n.push(e),n};Ae.prototype.match=function(e,t){if(typeof t>"u"&&(t=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;var i=this.options;Vi.sep!=="/"&&(e=e.split(Vi.sep).join("/")),e=e.split(gf),this.debug(this.pattern,"split",e);var r=this.set;this.debug(this.pattern,"set",r);var o,s;for(s=e.length-1;s>=0&&(o=e[s],!o);s--);for(s=0;s<r.length;s++){var c=r[s],u=e;i.matchBase&&c.length===1&&(u=[o]);var f=this.matchOne(u,c,t);if(f)return i.flipNegate?!0:!this.negate}return i.flipNegate?!1:this.negate};Ae.prototype.matchOne=function(n,e,t){var i=this.options;this.debug("matchOne",{this:this,file:n,pattern:e}),this.debug("matchOne",n.length,e.length);for(var r=0,o=0,s=n.length,c=e.length;r<s&&o<c;r++,o++){this.debug("matchOne loop");var u=e[o],f=n[r];if(this.debug(e,u,f),u===!1)return!1;if(u===Gs){this.debug("GLOBSTAR",[e,u,f]);var g=r,y=o+1;if(y===c){for(this.debug("** at the end");r<s;r++)if(n[r]==="."||n[r]===".."||!i.dot&&n[r].charAt(0)===".")return!1;return!0}for(;g<s;){var v=n[g];if(this.debug(`
globstar while`,n,g,e,y,v),this.matchOne(n.slice(g),e.slice(y),t))return this.debug("globstar found match!",g,s,v),!0;if(v==="."||v===".."||!i.dot&&v.charAt(0)==="."){this.debug("dot detected!",n,g,e,y);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(t&&(this.debug(`
>>> no match, partial?`,n,g,e,y),g===s))}var R;if(typeof u=="string"?(R=f===u,this.debug("string match",u,f,R)):(R=f.match(u),this.debug("pattern match",u,f,R)),!R)return!1}if(r===s&&o===c)return!0;if(r===s)return t;if(o===c)return r===s-1&&n[r]==="";throw new Error("wtf?")};function gR(n){return n.replace(/\\(.)/g,"$1")}function mR(n){return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var na=T(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.DiagnosticFeature=jt.DiagnosticPullMode=jt.vsdiag=void 0;var vR=Or(),Y=require("vscode"),De=K(),yR=ve(),Xs=te();function Nr(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var kt;(function(n){let e;(function(t){t.full="full",t.unChanged="unChanged"})(e=n.DocumentDiagnosticReportKind||(n.DocumentDiagnosticReportKind={}))})(kt=jt.vsdiag||(jt.vsdiag={}));var Bs;(function(n){n.onType="onType",n.onSave="onSave"})(Bs=jt.DiagnosticPullMode||(jt.DiagnosticPullMode={}));var je;(function(n){n.active="open",n.reschedule="reschedule",n.outDated="drop"})(je||(je={}));var Qs=class{constructor(){this.open=new Set;let e=()=>{this.open.clear();for(let t of Y.window.tabGroups.all)for(let i of t.tabs){let r=i.input;r instanceof Y.TabInputText?this.open.add(r.uri.toString()):r instanceof Y.TabInputTextDiff&&this.open.add(r.modified.toString())}};e(),Y.window.tabGroups.onDidChangeTabs!==void 0?this.disposable=Y.window.tabGroups.onDidChangeTabs(e):this.disposable={dispose:()=>{}}}dispose(){this.disposable.dispose()}isActive(e){return e instanceof Y.Uri?Y.window.activeTextEditor?.document.uri===e:Y.window.activeTextEditor?.document===e}isVisible(e){let t=e instanceof Y.Uri?e:e.uri;return this.open.has(t.toString())}getTabResources(){let e=[];for(let t of Y.window.tabGroups.all)for(let i of t.tabs){let r=i.input;r instanceof Y.TabInputText?e.push(r.uri):r instanceof Y.TabInputTextDiff&&e.push(r.modified)}return e}},et;(function(n){n[n.document=1]="document",n[n.workspace=2]="workspace"})(et||(et={}));var Ys=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,t,i){let r=e===et.document?this.documentPullStates:this.workspacePullStates,[o,s,c]=t instanceof Y.Uri?[t.toString(),t,i]:[t.uri.toString(),t.uri,t.version],u=r.get(o);return u===void 0&&(u={document:s,pulledVersion:c,resultId:void 0},r.set(o,u)),u}update(e,t,i,r){let o=e===et.document?this.documentPullStates:this.workspacePullStates,[s,c,u,f]=t instanceof Y.Uri?[t.toString(),t,i,r]:[t.uri.toString(),t.uri,t.version,i],g=o.get(s);g===void 0?(g={document:c,pulledVersion:u,resultId:f},o.set(s,g)):(g.pulledVersion=u,g.resultId=f)}unTrack(e,t){let i=t instanceof Y.Uri?t.toString():t.uri.toString();(e===et.document?this.documentPullStates:this.workspacePullStates).delete(i)}tracks(e,t){let i=t instanceof Y.Uri?t.toString():t.uri.toString();return(e===et.document?this.documentPullStates:this.workspacePullStates).has(i)}getResultId(e,t){let i=t instanceof Y.Uri?t.toString():t.uri.toString();return(e===et.document?this.documentPullStates:this.workspacePullStates).get(i)?.resultId}getAllResultIds(){let e=[];for(let[t,i]of this.workspacePullStates)this.documentPullStates.has(t)&&(i=this.documentPullStates.get(t)),i.resultId!==void 0&&e.push({uri:t,value:i.resultId});return e}},Js=class{constructor(e,t,i){this.client=e,this.tabs=t,this.options=i,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new Y.EventEmitter,this.provider=this.createProvider(),this.diagnostics=Y.languages.createDiagnosticCollection(i.identifier),this.openRequests=new Map,this.documentStates=new Ys,this.workspaceErrorCounter=0}knows(e,t){return this.documentStates.tracks(e,t)}pull(e,t){if(this.isDisposed)return;let i=e instanceof Y.Uri?e:e.uri;this.pullAsync(e).then(()=>{t&&t()},r=>{this.client.error(`Document pull failed for text document ${i.toString()}`,r,!1)})}async pullAsync(e,t){if(this.isDisposed)return;let i=e instanceof Y.Uri,r=i?e:e.uri,o=r.toString();t=i?t:e.version;let s=this.openRequests.get(o),c=i?this.documentStates.track(et.document,e,t):this.documentStates.track(et.document,e);if(s===void 0){let u=new Y.CancellationTokenSource;this.openRequests.set(o,{state:je.active,document:e,version:t,tokenSource:u});let f,g;try{f=await this.provider.provideDiagnostics(e,c.resultId,u.token)??{kind:kt.DocumentDiagnosticReportKind.full,items:[]}}catch(y){if(y instanceof Xs.LSPCancellationError&&De.DiagnosticServerCancellationData.is(y.data)&&y.data.retriggerRequest===!1&&(g={state:je.outDated,document:e}),g===void 0&&y instanceof Y.CancellationError)g={state:je.reschedule,document:e};else throw y}if(g=g??this.openRequests.get(o),g===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${o}`),this.diagnostics.delete(r);return}if(this.openRequests.delete(o),!this.tabs.isVisible(e)){this.documentStates.unTrack(et.document,e);return}if(g.state===je.outDated)return;f!==void 0&&(f.kind===kt.DocumentDiagnosticReportKind.full&&this.diagnostics.set(r,f.items),c.pulledVersion=t,c.resultId=f.resultId),g.state===je.reschedule&&this.pull(e)}else s.state===je.active?(s.tokenSource.cancel(),this.openRequests.set(o,{state:je.reschedule,document:s.document})):s.state===je.outDated&&this.openRequests.set(o,{state:je.reschedule,document:s.document})}cleanupPull(e){let t=e instanceof Y.Uri?e:e.uri,i=t.toString(),r=this.openRequests.get(i);this.options.workspaceDiagnostics||this.options.interFileDependencies?r!==void 0?this.openRequests.set(i,{state:je.reschedule,document:e}):this.pull(e):(r!==void 0&&(r.state===je.active&&r.tokenSource.cancel(),this.openRequests.set(i,{state:je.outDated,document:e})),this.diagnostics.delete(t))}pullWorkspace(){this.isDisposed||this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=(0,De.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3)},e=>{!(e instanceof Xs.LSPCancellationError)&&!De.DiagnosticServerCancellationData.is(e.data)&&(this.client.error("Workspace diagnostic pull failed.",e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=(0,De.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;this.workspaceCancellation!==void 0&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new Y.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(t=>({uri:this.client.protocol2CodeConverter.asUri(t.uri),value:t.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,t=>{if(!(!t||this.isDisposed))for(let i of t.items)i.kind===kt.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(et.document,i.uri)||this.diagnostics.set(i.uri,i.items)),this.documentStates.update(et.workspace,i.uri,i.version??void 0,i.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(t,i,r)=>{let o=(c,u,f)=>{let g={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(c instanceof Y.Uri?c:c.uri)},previousResultId:u};return this.isDisposed===!0||!this.client.isRunning()?{kind:kt.DocumentDiagnosticReportKind.full,items:[]}:this.client.sendRequest(De.DocumentDiagnosticRequest.type,g,f).then(async y=>y==null||this.isDisposed||f.isCancellationRequested?{kind:kt.DocumentDiagnosticReportKind.full,items:[]}:y.kind===De.DocumentDiagnosticReportKind.Full?{kind:kt.DocumentDiagnosticReportKind.full,resultId:y.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(y.items,f)}:{kind:kt.DocumentDiagnosticReportKind.unChanged,resultId:y.resultId},y=>this.client.handleFailedRequest(De.DocumentDiagnosticRequest.type,f,y,{kind:kt.DocumentDiagnosticReportKind.full,items:[]}))},s=this.client.middleware;return s.provideDiagnostics?s.provideDiagnostics(t,i,r,o):o(t,i,r)}};return this.options.workspaceDiagnostics&&(e.provideWorkspaceDiagnostics=(t,i,r)=>{let o=async f=>f.kind===De.DocumentDiagnosticReportKind.Full?{kind:kt.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(f.uri),resultId:f.resultId,version:f.version,items:await this.client.protocol2CodeConverter.asDiagnostics(f.items,i)}:{kind:kt.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(f.uri),resultId:f.resultId,version:f.version},s=f=>{let g=[];for(let y of f)g.push({uri:this.client.code2ProtocolConverter.asUri(y.uri),value:y.value});return g},c=(f,g)=>{let y=(0,yR.generateUuid)(),v=this.client.onProgress(De.WorkspaceDiagnosticRequest.partialResult,y,async C=>{if(C==null){r(null);return}let q={items:[]};for(let E of C.items)try{q.items.push(await o(E))}catch(F){this.client.error("Converting workspace diagnostics failed.",F)}r(q)}),R={identifier:this.options.identifier,previousResultIds:s(f),partialResultToken:y};return this.isDisposed===!0||!this.client.isRunning()?{items:[]}:this.client.sendRequest(De.WorkspaceDiagnosticRequest.type,R,g).then(async C=>{if(g.isCancellationRequested)return{items:[]};let q={items:[]};for(let E of C.items)q.items.push(await o(E));return v.dispose(),r(q),{items:[]}},C=>(v.dispose(),this.client.handleFailedRequest(De.DocumentDiagnosticRequest.type,g,C,{items:[]})))},u=this.client.middleware;return u.provideWorkspaceDiagnostics?u.provideWorkspaceDiagnostics(t,i,r,c):c(t,i,r)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[e,t]of this.openRequests)t.state===je.active&&t.tokenSource.cancel(),this.openRequests.set(e,{state:je.outDated,document:t.document});this.diagnostics.dispose()}},Zs=class{constructor(e){this.diagnosticRequestor=e,this.documents=new De.LinkedMap,this.isDisposed=!1}add(e){if(this.isDisposed===!0)return;let t=e instanceof Y.Uri?e.toString():e.uri.toString();this.documents.has(t)||(this.documents.set(t,e,De.Touch.Last),this.trigger())}remove(e){let t=e instanceof Y.Uri?e.toString():e.uri.toString();this.documents.has(t)&&(this.documents.delete(t),this.diagnosticRequestor.pull(e)),this.documents.size===0?this.stop():e===this.endDocument&&(this.endDocument=this.documents.last)}trigger(){if(this.isDisposed!==!0){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,De.RAL)().timer.setInterval(()=>{let e=this.documents.first;if(e!==void 0){let t=e instanceof Y.Uri?e.toString():e.uri.toString();this.diagnosticRequestor.pull(e),this.documents.set(t,e,De.Touch.Last),e===this.endDocument&&this.stop()}},200)}}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}},ea=class{constructor(e,t,i){let r=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},o=e.protocol2CodeConverter.asDocumentSelector(i.documentSelector),s=[],c=C=>{let q=i.documentSelector;if(r.match!==void 0)return r.match(q,C);for(let E of q)if(De.TextDocumentFilter.is(E)){if(typeof E=="string"||E.language!==void 0&&E.language!=="*"||E.scheme!==void 0&&E.scheme!=="*"&&E.scheme!==C.scheme)return!1;if(E.pattern!==void 0){let F=new vR.Minimatch(E.pattern,{noext:!0});if(!F.makeRe()||!F.match(C.fsPath))return!1}}return!0},u=C=>C instanceof Y.Uri?c(C):Y.languages.match(o,C)>0&&t.isVisible(C),f=C=>C instanceof Y.Uri?this.activeTextDocument?.uri.toString()===C.toString():this.activeTextDocument===C;this.diagnosticRequestor=new Js(e,t,i),this.backgroundScheduler=new Zs(this.diagnosticRequestor);let g=C=>{!u(C)||!i.interFileDependencies||f(C)||this.backgroundScheduler.add(C)};this.activeTextDocument=Y.window.activeTextEditor?.document,Y.window.onDidChangeActiveTextEditor(C=>{let q=this.activeTextDocument;this.activeTextDocument=C?.document,q!==void 0&&g(q),this.activeTextDocument!==void 0&&this.backgroundScheduler.remove(this.activeTextDocument)});let y=e.getFeature(De.DidOpenTextDocumentNotification.method);s.push(y.onNotificationSent(C=>{let q=C.original;u(q)&&this.diagnosticRequestor.pull(q,()=>{g(q)})}));let v=new Set;for(let C of Y.workspace.textDocuments)u(C)&&(this.diagnosticRequestor.pull(C,()=>{g(C)}),v.add(C.uri.toString()));if(r.onTabs===!0)for(let C of t.getTabResources())!v.has(C.toString())&&u(C)&&this.diagnosticRequestor.pull(C,()=>{g(C)});if(r.onChange===!0){let C=e.getFeature(De.DidChangeTextDocumentNotification.method);s.push(C.onNotificationSent(async q=>{let E=q.original.document;(r.filter===void 0||!r.filter(E,Bs.onType))&&this.diagnosticRequestor.knows(et.document,E)&&q.original.contentChanges.length>0&&this.diagnosticRequestor.pull(E,()=>{this.backgroundScheduler.trigger()})}))}if(r.onSave===!0){let C=e.getFeature(De.DidSaveTextDocumentNotification.method);s.push(C.onNotificationSent(q=>{let E=q.original;(r.filter===void 0||!r.filter(E,Bs.onSave))&&this.diagnosticRequestor.knows(et.document,E)&&this.diagnosticRequestor.pull(q.original,()=>{this.backgroundScheduler.trigger()})}))}let R=e.getFeature(De.DidCloseTextDocumentNotification.method);s.push(R.onNotificationSent(C=>{let q=C.original;this.diagnosticRequestor.cleanupPull(q),this.backgroundScheduler.remove(q)})),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(let C of Y.workspace.textDocuments)u(C)&&this.diagnosticRequestor.pull(C)}),i.workspaceDiagnostics===!0&&i.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"&&this.diagnosticRequestor.pullWorkspace(),this.disposable=Y.Disposable.from(...s,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}},ta=class extends Xs.TextDocumentLanguageFeature{constructor(e){super(e,De.DocumentDiagnosticRequest.type)}fillClientCapabilities(e){let t=Nr(Nr(e,"textDocument"),"diagnostic");t.dynamicRegistration=!0,t.relatedDocumentSupport=!1,Nr(Nr(e,"workspace"),"diagnostics").refreshSupport=!0}initialize(e,t){this._client.onRequest(De.DiagnosticRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeDiagnosticsEmitter.fire()});let[r,o]=this.getRegistration(t,e.diagnosticProvider);!r||!o||this.register({id:r,registerOptions:o})}dispose(){this.tabs!==void 0&&(this.tabs.dispose(),this.tabs=void 0),super.dispose()}registerLanguageProvider(e){this.tabs===void 0&&(this.tabs=new Qs);let t=new ea(this._client,this.tabs,e);return[t.disposable,t]}};jt.DiagnosticFeature=ta});var Rf=T(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.NotebookDocumentSyncFeature=void 0;var $e=require("vscode"),CR=Or(),zt=K(),RR=ve(),yf=ht();function Cf(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var Yn;(function(n){let e;(function(t){function i(v,R){return{version:v.version,uri:R.asUri(v.uri)}}t.asVersionedNotebookDocumentIdentifier=i;function r(v,R,C){let q=zt.NotebookDocument.create(C.asUri(v.uri),v.notebookType,v.version,o(R,C));return Object.keys(v.metadata).length>0&&(q.metadata=s(v.metadata)),q}t.asNotebookDocument=r;function o(v,R){return v.map(C=>c(C,R))}t.asNotebookCells=o;function s(v){return f(new Set,v)}t.asMetadata=s;function c(v,R){let C=zt.NotebookCell.create(u(v.kind),R.asUri(v.document.uri));return Object.keys(v.metadata).length>0&&(C.metadata=s(v.metadata)),v.executionSummary!==void 0&&yf.number(v.executionSummary.executionOrder)&&yf.boolean(v.executionSummary.success)&&(C.executionSummary={executionOrder:v.executionSummary.executionOrder,success:v.executionSummary.success}),C}t.asNotebookCell=c;function u(v){switch(v){case $e.NotebookCellKind.Markup:return zt.NotebookCellKind.Markup;case $e.NotebookCellKind.Code:return zt.NotebookCellKind.Code}}function f(v,R){if(v.has(R))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(R)){let C=[];for(let q of R)if(q!==null&&typeof q=="object"||Array.isArray(q))C.push(f(v,q));else{if(q instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");C.push(q)}return C}else{let C=Object.keys(R),q=Object.create(null);for(let E of C){let F=R[E];if(F!==null&&typeof F=="object"||Array.isArray(F))q[E]=f(v,F);else{if(F instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");q[E]=F}}return q}}function g(v,R){let C=R.asChangeTextDocumentParams(v);return{document:C.textDocument,changes:C.contentChanges}}t.asTextContentChange=g;function y(v,R){let C=Object.create(null);if(v.metadata&&(C.metadata=n.c2p.asMetadata(v.metadata)),v.cells!==void 0){let q=Object.create(null),E=v.cells;E.structure&&(q.structure={array:{start:E.structure.array.start,deleteCount:E.structure.array.deleteCount,cells:E.structure.array.cells!==void 0?E.structure.array.cells.map(F=>n.c2p.asNotebookCell(F,R)):void 0},didOpen:E.structure.didOpen!==void 0?E.structure.didOpen.map(F=>R.asOpenTextDocumentParams(F.document).textDocument):void 0,didClose:E.structure.didClose!==void 0?E.structure.didClose.map(F=>R.asCloseTextDocumentParams(F.document).textDocument):void 0}),E.data!==void 0&&(q.data=E.data.map(F=>n.c2p.asNotebookCell(F,R))),E.textContent!==void 0&&(q.textContent=E.textContent.map(F=>n.c2p.asTextContentChange(F,R))),Object.keys(q).length>0&&(C.cells=q)}return C}t.asNotebookDocumentChangeEvent=y})(e=n.c2p||(n.c2p={}))})(Yn||(Yn={}));var ia;(function(n){function e(c,u,f){let g=c.length,y=u.length,v=0;for(;v<y&&v<g&&t(c[v],u[v],f);)v++;if(v<y&&v<g){let R=g-1,C=y-1;for(;R>=0&&C>=0&&t(c[R],u[C],f);)R--,C--;let q=R+1-v,E=v===C+1?void 0:u.slice(v,C+1);return E!==void 0?{start:v,deleteCount:q,cells:E}:{start:v,deleteCount:q}}else return v<y?{start:v,deleteCount:0,cells:u.slice(v)}:v<g?{start:v,deleteCount:g-v}:void 0}n.computeDiff=e;function t(c,u,f=!0){return c.kind!==u.kind||c.document.uri.toString()!==u.document.uri.toString()||c.document.languageId!==u.document.languageId||!i(c.executionSummary,u.executionSummary)?!1:!f||f&&o(c.metadata,u.metadata)}function i(c,u){return c===u?!0:c===void 0||u===void 0?!1:c.executionOrder===u.executionOrder&&c.success===u.success&&r(c.timing,u.timing)}function r(c,u){return c===u?!0:c===void 0||u===void 0?!1:c.startTime===u.startTime&&c.endTime===u.endTime}function o(c,u){if(c===u)return!0;if(c==null||u===null||u===void 0||typeof c!=typeof u||typeof c!="object")return!1;let f=Array.isArray(c),g=Array.isArray(u);if(f!==g)return!1;if(f&&g){if(c.length!==u.length)return!1;for(let y=0;y<c.length;y++)if(!o(c[y],u[y]))return!1}if(s(c)&&s(u)){let y=Object.keys(c),v=Object.keys(u);if(y.length!==v.length||(y.sort(),v.sort(),!o(y,v)))return!1;for(let R=0;R<y.length;R++){let C=y[R];if(!o(c[C],u[C]))return!1}return!0}return!1}function s(c){return c!==null&&typeof c=="object"}n.isObjectLiteral=s})(ia||(ia={}));var ra;(function(n){function e(t,i){if(typeof t=="string")return t==="*"||i.notebookType===t;if(t.notebookType!==void 0&&t.notebookType!=="*"&&i.notebookType!==t.notebookType)return!1;let r=i.uri;if(t.scheme!==void 0&&t.scheme!=="*"&&r.scheme!==t.scheme)return!1;if(t.pattern!==void 0){let o=new CR.Minimatch(t.pattern,{noext:!0});if(!o.makeRe()||!o.match(r.fsPath))return!1}return!0}n.matchNotebook=e})(ra||(ra={}));var Lr;(function(n){function e(i){let r=i.notebookSelector,o=[];for(let s of r){let c=(typeof s.notebook=="string"?s.notebook:s.notebook?.notebookType)??"*",u=typeof s.notebook=="string"?void 0:s.notebook?.scheme,f=typeof s.notebook=="string"?void 0:s.notebook?.pattern;if(s.cells!==void 0)for(let g of s.cells)o.push(t(c,u,f,g.language));else o.push(t(c,u,f,void 0))}return o}n.asDocumentSelector=e;function t(i,r,o,s){return r===void 0&&o===void 0?{notebook:i,language:s}:{notebook:{notebookType:i,scheme:r,pattern:o},language:s}}})(Lr||(Lr={}));var Ar;(function(n){function e(t){return{cells:t,uris:new Set(t.map(i=>i.document.uri.toString()))}}n.create=e})(Ar||(Ar={}));var Jn=class{constructor(e,t){this.client=e,this.options=t,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=e.protocol2CodeConverter.asDocumentSelector(Lr.asDocumentSelector(t)),$e.workspace.onDidOpenNotebookDocument(i=>{this.notebookDidOpen.add(i.uri.toString()),this.didOpen(i)},void 0,this.disposables);for(let i of $e.workspace.notebookDocuments)this.notebookDidOpen.add(i.uri.toString()),this.didOpen(i);$e.workspace.onDidChangeNotebookDocument(i=>this.didChangeNotebookDocument(i),void 0,this.disposables),this.options.save===!0&&$e.workspace.onDidSaveNotebookDocument(i=>this.didSave(i),void 0,this.disposables),$e.workspace.onDidCloseNotebookDocument(i=>{this.didClose(i),this.notebookDidOpen.delete(i.uri.toString())},void 0,this.disposables)}getState(){for(let e of $e.workspace.notebookDocuments)if(this.getMatchingCells(e)!==void 0)return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(e){return $e.languages.match(this.selector,e)>0}didOpenNotebookCellTextDocument(e,t){if($e.languages.match(this.selector,t.document)===0||!this.notebookDidOpen.has(e.uri.toString()))return;let i=this.notebookSyncInfo.get(e.uri.toString()),r=this.cellMatches(e,t);if(i!==void 0){let o=i.uris.has(t.document.uri.toString());if(r&&o||!r&&!o)return;if(r){let s=this.getMatchingCells(e);if(s!==void 0){let c=this.asNotebookDocumentChangeEvent(e,void 0,i,s);c!==void 0&&this.doSendChange(c,s).catch(()=>{})}}}else r&&this.doSendOpen(e,[t]).catch(()=>{})}didChangeNotebookCellTextDocument(e,t){$e.languages.match(this.selector,t.document)!==0&&this.doSendChange({notebook:e,cells:{textContent:[t]}},void 0).catch(()=>{})}didCloseNotebookCellTextDocument(e,t){let i=this.notebookSyncInfo.get(e.uri.toString());if(i===void 0)return;let r=t.document.uri,o=i.cells.findIndex(s=>s.document.uri.toString()===r.toString());if(o!==-1)if(o===0&&i.cells.length===1)this.doSendClose(e,i.cells).catch(()=>{});else{let s=i.cells.slice(),c=s.splice(o,1);this.doSendChange({notebook:e,cells:{structure:{array:{start:o,deleteCount:1},didClose:c}}},s).catch(()=>{})}}dispose(){for(let e of this.disposables)e.dispose()}didOpen(e,t=this.getMatchingCells(e),i=this.notebookSyncInfo.get(e.uri.toString())){if(i!==void 0)if(t!==void 0){let r=this.asNotebookDocumentChangeEvent(e,void 0,i,t);r!==void 0&&this.doSendChange(r,t).catch(()=>{})}else this.doSendClose(e,[]).catch(()=>{});else{if(t===void 0)return;this.doSendOpen(e,t).catch(()=>{})}}didChangeNotebookDocument(e){let t=e.notebook,i=this.notebookSyncInfo.get(t.uri.toString());if(i===void 0){if(e.contentChanges.length===0)return;let r=this.getMatchingCells(t);if(r===void 0)return;this.didOpen(t,r,i)}else{let r=this.getMatchingCells(t);if(r===void 0){this.didClose(t,i);return}let o=this.asNotebookDocumentChangeEvent(e.notebook,e,i,r);o!==void 0&&this.doSendChange(o,r).catch(()=>{})}}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&&this.doSendSave(e).catch(()=>{})}didClose(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(t===void 0)return;let i=e.getCells().filter(r=>t.uris.has(r.document.uri.toString()));this.doSendClose(e,i).catch(()=>{})}async sendDidOpenNotebookDocument(e){let t=this.getMatchingCells(e);if(t!==void 0)return this.doSendOpen(e,t)}async doSendOpen(e,t){let i=async(o,s)=>{let c=Yn.c2p.asNotebookDocument(o,s,this.client.code2ProtocolConverter),u=s.map(f=>this.client.code2ProtocolConverter.asTextDocumentItem(f.document));try{await this.client.sendNotification(zt.DidOpenNotebookDocumentNotification.type,{notebookDocument:c,cellTextDocuments:u})}catch(f){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",f),f}},r=this.client.middleware?.notebooks;return this.notebookSyncInfo.set(e.uri.toString(),Ar.create(t)),r?.didOpen!==void 0?r.didOpen(e,t,i):i(e,t)}async sendDidChangeNotebookDocument(e){return this.doSendChange(e,void 0)}async doSendChange(e,t=this.getMatchingCells(e.notebook)){let i=async o=>{try{await this.client.sendNotification(zt.DidChangeNotebookDocumentNotification.type,{notebookDocument:Yn.c2p.asVersionedNotebookDocumentIdentifier(o.notebook,this.client.code2ProtocolConverter),change:Yn.c2p.asNotebookDocumentChangeEvent(o,this.client.code2ProtocolConverter)})}catch(s){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",s),s}},r=this.client.middleware?.notebooks;return e.cells?.structure!==void 0&&this.notebookSyncInfo.set(e.notebook.uri.toString(),Ar.create(t??[])),r?.didChange!==void 0?r?.didChange(e,i):i(e)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){let t=async r=>{try{await this.client.sendNotification(zt.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(r.uri)}})}catch(o){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",o),o}},i=this.client.middleware?.notebooks;return i?.didSave!==void 0?i.didSave(e,t):t(e)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,t){let i=async(o,s)=>{try{await this.client.sendNotification(zt.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(o.uri)},cellTextDocuments:s.map(c=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(c.document))})}catch(c){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",c),c}},r=this.client.middleware?.notebooks;return this.notebookSyncInfo.delete(e.uri.toString()),r?.didClose!==void 0?r.didClose(e,t,i):i(e,t)}asNotebookDocumentChangeEvent(e,t,i,r){if(t!==void 0&&t.notebook!==e)throw new Error("Notebook must be identical");let o={notebook:e};t?.metadata!==void 0&&(o.metadata=Yn.c2p.asMetadata(t.metadata));let s;if(t?.cellChanges!==void 0&&t.cellChanges.length>0){let c=[];s=new Set(r.map(u=>u.document.uri.toString()));for(let u of t.cellChanges)s.has(u.cell.document.uri.toString())&&(u.executionSummary!==void 0||u.metadata!==void 0)&&c.push(u.cell);c.length>0&&(o.cells=o.cells??{},o.cells.data=c)}if((t?.contentChanges!==void 0&&t.contentChanges.length>0||t===void 0)&&i!==void 0&&r!==void 0){let c=i.cells,u=r,f=ia.computeDiff(c,u,!1),g,y;if(f!==void 0){g=f.cells===void 0?new Map:new Map(f.cells.map(C=>[C.document.uri.toString(),C])),y=f.deleteCount===0?new Map:new Map(c.slice(f.start,f.start+f.deleteCount).map(C=>[C.document.uri.toString(),C]));for(let C of Array.from(y.keys()))g.has(C)&&(y.delete(C),g.delete(C));o.cells=o.cells??{};let v=[],R=[];if(g.size>0||y.size>0){for(let C of g.values())v.push(C);for(let C of y.values())R.push(C)}o.cells.structure={array:f,didOpen:v,didClose:R}}}return Object.keys(o).length>1?o:void 0}getMatchingCells(e,t=e.getCells()){if(this.options.notebookSelector!==void 0){for(let i of this.options.notebookSelector)if(i.notebook===void 0){if(i.cells===void 0)return;let r=this.filterCells(e,t,i.cells);return r.length===0?void 0:r}else if(ra.matchNotebook(i.notebook,e))return i.cells===void 0?t:this.filterCells(e,t,i.cells)}}cellMatches(e,t){let i=this.getMatchingCells(e,[t]);return i!==void 0&&i[0]===t}filterCells(e,t,i){let r=t.filter(o=>{let s=o.document.languageId;return i.some(c=>c.language==="*"||s===c.language)});return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells=="function"?this.client.clientOptions.notebookDocumentOptions.filterCells(e,t):r}},Mr=class n{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=zt.NotebookDocumentSyncRegistrationType.type,$e.workspace.onDidOpenTextDocument(t=>{if(t.uri.scheme!==n.CellScheme)return;let[i,r]=this.findNotebookDocumentAndCell(t);if(!(i===void 0||r===void 0))for(let o of this.registrations.values())o instanceof Jn&&o.didOpenNotebookCellTextDocument(i,r)}),$e.workspace.onDidChangeTextDocument(t=>{if(t.contentChanges.length===0)return;let i=t.document;if(i.uri.scheme!==n.CellScheme)return;let[r]=this.findNotebookDocumentAndCell(i);if(r!==void 0)for(let o of this.registrations.values())o instanceof Jn&&o.didChangeNotebookCellTextDocument(r,t)}),$e.workspace.onDidCloseTextDocument(t=>{if(t.uri.scheme!==n.CellScheme)return;let[i,r]=this.findNotebookDocumentAndCell(t);if(!(i===void 0||r===void 0))for(let o of this.registrations.values())o instanceof Jn&&o.didCloseNotebookCellTextDocument(i,r)})}getState(){if(this.registrations.size===0)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(let e of this.registrations.values()){let t=e.getState();if(t.kind==="document"&&t.registrations===!0&&t.matches===!0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(e){let t=Cf(Cf(e,"notebookDocument"),"synchronization");t.dynamicRegistration=!0,t.executionSummarySupport=!0}preInitialize(e){let t=e.notebookDocumentSync;t!==void 0&&(this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(Lr.asDocumentSelector(t)))}initialize(e){let t=e.notebookDocumentSync;if(t===void 0)return;let i=t.id??RR.generateUuid();this.register({id:i,registerOptions:t})}register(e){let t=new Jn(this.client,e.registerOptions);this.registrations.set(e.id,t)}unregister(e){let t=this.registrations.get(e);t&&t.dispose()}dispose(){for(let e of this.registrations.values())e.dispose();this.registrations.clear()}handles(e){if(e.uri.scheme!==n.CellScheme)return!1;if(this.dedicatedChannel!==void 0&&$e.languages.match(this.dedicatedChannel,e)>0)return!0;for(let t of this.registrations.values())if(t.handles(e))return!0;return!1}getProvider(e){for(let t of this.registrations.values())if(t.handles(e.document))return t}findNotebookDocumentAndCell(e){let t=e.uri.toString();for(let i of $e.workspace.notebookDocuments)for(let r of i.getCells())if(r.document.uri.toString()===t)return[i,r];return[void 0,void 0]}};Hr.NotebookDocumentSyncFeature=Mr;Mr.CellScheme="vscode-notebook-cell"});var _f=T(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.SyncConfigurationFeature=rn.toJSONObject=rn.ConfigurationFeature=void 0;var Zn=require("vscode"),Gi=K(),DR=ht(),_R=ve(),Df=te(),oa=class{constructor(e){this._client=e}getState(){return{kind:"static"}}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(Gi.ConfigurationRequest.type,(t,i)=>{let r=s=>{let c=[];for(let u of s.items){let f=u.scopeUri!==void 0&&u.scopeUri!==null?this._client.protocol2CodeConverter.asUri(u.scopeUri):void 0;c.push(this.getConfiguration(f,u.section!==null?u.section:void 0))}return c},o=e.middleware.workspace;return o&&o.configuration?o.configuration(t,i,r):r(t,i)})}getConfiguration(e,t){let i=null;if(t){let r=t.lastIndexOf(".");if(r===-1)i=wn(Zn.workspace.getConfiguration(void 0,e).get(t));else{let o=Zn.workspace.getConfiguration(t.substr(0,r),e);o&&(i=wn(o.get(t.substr(r+1))))}}else{let r=Zn.workspace.getConfiguration(void 0,e);i={};for(let o of Object.keys(r))r.has(o)&&(i[o]=wn(r.get(o)))}return i===void 0&&(i=null),i}dispose(){}};rn.ConfigurationFeature=oa;function wn(n){if(n){if(Array.isArray(n))return n.map(wn);if(typeof n=="object"){let e=Object.create(null);for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=wn(n[t]));return e}}return n}rn.toJSONObject=wn;var sa=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return Gi.DidChangeConfigurationNotification.type}fillClientCapabilities(e){(0,Df.ensure)((0,Df.ensure)(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize?.configurationSection;e!==void 0&&this.register({id:_R.generateUuid(),registerOptions:{section:e}})}register(e){let t=Zn.workspace.onDidChangeConfiguration(i=>{this.onDidChangeConfiguration(e.registerOptions.section,i)});this._listeners.set(e.id,t),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,t){let i;if(DR.string(e)?i=[e]:i=e,i!==void 0&&t!==void 0&&!i.some(c=>t.affectsConfiguration(c)))return;let r=async s=>s===void 0?this._client.sendNotification(Gi.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification(Gi.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(s)}),o=this._client.middleware.workspace?.didChangeConfiguration;(o?o(i,r):r(i)).catch(s=>{this._client.error(`Sending notification ${Gi.DidChangeConfigurationNotification.type.method} failed`,s)})}extractSettingsInformation(e){function t(o,s){let c=o;for(let u=0;u<s.length-1;u++){let f=c[s[u]];f||(f=Object.create(null),c[s[u]]=f),c=f}return c}let i=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,r=Object.create(null);for(let o=0;o<e.length;o++){let s=e[o],c=s.indexOf("."),u=null;if(c>=0?u=Zn.workspace.getConfiguration(s.substr(0,c),i).get(s.substr(c+1)):u=Zn.workspace.getConfiguration(void 0,i).get(s),u){let f=e[o].split(".");t(r,f)[f[f.length-1]]=wn(u)}}return r}};rn.SyncConfigurationFeature=sa});var Sf=T(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.DidSaveTextDocumentFeature=tt.WillSaveWaitUntilFeature=tt.WillSaveFeature=tt.DidChangeTextDocumentFeature=tt.DidCloseTextDocumentFeature=tt.DidOpenTextDocumentFeature=void 0;var yt=require("vscode"),Ee=K(),ye=te(),SR=Ui(),ei=ve(),aa=class extends ye.TextDocumentEventFeature{constructor(e,t){super(e,yt.workspace.onDidOpenTextDocument,Ee.DidOpenTextDocumentNotification.type,()=>e.middleware.didOpen,i=>e.code2ProtocolConverter.asOpenTextDocumentParams(i),i=>i,ye.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){(0,ye.ensure)((0,ye.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let i=e.resolvedTextDocumentSync;t&&i&&i.openClose&&this.register({id:ei.generateUuid(),registerOptions:{documentSelector:t}})}get registrationType(){return Ee.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let t=this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector);yt.workspace.textDocuments.forEach(i=>{let r=i.uri.toString();if(!this._syncedDocuments.has(r)&&yt.languages.match(t,i)>0&&!this._client.hasDedicatedTextSynchronizationFeature(i)){let o=this._client.middleware,s=c=>this._client.sendNotification(this._type,this._createParams(c));(o.didOpen?o.didOpen(i,s):s(i)).catch(c=>{this._client.error(`Sending document notification ${this._type.method} failed`,c)}),this._syncedDocuments.set(r,i)}})}notificationSent(e,t,i){super.notificationSent(e,t,i),this._syncedDocuments.set(e.uri.toString(),e)}};tt.DidOpenTextDocumentFeature=aa;var ca=class extends ye.TextDocumentEventFeature{constructor(e,t){super(e,yt.workspace.onDidCloseTextDocument,Ee.DidCloseTextDocumentNotification.type,()=>e.middleware.didClose,i=>e.code2ProtocolConverter.asCloseTextDocumentParams(i),i=>i,ye.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t}get registrationType(){return Ee.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){(0,ye.ensure)((0,ye.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let i=e.resolvedTextDocumentSync;t&&i&&i.openClose&&this.register({id:ei.generateUuid(),registerOptions:{documentSelector:t}})}notificationSent(e,t,i){super.notificationSent(e,t,i),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let t=this._selectors.get(e);super.unregister(e);let i=this._selectors.values();this._syncedDocuments.forEach(r=>{if(yt.languages.match(t,r)>0&&!this._selectorFilter(i,r)&&!this._client.hasDedicatedTextSynchronizationFeature(r)){let o=this._client.middleware,s=c=>this._client.sendNotification(this._type,this._createParams(c));this._syncedDocuments.delete(r.uri.toString()),(o.didClose?o.didClose(r,s):s(r)).catch(c=>{this._client.error(`Sending document notification ${this._type.method} failed`,c)})}})}};tt.DidCloseTextDocumentFeature=ca;var ua=class extends ye.DynamicDocumentFeature{constructor(e){super(e),this._forcingDelivery=!1,this._changeData=new Map,this._onNotificationSent=new yt.EventEmitter}get registrationType(){return Ee.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){(0,ye.ensure)((0,ye.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let i=e.resolvedTextDocumentSync;t&&i&&i.change!==void 0&&i.change!==Ee.TextDocumentSyncKind.None&&this.register({id:ei.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:i.change})})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=yt.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{syncKind:e.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)}))}*getDocumentSelectors(){for(let e of this._changeData.values())yield e.documentSelector}async callback(e){if(e.contentChanges.length===0)return;let t=[];for(let i of this._changeData.values())if(yt.languages.match(i.documentSelector,e.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let r=this._client.middleware;if(i.syncKind===Ee.TextDocumentSyncKind.Incremental){let o=async s=>{let c=this._client.code2ProtocolConverter.asChangeTextDocumentParams(s);await this._client.sendNotification(Ee.DidChangeTextDocumentNotification.type,c),this.notificationSent(s,Ee.DidChangeTextDocumentNotification.type,c)};t.push(r.didChange?r.didChange(e,s=>o(s)):o(e))}else if(i.syncKind===Ee.TextDocumentSyncKind.Full){let o=async s=>{let c=async u=>{let f=this._client.code2ProtocolConverter.asChangeTextDocumentParams(u.document);await this._client.sendNotification(Ee.DidChangeTextDocumentNotification.type,f),this.notificationSent(u,Ee.DidChangeTextDocumentNotification.type,f)};return this._changeDelayer?(this._changeDelayer.uri!==s.document.uri.toString()&&(await this.forceDelivery(),this._changeDelayer.uri=s.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>c(s))):(this._changeDelayer={uri:s.document.uri.toString(),delayer:new SR.Delayer(200)},this._changeDelayer.delayer.trigger(()=>c(s),-1))};t.push(r.didChange?r.didChange(e,s=>o(s)):o(e))}}return Promise.all(t).then(void 0,i=>{throw this._client.error(`Sending document notification ${Ee.DidChangeTextDocumentNotification.type.method} failed`,i),i})}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,t,i){this._onNotificationSent.fire({original:e,type:t,params:i})}unregister(e){this._changeData.delete(e),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer!==void 0&&this._changeDelayer.delayer.cancel(),this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}async forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{return this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(let t of this._changeData.values())if(yt.languages.match(t.documentSelector,e)>0)return{send:i=>this.callback(i)}}};tt.DidChangeTextDocumentFeature=ua;var la=class extends ye.TextDocumentEventFeature{constructor(e){super(e,yt.workspace.onWillSaveTextDocument,Ee.WillSaveTextDocumentNotification.type,()=>e.middleware.willSave,t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),t=>t.document,(t,i)=>ye.TextDocumentEventFeature.textDocumentFilter(t,i.document))}get registrationType(){return Ee.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let t=(0,ye.ensure)((0,ye.ensure)(e,"textDocument"),"synchronization");t.willSave=!0}initialize(e,t){let i=e.resolvedTextDocumentSync;t&&i&&i.willSave&&this.register({id:ei.generateUuid(),registerOptions:{documentSelector:t}})}};tt.WillSaveFeature=la;var da=class extends ye.DynamicDocumentFeature{constructor(e){super(e),this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return Ee.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let t=(0,ye.ensure)((0,ye.ensure)(e,"textDocument"),"synchronization");t.willSaveWaitUntil=!0}initialize(e,t){let i=e.resolvedTextDocumentSync;t&&i&&i.willSaveWaitUntil&&this.register({id:ei.generateUuid(),registerOptions:{documentSelector:t}})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=yt.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}callback(e){if(ye.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),e.document)&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let t=this._client.middleware,i=r=>this._client.sendRequest(Ee.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(r)).then(async o=>{let s=await this._client.protocol2CodeConverter.asTextEdits(o);return s===void 0?[]:s});e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,i):i(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}};tt.WillSaveWaitUntilFeature=da;var fa=class extends ye.TextDocumentEventFeature{constructor(e){super(e,yt.workspace.onDidSaveTextDocument,Ee.DidSaveTextDocumentNotification.type,()=>e.middleware.didSave,t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),t=>t,ye.TextDocumentEventFeature.textDocumentFilter),this._includeText=!1}get registrationType(){return Ee.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,ye.ensure)((0,ye.ensure)(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){let i=e.resolvedTextDocumentSync;if(t&&i&&i.save){let r=typeof i.save=="boolean"?{includeText:!1}:{includeText:!!i.save.includeText};this.register({id:ei.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},r)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}};tt.DidSaveTextDocumentFeature=fa});var wf=T(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.CompletionItemFeature=void 0;var wR=require("vscode"),ee=K(),ha=te(),bR=ve(),TR=[ee.CompletionItemKind.Text,ee.CompletionItemKind.Method,ee.CompletionItemKind.Function,ee.CompletionItemKind.Constructor,ee.CompletionItemKind.Field,ee.CompletionItemKind.Variable,ee.CompletionItemKind.Class,ee.CompletionItemKind.Interface,ee.CompletionItemKind.Module,ee.CompletionItemKind.Property,ee.CompletionItemKind.Unit,ee.CompletionItemKind.Value,ee.CompletionItemKind.Enum,ee.CompletionItemKind.Keyword,ee.CompletionItemKind.Snippet,ee.CompletionItemKind.Color,ee.CompletionItemKind.File,ee.CompletionItemKind.Reference,ee.CompletionItemKind.Folder,ee.CompletionItemKind.EnumMember,ee.CompletionItemKind.Constant,ee.CompletionItemKind.Struct,ee.CompletionItemKind.Event,ee.CompletionItemKind.Operator,ee.CompletionItemKind.TypeParameter],pa=class extends ha.TextDocumentLanguageFeature{constructor(e){super(e,ee.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(e){let t=(0,ha.ensure)((0,ha.ensure)(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[ee.MarkupKind.Markdown,ee.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[ee.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[ee.InsertTextMode.asIs,ee.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},t.insertTextMode=ee.InsertTextMode.adjustIndentation,t.completionItemKind={valueSet:TR},t.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode"]}}initialize(e,t){let i=this.getRegistrationOptions(t,e.completionProvider);i&&this.register({id:bR.generateUuid(),registerOptions:i})}registerLanguageProvider(e,t){this.labelDetailsSupport.set(t,!!e.completionItem?.labelDetailsSupport);let i=e.triggerCharacters??[],r=e.allCommitCharacters,o=e.documentSelector,s={provideCompletionItems:(c,u,f,g)=>{let y=this._client,v=this._client.middleware,R=(C,q,E,F)=>y.sendRequest(ee.CompletionRequest.type,y.code2ProtocolConverter.asCompletionParams(C,q,E),F).then(x=>F.isCancellationRequested?null:y.protocol2CodeConverter.asCompletionResult(x,r,F),x=>y.handleFailedRequest(ee.CompletionRequest.type,F,x,null));return v.provideCompletionItem?v.provideCompletionItem(c,u,g,f,R):R(c,u,g,f)},resolveCompletionItem:e.resolveProvider?(c,u)=>{let f=this._client,g=this._client.middleware,y=(v,R)=>f.sendRequest(ee.CompletionResolveRequest.type,f.code2ProtocolConverter.asCompletionItem(v,!!this.labelDetailsSupport.get(t)),R).then(C=>R.isCancellationRequested?null:f.protocol2CodeConverter.asCompletionItem(C),C=>f.handleFailedRequest(ee.CompletionResolveRequest.type,R,C,v));return g.resolveCompletionItem?g.resolveCompletionItem(c,u,y):y(c,u)}:void 0};return[wR.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(o),s,...i),s]}};jr.CompletionItemFeature=pa});var bf=T($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.HoverFeature=void 0;var qR=require("vscode"),Xi=K(),ga=te(),PR=ve(),ma=class extends ga.TextDocumentLanguageFeature{constructor(e){super(e,Xi.HoverRequest.type)}fillClientCapabilities(e){let t=(0,ga.ensure)((0,ga.ensure)(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[Xi.MarkupKind.Markdown,Xi.MarkupKind.PlainText]}initialize(e,t){let i=this.getRegistrationOptions(t,e.hoverProvider);i&&this.register({id:PR.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,i={provideHover:(r,o,s)=>{let c=this._client,u=(g,y,v)=>c.sendRequest(Xi.HoverRequest.type,c.code2ProtocolConverter.asTextDocumentPositionParams(g,y),v).then(R=>v.isCancellationRequested?null:c.protocol2CodeConverter.asHover(R),R=>c.handleFailedRequest(Xi.HoverRequest.type,v,R,null)),f=c.middleware;return f.provideHover?f.provideHover(r,o,s,u):u(r,o,s)}};return[this.registerProvider(t,i),i]}registerProvider(e,t){return qR.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};$r.HoverFeature=ma});var Tf=T(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.DefinitionFeature=void 0;var ER=require("vscode"),va=K(),ya=te(),IR=ve(),Ca=class extends ya.TextDocumentLanguageFeature{constructor(e){super(e,va.DefinitionRequest.type)}fillClientCapabilities(e){let t=(0,ya.ensure)((0,ya.ensure)(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let i=this.getRegistrationOptions(t,e.definitionProvider);i&&this.register({id:IR.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,i={provideDefinition:(r,o,s)=>{let c=this._client,u=(g,y,v)=>c.sendRequest(va.DefinitionRequest.type,c.code2ProtocolConverter.asTextDocumentPositionParams(g,y),v).then(R=>v.isCancellationRequested?null:c.protocol2CodeConverter.asDefinitionResult(R,v),R=>c.handleFailedRequest(va.DefinitionRequest.type,v,R,null)),f=c.middleware;return f.provideDefinition?f.provideDefinition(r,o,s,u):u(r,o,s)}};return[this.registerProvider(t,i),i]}registerProvider(e,t){return ER.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Ur.DefinitionFeature=Ca});var Pf=T(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.SignatureHelpFeature=void 0;var qf=require("vscode"),Bi=K(),Ra=te(),kR=ve(),Da=class extends Ra.TextDocumentLanguageFeature{constructor(e){super(e,Bi.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=(0,Ra.ensure)((0,Ra.ensure)(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[Bi.MarkupKind.Markdown,Bi.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0},t.signatureInformation.activeParameterSupport=!0,t.contextSupport=!0}initialize(e,t){let i=this.getRegistrationOptions(t,e.signatureHelpProvider);i&&this.register({id:kR.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t={provideSignatureHelp:(i,r,o,s)=>{let c=this._client,u=(g,y,v,R)=>c.sendRequest(Bi.SignatureHelpRequest.type,c.code2ProtocolConverter.asSignatureHelpParams(g,y,v),R).then(C=>R.isCancellationRequested?null:c.protocol2CodeConverter.asSignatureHelp(C,R),C=>c.handleFailedRequest(Bi.SignatureHelpRequest.type,R,C,null)),f=c.middleware;return f.provideSignatureHelp?f.provideSignatureHelp(i,r,s,o,u):u(i,r,s,o)}};return[this.registerProvider(e,t),t]}registerProvider(e,t){let i=this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector);if(e.retriggerCharacters===void 0){let r=e.triggerCharacters||[];return qf.languages.registerSignatureHelpProvider(i,t,...r)}else{let r={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};return qf.languages.registerSignatureHelpProvider(i,t,r)}}};Wr.SignatureHelpFeature=Da});var Ef=T(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.DocumentHighlightFeature=void 0;var FR=require("vscode"),_a=K(),Sa=te(),xR=ve(),wa=class extends Sa.TextDocumentLanguageFeature{constructor(e){super(e,_a.DocumentHighlightRequest.type)}fillClientCapabilities(e){(0,Sa.ensure)((0,Sa.ensure)(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){let i=this.getRegistrationOptions(t,e.documentHighlightProvider);i&&this.register({id:xR.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,i={provideDocumentHighlights:(r,o,s)=>{let c=this._client,u=(g,y,v)=>c.sendRequest(_a.DocumentHighlightRequest.type,c.code2ProtocolConverter.asTextDocumentPositionParams(g,y),v).then(R=>v.isCancellationRequested?null:c.protocol2CodeConverter.asDocumentHighlights(R,v),R=>c.handleFailedRequest(_a.DocumentHighlightRequest.type,v,R,null)),f=c.middleware;return f.provideDocumentHighlights?f.provideDocumentHighlights(r,o,s,u):u(r,o,s)}};return[FR.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),i),i]}};Kr.DocumentHighlightFeature=wa});var qa=T($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.DocumentSymbolFeature=$t.SupportedSymbolTags=$t.SupportedSymbolKinds=void 0;var OR=require("vscode"),se=K(),ba=te(),NR=ve();$t.SupportedSymbolKinds=[se.SymbolKind.File,se.SymbolKind.Module,se.SymbolKind.Namespace,se.SymbolKind.Package,se.SymbolKind.Class,se.SymbolKind.Method,se.SymbolKind.Property,se.SymbolKind.Field,se.SymbolKind.Constructor,se.SymbolKind.Enum,se.SymbolKind.Interface,se.SymbolKind.Function,se.SymbolKind.Variable,se.SymbolKind.Constant,se.SymbolKind.String,se.SymbolKind.Number,se.SymbolKind.Boolean,se.SymbolKind.Array,se.SymbolKind.Object,se.SymbolKind.Key,se.SymbolKind.Null,se.SymbolKind.EnumMember,se.SymbolKind.Struct,se.SymbolKind.Event,se.SymbolKind.Operator,se.SymbolKind.TypeParameter];$t.SupportedSymbolTags=[se.SymbolTag.Deprecated];var Ta=class extends ba.TextDocumentLanguageFeature{constructor(e){super(e,se.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=(0,ba.ensure)((0,ba.ensure)(e,"textDocument"),"documentSymbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:$t.SupportedSymbolKinds},t.hierarchicalDocumentSymbolSupport=!0,t.tagSupport={valueSet:$t.SupportedSymbolTags},t.labelSupport=!0}initialize(e,t){let i=this.getRegistrationOptions(t,e.documentSymbolProvider);i&&this.register({id:NR.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,i={provideDocumentSymbols:(o,s)=>{let c=this._client,u=(g,y)=>c.sendRequest(se.DocumentSymbolRequest.type,c.code2ProtocolConverter.asDocumentSymbolParams(g),y).then(async v=>{if(y.isCancellationRequested||v===void 0||v===null)return null;if(v.length===0)return[];{let R=v[0];return se.DocumentSymbol.is(R)?await c.protocol2CodeConverter.asDocumentSymbols(v,y):await c.protocol2CodeConverter.asSymbolInformations(v,y)}},v=>c.handleFailedRequest(se.DocumentSymbolRequest.type,y,v,null)),f=c.middleware;return f.provideDocumentSymbols?f.provideDocumentSymbols(o,s,u):u(o,s)}},r=e.label!==void 0?{label:e.label}:void 0;return[OR.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),i,r),i]}};$t.DocumentSymbolFeature=Ta});var kf=T(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.WorkspaceSymbolFeature=void 0;var LR=require("vscode"),Qi=K(),Pa=te(),If=qa(),AR=ve(),Ea=class extends Pa.WorkspaceFeature{constructor(e){super(e,Qi.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=(0,Pa.ensure)((0,Pa.ensure)(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:If.SupportedSymbolKinds},t.tagSupport={valueSet:If.SupportedSymbolTags},t.resolveSupport={properties:["location.range"]}}initialize(e){e.workspaceSymbolProvider&&this.register({id:AR.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let t={provideWorkspaceSymbols:(i,r)=>{let o=this._client,s=(u,f)=>o.sendRequest(Qi.WorkspaceSymbolRequest.type,{query:u},f).then(g=>f.isCancellationRequested?null:o.protocol2CodeConverter.asSymbolInformations(g,f),g=>o.handleFailedRequest(Qi.WorkspaceSymbolRequest.type,f,g,null)),c=o.middleware;return c.provideWorkspaceSymbols?c.provideWorkspaceSymbols(i,r,s):s(i,r)},resolveWorkspaceSymbol:e.resolveProvider===!0?(i,r)=>{let o=this._client,s=(u,f)=>o.sendRequest(Qi.WorkspaceSymbolResolveRequest.type,o.code2ProtocolConverter.asWorkspaceSymbol(u),f).then(g=>f.isCancellationRequested?null:o.protocol2CodeConverter.asSymbolInformation(g),g=>o.handleFailedRequest(Qi.WorkspaceSymbolResolveRequest.type,f,g,null)),c=o.middleware;return c.resolveWorkspaceSymbol?c.resolveWorkspaceSymbol(i,r,s):s(i,r)}:void 0};return[LR.languages.registerWorkspaceSymbolProvider(t),t]}};zr.WorkspaceSymbolFeature=Ea});var Ff=T(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});Vr.ReferencesFeature=void 0;var MR=require("vscode"),Ia=K(),ka=te(),HR=ve(),Fa=class extends ka.TextDocumentLanguageFeature{constructor(e){super(e,Ia.ReferencesRequest.type)}fillClientCapabilities(e){(0,ka.ensure)((0,ka.ensure)(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){let i=this.getRegistrationOptions(t,e.referencesProvider);i&&this.register({id:HR.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,i={provideReferences:(r,o,s,c)=>{let u=this._client,f=(y,v,R,C)=>u.sendRequest(Ia.ReferencesRequest.type,u.code2ProtocolConverter.asReferenceParams(y,v,R),C).then(q=>C.isCancellationRequested?null:u.protocol2CodeConverter.asReferences(q,C),q=>u.handleFailedRequest(Ia.ReferencesRequest.type,C,q,null)),g=u.middleware;return g.provideReferences?g.provideReferences(r,o,s,c,f):f(r,o,s,c)}};return[this.registerProvider(t,i),i]}registerProvider(e,t){return MR.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Vr.ReferencesFeature=Fa});var xf=T(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.CodeActionFeature=void 0;var jR=require("vscode"),at=K(),$R=ve(),xa=te(),Oa=class extends xa.TextDocumentLanguageFeature{constructor(e){super(e,at.CodeActionRequest.type)}fillClientCapabilities(e){let t=(0,xa.ensure)((0,xa.ensure)(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.isPreferredSupport=!0,t.disabledSupport=!0,t.dataSupport=!0,t.resolveSupport={properties:["edit"]},t.codeActionLiteralSupport={codeActionKind:{valueSet:[at.CodeActionKind.Empty,at.CodeActionKind.QuickFix,at.CodeActionKind.Refactor,at.CodeActionKind.RefactorExtract,at.CodeActionKind.RefactorInline,at.CodeActionKind.RefactorRewrite,at.CodeActionKind.Source,at.CodeActionKind.SourceOrganizeImports]}},t.honorsChangeAnnotations=!1}initialize(e,t){let i=this.getRegistrationOptions(t,e.codeActionProvider);i&&this.register({id:$R.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,i={provideCodeActions:(r,o,s,c)=>{let u=this._client,f=async(y,v,R,C)=>{let q={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(y),range:u.code2ProtocolConverter.asRange(v),context:await u.code2ProtocolConverter.asCodeActionContext(R,C)};return u.sendRequest(at.CodeActionRequest.type,q,C).then(E=>C.isCancellationRequested||E===null||E===void 0?null:u.protocol2CodeConverter.asCodeActionResult(E,C),E=>u.handleFailedRequest(at.CodeActionRequest.type,C,E,null))},g=u.middleware;return g.provideCodeActions?g.provideCodeActions(r,o,s,c,f):f(r,o,s,c)},resolveCodeAction:e.resolveProvider?(r,o)=>{let s=this._client,c=this._client.middleware,u=async(f,g)=>s.sendRequest(at.CodeActionResolveRequest.type,await s.code2ProtocolConverter.asCodeAction(f,g),g).then(y=>g.isCancellationRequested?f:s.protocol2CodeConverter.asCodeAction(y,g),y=>s.handleFailedRequest(at.CodeActionResolveRequest.type,g,y,f));return c.resolveCodeAction?c.resolveCodeAction(r,o,u):u(r,o)}:void 0};return[jR.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),i,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),i]}};Gr.CodeActionFeature=Oa});var Nf=T(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.CodeLensFeature=void 0;var Of=require("vscode"),ti=K(),UR=ve(),Yi=te(),Na=class extends Yi.TextDocumentLanguageFeature{constructor(e){super(e,ti.CodeLensRequest.type)}fillClientCapabilities(e){(0,Yi.ensure)((0,Yi.ensure)(e,"textDocument"),"codeLens").dynamicRegistration=!0,(0,Yi.ensure)((0,Yi.ensure)(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,t){this._client.onRequest(ti.CodeLensRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeCodeLensEmitter.fire()});let r=this.getRegistrationOptions(t,e.codeLensProvider);r&&this.register({id:UR.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,i=new Of.EventEmitter,r={onDidChangeCodeLenses:i.event,provideCodeLenses:(o,s)=>{let c=this._client,u=(g,y)=>c.sendRequest(ti.CodeLensRequest.type,c.code2ProtocolConverter.asCodeLensParams(g),y).then(v=>y.isCancellationRequested?null:c.protocol2CodeConverter.asCodeLenses(v,y),v=>c.handleFailedRequest(ti.CodeLensRequest.type,y,v,null)),f=c.middleware;return f.provideCodeLenses?f.provideCodeLenses(o,s,u):u(o,s)},resolveCodeLens:e.resolveProvider?(o,s)=>{let c=this._client,u=(g,y)=>c.sendRequest(ti.CodeLensResolveRequest.type,c.code2ProtocolConverter.asCodeLens(g),y).then(v=>y.isCancellationRequested?g:c.protocol2CodeConverter.asCodeLens(v),v=>c.handleFailedRequest(ti.CodeLensResolveRequest.type,y,v,g)),f=c.middleware;return f.resolveCodeLens?f.resolveCodeLens(o,s,u):u(o,s)}:void 0};return[Of.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),{provider:r,onDidChangeCodeLensEmitter:i}]}};Xr.CodeLensFeature=Na});var Lf=T(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});on.DocumentOnTypeFormattingFeature=on.DocumentRangeFormattingFeature=on.DocumentFormattingFeature=void 0;var Br=require("vscode"),Vt=K(),Ha=ve(),Gt=te(),Ji;(function(n){function e(t){let i=Br.workspace.getConfiguration("files",t);return{trimTrailingWhitespace:i.get("trimTrailingWhitespace"),trimFinalNewlines:i.get("trimFinalNewlines"),insertFinalNewline:i.get("insertFinalNewline")}}n.fromConfiguration=e})(Ji||(Ji={}));var La=class extends Gt.TextDocumentLanguageFeature{constructor(e){super(e,Vt.DocumentFormattingRequest.type)}fillClientCapabilities(e){(0,Gt.ensure)((0,Gt.ensure)(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){let i=this.getRegistrationOptions(t,e.documentFormattingProvider);i&&this.register({id:Ha.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,i={provideDocumentFormattingEdits:(r,o,s)=>{let c=this._client,u=(g,y,v)=>{let R={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(g),options:c.code2ProtocolConverter.asFormattingOptions(y,Ji.fromConfiguration(g))};return c.sendRequest(Vt.DocumentFormattingRequest.type,R,v).then(C=>v.isCancellationRequested?null:c.protocol2CodeConverter.asTextEdits(C,v),C=>c.handleFailedRequest(Vt.DocumentFormattingRequest.type,v,C,null))},f=c.middleware;return f.provideDocumentFormattingEdits?f.provideDocumentFormattingEdits(r,o,s,u):u(r,o,s)}};return[Br.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),i),i]}};on.DocumentFormattingFeature=La;var Aa=class extends Gt.TextDocumentLanguageFeature{constructor(e){super(e,Vt.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){(0,Gt.ensure)((0,Gt.ensure)(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,t){let i=this.getRegistrationOptions(t,e.documentRangeFormattingProvider);i&&this.register({id:Ha.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,i={provideDocumentRangeFormattingEdits:(r,o,s,c)=>{let u=this._client,f=(y,v,R,C)=>{let q={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(y),range:u.code2ProtocolConverter.asRange(v),options:u.code2ProtocolConverter.asFormattingOptions(R,Ji.fromConfiguration(y))};return u.sendRequest(Vt.DocumentRangeFormattingRequest.type,q,C).then(E=>C.isCancellationRequested?null:u.protocol2CodeConverter.asTextEdits(E,C),E=>u.handleFailedRequest(Vt.DocumentRangeFormattingRequest.type,C,E,null))},g=u.middleware;return g.provideDocumentRangeFormattingEdits?g.provideDocumentRangeFormattingEdits(r,o,s,c,f):f(r,o,s,c)}};return[Br.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),i),i]}};on.DocumentRangeFormattingFeature=Aa;var Ma=class extends Gt.TextDocumentLanguageFeature{constructor(e){super(e,Vt.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){(0,Gt.ensure)((0,Gt.ensure)(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){let i=this.getRegistrationOptions(t,e.documentOnTypeFormattingProvider);i&&this.register({id:Ha.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,i={provideOnTypeFormattingEdits:(o,s,c,u,f)=>{let g=this._client,y=(R,C,q,E,F)=>{let x={textDocument:g.code2ProtocolConverter.asTextDocumentIdentifier(R),position:g.code2ProtocolConverter.asPosition(C),ch:q,options:g.code2ProtocolConverter.asFormattingOptions(E,Ji.fromConfiguration(R))};return g.sendRequest(Vt.DocumentOnTypeFormattingRequest.type,x,F).then(N=>F.isCancellationRequested?null:g.protocol2CodeConverter.asTextEdits(N,F),N=>g.handleFailedRequest(Vt.DocumentOnTypeFormattingRequest.type,F,N,null))},v=g.middleware;return v.provideOnTypeFormattingEdits?v.provideOnTypeFormattingEdits(o,s,c,u,f,y):y(o,s,c,u,f)}},r=e.moreTriggerCharacter||[];return[Br.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),i,e.firstTriggerCharacter,...r),i]}};on.DocumentOnTypeFormattingFeature=Ma});var Mf=T(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.RenameFeature=void 0;var WR=require("vscode"),bn=K(),KR=ve(),Af=ht(),ja=te(),$a=class extends ja.TextDocumentLanguageFeature{constructor(e){super(e,bn.RenameRequest.type)}fillClientCapabilities(e){let t=(0,ja.ensure)((0,ja.ensure)(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0,t.prepareSupportDefaultBehavior=bn.PrepareSupportDefaultBehavior.Identifier,t.honorsChangeAnnotations=!0}initialize(e,t){let i=this.getRegistrationOptions(t,e.renameProvider);i&&(Af.boolean(e.renameProvider)&&(i.prepareProvider=!1),this.register({id:KR.generateUuid(),registerOptions:i}))}registerLanguageProvider(e){let t=e.documentSelector,i={provideRenameEdits:(r,o,s,c)=>{let u=this._client,f=(y,v,R,C)=>{let q={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(y),position:u.code2ProtocolConverter.asPosition(v),newName:R};return u.sendRequest(bn.RenameRequest.type,q,C).then(E=>C.isCancellationRequested?null:u.protocol2CodeConverter.asWorkspaceEdit(E,C),E=>u.handleFailedRequest(bn.RenameRequest.type,C,E,null,!1))},g=u.middleware;return g.provideRenameEdits?g.provideRenameEdits(r,o,s,c,f):f(r,o,s,c)},prepareRename:e.prepareProvider?(r,o,s)=>{let c=this._client,u=(g,y,v)=>{let R={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(g),position:c.code2ProtocolConverter.asPosition(y)};return c.sendRequest(bn.PrepareRenameRequest.type,R,v).then(C=>v.isCancellationRequested?null:bn.Range.is(C)?c.protocol2CodeConverter.asRange(C):this.isDefaultBehavior(C)?C.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):C&&bn.Range.is(C.range)?{range:c.protocol2CodeConverter.asRange(C.range),placeholder:C.placeholder}:Promise.reject(new Error("The element can't be renamed.")),C=>{throw typeof C.message=="string"?new Error(C.message):new Error("The element can't be renamed.")})},f=c.middleware;return f.prepareRename?f.prepareRename(r,o,s,u):u(r,o,s)}:void 0};return[this.registerProvider(t,i),i]}registerProvider(e,t){return WR.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}isDefaultBehavior(e){let t=e;return t&&Af.boolean(t.defaultBehavior)}};Qr.RenameFeature=$a});var Hf=T(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});Yr.DocumentLinkFeature=void 0;var zR=require("vscode"),Zi=K(),Ua=te(),VR=ve(),Wa=class extends Ua.TextDocumentLanguageFeature{constructor(e){super(e,Zi.DocumentLinkRequest.type)}fillClientCapabilities(e){let t=(0,Ua.ensure)((0,Ua.ensure)(e,"textDocument"),"documentLink");t.dynamicRegistration=!0,t.tooltipSupport=!0}initialize(e,t){let i=this.getRegistrationOptions(t,e.documentLinkProvider);i&&this.register({id:VR.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,i={provideDocumentLinks:(r,o)=>{let s=this._client,c=(f,g)=>s.sendRequest(Zi.DocumentLinkRequest.type,s.code2ProtocolConverter.asDocumentLinkParams(f),g).then(y=>g.isCancellationRequested?null:s.protocol2CodeConverter.asDocumentLinks(y,g),y=>s.handleFailedRequest(Zi.DocumentLinkRequest.type,g,y,null)),u=s.middleware;return u.provideDocumentLinks?u.provideDocumentLinks(r,o,c):c(r,o)},resolveDocumentLink:e.resolveProvider?(r,o)=>{let s=this._client,c=(f,g)=>s.sendRequest(Zi.DocumentLinkResolveRequest.type,s.code2ProtocolConverter.asDocumentLink(f),g).then(y=>g.isCancellationRequested?f:s.protocol2CodeConverter.asDocumentLink(y),y=>s.handleFailedRequest(Zi.DocumentLinkResolveRequest.type,g,y,f)),u=s.middleware;return u.resolveDocumentLink?u.resolveDocumentLink(r,o,c):c(r,o)}:void 0};return[zR.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),i),i]}};Yr.DocumentLinkFeature=Wa});var $f=T(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.ExecuteCommandFeature=void 0;var GR=require("vscode"),Ka=K(),XR=ve(),jf=te(),za=class{constructor(e){this._client=e,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return Ka.ExecuteCommandRequest.type}fillClientCapabilities(e){(0,jf.ensure)((0,jf.ensure)(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register({id:XR.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let t=this._client,i=t.middleware,r=(o,s)=>{let c={command:o,arguments:s};return t.sendRequest(Ka.ExecuteCommandRequest.type,c).then(void 0,u=>t.handleFailedRequest(Ka.ExecuteCommandRequest.type,void 0,u,void 0))};if(e.registerOptions.commands){let o=[];for(let s of e.registerOptions.commands)o.push(GR.commands.registerCommand(s,(...c)=>i.executeCommand?i.executeCommand(s,c,r):r(s,c)));this._commands.set(e.id,o)}}unregister(e){let t=this._commands.get(e);t&&t.forEach(i=>i.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(t=>t.dispose())}),this._commands.clear()}};Jr.ExecuteCommandFeature=za});var Uf=T(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.FileSystemWatcherFeature=void 0;var BR=require("vscode"),Tn=K(),Zr=te(),Va=class{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return Tn.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){(0,Zr.ensure)((0,Zr.ensure)(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,Zr.ensure)((0,Zr.ensure)(e,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(e,t){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let t=[];for(let i of e.registerOptions.watchers){let r=this._client.protocol2CodeConverter.asGlobPattern(i.globPattern);if(r===void 0)continue;let o=!0,s=!0,c=!0;i.kind!==void 0&&i.kind!==null&&(o=(i.kind&Tn.WatchKind.Create)!==0,s=(i.kind&Tn.WatchKind.Change)!==0,c=(i.kind&Tn.WatchKind.Delete)!==0);let u=BR.workspace.createFileSystemWatcher(r,!o,!s,!c);this.hookListeners(u,o,s,c,t),t.push(u)}this._watchers.set(e.id,t)}registerRaw(e,t){let i=[];for(let r of t)this.hookListeners(r,!0,!0,!0,i);this._watchers.set(e,i)}hookListeners(e,t,i,r,o){t&&e.onDidCreate(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:Tn.FileChangeType.Created}),null,o),i&&e.onDidChange(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:Tn.FileChangeType.Changed}),null,o),r&&e.onDidDelete(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:Tn.FileChangeType.Deleted}),null,o)}unregister(e){let t=this._watchers.get(e);if(t)for(let i of t)i.dispose()}dispose(){this._watchers.forEach(e=>{for(let t of e)t.dispose()}),this._watchers.clear()}};eo.FileSystemWatcherFeature=Va});var Wf=T(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});to.ColorProviderFeature=void 0;var QR=require("vscode"),er=K(),Ga=te(),Xa=class extends Ga.TextDocumentLanguageFeature{constructor(e){super(e,er.DocumentColorRequest.type)}fillClientCapabilities(e){(0,Ga.ensure)((0,Ga.ensure)(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){let[i,r]=this.getRegistration(t,e.colorProvider);!i||!r||this.register({id:i,registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,i={provideColorPresentations:(r,o,s)=>{let c=this._client,u=(g,y,v)=>{let R={color:g,textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(y.document),range:c.code2ProtocolConverter.asRange(y.range)};return c.sendRequest(er.ColorPresentationRequest.type,R,v).then(C=>v.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorPresentations(C,v),C=>c.handleFailedRequest(er.ColorPresentationRequest.type,v,C,null))},f=c.middleware;return f.provideColorPresentations?f.provideColorPresentations(r,o,s,u):u(r,o,s)},provideDocumentColors:(r,o)=>{let s=this._client,c=(f,g)=>{let y={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(f)};return s.sendRequest(er.DocumentColorRequest.type,y,g).then(v=>g.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorInformations(v,g),v=>s.handleFailedRequest(er.DocumentColorRequest.type,g,v,null))},u=s.middleware;return u.provideDocumentColors?u.provideDocumentColors(r,o,c):c(r,o)}};return[QR.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),i),i]}};to.ColorProviderFeature=Xa});var Kf=T(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});no.ImplementationFeature=void 0;var YR=require("vscode"),Ba=K(),Qa=te(),Ya=class extends Qa.TextDocumentLanguageFeature{constructor(e){super(e,Ba.ImplementationRequest.type)}fillClientCapabilities(e){let t=(0,Qa.ensure)((0,Qa.ensure)(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[i,r]=this.getRegistration(t,e.implementationProvider);!i||!r||this.register({id:i,registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,i={provideImplementation:(r,o,s)=>{let c=this._client,u=(g,y,v)=>c.sendRequest(Ba.ImplementationRequest.type,c.code2ProtocolConverter.asTextDocumentPositionParams(g,y),v).then(R=>v.isCancellationRequested?null:c.protocol2CodeConverter.asDefinitionResult(R,v),R=>c.handleFailedRequest(Ba.ImplementationRequest.type,v,R,null)),f=c.middleware;return f.provideImplementation?f.provideImplementation(r,o,s,u):u(r,o,s)}};return[this.registerProvider(t,i),i]}registerProvider(e,t){return YR.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};no.ImplementationFeature=Ya});var zf=T(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});io.TypeDefinitionFeature=void 0;var JR=require("vscode"),Ja=K(),tr=te(),Za=class extends tr.TextDocumentLanguageFeature{constructor(e){super(e,Ja.TypeDefinitionRequest.type)}fillClientCapabilities(e){(0,tr.ensure)((0,tr.ensure)(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=(0,tr.ensure)((0,tr.ensure)(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[i,r]=this.getRegistration(t,e.typeDefinitionProvider);!i||!r||this.register({id:i,registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,i={provideTypeDefinition:(r,o,s)=>{let c=this._client,u=(g,y,v)=>c.sendRequest(Ja.TypeDefinitionRequest.type,c.code2ProtocolConverter.asTextDocumentPositionParams(g,y),v).then(R=>v.isCancellationRequested?null:c.protocol2CodeConverter.asDefinitionResult(R,v),R=>c.handleFailedRequest(Ja.TypeDefinitionRequest.type,v,R,null)),f=c.middleware;return f.provideTypeDefinition?f.provideTypeDefinition(r,o,s,u):u(r,o,s)}};return[this.registerProvider(t,i),i]}registerProvider(e,t){return JR.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};io.TypeDefinitionFeature=Za});var Vf=T(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});ni.WorkspaceFoldersFeature=ni.arrayDiff=void 0;var ZR=ve(),ro=require("vscode"),nr=K();function ec(n,e){if(n!==void 0)return n[e]}function tc(n,e){return n.filter(t=>e.indexOf(t)<0)}ni.arrayDiff=tc;var nc=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return nr.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=ro.workspace.workspaceFolders;this.initializeWithFolders(t),t===void 0?e.workspaceFolders=null:e.workspaceFolders=t.map(i=>this.asProtocol(i))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(nr.WorkspaceFoldersRequest.type,o=>{let s=()=>{let u=ro.workspace.workspaceFolders;return u===void 0?null:u.map(g=>this.asProtocol(g))},c=t.middleware.workspace;return c&&c.workspaceFolders?c.workspaceFolders(o,s):s(o)});let i=ec(ec(ec(e,"workspace"),"workspaceFolders"),"changeNotifications"),r;typeof i=="string"?r=i:i===!0&&(r=ZR.generateUuid()),r&&this.register({id:r,registerOptions:void 0})}sendInitialEvent(e){let t;if(this._initialFolders&&e){let i=tc(this._initialFolders,e),r=tc(e,this._initialFolders);(r.length>0||i.length>0)&&(t=this.doSendEvent(r,i))}else this._initialFolders?t=this.doSendEvent([],this._initialFolders):e&&(t=this.doSendEvent(e,[]));t!==void 0&&t.catch(i=>{this._client.error(`Sending notification ${nr.DidChangeWorkspaceFoldersNotification.type.method} failed`,i)})}doSendEvent(e,t){let i={event:{added:e.map(r=>this.asProtocol(r)),removed:t.map(r=>this.asProtocol(r))}};return this._client.sendNotification(nr.DidChangeWorkspaceFoldersNotification.type,i)}register(e){let t=e.id,i=this._client,r=ro.workspace.onDidChangeWorkspaceFolders(o=>{let s=f=>this.doSendEvent(f.added,f.removed),c=i.middleware.workspace;(c&&c.didChangeWorkspaceFolders?c.didChangeWorkspaceFolders(o,s):s(o)).catch(f=>{this._client.error(`Sending notification ${nr.DidChangeWorkspaceFoldersNotification.type.method} failed`,f)})});this._listeners.set(t,r),this.sendInitialEvent(ro.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);t!==void 0&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};ni.WorkspaceFoldersFeature=nc});var Gf=T(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.FoldingRangeFeature=void 0;var eD=require("vscode"),ii=K(),ic=te(),rc=class extends ic.TextDocumentLanguageFeature{constructor(e){super(e,ii.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=(0,ic.ensure)((0,ic.ensure)(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0,t.foldingRangeKind={valueSet:[ii.FoldingRangeKind.Comment,ii.FoldingRangeKind.Imports,ii.FoldingRangeKind.Region]},t.foldingRange={collapsedText:!1}}initialize(e,t){let[i,r]=this.getRegistration(t,e.foldingRangeProvider);!i||!r||this.register({id:i,registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,i={provideFoldingRanges:(r,o,s)=>{let c=this._client,u=(g,y,v)=>{let R={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(g)};return c.sendRequest(ii.FoldingRangeRequest.type,R,v).then(C=>v.isCancellationRequested?null:c.protocol2CodeConverter.asFoldingRanges(C,v),C=>c.handleFailedRequest(ii.FoldingRangeRequest.type,v,C,null))},f=c.middleware;return f.provideFoldingRanges?f.provideFoldingRanges(r,o,s,u):u(r,o,s)}};return[eD.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),i),i]}};oo.FoldingRangeFeature=rc});var Xf=T(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});so.DeclarationFeature=void 0;var tD=require("vscode"),oc=K(),sc=te(),ac=class extends sc.TextDocumentLanguageFeature{constructor(e){super(e,oc.DeclarationRequest.type)}fillClientCapabilities(e){let t=(0,sc.ensure)((0,sc.ensure)(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[i,r]=this.getRegistration(t,e.declarationProvider);!i||!r||this.register({id:i,registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,i={provideDeclaration:(r,o,s)=>{let c=this._client,u=(g,y,v)=>c.sendRequest(oc.DeclarationRequest.type,c.code2ProtocolConverter.asTextDocumentPositionParams(g,y),v).then(R=>v.isCancellationRequested?null:c.protocol2CodeConverter.asDeclarationResult(R,v),R=>c.handleFailedRequest(oc.DeclarationRequest.type,v,R,null)),f=c.middleware;return f.provideDeclaration?f.provideDeclaration(r,o,s,u):u(r,o,s)}};return[this.registerProvider(t,i),i]}registerProvider(e,t){return tD.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};so.DeclarationFeature=ac});var Bf=T(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.SelectionRangeFeature=void 0;var nD=require("vscode"),cc=K(),uc=te(),lc=class extends uc.TextDocumentLanguageFeature{constructor(e){super(e,cc.SelectionRangeRequest.type)}fillClientCapabilities(e){let t=(0,uc.ensure)((0,uc.ensure)(e,"textDocument"),"selectionRange");t.dynamicRegistration=!0}initialize(e,t){let[i,r]=this.getRegistration(t,e.selectionRangeProvider);!i||!r||this.register({id:i,registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,i={provideSelectionRanges:(r,o,s)=>{let c=this._client,u=async(g,y,v)=>{let R={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(g),positions:await c.code2ProtocolConverter.asPositions(y,v)};return c.sendRequest(cc.SelectionRangeRequest.type,R,v).then(C=>v.isCancellationRequested?null:c.protocol2CodeConverter.asSelectionRanges(C,v),C=>c.handleFailedRequest(cc.SelectionRangeRequest.type,v,C,null))},f=c.middleware;return f.provideSelectionRanges?f.provideSelectionRanges(r,o,s,u):u(r,o,s)}};return[this.registerProvider(t,i),i]}registerProvider(e,t){return nD.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};ao.SelectionRangeFeature=lc});var Yf=T(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.ProgressFeature=void 0;var Qf=K(),iD=As();function rD(n,e){return n[e]===void 0&&(n[e]=Object.create(null)),n[e]}var dc=class{constructor(e){this._client=e,this.activeParts=new Set}getState(){return{kind:"window",id:Qf.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(e){rD(e,"window").workDoneProgress=!0}initialize(){let e=this._client,t=r=>{this.activeParts.delete(r)},i=r=>{this.activeParts.add(new iD.ProgressPart(this._client,r.token,t))};e.onRequest(Qf.WorkDoneProgressCreateRequest.type,i)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};co.ProgressFeature=dc});var Jf=T(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});uo.CallHierarchyFeature=void 0;var oD=require("vscode"),qn=K(),fc=te(),hc=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareCallHierarchy(e,t,i){let r=this.client,o=this.middleware,s=(c,u,f)=>{let g=r.code2ProtocolConverter.asTextDocumentPositionParams(c,u);return r.sendRequest(qn.CallHierarchyPrepareRequest.type,g,f).then(y=>f.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyItems(y,f),y=>r.handleFailedRequest(qn.CallHierarchyPrepareRequest.type,f,y,null))};return o.prepareCallHierarchy?o.prepareCallHierarchy(e,t,i,s):s(e,t,i)}provideCallHierarchyIncomingCalls(e,t){let i=this.client,r=this.middleware,o=(s,c)=>{let u={item:i.code2ProtocolConverter.asCallHierarchyItem(s)};return i.sendRequest(qn.CallHierarchyIncomingCallsRequest.type,u,c).then(f=>c.isCancellationRequested?null:i.protocol2CodeConverter.asCallHierarchyIncomingCalls(f,c),f=>i.handleFailedRequest(qn.CallHierarchyIncomingCallsRequest.type,c,f,null))};return r.provideCallHierarchyIncomingCalls?r.provideCallHierarchyIncomingCalls(e,t,o):o(e,t)}provideCallHierarchyOutgoingCalls(e,t){let i=this.client,r=this.middleware,o=(s,c)=>{let u={item:i.code2ProtocolConverter.asCallHierarchyItem(s)};return i.sendRequest(qn.CallHierarchyOutgoingCallsRequest.type,u,c).then(f=>c.isCancellationRequested?null:i.protocol2CodeConverter.asCallHierarchyOutgoingCalls(f,c),f=>i.handleFailedRequest(qn.CallHierarchyOutgoingCallsRequest.type,c,f,null))};return r.provideCallHierarchyOutgoingCalls?r.provideCallHierarchyOutgoingCalls(e,t,o):o(e,t)}},pc=class extends fc.TextDocumentLanguageFeature{constructor(e){super(e,qn.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let t=e,i=(0,fc.ensure)((0,fc.ensure)(t,"textDocument"),"callHierarchy");i.dynamicRegistration=!0}initialize(e,t){let[i,r]=this.getRegistration(t,e.callHierarchyProvider);!i||!r||this.register({id:i,registerOptions:r})}registerLanguageProvider(e){let t=this._client,i=new hc(t);return[oD.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector),i),i]}};uo.CallHierarchyFeature=pc});var Zf=T(fo=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});fo.SemanticTokensFeature=void 0;var lo=require("vscode"),V=K(),ir=te(),sD=ht(),gc=class extends ir.TextDocumentLanguageFeature{constructor(e){super(e,V.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let t=(0,ir.ensure)((0,ir.ensure)(e,"textDocument"),"semanticTokens");t.dynamicRegistration=!0,t.tokenTypes=[V.SemanticTokenTypes.namespace,V.SemanticTokenTypes.type,V.SemanticTokenTypes.class,V.SemanticTokenTypes.enum,V.SemanticTokenTypes.interface,V.SemanticTokenTypes.struct,V.SemanticTokenTypes.typeParameter,V.SemanticTokenTypes.parameter,V.SemanticTokenTypes.variable,V.SemanticTokenTypes.property,V.SemanticTokenTypes.enumMember,V.SemanticTokenTypes.event,V.SemanticTokenTypes.function,V.SemanticTokenTypes.method,V.SemanticTokenTypes.macro,V.SemanticTokenTypes.keyword,V.SemanticTokenTypes.modifier,V.SemanticTokenTypes.comment,V.SemanticTokenTypes.string,V.SemanticTokenTypes.number,V.SemanticTokenTypes.regexp,V.SemanticTokenTypes.operator,V.SemanticTokenTypes.decorator],t.tokenModifiers=[V.SemanticTokenModifiers.declaration,V.SemanticTokenModifiers.definition,V.SemanticTokenModifiers.readonly,V.SemanticTokenModifiers.static,V.SemanticTokenModifiers.deprecated,V.SemanticTokenModifiers.abstract,V.SemanticTokenModifiers.async,V.SemanticTokenModifiers.modification,V.SemanticTokenModifiers.documentation,V.SemanticTokenModifiers.defaultLibrary],t.formats=[V.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}},t.multilineTokenSupport=!1,t.overlappingTokenSupport=!1,t.serverCancelSupport=!0,t.augmentsSyntaxTokens=!0,(0,ir.ensure)((0,ir.ensure)(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,t){this._client.onRequest(V.SemanticTokensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeSemanticTokensEmitter.fire()});let[r,o]=this.getRegistration(t,e.semanticTokensProvider);!r||!o||this.register({id:r,registerOptions:o})}registerLanguageProvider(e){let t=e.documentSelector,i=sD.boolean(e.full)?e.full:e.full!==void 0,r=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,o=new lo.EventEmitter,s=i?{onDidChangeSemanticTokens:o.event,provideDocumentSemanticTokens:(R,C)=>{let q=this._client,E=q.middleware,F=(x,N)=>{let L={textDocument:q.code2ProtocolConverter.asTextDocumentIdentifier(x)};return q.sendRequest(V.SemanticTokensRequest.type,L,N).then(J=>N.isCancellationRequested?null:q.protocol2CodeConverter.asSemanticTokens(J,N),J=>q.handleFailedRequest(V.SemanticTokensRequest.type,N,J,null))};return E.provideDocumentSemanticTokens?E.provideDocumentSemanticTokens(R,C,F):F(R,C)},provideDocumentSemanticTokensEdits:r?(R,C,q)=>{let E=this._client,F=E.middleware,x=(N,L,J)=>{let Ie={textDocument:E.code2ProtocolConverter.asTextDocumentIdentifier(N),previousResultId:L};return E.sendRequest(V.SemanticTokensDeltaRequest.type,Ie,J).then(async Z=>J.isCancellationRequested?null:V.SemanticTokens.is(Z)?await E.protocol2CodeConverter.asSemanticTokens(Z,J):await E.protocol2CodeConverter.asSemanticTokensEdits(Z,J),Z=>E.handleFailedRequest(V.SemanticTokensDeltaRequest.type,J,Z,null))};return F.provideDocumentSemanticTokensEdits?F.provideDocumentSemanticTokensEdits(R,C,q,x):x(R,C,q)}:void 0}:void 0,u=e.range===!0?{provideDocumentRangeSemanticTokens:(R,C,q)=>{let E=this._client,F=E.middleware,x=(N,L,J)=>{let Ie={textDocument:E.code2ProtocolConverter.asTextDocumentIdentifier(N),range:E.code2ProtocolConverter.asRange(L)};return E.sendRequest(V.SemanticTokensRangeRequest.type,Ie,J).then(Z=>J.isCancellationRequested?null:E.protocol2CodeConverter.asSemanticTokens(Z,J),Z=>E.handleFailedRequest(V.SemanticTokensRangeRequest.type,J,Z,null))};return F.provideDocumentRangeSemanticTokens?F.provideDocumentRangeSemanticTokens(R,C,q,x):x(R,C,q)}}:void 0,f=[],g=this._client,y=g.protocol2CodeConverter.asSemanticTokensLegend(e.legend),v=g.protocol2CodeConverter.asDocumentSelector(t);return s!==void 0&&f.push(lo.languages.registerDocumentSemanticTokensProvider(v,s,y)),u!==void 0&&f.push(lo.languages.registerDocumentRangeSemanticTokensProvider(v,u,y)),[new lo.Disposable(()=>f.forEach(R=>R.dispose())),{range:u,full:s,onDidChangeSemanticTokensEmitter:o}]}};fo.SemanticTokensFeature=gc});var nh=T(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.WillDeleteFilesFeature=nt.WillRenameFilesFeature=nt.WillCreateFilesFeature=nt.DidDeleteFilesFeature=nt.DidRenameFilesFeature=nt.DidCreateFilesFeature=void 0;var Ct=require("vscode"),aD=Or(),Xt=K(),cD=ve();function eh(n,e){return n[e]===void 0&&(n[e]={}),n[e]}function uD(n,e){return n[e]}function th(n,e,t){n[e]=t}var rr=class n{constructor(e,t,i,r,o){this._client=e,this._event=t,this._registrationType=i,this._clientCapability=r,this._serverCapability=o,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){let t=eh(eh(e,"workspace"),"fileOperations");th(t,"dynamicRegistration",!0),th(t,this._clientCapability,!0)}initialize(e){let t=e.workspace?.fileOperations,i=t!==void 0?uD(t,this._serverCapability):void 0;if(i?.filters!==void 0)try{this.register({id:cD.generateUuid(),registerOptions:{filters:i.filters}})}catch(r){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${r}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let t=e.registerOptions.filters.map(i=>{let r=new aD.Minimatch(i.pattern.glob,n.asMinimatchOptions(i.pattern.options));if(!r.makeRe())throw new Error(`Invalid pattern ${i.pattern.glob}!`);return{scheme:i.scheme,matcher:r,kind:i.pattern.matches}});this._filters.set(e.id,t)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getFileType(e){return n.getFileType(e)}async filter(e,t){let i=await Promise.all(e.files.map(async o=>{let s=t(o),c=s.fsPath.replace(/\\/g,"/");for(let u of this._filters.values())for(let f of u)if(!(f.scheme!==void 0&&f.scheme!==s.scheme)){if(f.matcher.match(c)){if(f.kind===void 0)return!0;let g=await this.getFileType(s);if(g===void 0)return this._client.error(`Failed to determine file type for ${s.toString()}.`),!0;if(g===Ct.FileType.File&&f.kind===Xt.FileOperationPatternKind.file||g===Ct.FileType.Directory&&f.kind===Xt.FileOperationPatternKind.folder)return!0}else if(f.kind===Xt.FileOperationPatternKind.folder&&await n.getFileType(s)===Ct.FileType.Directory&&f.matcher.match(`${c}/`))return!0}return!1})),r=e.files.filter((o,s)=>i[s]);return{...e,files:r}}static async getFileType(e){try{return(await Ct.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&&e.ignoreCase===!0)return{nocase:!0}}},ho=class extends rr{constructor(e,t,i,r,o,s,c){super(e,t,i,r,o),this._notificationType=i,this._accessUri=s,this._createParams=c}async send(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let i=async r=>this._client.sendNotification(this._notificationType,this._createParams(r));return this.doSend(t,i)}}},po=class extends ho{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){let t=e.fsPath;if(this._fsPathFileTypes.has(t))return this._fsPathFileTypes.get(t);let i=await rr.getFileType(e);return i&&this._fsPathFileTypes.set(t,i),i}async cacheFileTypes(e,t){await this.filter(e,t)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&&this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}dispose(){super.dispose(),this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}},mc=class extends ho{constructor(e){super(e,Ct.workspace.onDidCreateFiles,Xt.DidCreateFilesNotification.type,"didCreate","didCreate",t=>t,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,t){let i=this._client.middleware.workspace;return i?.didCreateFiles?i.didCreateFiles(e,t):t(e)}};nt.DidCreateFilesFeature=mc;var vc=class extends po{constructor(e){super(e,Ct.workspace.onDidRenameFiles,Xt.DidRenameFilesNotification.type,"didRename","didRename",t=>t.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=Ct.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,t=>t.oldUri))}doSend(e,t){this.clearFileTypeCache();let i=this._client.middleware.workspace;return i?.didRenameFiles?i.didRenameFiles(e,t):t(e)}};nt.DidRenameFilesFeature=vc;var yc=class extends po{constructor(e){super(e,Ct.workspace.onDidDeleteFiles,Xt.DidDeleteFilesNotification.type,"didDelete","didDelete",t=>t,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=Ct.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,t=>t))}doSend(e,t){this.clearFileTypeCache();let i=this._client.middleware.workspace;return i?.didDeleteFiles?i.didDeleteFiles(e,t):t(e)}};nt.DidDeleteFilesFeature=yc;var or=class extends rr{constructor(e,t,i,r,o,s,c){super(e,t,i,r,o),this._requestType=i,this._accessUri=s,this._createParams=c}async send(e){let t=this.waitUntil(e);e.waitUntil(t)}async waitUntil(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let i=r=>this._client.sendRequest(this._requestType,this._createParams(r),r.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(t,i)}else return}},Cc=class extends or{constructor(e){super(e,Ct.workspace.onWillCreateFiles,Xt.WillCreateFilesRequest.type,"willCreate","willCreate",t=>t,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,t){let i=this._client.middleware.workspace;return i?.willCreateFiles?i.willCreateFiles(e,t):t(e)}};nt.WillCreateFilesFeature=Cc;var Rc=class extends or{constructor(e){super(e,Ct.workspace.onWillRenameFiles,Xt.WillRenameFilesRequest.type,"willRename","willRename",t=>t.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,t){let i=this._client.middleware.workspace;return i?.willRenameFiles?i.willRenameFiles(e,t):t(e)}};nt.WillRenameFilesFeature=Rc;var Dc=class extends or{constructor(e){super(e,Ct.workspace.onWillDeleteFiles,Xt.WillDeleteFilesRequest.type,"willDelete","willDelete",t=>t,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,t){let i=this._client.middleware.workspace;return i?.willDeleteFiles?i.willDeleteFiles(e,t):t(e)}};nt.WillDeleteFilesFeature=Dc});var ih=T(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});go.LinkedEditingFeature=void 0;var lD=require("vscode"),_c=K(),Sc=te(),wc=class extends Sc.TextDocumentLanguageFeature{constructor(e){super(e,_c.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let t=(0,Sc.ensure)((0,Sc.ensure)(e,"textDocument"),"linkedEditingRange");t.dynamicRegistration=!0}initialize(e,t){let[i,r]=this.getRegistration(t,e.linkedEditingRangeProvider);!i||!r||this.register({id:i,registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,i={provideLinkedEditingRanges:(r,o,s)=>{let c=this._client,u=(g,y,v)=>c.sendRequest(_c.LinkedEditingRangeRequest.type,c.code2ProtocolConverter.asTextDocumentPositionParams(g,y),v).then(R=>v.isCancellationRequested?null:c.protocol2CodeConverter.asLinkedEditingRanges(R,v),R=>c.handleFailedRequest(_c.LinkedEditingRangeRequest.type,v,R,null)),f=c.middleware;return f.provideLinkedEditingRange?f.provideLinkedEditingRange(r,o,s,u):u(r,o,s)}};return[this.registerProvider(t,i),i]}registerProvider(e,t){return lD.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};go.LinkedEditingFeature=wc});var rh=T(mo=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});mo.TypeHierarchyFeature=void 0;var dD=require("vscode"),Pn=K(),bc=te(),Tc=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareTypeHierarchy(e,t,i){let r=this.client,o=this.middleware,s=(c,u,f)=>{let g=r.code2ProtocolConverter.asTextDocumentPositionParams(c,u);return r.sendRequest(Pn.TypeHierarchyPrepareRequest.type,g,f).then(y=>f.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(y,f),y=>r.handleFailedRequest(Pn.TypeHierarchyPrepareRequest.type,f,y,null))};return o.prepareTypeHierarchy?o.prepareTypeHierarchy(e,t,i,s):s(e,t,i)}provideTypeHierarchySupertypes(e,t){let i=this.client,r=this.middleware,o=(s,c)=>{let u={item:i.code2ProtocolConverter.asTypeHierarchyItem(s)};return i.sendRequest(Pn.TypeHierarchySupertypesRequest.type,u,c).then(f=>c.isCancellationRequested?null:i.protocol2CodeConverter.asTypeHierarchyItems(f,c),f=>i.handleFailedRequest(Pn.TypeHierarchySupertypesRequest.type,c,f,null))};return r.provideTypeHierarchySupertypes?r.provideTypeHierarchySupertypes(e,t,o):o(e,t)}provideTypeHierarchySubtypes(e,t){let i=this.client,r=this.middleware,o=(s,c)=>{let u={item:i.code2ProtocolConverter.asTypeHierarchyItem(s)};return i.sendRequest(Pn.TypeHierarchySubtypesRequest.type,u,c).then(f=>c.isCancellationRequested?null:i.protocol2CodeConverter.asTypeHierarchyItems(f,c),f=>i.handleFailedRequest(Pn.TypeHierarchySubtypesRequest.type,c,f,null))};return r.provideTypeHierarchySubtypes?r.provideTypeHierarchySubtypes(e,t,o):o(e,t)}},qc=class extends bc.TextDocumentLanguageFeature{constructor(e){super(e,Pn.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){let t=(0,bc.ensure)((0,bc.ensure)(e,"textDocument"),"typeHierarchy");t.dynamicRegistration=!0}initialize(e,t){let[i,r]=this.getRegistration(t,e.typeHierarchyProvider);!i||!r||this.register({id:i,registerOptions:r})}registerLanguageProvider(e){let t=this._client,i=new Tc(t);return[dD.languages.registerTypeHierarchyProvider(t.protocol2CodeConverter.asDocumentSelector(e.documentSelector),i),i]}};mo.TypeHierarchyFeature=qc});var sh=T(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.InlineValueFeature=void 0;var oh=require("vscode"),vo=K(),sr=te(),Pc=class extends sr.TextDocumentLanguageFeature{constructor(e){super(e,vo.InlineValueRequest.type)}fillClientCapabilities(e){(0,sr.ensure)((0,sr.ensure)(e,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,sr.ensure)((0,sr.ensure)(e,"workspace"),"inlineValue").refreshSupport=!0}initialize(e,t){this._client.onRequest(vo.InlineValueRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeInlineValues.fire()});let[i,r]=this.getRegistration(t,e.inlineValueProvider);!i||!r||this.register({id:i,registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,i=new oh.EventEmitter,r={onDidChangeInlineValues:i.event,provideInlineValues:(o,s,c,u)=>{let f=this._client,g=(v,R,C,q)=>{let E={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(v),range:f.code2ProtocolConverter.asRange(R),context:f.code2ProtocolConverter.asInlineValueContext(C)};return f.sendRequest(vo.InlineValueRequest.type,E,q).then(F=>q.isCancellationRequested?null:f.protocol2CodeConverter.asInlineValues(F,q),F=>f.handleFailedRequest(vo.InlineValueRequest.type,q,F,null))},y=f.middleware;return y.provideInlineValues?y.provideInlineValues(o,s,c,u,g):g(o,s,c,u)}};return[this.registerProvider(t,r),{provider:r,onDidChangeInlineValues:i}]}registerProvider(e,t){return oh.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};yo.InlineValueFeature=Pc});var ch=T(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});Co.InlayHintsFeature=void 0;var ah=require("vscode"),ri=K(),ar=te(),Ec=class extends ar.TextDocumentLanguageFeature{constructor(e){super(e,ri.InlayHintRequest.type)}fillClientCapabilities(e){let t=(0,ar.ensure)((0,ar.ensure)(e,"textDocument"),"inlayHint");t.dynamicRegistration=!0,t.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,ar.ensure)((0,ar.ensure)(e,"workspace"),"inlayHint").refreshSupport=!0}initialize(e,t){this._client.onRequest(ri.InlayHintRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeInlayHints.fire()});let[i,r]=this.getRegistration(t,e.inlayHintProvider);!i||!r||this.register({id:i,registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,i=new ah.EventEmitter,r={onDidChangeInlayHints:i.event,provideInlayHints:(o,s,c)=>{let u=this._client,f=async(y,v,R)=>{let C={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(y),range:u.code2ProtocolConverter.asRange(v)};try{let q=await u.sendRequest(ri.InlayHintRequest.type,C,R);return R.isCancellationRequested?null:u.protocol2CodeConverter.asInlayHints(q,R)}catch(q){return u.handleFailedRequest(ri.InlayHintRequest.type,R,q,null)}},g=u.middleware;return g.provideInlayHints?g.provideInlayHints(o,s,c,f):f(o,s,c)}};return r.resolveInlayHint=e.resolveProvider===!0?(o,s)=>{let c=this._client,u=async(g,y)=>{try{let v=await c.sendRequest(ri.InlayHintResolveRequest.type,c.code2ProtocolConverter.asInlayHint(g),y);if(y.isCancellationRequested)return null;let R=c.protocol2CodeConverter.asInlayHint(v,y);return y.isCancellationRequested?null:R}catch(v){return c.handleFailedRequest(ri.InlayHintResolveRequest.type,y,v,null)}},f=c.middleware;return f.resolveInlayHint?f.resolveInlayHint(o,s,u):u(o,s)}:void 0,[this.registerProvider(t,r),{provider:r,onDidChangeInlayHints:i}]}registerProvider(e,t){return ah.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Co.InlayHintsFeature=Ec});var xc=T(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.ProposedFeatures=he.BaseLanguageClient=he.MessageTransports=he.SuspendMode=he.State=he.CloseAction=he.ErrorAction=he.RevealOutputChannelOn=void 0;var ce=require("vscode"),O=K(),fD=$d(),hD=Kd(),Rt=ht(),uh=Ui(),lh=ve(),pD=As(),Ft=te(),gD=na(),dh=Rf(),fh=_f(),oi=Sf(),mD=wf(),vD=bf(),yD=Tf(),CD=Pf(),RD=Ef(),DD=qa(),_D=kf(),SD=Ff(),wD=xf(),bD=Nf(),Ic=Lf(),TD=Mf(),qD=Hf(),PD=$f(),ED=Uf(),ID=Wf(),kD=Kf(),FD=zf(),xD=Vf(),OD=Gf(),ND=Xf(),LD=Bf(),AD=Yf(),MD=Jf(),HD=Zf(),si=nh(),jD=ih(),$D=rh(),UD=sh(),WD=ch(),cr;(function(n){n[n.Info=1]="Info",n[n.Warn=2]="Warn",n[n.Error=3]="Error",n[n.Never=4]="Never"})(cr=he.RevealOutputChannelOn||(he.RevealOutputChannelOn={}));var Do;(function(n){n[n.Continue=1]="Continue",n[n.Shutdown=2]="Shutdown"})(Do=he.ErrorAction||(he.ErrorAction={}));var En;(function(n){n[n.DoNotRestart=1]="DoNotRestart",n[n.Restart=2]="Restart"})(En=he.CloseAction||(he.CloseAction={}));var Ro;(function(n){n[n.Stopped=1]="Stopped",n[n.Starting=3]="Starting",n[n.Running=2]="Running"})(Ro=he.State||(he.State={}));var KD;(function(n){n.off="off",n.on="on"})(KD=he.SuspendMode||(he.SuspendMode={}));var kc=class{constructor(e,t){this.client=e,this.maxRestartCount=t,this.restarts=[]}error(e,t,i){return i&&i<=3?{action:Do.Continue}:{action:Do.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?{action:En.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?{action:En.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:En.Restart})}},B;(function(n){n.Initial="initial",n.Starting="starting",n.StartFailed="startFailed",n.Running="running",n.Stopping="stopping",n.Stopped="stopped"})(B||(B={}));var zD;(function(n){function e(t){return t&&O.MessageReader.is(t.reader)&&O.MessageWriter.is(t.writer)}n.is=e})(zD=he.MessageTransports||(he.MessageTransports={}));var _o=class n{constructor(e,t,i){this._traceFormat=O.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new uh.Semaphore(1),this._id=e,this._name=t,i=i||{};let r={isTrusted:!1,supportHtml:!1};i.markdown!==void 0&&(r.isTrusted=i.markdown.isTrusted===!0,r.supportHtml=i.markdown.supportHtml===!0),this._clientOptions={documentSelector:i.documentSelector??[],synchronize:i.synchronize??{},diagnosticCollectionName:i.diagnosticCollectionName,outputChannelName:i.outputChannelName??this._name,revealOutputChannelOn:i.revealOutputChannelOn??cr.Error,stdioEncoding:i.stdioEncoding??"utf8",initializationOptions:i.initializationOptions,initializationFailedHandler:i.initializationFailedHandler,progressOnInitialization:!!i.progressOnInitialization,errorHandler:i.errorHandler??this.createDefaultErrorHandler(i.connectionOptions?.maxRestartCount),middleware:i.middleware??{},uriConverters:i.uriConverters,workspaceFolder:i.workspaceFolder,connectionOptions:i.connectionOptions,markdown:r,diagnosticPullOptions:i.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:i.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=B.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,i.outputChannel?(this._outputChannel=i.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=i.traceOutputChannel,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new uh.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new O.Emitter,this._stateChangeEmitter=new O.Emitter,this._trace=O.Trace.Off,this._tracer={log:(o,s)=>{Rt.string(o)?this.logTrace(o,s):this.logObjectTrace(o)}},this._c2p=fD.createConverter(i.uriConverters?i.uriConverters.code2Protocol:void 0),this._p2c=hD.createConverter(i.uriConverters?i.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=ce.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(e){let t=this.getPublicState();this._state=e;let i=this.getPublicState();i!==t&&this._stateChangeEmitter.fire({oldState:t,newState:i})}getPublicState(){switch(this.$state){case B.Starting:return Ro.Starting;case B.Running:return Ro.Running;default:return Ro.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(e,...t){if(this.$state===B.StartFailed||this.$state===B.Stopping||this.$state===B.Stopped)return Promise.reject(new O.ResponseError(O.ErrorCodes.ConnectionInactive,"Client is not running"));try{let i=await this.$start();return await this.forceDocumentSync(),i.sendRequest(e,...t)}catch(i){throw this.error(`Sending request ${Rt.string(e)?e:e.method} failed.`,i),i}}onRequest(e,t){let i=typeof e=="string"?e:e.method;this._requestHandlers.set(i,t);let r=this.activeConnection(),o;return r!==void 0?(this._requestDisposables.set(i,r.onRequest(e,t)),o={dispose:()=>{let s=this._requestDisposables.get(i);s!==void 0&&(s.dispose(),this._requestDisposables.delete(i))}}):(this._pendingRequestHandlers.set(i,t),o={dispose:()=>{this._pendingRequestHandlers.delete(i);let s=this._requestDisposables.get(i);s!==void 0&&(s.dispose(),this._requestDisposables.delete(i))}}),{dispose:()=>{this._requestHandlers.delete(i),o.dispose()}}}async sendNotification(e,t){if(this.$state===B.StartFailed||this.$state===B.Stopping||this.$state===B.Stopped)return Promise.reject(new O.ResponseError(O.ErrorCodes.ConnectionInactive,"Client is not running"));try{let i=await this.$start();return await this.forceDocumentSync(),i.sendNotification(e,t)}catch(i){throw this.error(`Sending notification ${Rt.string(e)?e:e.method} failed.`,i),i}}onNotification(e,t){let i=typeof e=="string"?e:e.method;this._notificationHandlers.set(i,t);let r=this.activeConnection(),o;return r!==void 0?(this._notificationDisposables.set(i,r.onNotification(e,t)),o={dispose:()=>{let s=this._notificationDisposables.get(i);s!==void 0&&(s.dispose(),this._notificationDisposables.delete(i))}}):(this._pendingNotificationHandlers.set(i,t),o={dispose:()=>{this._pendingNotificationHandlers.delete(i);let s=this._notificationDisposables.get(i);s!==void 0&&(s.dispose(),this._notificationDisposables.delete(i))}}),{dispose:()=>{this._notificationHandlers.delete(i),o.dispose()}}}async sendProgress(e,t,i){if(this.$state===B.StartFailed||this.$state===B.Stopping||this.$state===B.Stopped)return Promise.reject(new O.ResponseError(O.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(e,t,i)}catch(r){throw this.error(`Sending progress for token ${t} failed.`,r),r}}onProgress(e,t,i){this._progressHandlers.set(t,{type:e,handler:i});let r=this.activeConnection(),o,s=this._clientOptions.middleware?.handleWorkDoneProgress,c=O.WorkDoneProgress.is(e)&&s!==void 0?u=>{s(t,u,()=>i(u))}:i;return r!==void 0?(this._progressDisposables.set(t,r.onProgress(e,t,c)),o={dispose:()=>{let u=this._progressDisposables.get(t);u!==void 0&&(u.dispose(),this._progressDisposables.delete(t))}}):(this._pendingProgressHandlers.set(t,{type:e,handler:i}),o={dispose:()=>{this._pendingProgressHandlers.delete(t);let u=this._progressDisposables.get(t);u!==void 0&&(u.dispose(),this._progressDisposables.delete(t))}}),{dispose:()=>{this._progressHandlers.delete(t),o.dispose()}}}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new kc(this,e??4)}async setTrace(e){this._trace=e;let t=this.activeConnection();t!==void 0&&await t.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(e){if(e instanceof O.ResponseError){let t=e;return`  Message: ${t.message}
  Code: ${t.code} ${t.data?`
`+t.data.toString():""}`}return e instanceof Error?Rt.string(e.stack)?e.stack:e.message:Rt.string(e)?e:e.toString()}info(e,t,i=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&&this.outputChannel.appendLine(this.data2String(t)),i&&this._clientOptions.revealOutputChannelOn<=cr.Info&&this.showNotificationMessage(O.MessageType.Info,e)}warn(e,t,i=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&&this.outputChannel.appendLine(this.data2String(t)),i&&this._clientOptions.revealOutputChannelOn<=cr.Warn&&this.showNotificationMessage(O.MessageType.Warning,e)}error(e,t,i=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&&this.outputChannel.appendLine(this.data2String(t)),(i==="force"||i&&this._clientOptions.revealOutputChannelOn<=cr.Error)&&this.showNotificationMessage(O.MessageType.Error,e)}showNotificationMessage(e,t){t=t??"A request has failed. See the output for more information.",(e===O.MessageType.Error?ce.window.showErrorMessage:e===O.MessageType.Warning?ce.window.showWarningMessage:ce.window.showInformationMessage)(t,"Go to output").then(r=>{r!==void 0&&this.outputChannel.show(!0)})}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.traceOutputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.$state===B.Initial||this.$state===B.Stopping||this.$state===B.Stopped}needsStop(){return this.$state===B.Starting||this.$state===B.Running}activeConnection(){return this.$state===B.Running&&this._connection!==void 0?this._connection:void 0}isRunning(){return this.$state===B.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed")throw new Error("Client got disposed and can't be restarted.");if(this.$state===B.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(this._onStart!==void 0)return this._onStart;let[e,t,i]=this.createOnStartPromise();this._onStart=e,this._diagnostics===void 0&&(this._diagnostics=this._clientOptions.diagnosticCollectionName?ce.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):ce.languages.createDiagnosticCollection());for(let[r,o]of this._notificationHandlers)this._pendingNotificationHandlers.has(r)||this._pendingNotificationHandlers.set(r,o);for(let[r,o]of this._requestHandlers)this._pendingRequestHandlers.has(r)||this._pendingRequestHandlers.set(r,o);for(let[r,o]of this._progressHandlers)this._pendingProgressHandlers.has(r)||this._pendingProgressHandlers.set(r,o);this.$state=B.Starting;try{let r=await this.createConnection();r.onNotification(O.LogMessageNotification.type,o=>{switch(o.type){case O.MessageType.Error:this.error(o.message,void 0,!1);break;case O.MessageType.Warning:this.warn(o.message,void 0,!1);break;case O.MessageType.Info:this.info(o.message,void 0,!1);break;default:this.outputChannel.appendLine(o.message)}}),r.onNotification(O.ShowMessageNotification.type,o=>{switch(o.type){case O.MessageType.Error:ce.window.showErrorMessage(o.message);break;case O.MessageType.Warning:ce.window.showWarningMessage(o.message);break;case O.MessageType.Info:ce.window.showInformationMessage(o.message);break;default:ce.window.showInformationMessage(o.message)}}),r.onRequest(O.ShowMessageRequest.type,o=>{let s;switch(o.type){case O.MessageType.Error:s=ce.window.showErrorMessage;break;case O.MessageType.Warning:s=ce.window.showWarningMessage;break;case O.MessageType.Info:s=ce.window.showInformationMessage;break;default:s=ce.window.showInformationMessage}let c=o.actions||[];return s(o.message,...c)}),r.onNotification(O.TelemetryEventNotification.type,o=>{this._telemetryEmitter.fire(o)}),r.onRequest(O.ShowDocumentRequest.type,async o=>{let s=async u=>{let f=this.protocol2CodeConverter.asUri(u.uri);try{if(u.external===!0)return{success:await ce.env.openExternal(f)};{let g={};return u.selection!==void 0&&(g.selection=this.protocol2CodeConverter.asRange(u.selection)),u.takeFocus===void 0||u.takeFocus===!1?g.preserveFocus=!0:u.takeFocus===!0&&(g.preserveFocus=!1),await ce.window.showTextDocument(f,g),{success:!0}}}catch{return{success:!1}}},c=this._clientOptions.middleware.window?.showDocument;return c!==void 0?c(o,s):s(o)}),r.listen(),await this.initialize(r),t()}catch(r){this.$state=B.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,r,"force"),i(r)}return this._onStart}createOnStartPromise(){let e,t;return[new Promise((r,o)=>{e=r,t=o}),e,t]}async initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,[i,r]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],o={processId:null,clientInfo:{name:ce.env.appName,version:ce.version},locale:this.getLocale(),rootPath:i||null,rootUri:i?this._c2p.asUri(ce.Uri.file(i)):null,capabilities:this.computeClientCapabilities(),initializationOptions:Rt.func(t)?t():t,trace:O.Trace.toString(this._trace),workspaceFolders:r};if(this.fillInitializeParams(o),this._clientOptions.progressOnInitialization){let s=lh.generateUuid(),c=new pD.ProgressPart(e,s);o.workDoneToken=s;try{let u=await this.doInitialize(e,o);return c.done(),u}catch(u){throw c.cancel(),u}}else return this.doInitialize(e,o)}async doInitialize(e,t){try{let i=await e.initialize(t);if(i.capabilities.positionEncoding!==void 0&&i.capabilities.positionEncoding!==O.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${i.capabilities.positionEncoding}) received from server ${this.name}`);this._initializeResult=i,this.$state=B.Running;let r;Rt.number(i.capabilities.textDocumentSync)?i.capabilities.textDocumentSync===O.TextDocumentSyncKind.None?r={openClose:!1,change:O.TextDocumentSyncKind.None,save:void 0}:r={openClose:!0,change:i.capabilities.textDocumentSync,save:{includeText:!1}}:i.capabilities.textDocumentSync!==void 0&&i.capabilities.textDocumentSync!==null&&(r=i.capabilities.textDocumentSync),this._capabilities=Object.assign({},i.capabilities,{resolvedTextDocumentSync:r}),e.onNotification(O.PublishDiagnosticsNotification.type,o=>this.handleDiagnostics(o)),e.onRequest(O.RegistrationRequest.type,o=>this.handleRegistrationRequest(o)),e.onRequest("client/registerFeature",o=>this.handleRegistrationRequest(o)),e.onRequest(O.UnregistrationRequest.type,o=>this.handleUnregistrationRequest(o)),e.onRequest("client/unregisterFeature",o=>this.handleUnregistrationRequest(o)),e.onRequest(O.ApplyWorkspaceEditRequest.type,o=>this.handleApplyWorkspaceEdit(o));for(let[o,s]of this._pendingNotificationHandlers)this._notificationDisposables.set(o,e.onNotification(o,s));this._pendingNotificationHandlers.clear();for(let[o,s]of this._pendingRequestHandlers)this._requestDisposables.set(o,e.onRequest(o,s));this._pendingRequestHandlers.clear();for(let[o,s]of this._pendingProgressHandlers)this._progressDisposables.set(o,e.onProgress(s.type,o,s.handler));return this._pendingProgressHandlers.clear(),await e.sendNotification(O.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),i}catch(i){throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(i)?this.initialize(e):this.stop():i instanceof O.ResponseError&&i.data&&i.data.retry?ce.window.showErrorMessage(i.message,{title:"Retry",id:"retry"}).then(r=>{r&&r.id==="retry"?this.initialize(e):this.stop()}):(i&&i.message&&ce.window.showErrorMessage(i.message),this.error("Server initialization failed.",i),this.stop()),i}}_clientGetRootPath(){let e=ce.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}stop(e=2e3){return this.shutdown("stop",e)}dispose(e=2e3){try{return this._disposed="disposing",this.stop(e)}finally{this._disposed="disposed"}}async shutdown(e,t){if(this.$state===B.Stopped||this.$state===B.Initial)return;if(this.$state===B.Stopping){if(this._onStop!==void 0)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}let i=this.activeConnection();if(i===void 0||this.$state!==B.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=B.Stopping,this.cleanUp(e);let r=new Promise(s=>{(0,O.RAL)().timer.setTimeout(s,t)}),o=(async s=>(await s.shutdown(),await s.exit(),s))(i);return this._onStop=Promise.race([r,o]).then(s=>{if(s!==void 0)s.end(),s.dispose();else throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out")},s=>{throw this.error("Stopping server failed",s,!1),s}).finally(()=>{this.$state=B.Stopped,e==="stop"&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()})}cleanUp(e){this._fileEvents=[],this._fileEventDelayer.cancel();let t=this._listeners.splice(0,this._listeners.length);for(let i of t)i.dispose();this._syncedDocuments&&this._syncedDocuments.clear();for(let i of Array.from(this._features.entries()).map(r=>r[1]).reverse())i.dispose();e==="stop"&&this._diagnostics!==void 0&&(this._diagnostics.dispose(),this._diagnostics=void 0),this._idleInterval!==void 0&&(this._idleInterval.dispose(),this._idleInterval=void 0)}cleanUpChannel(){this._outputChannel!==void 0&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){let t=this;async function i(o){return t._fileEvents.push(o),t._fileEventDelayer.trigger(async()=>{let s=await t.$start();await t.forceDocumentSync();let c=s.sendNotification(O.DidChangeWatchedFilesNotification.type,{changes:t._fileEvents});return t._fileEvents=[],c})}let r=this.clientOptions.middleware?.workspace;(r?.didChangeWatchedFile?r.didChangeWatchedFile(e,i):i(e)).catch(o=>{t.error("Notify file events failed.",o)})}async forceDocumentSync(){return this._didChangeTextDocumentFeature===void 0&&(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(O.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let t=e.uri;this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===t&&this._diagnosticQueueState.tokenSource.cancel(),this._diagnosticQueue.set(e.uri,e.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,O.RAL)().timer.setImmediate(()=>{this.workDiagnosticQueue()})}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy")return;let e=this._diagnosticQueue.entries().next();if(e.done===!0)return;let[t,i]=e.value;this._diagnosticQueue.delete(t);let r=new ce.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:t,tokenSource:r},this._p2c.asDiagnostics(i,r.token).then(o=>{if(!r.token.isCancellationRequested){let s=this._p2c.asUri(t),c=this.clientOptions.middleware;c.handleDiagnostics?c.handleDiagnostics(s,o,(u,f)=>this.setDiagnostics(u,f)):this.setDiagnostics(s,o)}}).finally(()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()})}setDiagnostics(e,t){this._diagnostics&&this._diagnostics.set(e,t)}async $start(){if(this.$state===B.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();let e=this.activeConnection();if(e===void 0)throw new Error("Starting server failed");return e}async createConnection(){let e=(r,o,s)=>{this.handleConnectionError(r,o,s)},t=()=>{this.handleConnectionClosed()},i=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=VD(i.reader,i.writer,e,t,this._clientOptions.connectionOptions),this._connection}handleConnectionClosed(){if(this.$state===B.Stopped)return;try{this._connection!==void 0&&this._connection.dispose()}catch{}let e={action:En.DoNotRestart};if(this.$state!==B.Stopping)try{e=this._clientOptions.errorHandler.closed()}catch{}this._connection=void 0,e.action===En.DoNotRestart?(this.error(e.message??"Connection to server got closed. Server will not be restarted.",void 0,"force"),this.cleanUp("stop"),this.$state===B.Starting?this.$state=B.StartFailed:this.$state=B.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0):e.action===En.Restart&&(this.info(e.message??"Connection to server got closed. Server will restart."),this.cleanUp("restart"),this.$state=B.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch(t=>this.error("Restarting server failed",t,"force")))}handleConnectionError(e,t,i){let r=this._clientOptions.errorHandler.error(e,t,i);r.action===Do.Shutdown&&(this.error(r.message??`Client ${this._name}: connection to server is erroring. Shutting down server.`,void 0,"force"),this.stop().catch(o=>{this.error("Stopping server failed",o,!1)}))}hookConfigurationChanged(e){this._listeners.push(ce.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)}))}refreshTrace(e,t=!1){let i=ce.workspace.getConfiguration(this._id),r=O.Trace.Off,o=O.TraceFormat.Text;if(i){let s=i.get("trace.server","off");typeof s=="string"?r=O.Trace.fromString(s):(r=O.Trace.fromString(i.get("trace.server.verbosity","off")),o=O.TraceFormat.fromString(i.get("trace.server.format","text")))}this._trace=r,this._traceFormat=o,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat}).catch(s=>{this.error("Updating trace failed with error",s,!1)})}hookFileEvents(e){let t=this._clientOptions.synchronize.fileEvents;if(!t)return;let i;Rt.array(t)?i=t:i=[t],i&&this._dynamicFeatures.get(O.DidChangeWatchedFilesNotification.type.method).registerRaw(lh.generateUuid(),i)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),Ft.DynamicFeature.is(e)){let t=e.registrationType;this._dynamicFeatures.set(t.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}hasDedicatedTextSynchronizationFeature(e){let t=this.getFeature(O.NotebookDocumentSyncRegistrationType.method);return t===void 0||!(t instanceof dh.NotebookDocumentSyncFeature)?!1:t.handles(e)}registerBuiltinFeatures(){this.registerFeature(new fh.ConfigurationFeature(this)),this.registerFeature(new oi.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this.registerFeature(new oi.DidChangeTextDocumentFeature(this)),this.registerFeature(new oi.WillSaveFeature(this)),this.registerFeature(new oi.WillSaveWaitUntilFeature(this)),this.registerFeature(new oi.DidSaveTextDocumentFeature(this)),this.registerFeature(new oi.DidCloseTextDocumentFeature(this,this._syncedDocuments)),this.registerFeature(new ED.FileSystemWatcherFeature(this,e=>this.notifyFileEvent(e))),this.registerFeature(new mD.CompletionItemFeature(this)),this.registerFeature(new vD.HoverFeature(this)),this.registerFeature(new CD.SignatureHelpFeature(this)),this.registerFeature(new yD.DefinitionFeature(this)),this.registerFeature(new SD.ReferencesFeature(this)),this.registerFeature(new RD.DocumentHighlightFeature(this)),this.registerFeature(new DD.DocumentSymbolFeature(this)),this.registerFeature(new _D.WorkspaceSymbolFeature(this)),this.registerFeature(new wD.CodeActionFeature(this)),this.registerFeature(new bD.CodeLensFeature(this)),this.registerFeature(new Ic.DocumentFormattingFeature(this)),this.registerFeature(new Ic.DocumentRangeFormattingFeature(this)),this.registerFeature(new Ic.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new TD.RenameFeature(this)),this.registerFeature(new qD.DocumentLinkFeature(this)),this.registerFeature(new PD.ExecuteCommandFeature(this)),this.registerFeature(new fh.SyncConfigurationFeature(this)),this.registerFeature(new FD.TypeDefinitionFeature(this)),this.registerFeature(new kD.ImplementationFeature(this)),this.registerFeature(new ID.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&&this.registerFeature(new xD.WorkspaceFoldersFeature(this)),this.registerFeature(new OD.FoldingRangeFeature(this)),this.registerFeature(new ND.DeclarationFeature(this)),this.registerFeature(new LD.SelectionRangeFeature(this)),this.registerFeature(new AD.ProgressFeature(this)),this.registerFeature(new MD.CallHierarchyFeature(this)),this.registerFeature(new HD.SemanticTokensFeature(this)),this.registerFeature(new jD.LinkedEditingFeature(this)),this.registerFeature(new si.DidCreateFilesFeature(this)),this.registerFeature(new si.DidRenameFilesFeature(this)),this.registerFeature(new si.DidDeleteFilesFeature(this)),this.registerFeature(new si.WillCreateFilesFeature(this)),this.registerFeature(new si.WillRenameFilesFeature(this)),this.registerFeature(new si.WillDeleteFilesFeature(this)),this.registerFeature(new $D.TypeHierarchyFeature(this)),this.registerFeature(new UD.InlineValueFeature(this)),this.registerFeature(new WD.InlayHintsFeature(this)),this.registerFeature(new gD.DiagnosticFeature(this)),this.registerFeature(new dh.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(hh.createAll(this))}fillInitializeParams(e){for(let t of this._features)Rt.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){let e={};(0,Ft.ensure)(e,"workspace").applyEdit=!0;let t=(0,Ft.ensure)((0,Ft.ensure)(e,"workspace"),"workspaceEdit");t.documentChanges=!0,t.resourceOperations=[O.ResourceOperationKind.Create,O.ResourceOperationKind.Rename,O.ResourceOperationKind.Delete],t.failureHandling=O.FailureHandlingKind.TextOnlyTransactional,t.normalizesLineEndings=!0,t.changeAnnotationSupport={groupsOnLabel:!0};let i=(0,Ft.ensure)((0,Ft.ensure)(e,"textDocument"),"publishDiagnostics");i.relatedInformation=!0,i.versionSupport=!1,i.tagSupport={valueSet:[O.DiagnosticTag.Unnecessary,O.DiagnosticTag.Deprecated]},i.codeDescriptionSupport=!0,i.dataSupport=!0;let r=(0,Ft.ensure)(e,"window"),o=(0,Ft.ensure)(r,"showMessage");o.messageActionItem={additionalPropertiesSupport:!0};let s=(0,Ft.ensure)(r,"showDocument");s.support=!0;let c=(0,Ft.ensure)(e,"general");c.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(n.RequestsToCancelOnContentModified)},c.regularExpressions={engine:"ECMAScript",version:"ES2020"},c.markdown={parser:"marked",version:"1.1.0"},c.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml&&(c.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]);for(let u of this._features)u.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let i of this._features)Rt.func(i.preInitialize)&&i.preInitialize(this._capabilities,t);for(let i of this._features)i.initialize(this._capabilities,t)}async handleRegistrationRequest(e){if(!this.isRunning()){for(let t of e.registrations)this._ignoredRegistrations.add(t.id);return}for(let t of e.registrations){let i=this._dynamicFeatures.get(t.method);if(i===void 0)return Promise.reject(new Error(`No feature implementation for ${t.method} found. Registration failed.`));let r=t.registerOptions??{};r.documentSelector=r.documentSelector??this._clientOptions.documentSelector;let o={id:t.id,registerOptions:r};try{i.register(o)}catch(s){return Promise.reject(s)}}}async handleUnregistrationRequest(e){for(let t of e.unregisterations){if(this._ignoredRegistrations.has(t.id))continue;let i=this._dynamicFeatures.get(t.method);if(!i)return Promise.reject(new Error(`No feature implementation for ${t.method} found. Unregistration failed.`));i.unregister(t.id)}}async handleApplyWorkspaceEdit(e){let t=e.edit,i=await this.workspaceEditLock.lock(()=>this._p2c.asWorkspaceEdit(t)),r=new Map;ce.workspace.textDocuments.forEach(s=>r.set(s.uri.toString(),s));let o=!1;if(t.documentChanges){for(let s of t.documentChanges)if(O.TextDocumentEdit.is(s)&&s.textDocument.version&&s.textDocument.version>=0){let c=r.get(s.textDocument.uri);if(c&&c.version!==s.textDocument.version){o=!0;break}}}return o?Promise.resolve({applied:!1}):Rt.asPromise(ce.workspace.applyEdit(i).then(s=>({applied:s})))}handleFailedRequest(e,t,i,r,o=!0){if(i instanceof O.ResponseError){if(i.code===O.ErrorCodes.PendingResponseRejected||i.code===O.ErrorCodes.ConnectionInactive)return r;if(i.code===O.LSPErrorCodes.RequestCancelled||i.code===O.LSPErrorCodes.ServerCancelled){if(t!==void 0&&t.isCancellationRequested)return r;throw i.data!==void 0?new Ft.LSPCancellationError(i.data):new ce.CancellationError}else if(i.code===O.LSPErrorCodes.ContentModified){if(n.RequestsToCancelOnContentModified.has(e.method))throw new ce.CancellationError;return r}}throw this.error(`Request ${e.method} failed.`,i,o),i}};he.BaseLanguageClient=_o;_o.RequestsToCancelOnContentModified=new Set([O.SemanticTokensRequest.method,O.SemanticTokensRangeRequest.method,O.SemanticTokensDeltaRequest.method]);var Fc=class{error(e){(0,O.RAL)().console.error(e)}warn(e){(0,O.RAL)().console.warn(e)}info(e){(0,O.RAL)().console.info(e)}log(e){(0,O.RAL)().console.log(e)}};function VD(n,e,t,i,r){let o=-1,s=new Fc,c=(0,O.createProtocolConnection)(n,e,s,r);return c.onError(f=>{t(f[0],f[1],f[2])}),c.onClose(i),{get lastUsed(){return o},resetLastUsed:()=>{o=-1},listen:()=>c.listen(),sendRequest:(f,...g)=>(o=Date.now(),c.sendRequest(f,...g)),onRequest:(f,g)=>c.onRequest(f,g),hasPendingResponse:()=>c.hasPendingResponse(),sendNotification:(f,g)=>(o=Date.now(),c.sendNotification(f,g)),onNotification:(f,g)=>c.onNotification(f,g),onProgress:c.onProgress,sendProgress:c.sendProgress,trace:(f,g,y)=>{let v={sendNotification:!1,traceFormat:O.TraceFormat.Text};return y===void 0?c.trace(f,g,v):(Rt.boolean(y),c.trace(f,g,y))},initialize:f=>(o=Date.now(),c.sendRequest(O.InitializeRequest.type,f)),shutdown:()=>(o=Date.now(),c.sendRequest(O.ShutdownRequest.type,void 0)),exit:()=>(o=Date.now(),c.sendNotification(O.ExitNotification.type)),end:()=>c.end(),dispose:()=>c.dispose()}}var hh;(function(n){function e(t){return[]}n.createAll=e})(hh=he.ProposedFeatures||(he.ProposedFeatures={}))});var gh=T(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});So.terminate=void 0;var ph=require("child_process"),GD=require("path"),XD=process.platform==="win32",BD=process.platform==="darwin",QD=process.platform==="linux";function YD(n,e){if(XD)try{let r={stdio:["pipe","pipe","ignore"]};return e&&(r.cwd=e),ph.execFileSync("taskkill",["/T","/F","/PID",n.pid.toString()],r),!0}catch{return!1}else if(QD||BD)try{var t=(0,GD.join)(__dirname,"terminateProcess.sh"),i=ph.spawnSync(t,[n.pid.toString()]);return!i.error}catch{return!1}else return n.kill("SIGKILL"),!0}So.terminate=YD});var Oc=T((_w,mh)=>{"use strict";mh.exports=K()});var yh=T(ct=>{"use strict";var JD=ct&&ct.__createBinding||(Object.create?function(n,e,t,i){i===void 0&&(i=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,i,r)}:function(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]}),Nc=ct&&ct.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&JD(e,n,t)};Object.defineProperty(ct,"__esModule",{value:!0});ct.DiagnosticPullMode=ct.vsdiag=void 0;Nc(K(),ct);Nc(te(),ct);var vh=na();Object.defineProperty(ct,"vsdiag",{enumerable:!0,get:function(){return vh.vsdiag}});Object.defineProperty(ct,"DiagnosticPullMode",{enumerable:!0,get:function(){return vh.DiagnosticPullMode}});Nc(xc(),ct)});var Sh=T(Xe=>{"use strict";var ZD=Xe&&Xe.__createBinding||(Object.create?function(n,e,t,i){i===void 0&&(i=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,i,r)}:function(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]}),_h=Xe&&Xe.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ZD(e,n,t)};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.SettingMonitor=Xe.LanguageClient=Xe.TransportKind=void 0;var Bt=require("child_process"),Lc=require("fs"),Ac=require("path"),Ch=Kl(),an=require("vscode"),pe=ht(),Rh=xc(),e_=gh(),Ce=Oc();_h(Oc(),Xe);_h(yh(),Xe);var Dh="^1.67.0",_e;(function(n){n[n.stdio=0]="stdio",n[n.ipc=1]="ipc",n[n.pipe=2]="pipe",n[n.socket=3]="socket"})(_e=Xe.TransportKind||(Xe.TransportKind={}));var sn;(function(n){function e(t){let i=t;return i&&i.kind===_e.socket&&pe.number(i.port)}n.isSocket=e})(sn||(sn={}));var Mc;(function(n){function e(t){return pe.string(t.command)}n.is=e})(Mc||(Mc={}));var Hc;(function(n){function e(t){return pe.string(t.module)}n.is=e})(Hc||(Hc={}));var jc;(function(n){function e(t){let i=t;return i&&i.writer!==void 0&&i.reader!==void 0}n.is=e})(jc||(jc={}));var $c;(function(n){function e(t){let i=t;return i&&i.process!==void 0&&typeof i.detached=="boolean"}n.is=e})($c||($c={}));var Uc=class extends Rh.BaseLanguageClient{constructor(e,t,i,r,o){let s,c,u,f,g;pe.string(t)?(s=e,c=t,u=i,f=r,g=!!o):(s=e.toLowerCase(),c=e,u=t,f=i,g=r),g===void 0&&(g=!1),super(s,c,f),this._serverOptions=u,this._forceDebug=g,this._isInDebugMode=g;try{this.checkVersion()}catch(y){throw pe.string(y.message)&&this.outputChannel.appendLine(y.message),y}}checkVersion(){let e=Ch.parse(an.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${an.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!Ch.satisfies(e,Dh))throw new Error(`The language client requires VS Code version ${Dh} but received version ${an.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise(e=>setTimeout(e,1e3)),await this.start()):await this.start()}stop(e=2e3){return super.stop(e).finally(()=>{if(this._serverProcess){let t=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(t),this._isDetached=void 0}})}checkProcessDied(e){!e||e.pid===void 0||setTimeout(()=>{try{e.pid!==void 0&&(process.kill(e.pid,0),(0,e_.terminate)(e))}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function t(g,y){if(!g&&!y)return;let v=Object.create(null);return Object.keys(process.env).forEach(R=>v[R]=process.env[R]),y&&(v.ELECTRON_RUN_AS_NODE="1",v.ELECTRON_NO_ASAR="1"),g&&Object.keys(g).forEach(R=>v[R]=g[R]),v}let i=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],r=["--debug","--debug-brk","--inspect","--inspect-brk"];function o(){let g=process.execArgv;return g?g.some(y=>i.some(v=>y.startsWith(v))||r.some(v=>y===v)):!1}function s(g){if(g.stdin===null||g.stdout===null||g.stderr===null)throw new Error("Process created without stdio streams")}let c=this._serverOptions;if(pe.func(c))return c().then(g=>{if(Rh.MessageTransports.is(g))return this._isDetached=!!g.detached,g;if(jc.is(g))return this._isDetached=!!g.detached,{reader:new Ce.StreamMessageReader(g.reader),writer:new Ce.StreamMessageWriter(g.writer)};{let y;return $c.is(g)?(y=g.process,this._isDetached=g.detached):(y=g,this._isDetached=!1),y.stderr.on("data",v=>this.outputChannel.append(pe.string(v)?v:v.toString(e))),{reader:new Ce.StreamMessageReader(y.stdout),writer:new Ce.StreamMessageWriter(y.stdin)}}});let u,f=c;return f.run||f.debug?this._forceDebug||o()?(u=f.debug,this._isInDebugMode=!0):(u=f.run,this._isInDebugMode=!1):u=c,this._getServerWorkingDir(u.options).then(g=>{if(Hc.is(u)&&u.module){let y=u,v=y.transport||_e.stdio;if(y.runtime){let R=[],C=y.options??Object.create(null);C.execArgv&&C.execArgv.forEach(x=>R.push(x)),R.push(y.module),y.args&&y.args.forEach(x=>R.push(x));let q=Object.create(null);q.cwd=g,q.env=t(C.env,!1);let E=this._getRuntimePath(y.runtime,g),F;if(v===_e.ipc?(q.stdio=[null,null,null,"ipc"],R.push("--node-ipc")):v===_e.stdio?R.push("--stdio"):v===_e.pipe?(F=(0,Ce.generateRandomPipeName)(),R.push(`--pipe=${F}`)):sn.isSocket(v)&&R.push(`--socket=${v.port}`),R.push(`--clientProcessId=${process.pid.toString()}`),v===_e.ipc||v===_e.stdio){let x=Bt.spawn(E,R,q);return!x||!x.pid?ai(x,`Launching server using runtime ${E} failed.`):(this._serverProcess=x,x.stderr.on("data",N=>this.outputChannel.append(pe.string(N)?N:N.toString(e))),v===_e.ipc?(x.stdout.on("data",N=>this.outputChannel.append(pe.string(N)?N:N.toString(e))),Promise.resolve({reader:new Ce.IPCMessageReader(x),writer:new Ce.IPCMessageWriter(x)})):Promise.resolve({reader:new Ce.StreamMessageReader(x.stdout),writer:new Ce.StreamMessageWriter(x.stdin)}))}else{if(v===_e.pipe)return(0,Ce.createClientPipeTransport)(F).then(x=>{let N=Bt.spawn(E,R,q);return!N||!N.pid?ai(N,`Launching server using runtime ${E} failed.`):(this._serverProcess=N,N.stderr.on("data",L=>this.outputChannel.append(pe.string(L)?L:L.toString(e))),N.stdout.on("data",L=>this.outputChannel.append(pe.string(L)?L:L.toString(e))),x.onConnected().then(L=>({reader:L[0],writer:L[1]})))});if(sn.isSocket(v))return(0,Ce.createClientSocketTransport)(v.port).then(x=>{let N=Bt.spawn(E,R,q);return!N||!N.pid?ai(N,`Launching server using runtime ${E} failed.`):(this._serverProcess=N,N.stderr.on("data",L=>this.outputChannel.append(pe.string(L)?L:L.toString(e))),N.stdout.on("data",L=>this.outputChannel.append(pe.string(L)?L:L.toString(e))),x.onConnected().then(L=>({reader:L[0],writer:L[1]})))})}}else{let R;return new Promise((C,q)=>{let E=(y.args&&y.args.slice())??[];v===_e.ipc?E.push("--node-ipc"):v===_e.stdio?E.push("--stdio"):v===_e.pipe?(R=(0,Ce.generateRandomPipeName)(),E.push(`--pipe=${R}`)):sn.isSocket(v)&&E.push(`--socket=${v.port}`),E.push(`--clientProcessId=${process.pid.toString()}`);let F=y.options??Object.create(null);if(F.env=t(F.env,!0),F.execArgv=F.execArgv||[],F.cwd=g,F.silent=!0,v===_e.ipc||v===_e.stdio){let x=Bt.fork(y.module,E||[],F);s(x),this._serverProcess=x,x.stderr.on("data",N=>this.outputChannel.append(pe.string(N)?N:N.toString(e))),v===_e.ipc?(x.stdout.on("data",N=>this.outputChannel.append(pe.string(N)?N:N.toString(e))),C({reader:new Ce.IPCMessageReader(this._serverProcess),writer:new Ce.IPCMessageWriter(this._serverProcess)})):C({reader:new Ce.StreamMessageReader(x.stdout),writer:new Ce.StreamMessageWriter(x.stdin)})}else v===_e.pipe?(0,Ce.createClientPipeTransport)(R).then(x=>{let N=Bt.fork(y.module,E||[],F);s(N),this._serverProcess=N,N.stderr.on("data",L=>this.outputChannel.append(pe.string(L)?L:L.toString(e))),N.stdout.on("data",L=>this.outputChannel.append(pe.string(L)?L:L.toString(e))),x.onConnected().then(L=>{C({reader:L[0],writer:L[1]})},q)},q):sn.isSocket(v)&&(0,Ce.createClientSocketTransport)(v.port).then(x=>{let N=Bt.fork(y.module,E||[],F);s(N),this._serverProcess=N,N.stderr.on("data",L=>this.outputChannel.append(pe.string(L)?L:L.toString(e))),N.stdout.on("data",L=>this.outputChannel.append(pe.string(L)?L:L.toString(e))),x.onConnected().then(L=>{C({reader:L[0],writer:L[1]})},q)},q)})}}else if(Mc.is(u)&&u.command){let y=u,v=u.args!==void 0?u.args.slice(0):[],R,C=u.transport;if(C===_e.stdio)v.push("--stdio");else if(C===_e.pipe)R=(0,Ce.generateRandomPipeName)(),v.push(`--pipe=${R}`);else if(sn.isSocket(C))v.push(`--socket=${C.port}`);else if(C===_e.ipc)throw new Error("Transport kind ipc is not support for command executable");let q=Object.assign({},y.options);if(q.cwd=q.cwd||g,C===void 0||C===_e.stdio){let E=Bt.spawn(y.command,v,q);return!E||!E.pid?ai(E,`Launching server using command ${y.command} failed.`):(E.stderr.on("data",F=>this.outputChannel.append(pe.string(F)?F:F.toString(e))),this._serverProcess=E,this._isDetached=!!q.detached,Promise.resolve({reader:new Ce.StreamMessageReader(E.stdout),writer:new Ce.StreamMessageWriter(E.stdin)}))}else{if(C===_e.pipe)return(0,Ce.createClientPipeTransport)(R).then(E=>{let F=Bt.spawn(y.command,v,q);return!F||!F.pid?ai(F,`Launching server using command ${y.command} failed.`):(this._serverProcess=F,this._isDetached=!!q.detached,F.stderr.on("data",x=>this.outputChannel.append(pe.string(x)?x:x.toString(e))),F.stdout.on("data",x=>this.outputChannel.append(pe.string(x)?x:x.toString(e))),E.onConnected().then(x=>({reader:x[0],writer:x[1]})))});if(sn.isSocket(C))return(0,Ce.createClientSocketTransport)(C.port).then(E=>{let F=Bt.spawn(y.command,v,q);return!F||!F.pid?ai(F,`Launching server using command ${y.command} failed.`):(this._serverProcess=F,this._isDetached=!!q.detached,F.stderr.on("data",x=>this.outputChannel.append(pe.string(x)?x:x.toString(e))),F.stdout.on("data",x=>this.outputChannel.append(pe.string(x)?x:x.toString(e))),E.onConnected().then(x=>({reader:x[0],writer:x[1]})))})}}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(c,null,4)))})}_getRuntimePath(e,t){if(Ac.isAbsolute(e))return e;let i=this._mainGetRootPath();if(i!==void 0){let r=Ac.join(i,e);if(Lc.existsSync(r))return r}if(t!==void 0){let r=Ac.join(t,e);if(Lc.existsSync(r))return r}return e}_mainGetRootPath(){let e=an.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}_getServerWorkingDir(e){let t=e&&e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise(i=>{Lc.lstat(t,(r,o)=>{i(!r&&o.isDirectory()?t:void 0)})}):Promise.resolve(void 0)}getLocale(){let e=process.env.VSCODE_NLS_CONFIG;if(e===void 0)return"en";let t;try{t=JSON.parse(e)}catch{}return t===void 0||typeof t.locale!="string"?"en":t.locale}};Xe.LanguageClient=Uc;var Wc=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return an.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new an.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),t=e>=0?this._setting.substr(0,e):this._setting,i=e>=0?this._setting.substr(e+1):void 0,r=i?an.workspace.getConfiguration(t).get(i,!1):an.workspace.getConfiguration(t);r&&this._client.needsStart()?this._client.start().catch(o=>this._client.error("Start failed after configuration change",o,"force")):!r&&this._client.needsStop()&&this._client.stop().catch(o=>this._client.error("Stop failed after configuration change",o,"force"))}};Xe.SettingMonitor=Wc;function ai(n,e){return n===null?Promise.reject(e):new Promise((t,i)=>{n.on("error",r=>{i(`${e} ${r}`)}),setImmediate(()=>i(e))})}});module.exports=Sh();
