"use strict";var Qn=Object.defineProperty;var cc=Object.getOwnPropertyDescriptor;var uc=Object.getOwnPropertyNames;var lc=Object.prototype.hasOwnProperty;var hc=(n,e)=>()=>(n&&(e=n(n=0)),e);var M=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),dc=(n,e)=>{for(var t in e)Qn(n,t,{get:e[t],enumerable:!0})},fc=(n,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of uc(e))!lc.call(n,i)&&i!==t&&Qn(n,i,{get:()=>e[i],enumerable:!(s=cc(e,i))||s.enumerable});return n};var _c=n=>fc(Qn({},"__esModule",{value:!0}),n);var st=M((rn,$i)=>{(function(n,e){typeof rn=="object"&&typeof $i<"u"?e(rn):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.lumino_algorithm={}))})(rn,function(n){"use strict";n.ArrayExt=void 0,function(h){function _(w,E,p,f){p===void 0&&(p=0),f===void 0&&(f=-1);var m=w.length;if(m===0)return-1;p<0?p=Math.max(0,p+m):p=Math.min(p,m-1),f<0?f=Math.max(0,f+m):f=Math.min(f,m-1);var D;f<p?D=f+1+(m-p):D=f-p+1;for(var T=0;T<D;++T){var V=(p+T)%m;if(w[V]===E)return V}return-1}h.firstIndexOf=_;function C(w,E,p,f){p===void 0&&(p=-1),f===void 0&&(f=0);var m=w.length;if(m===0)return-1;p<0?p=Math.max(0,p+m):p=Math.min(p,m-1),f<0?f=Math.max(0,f+m):f=Math.min(f,m-1);var D;p<f?D=p+1+(m-f):D=p-f+1;for(var T=0;T<D;++T){var V=(p-T+m)%m;if(w[V]===E)return V}return-1}h.lastIndexOf=C;function k(w,E,p,f){p===void 0&&(p=0),f===void 0&&(f=-1);var m=w.length;if(m===0)return-1;p<0?p=Math.max(0,p+m):p=Math.min(p,m-1),f<0?f=Math.max(0,f+m):f=Math.min(f,m-1);var D;f<p?D=f+1+(m-p):D=f-p+1;for(var T=0;T<D;++T){var V=(p+T)%m;if(E(w[V],V))return V}return-1}h.findFirstIndex=k;function U(w,E,p,f){p===void 0&&(p=-1),f===void 0&&(f=0);var m=w.length;if(m===0)return-1;p<0?p=Math.max(0,p+m):p=Math.min(p,m-1),f<0?f=Math.max(0,f+m):f=Math.min(f,m-1);var D;p<f?D=p+1+(m-f):D=p-f+1;for(var T=0;T<D;++T){var V=(p-T+m)%m;if(E(w[V],V))return V}return-1}h.findLastIndex=U;function ee(w,E,p,f){p===void 0&&(p=0),f===void 0&&(f=-1);var m=k(w,E,p,f);return m!==-1?w[m]:void 0}h.findFirstValue=ee;function K(w,E,p,f){p===void 0&&(p=-1),f===void 0&&(f=0);var m=U(w,E,p,f);return m!==-1?w[m]:void 0}h.findLastValue=K;function B(w,E,p,f,m){f===void 0&&(f=0),m===void 0&&(m=-1);var D=w.length;if(D===0)return 0;f<0?f=Math.max(0,f+D):f=Math.min(f,D-1),m<0?m=Math.max(0,m+D):m=Math.min(m,D-1);for(var T=f,V=m-f+1;V>0;){var Ce=V>>1,It=T+Ce;p(w[It],E)<0?(T=It+1,V-=Ce+1):V=Ce}return T}h.lowerBound=B;function W(w,E,p,f,m){f===void 0&&(f=0),m===void 0&&(m=-1);var D=w.length;if(D===0)return 0;f<0?f=Math.max(0,f+D):f=Math.min(f,D-1),m<0?m=Math.max(0,m+D):m=Math.min(m,D-1);for(var T=f,V=m-f+1;V>0;){var Ce=V>>1,It=T+Ce;p(w[It],E)>0?V=Ce:(T=It+1,V-=Ce+1)}return T}h.upperBound=W;function $(w,E,p){if(w===E)return!0;if(w.length!==E.length)return!1;for(var f=0,m=w.length;f<m;++f)if(p?!p(w[f],E[f]):w[f]!==E[f])return!1;return!0}h.shallowEqual=$;function Z(w,E){E===void 0&&(E={});var p=E.start,f=E.stop,m=E.step;if(m===void 0&&(m=1),m===0)throw new Error("Slice `step` cannot be zero.");var D=w.length;p===void 0?p=m<0?D-1:0:p<0?p=Math.max(p+D,m<0?-1:0):p>=D&&(p=m<0?D-1:D),f===void 0?f=m<0?-1:D:f<0?f=Math.max(f+D,m<0?-1:0):f>=D&&(f=m<0?D-1:D);var T;m<0&&f>=p||m>0&&p>=f?T=0:m<0?T=Math.floor((f-p+1)/m+1):T=Math.floor((f-p-1)/m+1);for(var V=[],Ce=0;Ce<T;++Ce)V[Ce]=w[p+Ce*m];return V}h.slice=Z;function J(w,E,p){var f=w.length;if(!(f<=1)&&(E<0?E=Math.max(0,E+f):E=Math.min(E,f-1),p<0?p=Math.max(0,p+f):p=Math.min(p,f-1),E!==p)){for(var m=w[E],D=E<p?1:-1,T=E;T!==p;T+=D)w[T]=w[T+D];w[p]=m}}h.move=J;function ae(w,E,p){E===void 0&&(E=0),p===void 0&&(p=-1);var f=w.length;if(!(f<=1))for(E<0?E=Math.max(0,E+f):E=Math.min(E,f-1),p<0?p=Math.max(0,p+f):p=Math.min(p,f-1);E<p;){var m=w[E],D=w[p];w[E++]=D,w[p--]=m}}h.reverse=ae;function Me(w,E,p,f){p===void 0&&(p=0),f===void 0&&(f=-1);var m=w.length;if(!(m<=1)&&(p<0?p=Math.max(0,p+m):p=Math.min(p,m-1),f<0?f=Math.max(0,f+m):f=Math.min(f,m-1),!(p>=f))){var D=f-p+1;if(E>0?E=E%D:E<0&&(E=(E%D+D)%D),E!==0){var T=p+E;ae(w,p,T-1),ae(w,T,f),ae(w,p,f)}}}h.rotate=Me;function Pe(w,E,p,f){p===void 0&&(p=0),f===void 0&&(f=-1);var m=w.length;if(m!==0){p<0?p=Math.max(0,p+m):p=Math.min(p,m-1),f<0?f=Math.max(0,f+m):f=Math.min(f,m-1);var D;f<p?D=f+1+(m-p):D=f-p+1;for(var T=0;T<D;++T)w[(p+T)%m]=E}}h.fill=Pe;function tc(w,E,p){var f=w.length;E<0?E=Math.max(0,E+f):E=Math.min(E,f);for(var m=f;m>E;--m)w[m]=w[m-1];w[E]=p}h.insert=tc;function Rt(w,E){var p=w.length;if(E<0&&(E+=p),!(E<0||E>=p)){for(var f=w[E],m=E+1;m<p;++m)w[m-1]=w[m];return w.length=p-1,f}}h.removeAt=Rt;function nc(w,E,p,f){p===void 0&&(p=0),f===void 0&&(f=-1);var m=_(w,E,p,f);return m!==-1&&Rt(w,m),m}h.removeFirstOf=nc;function sc(w,E,p,f){p===void 0&&(p=-1),f===void 0&&(f=0);var m=C(w,E,p,f);return m!==-1&&Rt(w,m),m}h.removeLastOf=sc;function ic(w,E,p,f){p===void 0&&(p=0),f===void 0&&(f=-1);var m=w.length;if(m===0)return 0;p<0?p=Math.max(0,p+m):p=Math.min(p,m-1),f<0?f=Math.max(0,f+m):f=Math.min(f,m-1);for(var D=0,T=0;T<m;++T)p<=f&&T>=p&&T<=f&&w[T]===E||f<p&&(T<=f||T>=p)&&w[T]===E?D++:D>0&&(w[T-D]=w[T]);return D>0&&(w.length=m-D),D}h.removeAllOf=ic;function rc(w,E,p,f){p===void 0&&(p=0),f===void 0&&(f=-1);var m,D=k(w,E,p,f);return D!==-1&&(m=Rt(w,D)),{index:D,value:m}}h.removeFirstWhere=rc;function oc(w,E,p,f){p===void 0&&(p=-1),f===void 0&&(f=0);var m,D=U(w,E,p,f);return D!==-1&&(m=Rt(w,D)),{index:D,value:m}}h.removeLastWhere=oc;function ac(w,E,p,f){p===void 0&&(p=0),f===void 0&&(f=-1);var m=w.length;if(m===0)return 0;p<0?p=Math.max(0,p+m):p=Math.min(p,m-1),f<0?f=Math.max(0,f+m):f=Math.min(f,m-1);for(var D=0,T=0;T<m;++T)p<=f&&T>=p&&T<=f&&E(w[T],T)||f<p&&(T<=f||T>=p)&&E(w[T],T)?D++:D>0&&(w[T-D]=w[T]);return D>0&&(w.length=m-D),D}h.removeAllWhere=ac}(n.ArrayExt||(n.ArrayExt={}));function e(h){var _;return typeof h.iter=="function"?_=h.iter():_=new d(h),_}function t(h){return new g(h)}function s(h){return new y(h)}function i(h){return new v(h)}function r(h){return new b(h)}function o(h,_){for(var C=0,k=e(h),U;(U=k.next())!==void 0;)if(_(U,C++)===!1)return}function a(h,_){for(var C=0,k=e(h),U;(U=k.next())!==void 0;)if(!_(U,C++))return!1;return!0}function c(h,_){for(var C=0,k=e(h),U;(U=k.next())!==void 0;)if(_(U,C++))return!0;return!1}function u(h){for(var _=0,C=[],k=e(h),U;(U=k.next())!==void 0;)C[_++]=U;return C}function l(h){for(var _=e(h),C,k={};(C=_.next())!==void 0;)k[C[0]]=C[1];return k}var d=function(){function h(_){this._index=0,this._source=_}return h.prototype.iter=function(){return this},h.prototype.clone=function(){var _=new h(this._source);return _._index=this._index,_},h.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},h}(),g=function(){function h(_,C){C===void 0&&(C=Object.keys(_)),this._index=0,this._source=_,this._keys=C}return h.prototype.iter=function(){return this},h.prototype.clone=function(){var _=new h(this._source,this._keys);return _._index=this._index,_},h.prototype.next=function(){if(!(this._index>=this._keys.length)){var _=this._keys[this._index++];return _ in this._source?_:this.next()}},h}(),y=function(){function h(_,C){C===void 0&&(C=Object.keys(_)),this._index=0,this._source=_,this._keys=C}return h.prototype.iter=function(){return this},h.prototype.clone=function(){var _=new h(this._source,this._keys);return _._index=this._index,_},h.prototype.next=function(){if(!(this._index>=this._keys.length)){var _=this._keys[this._index++];return _ in this._source?this._source[_]:this.next()}},h}(),v=function(){function h(_,C){C===void 0&&(C=Object.keys(_)),this._index=0,this._source=_,this._keys=C}return h.prototype.iter=function(){return this},h.prototype.clone=function(){var _=new h(this._source,this._keys);return _._index=this._index,_},h.prototype.next=function(){if(!(this._index>=this._keys.length)){var _=this._keys[this._index++];return _ in this._source?[_,this._source[_]]:this.next()}},h}(),b=function(){function h(_){this._fn=_}return h.prototype.iter=function(){return this},h.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},h.prototype.next=function(){return this._fn.call(void 0)},h}();function I(){for(var h=[],_=0;_<arguments.length;_++)h[_]=arguments[_];return new O(e(h.map(e)))}var O=function(){function h(_){this._cloned=!1,this._source=_,this._active=void 0}return h.prototype.iter=function(){return this},h.prototype.clone=function(){var _=new h(this._source.clone());return _._active=this._active&&this._active.clone(),_._cloned=!0,this._cloned=!0,_},h.prototype.next=function(){if(this._active===void 0){var _=this._source.next();if(_===void 0)return;this._active=this._cloned?_.clone():_}var C=this._active.next();return C!==void 0?C:(this._active=void 0,this.next())},h}();function P(){return new R}var R=function(){function h(){}return h.prototype.iter=function(){return this},h.prototype.clone=function(){return new h},h.prototype.next=function(){},h}();function x(h,_){return _===void 0&&(_=0),new L(e(h),_)}var L=function(){function h(_,C){this._source=_,this._index=C}return h.prototype.iter=function(){return this},h.prototype.clone=function(){return new h(this._source.clone(),this._index)},h.prototype.next=function(){var _=this._source.next();if(_!==void 0)return[this._index++,_]},h}();function q(h,_){return new S(e(h),_)}var S=function(){function h(_,C){this._index=0,this._source=_,this._fn=C}return h.prototype.iter=function(){return this},h.prototype.clone=function(){var _=new h(this._source.clone(),this._fn);return _._index=this._index,_},h.prototype.next=function(){for(var _=this._fn,C=this._source,k;(k=C.next())!==void 0;)if(_(k,this._index++))return k},h}();function j(h,_){for(var C=0,k=e(h),U;(U=k.next())!==void 0;)if(_(U,C++))return U}function N(h,_){for(var C=0,k=e(h),U;(U=k.next())!==void 0;)if(_(U,C++))return C-1;return-1}function F(h,_){var C=e(h),k=C.next();if(k!==void 0){for(var U=k;(k=C.next())!==void 0;)_(k,U)<0&&(U=k);return U}}function me(h,_){var C=e(h),k=C.next();if(k!==void 0){for(var U=k;(k=C.next())!==void 0;)_(k,U)>0&&(U=k);return U}}function gt(h,_){var C=e(h),k=C.next();if(k!==void 0){for(var U=k,ee=k;(k=C.next())!==void 0;)_(k,U)<0?U=k:_(k,ee)>0&&(ee=k);return[U,ee]}}function $a(h,_){return new Bi(e(h),_)}var Bi=function(){function h(_,C){this._index=0,this._source=_,this._fn=C}return h.prototype.iter=function(){return this},h.prototype.clone=function(){var _=new h(this._source.clone(),this._fn);return _._index=this._index,_},h.prototype.next=function(){var _=this._source.next();if(_!==void 0)return this._fn.call(void 0,_,this._index++)},h}();function Ga(h,_,C){return _===void 0?new sn(0,h,1):C===void 0?new sn(h,_,1):new sn(h,_,C)}var sn=function(){function h(_,C,k){this._index=0,this._start=_,this._stop=C,this._step=k,this._length=Xn.rangeLength(_,C,k)}return h.prototype.iter=function(){return this},h.prototype.clone=function(){var _=new h(this._start,this._stop,this._step);return _._index=this._index,_},h.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},h}(),Xn;(function(h){function _(C,k,U){return U===0?1/0:C>k&&U>0||C<k&&U<0?0:Math.ceil((k-C)/U)}h.rangeLength=_})(Xn||(Xn={}));function Ha(h,_,C){var k=0,U=e(h),ee=U.next();if(ee===void 0&&C===void 0)throw new TypeError("Reduce of empty iterable with no initial value.");if(ee===void 0)return C;var K=U.next();if(K===void 0&&C===void 0)return ee;if(K===void 0)return _(C,ee,k++);var B;C===void 0?B=_(ee,K,k++):B=_(_(C,ee,k++),K,k++);for(var W;(W=U.next())!==void 0;)B=_(B,W,k++);return B}function za(h,_){return new Zn(h,_)}function Ja(h){return new Zn(h,1)}var Zn=function(){function h(_,C){this._value=_,this._count=C}return h.prototype.iter=function(){return this},h.prototype.clone=function(){return new h(this._value,this._count)},h.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},h}();function Ya(h){var _;return typeof h.retro=="function"?_=h.retro():_=new Fi(h),_}var Fi=function(){function h(_){this._source=_,this._index=_.length-1}return h.prototype.iter=function(){return this},h.prototype.clone=function(){var _=new h(this._source);return _._index=this._index,_},h.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},h}();function Xa(h){var _=[],C=new Set,k=new Map;return o(h,U),k.forEach(function(K,B){ee(B)}),_;function U(K){var B=K[0],W=K[1],$=k.get(W);$?$.push(B):k.set(W,[B])}function ee(K){if(!C.has(K)){C.add(K);var B=k.get(K);B&&B.forEach(ee),_.push(K)}}}function Za(h,_){return new Ki(e(h),_)}var Ki=function(){function h(_,C){this._source=_,this._step=C}return h.prototype.iter=function(){return this},h.prototype.clone=function(){return new h(this._source.clone(),this._step)},h.prototype.next=function(){for(var _=this._source.next(),C=this._step-1;C>0;--C)this._source.next();return _},h}();n.StringExt=void 0,function(h){function _(K,B,W){W===void 0&&(W=0);for(var $=new Array(B.length),Z=0,J=W,ae=B.length;Z<ae;++Z,++J){if(J=K.indexOf(B[Z],J),J===-1)return null;$[Z]=J}return $}h.findIndices=_;function C(K,B,W){W===void 0&&(W=0);var $=_(K,B,W);if(!$)return null;for(var Z=0,J=0,ae=$.length;J<ae;++J){var Me=$[J]-W;Z+=Me*Me}return{score:Z,indices:$}}h.matchSumOfSquares=C;function k(K,B,W){W===void 0&&(W=0);var $=_(K,B,W);if(!$)return null;for(var Z=0,J=W-1,ae=0,Me=$.length;ae<Me;++ae){var Pe=$[ae];Z+=Pe-J-1,J=Pe}return{score:Z,indices:$}}h.matchSumOfDeltas=k;function U(K,B,W){for(var $=[],Z=0,J=0,ae=B.length;Z<ae;){for(var Me=B[Z],Pe=B[Z];++Z<ae&&B[Z]===Pe+1;)Pe++;J<Me&&$.push(K.slice(J,Me)),Me<Pe+1&&$.push(W(K.slice(Me,Pe+1))),J=Pe+1}return J<K.length&&$.push(K.slice(J)),$}h.highlight=U;function ee(K,B){return K<B?-1:K>B?1:0}h.cmp=ee}(n.StringExt||(n.StringExt={}));function Qa(h,_){return new Vi(e(h),_)}var Vi=function(){function h(_,C){this._source=_,this._count=C}return h.prototype.iter=function(){return this},h.prototype.clone=function(){return new h(this._source.clone(),this._count)},h.prototype.next=function(){if(!(this._count<=0)){var _=this._source.next();if(_!==void 0)return this._count--,_}},h}();function ec(){for(var h=[],_=0;_<arguments.length;_++)h[_]=arguments[_];return new Wi(h.map(e))}var Wi=function(){function h(_){this._source=_}return h.prototype.iter=function(){return this},h.prototype.clone=function(){return new h(this._source.map(function(_){return _.clone()}))},h.prototype.next=function(){for(var _=new Array(this._source.length),C=0,k=this._source.length;C<k;++C){var U=this._source[C].next();if(U===void 0)return;_[C]=U}return _},h}();n.ArrayIterator=d,n.ChainIterator=O,n.EmptyIterator=R,n.EnumerateIterator=L,n.FilterIterator=S,n.FnIterator=b,n.ItemIterator=v,n.KeyIterator=g,n.MapIterator=Bi,n.RangeIterator=sn,n.RepeatIterator=Zn,n.RetroArrayIterator=Fi,n.StrideIterator=Ki,n.TakeIterator=Vi,n.ValueIterator=y,n.ZipIterator=Wi,n.chain=I,n.each=o,n.empty=P,n.enumerate=x,n.every=a,n.filter=q,n.find=j,n.findIndex=N,n.iter=e,n.iterFn=r,n.iterItems=i,n.iterKeys=t,n.iterValues=s,n.map=$a,n.max=me,n.min=F,n.minmax=gt,n.once=Ja,n.range=Ga,n.reduce=Ha,n.repeat=za,n.retro=Ya,n.some=c,n.stride=Za,n.take=Qa,n.toArray=u,n.toObject=l,n.topologicSort=Xa,n.zip=ec,Object.defineProperty(n,"__esModule",{value:!0})})});var es=M((on,Gi)=>{(function(n,e){typeof on=="object"&&typeof Gi<"u"?e(on):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.lumino_properties={}))})(on,function(n){"use strict";n.AttachedProperty=function(){function t(s){this._pid=e.nextPID(),this.name=s.name,this._create=s.create,this._coerce=s.coerce||null,this._compare=s.compare||null,this._changed=s.changed||null}return t.prototype.get=function(s){var i,r=e.ensureMap(s);return this._pid in r?i=r[this._pid]:i=r[this._pid]=this._createValue(s),i},t.prototype.set=function(s,i){var r,o=e.ensureMap(s);this._pid in o?r=o[this._pid]:r=o[this._pid]=this._createValue(s);var a=this._coerceValue(s,i);this._maybeNotify(s,r,o[this._pid]=a)},t.prototype.coerce=function(s){var i,r=e.ensureMap(s);this._pid in r?i=r[this._pid]:i=r[this._pid]=this._createValue(s);var o=this._coerceValue(s,i);this._maybeNotify(s,i,r[this._pid]=o)},t.prototype._createValue=function(s){var i=this._create;return i(s)},t.prototype._coerceValue=function(s,i){var r=this._coerce;return r?r(s,i):i},t.prototype._compareValue=function(s,i){var r=this._compare;return r?r(s,i):s===i},t.prototype._maybeNotify=function(s,i,r){var o=this._changed;o&&!this._compareValue(i,r)&&o(s,i,r)},t}(),function(t){function s(i){e.ownerData.delete(i)}t.clearData=s}(n.AttachedProperty||(n.AttachedProperty={}));var e;(function(t){t.ownerData=new WeakMap,t.nextPID=function(){var i=0;return function(){var r=Math.random(),o=(""+r).slice(2);return"pid-"+o+"-"+i++}}();function s(i){var r=t.ownerData.get(i);return r||(r=Object.create(null),t.ownerData.set(i,r),r)}t.ensureMap=s})(e||(e={})),Object.defineProperty(n,"__esModule",{value:!0})})});var te=M((an,Hi)=>{(function(n,e){typeof an=="object"&&typeof Hi<"u"?e(an,st(),es()):typeof define=="function"&&define.amd?define(["exports","@lumino/algorithm","@lumino/properties"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.lumino_signaling={},n.lumino_algorithm,n.lumino_properties))})(an,function(n,e,t){"use strict";n.Signal=function(){function i(r){this._blockedCount=0,this.sender=r}return i.prototype.block=function(r){this._blockedCount++;try{r()}finally{this._blockedCount--}},i.prototype.connect=function(r,o){return s.connect(this,r,o)},i.prototype.disconnect=function(r,o){return s.disconnect(this,r,o)},i.prototype.emit=function(r){this._blockedCount||s.emit(this,r)},i}(),function(i){function r(y,v){var b=s.blockedProperty;b.set(y,b.get(y)+1);try{v()}finally{b.set(y,b.get(y)-1)}}i.blockAll=r;function o(y,v){s.disconnectBetween(y,v)}i.disconnectBetween=o;function a(y){s.disconnectSender(y)}i.disconnectSender=a;function c(y){s.disconnectReceiver(y)}i.disconnectReceiver=c;function u(y){s.disconnectAll(y)}i.disconnectAll=u;function l(y){s.disconnectAll(y)}i.clearData=l;function d(){return s.exceptionHandler}i.getExceptionHandler=d;function g(y){var v=s.exceptionHandler;return s.exceptionHandler=y,v}i.setExceptionHandler=g}(n.Signal||(n.Signal={}));var s;(function(i){i.exceptionHandler=function(q){console.error(q)};function r(q,S,j){j=j||void 0;var N=g.get(q.sender);if(N||(N=[],g.set(q.sender,N)),I(N,q,S,j))return!1;var F=j||S,me=y.get(F);me||(me=[],y.set(F,me));var gt={signal:q,slot:S,thisArg:j};return N.push(gt),me.push(gt),!0}i.connect=r;function o(q,S,j){j=j||void 0;var N=g.get(q.sender);if(!N||N.length===0)return!1;var F=I(N,q,S,j);if(!F)return!1;var me=j||S,gt=y.get(me);return F.signal=null,P(N),P(gt),!0}i.disconnect=o;function a(q,S){var j=g.get(q);if(!(!j||j.length===0)){var N=y.get(S);!N||N.length===0||(e.each(N,function(F){F.signal&&F.signal.sender===q&&(F.signal=null)}),P(j),P(N))}}i.disconnectBetween=a;function c(q){var S=g.get(q);!S||S.length===0||(e.each(S,function(j){if(j.signal){var N=j.thisArg||j.slot;j.signal=null,P(y.get(N))}}),P(S))}i.disconnectSender=c;function u(q){var S=y.get(q);!S||S.length===0||(e.each(S,function(j){if(j.signal){var N=j.signal.sender;j.signal=null,P(g.get(N))}}),P(S))}i.disconnectReceiver=u;function l(q){c(q),u(q)}i.disconnectAll=l;function d(q,S){if(!(i.blockedProperty.get(q.sender)>0)){var j=g.get(q.sender);if(!(!j||j.length===0))for(var N=0,F=j.length;N<F;++N){var me=j[N];me.signal===q&&O(me,S)}}}i.emit=d;var g=new WeakMap,y=new WeakMap,v=new Set,b=function(){var q=typeof requestAnimationFrame=="function";return q?requestAnimationFrame:setImmediate}();function I(q,S,j,N){return e.find(q,function(F){return F.signal===S&&F.slot===j&&F.thisArg===N})}function O(q,S){var j=q.signal,N=q.slot,F=q.thisArg;try{N.call(F,j.sender,S)}catch(me){i.exceptionHandler(me)}}function P(q){v.size===0&&b(R),v.add(q)}function R(){v.forEach(x),v.clear()}function x(q){e.ArrayExt.removeAllWhere(q,L)}function L(q){return q.signal===null}i.blockedProperty=new t.AttachedProperty({name:"blocked",create:function(){return 0}})})(s||(s={})),Object.defineProperty(n,"__esModule",{value:!0})})});var Ji=M(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.ActivityMonitor=void 0;var zi=te(),ts=class{constructor(e){this._timer=-1,this._timeout=-1,this._isDisposed=!1,this._activityStopped=new zi.Signal(this),e.signal.connect(this._onSignalFired,this),this._timeout=e.timeout||1e3}get activityStopped(){return this._activityStopped}get timeout(){return this._timeout}set timeout(e){this._timeout=e}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,zi.Signal.clearData(this))}_onSignalFired(e,t){clearTimeout(this._timer),this._sender=e,this._args=t,this._timer=setTimeout(()=>{this._activityStopped.emit({sender:this._sender,args:this._args})},this._timeout)}};cn.ActivityMonitor=ts});var Xi=M(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0})});var Zi=M(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.MarkdownCodeBlocks=void 0;var pc;(function(n){n.CODE_BLOCK_MARKER="```";let e=[".markdown",".mdown",".mkdn",".md",".mkd",".mdwn",".mdtxt",".mdtext",".text",".txt",".Rmd"];class t{constructor(o){this.startLine=o,this.code="",this.endLine=-1}}n.MarkdownCodeBlock=t;function s(r){return e.indexOf(r)>-1}n.isMarkdown=s;function i(r){if(!r||r==="")return[];let o=r.split(`
`),a=[],c=null;for(let u=0;u<o.length;u++){let l=o[u],d=l.indexOf(n.CODE_BLOCK_MARKER)===0,g=c!=null;if(!(!d&&!g))if(g)c&&(d?(c.endLine=u-1,a.push(c),c=null):c.code+=l+`
`);else{c=new t(u);let y=l.indexOf(n.CODE_BLOCK_MARKER),v=l.lastIndexOf(n.CODE_BLOCK_MARKER);y!==v&&(c.code=l.substring(y+n.CODE_BLOCK_MARKER.length,v),c.endLine=u,a.push(c),c=null)}}return a}n.findMarkdownCodeBlocks=i})(pc=Dt.MarkdownCodeBlocks||(Dt.MarkdownCodeBlocks={}))});var Ee=M(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.JSONExt=void 0;(function(n){n.emptyObject=Object.freeze({}),n.emptyArray=Object.freeze([]);function e(l){return l===null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"}n.isPrimitive=e;function t(l){return Array.isArray(l)}n.isArray=t;function s(l){return!e(l)&&!t(l)}n.isObject=s;function i(l,d){if(l===d)return!0;if(e(l)||e(d))return!1;var g=t(l),y=t(d);return g!==y?!1:g&&y?o(l,d):a(l,d)}n.deepEqual=i;function r(l){return e(l)?l:t(l)?c(l):u(l)}n.deepCopy=r;function o(l,d){if(l===d)return!0;if(l.length!==d.length)return!1;for(var g=0,y=l.length;g<y;++g)if(!i(l[g],d[g]))return!1;return!0}function a(l,d){if(l===d)return!0;for(var g in l)if(l[g]!==void 0&&!(g in d))return!1;for(var g in d)if(d[g]!==void 0&&!(g in l))return!1;for(var g in l){var y=l[g],v=d[g];if(!(y===void 0&&v===void 0)&&(y===void 0||v===void 0||!i(y,v)))return!1}return!0}function c(l){for(var d=new Array(l.length),g=0,y=l.length;g<y;++g)d[g]=r(l[g]);return d}function u(l){var d={};for(var g in l){var y=l[g];y!==void 0&&(d[g]=r(y))}return d}})(ce.JSONExt||(ce.JSONExt={}));var gc=function(){function n(){this._types=[],this._values=[]}return n.prototype.types=function(){return this._types.slice()},n.prototype.hasData=function(e){return this._types.indexOf(e)!==-1},n.prototype.getData=function(e){var t=this._types.indexOf(e);return t!==-1?this._values[t]:void 0},n.prototype.setData=function(e,t){this.clearData(e),this._types.push(e),this._values.push(t)},n.prototype.clearData=function(e){var t=this._types.indexOf(e);t!==-1&&(this._types.splice(t,1),this._values.splice(t,1))},n.prototype.clear=function(){this._types.length=0,this._values.length=0},n}(),mc=function(){function n(){var e=this;this.promise=new Promise(function(t,s){e._resolve=t,e._reject=s})}return n.prototype.resolve=function(e){var t=this._resolve;t(e)},n.prototype.reject=function(e){var t=this._reject;t(e)},n}(),vc=function(){function n(e){this.name=e,this._tokenStructuralPropertyT=null}return n}();function yc(n){for(var e=0,t=0,s=n.length;t<s;++t)t%4===0&&(e=Math.random()*4294967295>>>0),n[t]=e&255,e>>>=8}ce.Random=void 0;(function(n){n.getRandomValues=function(){var e=typeof require<"u"&&require("crypto")||null;return e&&typeof e.randomFillSync=="function"?function(s){return e.randomFillSync(s)}:e&&typeof e.randomBytes=="function"?function(s){for(var i=e.randomBytes(s.length),r=0,o=i.length;r<o;++r)s[r]=i[r]}:yc}()})(ce.Random||(ce.Random={}));function Sc(n){for(var e=new Uint8Array(16),t=new Array(256),s=0;s<16;++s)t[s]="0"+s.toString(16);for(var s=16;s<256;++s)t[s]=s.toString(16);return function(){return n(e),e[6]=64|e[6]&15,e[8]=128|e[8]&63,t[e[0]]+t[e[1]]+t[e[2]]+t[e[3]]+"-"+t[e[4]]+t[e[5]]+"-"+t[e[6]]+t[e[7]]+"-"+t[e[8]]+t[e[9]]+"-"+t[e[10]]+t[e[11]]+t[e[12]]+t[e[13]]+t[e[14]]+t[e[15]]}}ce.UUID=void 0;(function(n){n.uuid4=Sc(ce.Random.getRandomValues)})(ce.UUID||(ce.UUID={}));ce.MimeData=gc;ce.PromiseDelegate=mc;ce.Token=vc});var nr=M((Zd,tr)=>{"use strict";function wc(n,e){var t=n;e.slice(0,-1).forEach(function(i){t=t[i]||{}});var s=e[e.length-1];return s in t}function Qi(n){return typeof n=="number"||/^0x[0-9a-f]+$/i.test(n)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(n)}function er(n,e){return e==="constructor"&&typeof n[e]=="function"||e==="__proto__"}tr.exports=function(n,e){e||(e={});var t={bools:{},strings:{},unknownFn:null};typeof e.unknown=="function"&&(t.unknownFn=e.unknown),typeof e.boolean=="boolean"&&e.boolean?t.allBools=!0:[].concat(e.boolean).filter(Boolean).forEach(function(x){t.bools[x]=!0});var s={};function i(x){return s[x].some(function(L){return t.bools[L]})}Object.keys(e.alias||{}).forEach(function(x){s[x]=[].concat(e.alias[x]),s[x].forEach(function(L){s[L]=[x].concat(s[x].filter(function(q){return L!==q}))})}),[].concat(e.string).filter(Boolean).forEach(function(x){t.strings[x]=!0,s[x]&&[].concat(s[x]).forEach(function(L){t.strings[L]=!0})});var r=e.default||{},o={_:[]};function a(x,L){return t.allBools&&/^--[^=]+$/.test(L)||t.strings[x]||t.bools[x]||s[x]}function c(x,L,q){for(var S=x,j=0;j<L.length-1;j++){var N=L[j];if(er(S,N))return;S[N]===void 0&&(S[N]={}),(S[N]===Object.prototype||S[N]===Number.prototype||S[N]===String.prototype)&&(S[N]={}),S[N]===Array.prototype&&(S[N]=[]),S=S[N]}var F=L[L.length-1];er(S,F)||((S===Object.prototype||S===Number.prototype||S===String.prototype)&&(S={}),S===Array.prototype&&(S=[]),S[F]===void 0||t.bools[F]||typeof S[F]=="boolean"?S[F]=q:Array.isArray(S[F])?S[F].push(q):S[F]=[S[F],q])}function u(x,L,q){if(!(q&&t.unknownFn&&!a(x,q)&&t.unknownFn(q)===!1)){var S=!t.strings[x]&&Qi(L)?Number(L):L;c(o,x.split("."),S),(s[x]||[]).forEach(function(j){c(o,j.split("."),S)})}}Object.keys(t.bools).forEach(function(x){u(x,r[x]===void 0?!1:r[x])});var l=[];n.indexOf("--")!==-1&&(l=n.slice(n.indexOf("--")+1),n=n.slice(0,n.indexOf("--")));for(var d=0;d<n.length;d++){var g=n[d],y,v;if(/^--.+=/.test(g)){var b=g.match(/^--([^=]+)=([\s\S]*)$/);y=b[1];var I=b[2];t.bools[y]&&(I=I!=="false"),u(y,I,g)}else if(/^--no-.+/.test(g))y=g.match(/^--no-(.+)/)[1],u(y,!1,g);else if(/^--.+/.test(g))y=g.match(/^--(.+)/)[1],v=n[d+1],v!==void 0&&!/^(-|--)[^-]/.test(v)&&!t.bools[y]&&!t.allBools&&(!s[y]||!i(y))?(u(y,v,g),d+=1):/^(true|false)$/.test(v)?(u(y,v==="true",g),d+=1):u(y,t.strings[y]?"":!0,g);else if(/^-[^-]+/.test(g)){for(var O=g.slice(1,-1).split(""),P=!1,R=0;R<O.length;R++){if(v=g.slice(R+2),v==="-"){u(O[R],v,g);continue}if(/[A-Za-z]/.test(O[R])&&v[0]==="="){u(O[R],v.slice(1),g),P=!0;break}if(/[A-Za-z]/.test(O[R])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(v)){u(O[R],v,g),P=!0;break}if(O[R+1]&&O[R+1].match(/\W/)){u(O[R],g.slice(R+2),g),P=!0;break}else u(O[R],t.strings[O[R]]?"":!0,g)}y=g.slice(-1)[0],!P&&y!=="-"&&(n[d+1]&&!/^(-|--)[^-]/.test(n[d+1])&&!t.bools[y]&&(!s[y]||!i(y))?(u(y,n[d+1],g),d+=1):n[d+1]&&/^(true|false)$/.test(n[d+1])?(u(y,n[d+1]==="true",g),d+=1):u(y,t.strings[y]?"":!0,g))}else if((!t.unknownFn||t.unknownFn(g)!==!1)&&o._.push(t.strings._||!Qi(g)?g:Number(g)),e.stopEarly){o._.push.apply(o._,n.slice(d+1));break}}return Object.keys(r).forEach(function(x){wc(o,x.split("."))||(c(o,x.split("."),r[x]),(s[x]||[]).forEach(function(L){c(o,L.split("."),r[x])}))}),e["--"]?o["--"]=l.slice():l.forEach(function(x){o._.push(x)}),o}});var ir=M((Qd,sr)=>{"use strict";sr.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return e!==80;case"https":case"wss":return e!==443;case"ftp":return e!==21;case"gopher":return e!==70;case"file":return!1}return e!==0}});var ar=M(ns=>{"use strict";var bc=Object.prototype.hasOwnProperty,Cc;function rr(n){try{return decodeURIComponent(n.replace(/\+/g," "))}catch{return null}}function or(n){try{return encodeURIComponent(n)}catch{return null}}function Ec(n){for(var e=/([^=?#&]+)=?([^&]*)/g,t={},s;s=e.exec(n);){var i=rr(s[1]),r=rr(s[2]);i===null||r===null||i in t||(t[i]=r)}return t}function Mc(n,e){e=e||"";var t=[],s,i;typeof e!="string"&&(e="?");for(i in n)if(bc.call(n,i)){if(s=n[i],!s&&(s===null||s===Cc||isNaN(s))&&(s=""),i=or(i),s=or(s),i===null||s===null)continue;t.push(i+"="+s)}return t.length?e+t.join("&"):""}ns.stringify=Mc;ns.parse=Ec});var pr=M((tf,_r)=>{"use strict";var ur=ir(),un=ar(),Oc=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,lr=/[\n\r\t]/g,Rc=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,hr=/:\d+$/,Ic=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,Dc=/^[a-zA-Z]:/;function is(n){return(n||"").toString().replace(Oc,"")}var ss=[["#","hash"],["?","query"],function(e,t){return xe(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],cr={hash:1,query:1};function dr(n){var e;typeof window<"u"?e=window:typeof global<"u"?e=global:typeof self<"u"?e=self:e={};var t=e.location||{};n=n||t;var s={},i=typeof n,r;if(n.protocol==="blob:")s=new ke(unescape(n.pathname),{});else if(i==="string"){s=new ke(n,{});for(r in cr)delete s[r]}else if(i==="object"){for(r in n)r in cr||(s[r]=n[r]);s.slashes===void 0&&(s.slashes=Rc.test(n.href))}return s}function xe(n){return n==="file:"||n==="ftp:"||n==="http:"||n==="https:"||n==="ws:"||n==="wss:"}function fr(n,e){n=is(n),n=n.replace(lr,""),e=e||{};var t=Ic.exec(n),s=t[1]?t[1].toLowerCase():"",i=!!t[2],r=!!t[3],o=0,a;return i?r?(a=t[2]+t[3]+t[4],o=t[2].length+t[3].length):(a=t[2]+t[4],o=t[2].length):r?(a=t[3]+t[4],o=t[3].length):a=t[4],s==="file:"?o>=2&&(a=a.slice(2)):xe(s)?a=t[4]:s?i&&(a=a.slice(2)):o>=2&&xe(e.protocol)&&(a=t[4]),{protocol:s,slashes:i||xe(s),slashesCount:o,rest:a}}function Pc(n,e){if(n==="")return e;for(var t=(e||"/").split("/").slice(0,-1).concat(n.split("/")),s=t.length,i=t[s-1],r=!1,o=0;s--;)t[s]==="."?t.splice(s,1):t[s]===".."?(t.splice(s,1),o++):o&&(s===0&&(r=!0),t.splice(s,1),o--);return r&&t.unshift(""),(i==="."||i==="..")&&t.push(""),t.join("/")}function ke(n,e,t){if(n=is(n),n=n.replace(lr,""),!(this instanceof ke))return new ke(n,e,t);var s,i,r,o,a,c,u=ss.slice(),l=typeof e,d=this,g=0;for(l!=="object"&&l!=="string"&&(t=e,e=null),t&&typeof t!="function"&&(t=un.parse),e=dr(e),i=fr(n||"",e),s=!i.protocol&&!i.slashes,d.slashes=i.slashes||s&&e.slashes,d.protocol=i.protocol||e.protocol||"",n=i.rest,(i.protocol==="file:"&&(i.slashesCount!==2||Dc.test(n))||!i.slashes&&(i.protocol||i.slashesCount<2||!xe(d.protocol)))&&(u[3]=[/(.*)/,"pathname"]);g<u.length;g++){if(o=u[g],typeof o=="function"){n=o(n,d);continue}r=o[0],c=o[1],r!==r?d[c]=n:typeof r=="string"?(a=r==="@"?n.lastIndexOf(r):n.indexOf(r),~a&&(typeof o[2]=="number"?(d[c]=n.slice(0,a),n=n.slice(a+o[2])):(d[c]=n.slice(a),n=n.slice(0,a)))):(a=r.exec(n))&&(d[c]=a[1],n=n.slice(0,a.index)),d[c]=d[c]||s&&o[3]&&e[c]||"",o[4]&&(d[c]=d[c].toLowerCase())}t&&(d.query=t(d.query)),s&&e.slashes&&d.pathname.charAt(0)!=="/"&&(d.pathname!==""||e.pathname!=="")&&(d.pathname=Pc(d.pathname,e.pathname)),d.pathname.charAt(0)!=="/"&&xe(d.protocol)&&(d.pathname="/"+d.pathname),ur(d.port,d.protocol)||(d.host=d.hostname,d.port=""),d.username=d.password="",d.auth&&(a=d.auth.indexOf(":"),~a?(d.username=d.auth.slice(0,a),d.username=encodeURIComponent(decodeURIComponent(d.username)),d.password=d.auth.slice(a+1),d.password=encodeURIComponent(decodeURIComponent(d.password))):d.username=encodeURIComponent(decodeURIComponent(d.auth)),d.auth=d.password?d.username+":"+d.password:d.username),d.origin=d.protocol!=="file:"&&xe(d.protocol)&&d.host?d.protocol+"//"+d.host:"null",d.href=d.toString()}function xc(n,e,t){var s=this;switch(n){case"query":typeof e=="string"&&e.length&&(e=(t||un.parse)(e)),s[n]=e;break;case"port":s[n]=e,ur(e,s.protocol)?e&&(s.host=s.hostname+":"+e):(s.host=s.hostname,s[n]="");break;case"hostname":s[n]=e,s.port&&(e+=":"+s.port),s.host=e;break;case"host":s[n]=e,hr.test(e)?(e=e.split(":"),s.port=e.pop(),s.hostname=e.join(":")):(s.hostname=e,s.port="");break;case"protocol":s.protocol=e.toLowerCase(),s.slashes=!t;break;case"pathname":case"hash":if(e){var i=n==="pathname"?"/":"#";s[n]=e.charAt(0)!==i?i+e:e}else s[n]=e;break;case"username":case"password":s[n]=encodeURIComponent(e);break;case"auth":var r=e.indexOf(":");~r?(s.username=e.slice(0,r),s.username=encodeURIComponent(decodeURIComponent(s.username)),s.password=e.slice(r+1),s.password=encodeURIComponent(decodeURIComponent(s.password))):s.username=encodeURIComponent(decodeURIComponent(e))}for(var o=0;o<ss.length;o++){var a=ss[o];a[4]&&(s[a[1]]=s[a[1]].toLowerCase())}return s.auth=s.password?s.username+":"+s.password:s.username,s.origin=s.protocol!=="file:"&&xe(s.protocol)&&s.host?s.protocol+"//"+s.host:"null",s.href=s.toString(),s}function kc(n){(!n||typeof n!="function")&&(n=un.stringify);var e,t=this,s=t.host,i=t.protocol;i&&i.charAt(i.length-1)!==":"&&(i+=":");var r=i+(t.protocol&&t.slashes||xe(t.protocol)?"//":"");return t.username?(r+=t.username,t.password&&(r+=":"+t.password),r+="@"):t.password?(r+=":"+t.password,r+="@"):t.protocol!=="file:"&&xe(t.protocol)&&!s&&t.pathname!=="/"&&(r+="@"),(s[s.length-1]===":"||hr.test(t.hostname)&&!t.port)&&(s+=":"),r+=s+t.pathname,e=typeof t.query=="object"?n(t.query):t.query,e&&(r+=e.charAt(0)!=="?"?"?"+e:e),t.hash&&(r+=t.hash),r}ke.prototype={set:xc,toString:kc};ke.extractProtocol=fr;ke.location=dr;ke.trimLeft=is;ke.qs=un;_r.exports=ke});var os=M(it=>{"use strict";var Tc=it&&it.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(it,"__esModule",{value:!0});it.URLExt=void 0;var qc=require("path"),rs=Tc(pr()),jc;(function(n){function e(u){if(typeof document<"u"&&document){let l=document.createElement("a");return l.href=u,l}return rs.default(u)}n.parse=e;function t(u){return rs.default(u).hostname}n.getHostName=t;function s(u){return u&&e(u).toString()}n.normalize=s;function i(...u){let l=rs.default(u[0],{}),d=`${l.protocol}${l.slashes?"//":""}${l.auth}${l.auth?"@":""}${l.host}`,g=qc.posix.join(`${d&&l.pathname[0]!=="/"?"/":""}${l.pathname}`,...u.slice(1));return`${d}${g==="."?"":g}`}n.join=i;function r(u){return i(...u.split("/").map(encodeURIComponent))}n.encodeParts=r;function o(u){let l=Object.keys(u).filter(d=>d.length>0);return l.length?"?"+l.map(d=>{let g=encodeURIComponent(String(u[d]));return d+(g?"="+g:"")}).join("&"):""}n.objectToQueryString=o;function a(u){return u.replace(/^\?/,"").split("&").reduce((l,d)=>{let[g,y]=d.split("=");return g.length>0&&(l[g]=decodeURIComponent(y||"")),l},{})}n.queryStringToObject=a;function c(u){let{protocol:l}=e(u);return(!l||u.toLowerCase().indexOf(l)!==0)&&u.indexOf("/")!==0}n.isLocal=c})(jc=it.URLExt||(it.URLExt={}))});var gr=M((exports,module)=>{"use strict";var __importDefault=exports&&exports.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(exports,"__esModule",{value:!0});exports.PageConfig=void 0;var coreutils_1=Ee(),minimist_1=__importDefault(nr()),url_1=os(),PageConfig;(function(PageConfig){function getOption(name){if(configData)return configData[name]||getBodyData(name);configData=Object.create(null);let found=!1;if(typeof document<"u"&&document){let n=document.getElementById("jupyter-config-data");n&&(configData=JSON.parse(n.textContent||""),found=!0)}if(!found&&typeof process<"u"&&process.argv)try{let cli=minimist_1.default(process.argv.slice(2)),path=require("path"),fullPath="";"jupyter-config-data"in cli?fullPath=path.resolve(cli["jupyter-config-data"]):"JUPYTER_CONFIG_DATA"in process.env&&(fullPath=path.resolve(process.env.JUPYTER_CONFIG_DATA)),fullPath&&(configData=eval("require")(fullPath))}catch(n){console.error(n)}if(!coreutils_1.JSONExt.isObject(configData))configData=Object.create(null);else for(let n in configData)typeof configData[n]!="string"&&(configData[n]=JSON.stringify(configData[n]));return configData[name]||getBodyData(name)}PageConfig.getOption=getOption;function setOption(n,e){let t=getOption(n);return configData[n]=e,t}PageConfig.setOption=setOption;function getBaseUrl(){return url_1.URLExt.normalize(getOption("baseUrl")||"/")}PageConfig.getBaseUrl=getBaseUrl;function getTreeUrl(){return url_1.URLExt.join(getBaseUrl(),getOption("treeUrl"))}PageConfig.getTreeUrl=getTreeUrl;function getShareUrl(){return url_1.URLExt.normalize(getOption("shareUrl")||getBaseUrl())}PageConfig.getShareUrl=getShareUrl;function getTreeShareUrl(){return url_1.URLExt.normalize(url_1.URLExt.join(getShareUrl(),getOption("treeUrl")))}PageConfig.getTreeShareUrl=getTreeShareUrl;function getUrl(n){var e,t,s;let i=getOption("baseUrl")||"/",r=(e=n.mode)!==null&&e!==void 0?e:getOption("mode"),o=(t=n.workspace)!==null&&t!==void 0?t:getOption("workspace"),a=r==="multiple-document"?"lab":"doc";i=url_1.URLExt.join(i,a),o!==PageConfig.defaultWorkspace&&(i=url_1.URLExt.join(i,"workspaces",encodeURIComponent(getOption("workspace"))));let c=(s=n.treePath)!==null&&s!==void 0?s:getOption("treePath");return c&&(i=url_1.URLExt.join(i,"tree",url_1.URLExt.encodeParts(c))),i}PageConfig.getUrl=getUrl,PageConfig.defaultWorkspace="default";function getWsUrl(n){let e=getOption("wsUrl");if(!e){if(n=n?url_1.URLExt.normalize(n):getBaseUrl(),n.indexOf("http")!==0)return"";e="ws"+n.slice(4)}return url_1.URLExt.normalize(e)}PageConfig.getWsUrl=getWsUrl;function getNBConvertURL({path:n,format:e,download:t}){let s=url_1.URLExt.encodeParts(n),i=url_1.URLExt.join(getBaseUrl(),"nbconvert",e,s);return t?i+"?download=true":i}PageConfig.getNBConvertURL=getNBConvertURL;function getToken(){return getOption("token")||getBodyData("jupyterApiToken")}PageConfig.getToken=getToken;function getNotebookVersion(){let n=getOption("notebookVersion");return n===""?[0,0,0]:JSON.parse(n)}PageConfig.getNotebookVersion=getNotebookVersion;let configData=null;function getBodyData(n){if(typeof document>"u"||!document.body)return"";let e=document.body.dataset[n];return typeof e>"u"?"":decodeURIComponent(e)}let Extension;(function(n){function e(i){try{let r=getOption(i);if(r)return JSON.parse(r)}catch(r){console.warn(`Unable to parse ${i}.`,r)}return[]}n.deferred=e("deferredExtensions"),n.disabled=e("disabledExtensions");function t(i){let r=i.indexOf(":"),o="";return r!==-1&&(o=i.slice(0,r)),n.deferred.some(a=>a===i||o&&a===o)}n.isDeferred=t;function s(i){let r=i.indexOf(":"),o="";return r!==-1&&(o=i.slice(0,r)),n.disabled.some(a=>a===i||o&&a===o)}n.isDisabled=s})(Extension=PageConfig.Extension||(PageConfig.Extension={}))})(PageConfig=exports.PageConfig||(exports.PageConfig={}))});var mr=M(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.PathExt=void 0;var rt=require("path"),Uc;(function(n){function e(...l){let d=rt.posix.join(...l);return d==="."?"":u(d)}n.join=e;function t(l,d){return rt.posix.basename(l,d)}n.basename=t;function s(l){let d=u(rt.posix.dirname(l));return d==="."?"":d}n.dirname=s;function i(l){return rt.posix.extname(l)}n.extname=i;function r(l){return l===""?"":u(rt.posix.normalize(l))}n.normalize=r;function o(...l){return u(rt.posix.resolve(...l))}n.resolve=o;function a(l,d){return u(rt.posix.relative(l,d))}n.relative=a;function c(l){return l.length>0&&l.indexOf(".")!==0&&(l=`.${l}`),l}n.normalizeExtension=c;function u(l){return l.indexOf("/")===0&&(l=l.slice(1)),l}n.removeSlash=u})(Uc=Pt.PathExt||(Pt.PathExt={}))});var vr=M(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.Text=void 0;var Nc;(function(n){let e=2>1;function t(o,a){if(e)return o;let c=o;for(let u=0;u+1<a.length&&u<o;u++){let l=a.charCodeAt(u);if(l>=55296&&l<=56319){let d=a.charCodeAt(u+1);d>=56320&&d<=57343&&(c--,u++)}}return c}n.jsIndexToCharIndex=t;function s(o,a){if(e)return o;let c=o;for(let u=0;u+1<a.length&&u<c;u++){let l=a.charCodeAt(u);if(l>=55296&&l<=56319){let d=a.charCodeAt(u+1);d>=56320&&d<=57343&&(c++,u++)}}return c}n.charIndexToJsIndex=s;function i(o,a=!1){return o.replace(/^(\w)|[\s-_:]+(\w)/g,function(c,u,l){return l?l.toUpperCase():a?u.toUpperCase():u.toLowerCase()})}n.camelCase=i;function r(o){return(o||"").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" ")}n.titleCase=r})(Nc=xt.Text||(xt.Text={}))});var yr={};dc(yr,{default:()=>Lc});function Lc(n){return{formatNow:()=>{try{return n.toLocaleString()}catch{return`${n}`}},format:()=>{try{return n.toLocaleTimeString()}catch{return`${n}`}}}}var Sr=hc(()=>{"use strict"});var wr=M(ot=>{"use strict";var Ac=ot&&ot.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ot,"__esModule",{value:!0});ot.Time=void 0;var as=Ac((Sr(),_c(yr))),Bc;(function(n){function e(s){as.default.locale(document.documentElement.lang);let i=as.default(s).fromNow();return i=i==="a few seconds ago"?"seconds ago":i,i}n.formatHuman=e;function t(s,i="YYYY-MM-DD HH:mm"){return as.default(s).format(i)}n.format=t})(Bc=ot.Time||(ot.Time={}))});var ue=M(pe=>{"use strict";var Fc=pe&&pe.__createBinding||(Object.create?function(n,e,t,s){s===void 0&&(s=t),Object.defineProperty(n,s,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}),ze=pe&&pe.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Fc(e,n,t)};Object.defineProperty(pe,"__esModule",{value:!0});ze(Ji(),pe);ze(Xi(),pe);ze(Zi(),pe);ze(gr(),pe);ze(mr(),pe);ze(vr(),pe);ze(wr(),pe);ze(os(),pe)});var br=M(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.ConfigWithDefaults=at.ConfigSection=void 0;var Kc=ue(),kt=Be(),Vc="api/config",Wc;(function(n){function e(t){let s=new cs(t);return s.load().then(()=>s)}n.create=e})(Wc=at.ConfigSection||(at.ConfigSection={}));var cs=class{constructor(e){var t;this._url="unknown";let s=this.serverSettings=(t=e.serverSettings)!==null&&t!==void 0?t:kt.ServerConnection.makeSettings();this._url=Kc.URLExt.join(s.baseUrl,Vc,encodeURIComponent(e.name))}get data(){return this._data}async load(){let e=await kt.ServerConnection.makeRequest(this._url,{},this.serverSettings);if(e.status!==200)throw await kt.ServerConnection.ResponseError.create(e);this._data=await e.json()}async update(e){this._data=Object.assign(Object.assign({},this._data),e);let t={method:"PATCH",body:JSON.stringify(e)},s=await kt.ServerConnection.makeRequest(this._url,t,this.serverSettings);if(s.status!==200)throw await kt.ServerConnection.ResponseError.create(s);return this._data=await s.json(),this._data}},us=class{constructor(e){var t,s;this._className="",this._section=e.section,this._defaults=(t=e.defaults)!==null&&t!==void 0?t:{},this._className=(s=e.className)!==null&&s!==void 0?s:""}get(e){let t=this._classData();return e in t?t[e]:this._defaults[e]}set(e,t){let s={};if(s[e]=t,this._className){let i={};return i[this._className]=s,this._section.update(i)}else return this._section.update(s)}_classData(){let e=this._section.data;return this._className&&this._className in e?e[this._className]:e}};at.ConfigWithDefaults=us});var Tt=M(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.validateProperty=void 0;function $c(n,e,t,s=[]){if(!n.hasOwnProperty(e))throw Error(`Missing property '${e}'`);let i=n[e];if(t!==void 0){let r=!0;switch(t){case"array":r=Array.isArray(i);break;case"object":r=typeof i<"u";break;default:r=typeof i===t}if(!r)throw new Error(`Property '${e}' is not of type '${t}'`);if(s.length>0){let o=!0;switch(t){case"string":case"number":case"boolean":o=s.includes(i);break;default:o=s.findIndex(a=>a===i)>=0;break}if(!o)throw new Error(`Property '${e}' is not one of the valid values ${JSON.stringify(s)}`)}}}ln.validateProperty=$c});var Cr=M(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.validateCheckpointModel=mt.validateContentsModel=void 0;var Te=Tt();function Gc(n){Te.validateProperty(n,"name","string"),Te.validateProperty(n,"path","string"),Te.validateProperty(n,"type","string"),Te.validateProperty(n,"created","string"),Te.validateProperty(n,"last_modified","string"),Te.validateProperty(n,"mimetype","object"),Te.validateProperty(n,"content","object"),Te.validateProperty(n,"format","object")}mt.validateContentsModel=Gc;function Hc(n){Te.validateProperty(n,"id","string"),Te.validateProperty(n,"last_modified","string")}mt.validateCheckpointModel=Hc});var ds=M(le=>{"use strict";var zc=le&&le.__createBinding||(Object.create?function(n,e,t,s){s===void 0&&(s=t),Object.defineProperty(n,s,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}),Jc=le&&le.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Yc=le&&le.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&zc(e,n,t);return Jc(e,n),e};Object.defineProperty(le,"__esModule",{value:!0});le.Drive=le.ContentsManager=le.Contents=void 0;var ve=ue(),Xc=st(),hn=te(),G=Be(),Fe=Yc(Cr()),Zc="api/contents",Qc="files",eu;(function(n){function e(s){Fe.validateContentsModel(s)}n.validateContentsModel=e;function t(s){Fe.validateCheckpointModel(s)}n.validateCheckpointModel=t})(eu=le.Contents||(le.Contents={}));var ls=class{constructor(e={}){var t,s;this._isDisposed=!1,this._additionalDrives=new Map,this._fileChanged=new hn.Signal(this);let i=this.serverSettings=(t=e.serverSettings)!==null&&t!==void 0?t:G.ServerConnection.makeSettings();this._defaultDrive=(s=e.defaultDrive)!==null&&s!==void 0?s:new dn({serverSettings:i}),this._defaultDrive.fileChanged.connect(this._onFileChanged,this)}get fileChanged(){return this._fileChanged}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,hn.Signal.clearData(this))}addDrive(e){this._additionalDrives.set(e.name,e),e.fileChanged.connect(this._onFileChanged,this)}getModelDBFactory(e){var t;let[s]=this._driveForPath(e);return(t=s?.modelDBFactory)!==null&&t!==void 0?t:null}localPath(e){let t=e.split("/"),s=t[0].split(":");return s.length===1||!this._additionalDrives.has(s[0])?ve.PathExt.removeSlash(e):ve.PathExt.join(s.slice(1).join(":"),...t.slice(1))}normalize(e){let t=e.split(":");return t.length===1?ve.PathExt.normalize(e):`${t[0]}:${ve.PathExt.normalize(t.slice(1).join(":"))}`}resolvePath(e,t){let s=this.driveName(e),i=this.localPath(e),r=ve.PathExt.resolve("/",i,t);return s?`${s}:${r}`:r}driveName(e){let s=e.split("/")[0].split(":");return s.length===1?"":this._additionalDrives.has(s[0])?s[0]:""}get(e,t){let[s,i]=this._driveForPath(e);return s.get(i,t).then(r=>{let o=[];return r.type==="directory"&&r.content?(Xc.each(r.content,a=>{o.push(Object.assign(Object.assign({},a),{path:this._toGlobalPath(s,a.path)}))}),Object.assign(Object.assign({},r),{path:this._toGlobalPath(s,i),content:o})):Object.assign(Object.assign({},r),{path:this._toGlobalPath(s,i)})})}getDownloadUrl(e){let[t,s]=this._driveForPath(e);return t.getDownloadUrl(s)}newUntitled(e={}){if(e.path){let t=this.normalize(e.path),[s,i]=this._driveForPath(t);return s.newUntitled(Object.assign(Object.assign({},e),{path:i})).then(r=>Object.assign(Object.assign({},r),{path:ve.PathExt.join(t,r.name)}))}else return this._defaultDrive.newUntitled(e)}delete(e){let[t,s]=this._driveForPath(e);return t.delete(s)}rename(e,t){let[s,i]=this._driveForPath(e),[r,o]=this._driveForPath(t);if(s!==r)throw Error("ContentsManager: renaming files must occur within a Drive");return s.rename(i,o).then(a=>Object.assign(Object.assign({},a),{path:this._toGlobalPath(s,o)}))}save(e,t={}){let s=this.normalize(e),[i,r]=this._driveForPath(e);return i.save(r,Object.assign(Object.assign({},t),{path:r})).then(o=>Object.assign(Object.assign({},o),{path:s}))}copy(e,t){let[s,i]=this._driveForPath(e),[r,o]=this._driveForPath(t);if(s===r)return s.copy(i,o).then(a=>Object.assign(Object.assign({},a),{path:this._toGlobalPath(s,a.path)}));throw Error("Copying files between drives is not currently implemented")}createCheckpoint(e){let[t,s]=this._driveForPath(e);return t.createCheckpoint(s)}listCheckpoints(e){let[t,s]=this._driveForPath(e);return t.listCheckpoints(s)}restoreCheckpoint(e,t){let[s,i]=this._driveForPath(e);return s.restoreCheckpoint(i,t)}deleteCheckpoint(e,t){let[s,i]=this._driveForPath(e);return s.deleteCheckpoint(i,t)}_toGlobalPath(e,t){return e===this._defaultDrive?ve.PathExt.removeSlash(t):`${e.name}:${ve.PathExt.removeSlash(t)}`}_driveForPath(e){let t=this.driveName(e),s=this.localPath(e);return t?[this._additionalDrives.get(t),s]:[this._defaultDrive,s]}_onFileChanged(e,t){var s,i;if(e===this._defaultDrive)this._fileChanged.emit(t);else{let r=null,o=null;!((s=t.newValue)===null||s===void 0)&&s.path&&(r=Object.assign(Object.assign({},t.newValue),{path:this._toGlobalPath(e,t.newValue.path)})),!((i=t.oldValue)===null||i===void 0)&&i.path&&(o=Object.assign(Object.assign({},t.oldValue),{path:this._toGlobalPath(e,t.oldValue.path)})),this._fileChanged.emit({type:t.type,newValue:r,oldValue:o})}}};le.ContentsManager=ls;var dn=class{constructor(e={}){var t,s,i;this._isDisposed=!1,this._fileChanged=new hn.Signal(this),this.name=(t=e.name)!==null&&t!==void 0?t:"Default",this._apiEndpoint=(s=e.apiEndpoint)!==null&&s!==void 0?s:Zc,this.serverSettings=(i=e.serverSettings)!==null&&i!==void 0?i:G.ServerConnection.makeSettings()}get fileChanged(){return this._fileChanged}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,hn.Signal.clearData(this))}async get(e,t){let s=this._getUrl(e);if(t){t.type==="notebook"&&delete t.format;let a=t.content?"1":"0",c=Object.assign(Object.assign({},t),{content:a});s+=ve.URLExt.objectToQueryString(c)}let i=this.serverSettings,r=await G.ServerConnection.makeRequest(s,{},i);if(r.status!==200)throw await G.ServerConnection.ResponseError.create(r);let o=await r.json();return Fe.validateContentsModel(o),o}getDownloadUrl(e){let t=this.serverSettings.baseUrl,s=ve.URLExt.join(t,Qc,ve.URLExt.encodeParts(e)),i=document.cookie.match("\\b_xsrf=([^;]*)\\b");if(i){let r=new URL(s);r.searchParams.append("_xsrf",i[1]),s=r.toString()}return Promise.resolve(s)}async newUntitled(e={}){var t;let s="{}";e&&(e.ext&&(e.ext=hs.normalizeExtension(e.ext)),s=JSON.stringify(e));let i=this.serverSettings,r=this._getUrl((t=e.path)!==null&&t!==void 0?t:""),o={method:"POST",body:s},a=await G.ServerConnection.makeRequest(r,o,i);if(a.status!==201)throw await G.ServerConnection.ResponseError.create(a);let c=await a.json();return Fe.validateContentsModel(c),this._fileChanged.emit({type:"new",oldValue:null,newValue:c}),c}async delete(e){let t=this._getUrl(e),s=this.serverSettings,i={method:"DELETE"},r=await G.ServerConnection.makeRequest(t,i,s);if(r.status!==204)throw await G.ServerConnection.ResponseError.create(r);this._fileChanged.emit({type:"delete",oldValue:{path:e},newValue:null})}async rename(e,t){let s=this.serverSettings,i=this._getUrl(e),r={method:"PATCH",body:JSON.stringify({path:t})},o=await G.ServerConnection.makeRequest(i,r,s);if(o.status!==200)throw await G.ServerConnection.ResponseError.create(o);let a=await o.json();return Fe.validateContentsModel(a),this._fileChanged.emit({type:"rename",oldValue:{path:e},newValue:a}),a}async save(e,t={}){let s=this.serverSettings,i=this._getUrl(e),r={method:"PUT",body:JSON.stringify(t)},o=await G.ServerConnection.makeRequest(i,r,s);if(o.status!==200&&o.status!==201)throw await G.ServerConnection.ResponseError.create(o);let a=await o.json();return Fe.validateContentsModel(a),this._fileChanged.emit({type:"save",oldValue:null,newValue:a}),a}async copy(e,t){let s=this.serverSettings,i=this._getUrl(t),r={method:"POST",body:JSON.stringify({copy_from:e})},o=await G.ServerConnection.makeRequest(i,r,s);if(o.status!==201)throw await G.ServerConnection.ResponseError.create(o);let a=await o.json();return Fe.validateContentsModel(a),this._fileChanged.emit({type:"new",oldValue:null,newValue:a}),a}async createCheckpoint(e){let t=this._getUrl(e,"checkpoints"),s={method:"POST"},i=await G.ServerConnection.makeRequest(t,s,this.serverSettings);if(i.status!==201)throw await G.ServerConnection.ResponseError.create(i);let r=await i.json();return Fe.validateCheckpointModel(r),r}async listCheckpoints(e){let t=this._getUrl(e,"checkpoints"),s=await G.ServerConnection.makeRequest(t,{},this.serverSettings);if(s.status!==200)throw await G.ServerConnection.ResponseError.create(s);let i=await s.json();if(!Array.isArray(i))throw new Error("Invalid Checkpoint list");for(let r=0;r<i.length;r++)Fe.validateCheckpointModel(i[r]);return i}async restoreCheckpoint(e,t){let s=this._getUrl(e,"checkpoints",t),i={method:"POST"},r=await G.ServerConnection.makeRequest(s,i,this.serverSettings);if(r.status!==204)throw await G.ServerConnection.ResponseError.create(r)}async deleteCheckpoint(e,t){let s=this._getUrl(e,"checkpoints",t),i={method:"DELETE"},r=await G.ServerConnection.makeRequest(s,i,this.serverSettings);if(r.status!==204)throw await G.ServerConnection.ResponseError.create(r)}_getUrl(...e){let t=e.map(i=>ve.URLExt.encodeParts(i)),s=this.serverSettings.baseUrl;return ve.URLExt.join(s,this._apiEndpoint,...t)}};le.Drive=dn;var hs;(function(n){function e(t){return t.length>0&&t.indexOf(".")!==0&&(t=`.${t}`),t}n.normalizeExtension=e})(hs||(hs={}))});var Mr=M(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0})});var vt=M(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.isInputReplyMsg=A.isInputRequestMsg=A.isDebugReplyMsg=A.isDebugRequestMsg=A.isExecuteReplyMsg=A.isInfoRequestMsg=A.isCommMsgMsg=A.isCommCloseMsg=A.isCommOpenMsg=A.isDebugEventMsg=A.isClearOutputMsg=A.isStatusMsg=A.isErrorMsg=A.isExecuteResultMsg=A.isExecuteInputMsg=A.isUpdateDisplayDataMsg=A.isDisplayDataMsg=A.isStreamMsg=A.createMessage=void 0;var tu=Ee();function nu(n){var e,t,s,i,r;return{buffers:(e=n.buffers)!==null&&e!==void 0?e:[],channel:n.channel,content:n.content,header:{date:new Date().toISOString(),msg_id:(t=n.msgId)!==null&&t!==void 0?t:tu.UUID.uuid4(),msg_type:n.msgType,session:n.session,username:(s=n.username)!==null&&s!==void 0?s:"",version:"5.2"},metadata:(i=n.metadata)!==null&&i!==void 0?i:{},parent_header:(r=n.parentHeader)!==null&&r!==void 0?r:{}}}A.createMessage=nu;function su(n){return n.header.msg_type==="stream"}A.isStreamMsg=su;function iu(n){return n.header.msg_type==="display_data"}A.isDisplayDataMsg=iu;function ru(n){return n.header.msg_type==="update_display_data"}A.isUpdateDisplayDataMsg=ru;function ou(n){return n.header.msg_type==="execute_input"}A.isExecuteInputMsg=ou;function au(n){return n.header.msg_type==="execute_result"}A.isExecuteResultMsg=au;function cu(n){return n.header.msg_type==="error"}A.isErrorMsg=cu;function uu(n){return n.header.msg_type==="status"}A.isStatusMsg=uu;function lu(n){return n.header.msg_type==="clear_output"}A.isClearOutputMsg=lu;function hu(n){return n.header.msg_type==="debug_event"}A.isDebugEventMsg=hu;function du(n){return n.header.msg_type==="comm_open"}A.isCommOpenMsg=du;function fu(n){return n.header.msg_type==="comm_close"}A.isCommCloseMsg=fu;function _u(n){return n.header.msg_type==="comm_msg"}A.isCommMsgMsg=_u;function pu(n){return n.header.msg_type==="kernel_info_request"}A.isInfoRequestMsg=pu;function gu(n){return n.header.msg_type==="execute_reply"}A.isExecuteReplyMsg=gu;function mu(n){return n.header.msg_type==="debug_request"}A.isDebugRequestMsg=mu;function vu(n){return n.header.msg_type==="debug_reply"}A.isDebugReplyMsg=vu;function yu(n){return n.header.msg_type==="input_request"}A.isInputRequestMsg=yu;function Su(n){return n.header.msg_type==="input_reply"}A.isInputReplyMsg=Su});var ct=M((_f,Or)=>{"use strict";Or.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}});var Kr=M((pf,Fr)=>{var Pr=require("fs"),Ke=require("path"),xr=require("os"),kr=typeof __webpack_require__=="function"?__non_webpack_require__:require,wu=process.config&&process.config.variables||{},bu=!!process.env.PREBUILDS_ONLY,Rr=process.versions.modules,fs=Mu()?"electron":Eu()?"node-webkit":"node",_s=process.env.npm_config_arch||xr.arch(),ps=process.env.npm_config_platform||xr.platform(),Tr=process.env.LIBC||(Ou(ps)?"musl":"glibc"),gs=process.env.ARM_VERSION||(_s==="arm64"?"8":wu.arm_version)||"",qr=(process.versions.uv||"").split(".")[0];Fr.exports=qe;function qe(n){return kr(qe.resolve(n))}qe.resolve=qe.path=function(n){n=Ke.resolve(n||".");try{var e=kr(Ke.join(n,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[e+"_PREBUILD"]&&(n=process.env[e+"_PREBUILD"])}catch{}if(!bu){var t=Ir(Ke.join(n,"build/Release"),Dr);if(t)return t;var s=Ir(Ke.join(n,"build/Debug"),Dr);if(s)return s}var i=a(n);if(i)return i;var r=a(Ke.dirname(process.execPath));if(r)return r;var o=["platform="+ps,"arch="+_s,"runtime="+fs,"abi="+Rr,"uv="+qr,gs?"armv="+gs:"","libc="+Tr,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"",typeof __webpack_require__=="function"?"webpack=true":""].filter(Boolean).join(" ");throw new Error("No native build was found for "+o+`
    loaded from: `+n+`
`);function a(c){var u=ms(Ke.join(c,"prebuilds")).map(jr),l=u.filter(Ur(ps,_s)).sort(Nr)[0];if(l){var d=Ke.join(c,"prebuilds",l.name),g=ms(d).map(Lr),y=g.filter(Ar(fs,Rr)),v=y.sort(Br(fs))[0];if(v)return Ke.join(d,v.file)}}};function ms(n){try{return Pr.readdirSync(n)}catch{return[]}}function Ir(n,e){var t=ms(n).filter(e);return t[0]&&Ke.join(n,t[0])}function Dr(n){return/\.node$/.test(n)}function jr(n){var e=n.split("-");if(e.length===2){var t=e[0],s=e[1].split("+");if(t&&s.length&&s.every(Boolean))return{name:n,platform:t,architectures:s}}}function Ur(n,e){return function(t){return t==null||t.platform!==n?!1:t.architectures.includes(e)}}function Nr(n,e){return n.architectures.length-e.architectures.length}function Lr(n){var e=n.split("."),t=e.pop(),s={file:n,specificity:0};if(t==="node"){for(var i=0;i<e.length;i++){var r=e[i];if(r==="node"||r==="electron"||r==="node-webkit")s.runtime=r;else if(r==="napi")s.napi=!0;else if(r.slice(0,3)==="abi")s.abi=r.slice(3);else if(r.slice(0,2)==="uv")s.uv=r.slice(2);else if(r.slice(0,4)==="armv")s.armv=r.slice(4);else if(r==="glibc"||r==="musl")s.libc=r;else continue;s.specificity++}return s}}function Ar(n,e){return function(t){return!(t==null||t.runtime!==n&&!Cu(t)||t.abi!==e&&!t.napi||t.uv&&t.uv!==qr||t.armv&&t.armv!==gs||t.libc&&t.libc!==Tr)}}function Cu(n){return n.runtime==="node"&&n.napi}function Br(n){return function(e,t){return e.runtime!==t.runtime?e.runtime===n?-1:1:e.abi!==t.abi?e.abi?-1:1:e.specificity!==t.specificity?e.specificity>t.specificity?-1:1:0}}function Eu(){return!!(process.versions&&process.versions.nw)}function Mu(){return process.versions&&process.versions.electron||process.env.ELECTRON_RUN_AS_NODE?!0:typeof window<"u"&&window.process&&window.process.type==="renderer"}function Ou(n){return n==="linux"&&Pr.existsSync("/etc/alpine-release")}qe.parseTags=Lr;qe.matchTags=Ar;qe.compareTags=Br;qe.parseTuple=jr;qe.matchTuple=Ur;qe.compareTuples=Nr});var ys=M((gf,vs)=>{typeof process.addon=="function"?vs.exports=process.addon.bind(process):vs.exports=Kr()});var Wr=M((mf,Vr)=>{"use strict";var Ru=(n,e,t,s,i)=>{for(var r=0;r<i;r++)t[s+r]=n[r]^e[r&3]},Iu=(n,e)=>{let t=n.length;for(var s=0;s<t;s++)n[s]^=e[s&3]};Vr.exports={mask:Ru,unmask:Iu}});var $r=M((vf,Ss)=>{"use strict";try{Ss.exports=ys()(__dirname)}catch{Ss.exports=Wr()}});var qt=M((yf,ws)=>{"use strict";var{EMPTY_BUFFER:Du}=ct();function Gr(n,e){if(n.length===0)return Du;if(n.length===1)return n[0];let t=Buffer.allocUnsafe(e),s=0;for(let i=0;i<n.length;i++){let r=n[i];t.set(r,s),s+=r.length}return s<e?t.slice(0,s):t}function Hr(n,e,t,s,i){for(let r=0;r<i;r++)t[s+r]=n[r]^e[r&3]}function zr(n,e){let t=n.length;for(let s=0;s<t;s++)n[s]^=e[s&3]}function Jr(n){return n.byteLength===n.buffer.byteLength?n.buffer:n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}function fn(n){if(fn.readOnly=!0,Buffer.isBuffer(n))return n;let e;return n instanceof ArrayBuffer?e=Buffer.from(n):ArrayBuffer.isView(n)?e=Buffer.from(n.buffer,n.byteOffset,n.byteLength):(e=Buffer.from(n),fn.readOnly=!1),e}try{let n=$r(),e=n.BufferUtil||n;ws.exports={concat:Gr,mask(t,s,i,r,o){o<48?Hr(t,s,i,r,o):e.mask(t,s,i,r,o)},toArrayBuffer:Jr,toBuffer:fn,unmask(t,s){t.length<32?zr(t,s):e.unmask(t,s)}}}catch{ws.exports={concat:Gr,mask:Hr,toArrayBuffer:Jr,toBuffer:fn,unmask:zr}}});var Zr=M((Sf,Xr)=>{"use strict";var Yr=Symbol("kDone"),bs=Symbol("kRun"),Cs=class{constructor(e){this[Yr]=()=>{this.pending--,this[bs]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[bs]()}[bs](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[Yr])}}};Xr.exports=Cs});var Nt=M((wf,no)=>{"use strict";var jt=require("zlib"),Qr=qt(),Pu=Zr(),{kStatusCode:eo,NOOP:xu}=ct(),ku=Buffer.from([0,0,255,255]),gn=Symbol("permessage-deflate"),Ve=Symbol("total-length"),Ut=Symbol("callback"),Je=Symbol("buffers"),pn=Symbol("error"),_n,Es=class{constructor(e,t,s){if(this._maxPayload=s|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!_n){let i=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;_n=new Pu(i)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[Ut];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let t=this._options,s=e.find(i=>!(t.serverNoContextTakeover===!1&&i.server_no_context_takeover||i.server_max_window_bits&&(t.serverMaxWindowBits===!1||typeof t.serverMaxWindowBits=="number"&&t.serverMaxWindowBits>i.server_max_window_bits)||typeof t.clientMaxWindowBits=="number"&&!i.client_max_window_bits));if(!s)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(s.server_no_context_takeover=!0),t.clientNoContextTakeover&&(s.client_no_context_takeover=!0),typeof t.serverMaxWindowBits=="number"&&(s.server_max_window_bits=t.serverMaxWindowBits),typeof t.clientMaxWindowBits=="number"?s.client_max_window_bits=t.clientMaxWindowBits:(s.client_max_window_bits===!0||t.clientMaxWindowBits===!1)&&delete s.client_max_window_bits,s}acceptAsClient(e){let t=e[0];if(this._options.clientNoContextTakeover===!1&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!t.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(t.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return t}normalizeParams(e){return e.forEach(t=>{Object.keys(t).forEach(s=>{let i=t[s];if(i.length>1)throw new Error(`Parameter "${s}" must have only a single value`);if(i=i[0],s==="client_max_window_bits"){if(i!==!0){let r=+i;if(!Number.isInteger(r)||r<8||r>15)throw new TypeError(`Invalid value for parameter "${s}": ${i}`);i=r}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${s}": ${i}`)}else if(s==="server_max_window_bits"){let r=+i;if(!Number.isInteger(r)||r<8||r>15)throw new TypeError(`Invalid value for parameter "${s}": ${i}`);i=r}else if(s==="client_no_context_takeover"||s==="server_no_context_takeover"){if(i!==!0)throw new TypeError(`Invalid value for parameter "${s}": ${i}`)}else throw new Error(`Unknown parameter "${s}"`);t[s]=i})}),e}decompress(e,t,s){_n.add(i=>{this._decompress(e,t,(r,o)=>{i(),s(r,o)})})}compress(e,t,s){_n.add(i=>{this._compress(e,t,(r,o)=>{i(),s(r,o)})})}_decompress(e,t,s){let i=this._isServer?"client":"server";if(!this._inflate){let r=`${i}_max_window_bits`,o=typeof this.params[r]!="number"?jt.Z_DEFAULT_WINDOWBITS:this.params[r];this._inflate=jt.createInflateRaw({...this._options.zlibInflateOptions,windowBits:o}),this._inflate[gn]=this,this._inflate[Ve]=0,this._inflate[Je]=[],this._inflate.on("error",qu),this._inflate.on("data",to)}this._inflate[Ut]=s,this._inflate.write(e),t&&this._inflate.write(ku),this._inflate.flush(()=>{let r=this._inflate[pn];if(r){this._inflate.close(),this._inflate=null,s(r);return}let o=Qr.concat(this._inflate[Je],this._inflate[Ve]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[Ve]=0,this._inflate[Je]=[],t&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),s(null,o)})}_compress(e,t,s){let i=this._isServer?"server":"client";if(!this._deflate){let r=`${i}_max_window_bits`,o=typeof this.params[r]!="number"?jt.Z_DEFAULT_WINDOWBITS:this.params[r];this._deflate=jt.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:o}),this._deflate[Ve]=0,this._deflate[Je]=[],this._deflate.on("error",xu),this._deflate.on("data",Tu)}this._deflate[Ut]=s,this._deflate.write(e),this._deflate.flush(jt.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let r=Qr.concat(this._deflate[Je],this._deflate[Ve]);t&&(r=r.slice(0,r.length-4)),this._deflate[Ut]=null,this._deflate[Ve]=0,this._deflate[Je]=[],t&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),s(null,r)})}};no.exports=Es;function Tu(n){this[Je].push(n),this[Ve]+=n.length}function to(n){if(this[Ve]+=n.length,this[gn]._maxPayload<1||this[Ve]<=this[gn]._maxPayload){this[Je].push(n);return}this[pn]=new RangeError("Max payload size exceeded"),this[pn].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[pn][eo]=1009,this.removeListener("data",to),this.reset()}function qu(n){this[gn]._inflate=null,n[eo]=1007,this[Ut](n)}});var io=M((bf,so)=>{"use strict";function ju(n){let e=n.length,t=0;for(;t<e;)if(!(n[t]&128))t++;else if((n[t]&224)===192){if(t+1===e||(n[t+1]&192)!==128||(n[t]&254)===192)return!1;t+=2}else if((n[t]&240)===224){if(t+2>=e||(n[t+1]&192)!==128||(n[t+2]&192)!==128||n[t]===224&&(n[t+1]&224)===128||n[t]===237&&(n[t+1]&224)===160)return!1;t+=3}else if((n[t]&248)===240){if(t+3>=e||(n[t+1]&192)!==128||(n[t+2]&192)!==128||(n[t+3]&192)!==128||n[t]===240&&(n[t+1]&240)===128||n[t]===244&&n[t+1]>143||n[t]>244)return!1;t+=4}else return!1;return!0}so.exports=ju});var ro=M((Cf,Ms)=>{"use strict";try{Ms.exports=ys()(__dirname)}catch{Ms.exports=io()}});var Rs=M((Ef,Os)=>{"use strict";function oo(n){return n>=1e3&&n<=1014&&n!==1004&&n!==1005&&n!==1006||n>=3e3&&n<=4999}function ao(n){let e=n.length,t=0;for(;t<e;)if(!(n[t]&128))t++;else if((n[t]&224)===192){if(t+1===e||(n[t+1]&192)!==128||(n[t]&254)===192)return!1;t+=2}else if((n[t]&240)===224){if(t+2>=e||(n[t+1]&192)!==128||(n[t+2]&192)!==128||n[t]===224&&(n[t+1]&224)===128||n[t]===237&&(n[t+1]&224)===160)return!1;t+=3}else if((n[t]&248)===240){if(t+3>=e||(n[t+1]&192)!==128||(n[t+2]&192)!==128||(n[t+3]&192)!==128||n[t]===240&&(n[t+1]&240)===128||n[t]===244&&n[t+1]>143||n[t]>244)return!1;t+=4}else return!1;return!0}try{let n=ro();typeof n=="object"&&(n=n.Validation.isValidUTF8),Os.exports={isValidStatusCode:oo,isValidUTF8(e){return e.length<150?ao(e):n(e)}}}catch{Os.exports={isValidStatusCode:oo,isValidUTF8:ao}}});var xs=M((Mf,_o)=>{"use strict";var{Writable:Uu}=require("stream"),co=Nt(),{BINARY_TYPES:Nu,EMPTY_BUFFER:Lu,kStatusCode:Au,kWebSocket:Bu}=ct(),{concat:Is,toArrayBuffer:Fu,unmask:Ku}=qt(),{isValidStatusCode:Vu,isValidUTF8:uo}=Rs(),Lt=0,lo=1,ho=2,fo=3,Ds=4,Wu=5,Ps=class extends Uu{constructor(e,t,s,i){super(),this._binaryType=e||Nu[0],this[Bu]=void 0,this._extensions=t||{},this._isServer=!!s,this._maxPayload=i|0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=Lt,this._loop=!1}_write(e,t,s){if(this._opcode===8&&this._state==Lt)return s();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(s)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let s=this._buffers[0];return this._buffers[0]=s.slice(e),s.slice(0,e)}let t=Buffer.allocUnsafe(e);do{let s=this._buffers[0],i=t.length-e;e>=s.length?t.set(this._buffers.shift(),i):(t.set(new Uint8Array(s.buffer,s.byteOffset,e),i),this._buffers[0]=s.slice(e)),e-=s.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do switch(this._state){case Lt:t=this.getInfo();break;case lo:t=this.getPayloadLength16();break;case ho:t=this.getPayloadLength64();break;case fo:this.getMask();break;case Ds:t=this.getData(e);break;default:this._loop=!1;return}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}let e=this.consume(2);if(e[0]&48)return this._loop=!1,Y(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");let t=(e[0]&64)===64;if(t&&!this._extensions[co.extensionName])return this._loop=!1,Y(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(e[0]&128)===128,this._opcode=e[0]&15,this._payloadLength=e[1]&127,this._opcode===0){if(t)return this._loop=!1,Y(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,Y(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented)return this._loop=!1,Y(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=t}else if(this._opcode>7&&this._opcode<11){if(!this._fin)return this._loop=!1,Y(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(t)return this._loop=!1,Y(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,Y(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}else return this._loop=!1,Y(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(e[1]&128)===128,this._isServer){if(!this._masked)return this._loop=!1,Y(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,Y(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(this._payloadLength===126)this._state=lo;else if(this._payloadLength===127)this._state=ho;else return this.haveLength()}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}let e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,53-32)-1?(this._loop=!1,Y(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,Y(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=fo:this._state=Ds}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=Ds}getData(e){let t=Lu;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}t=this.consume(this._payloadLength),this._masked&&Ku(t,this._mask)}if(this._opcode>7)return this.controlMessage(t);if(this._compressed){this._state=Wu,this.decompress(t,e);return}return t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage()}decompress(e,t){this._extensions[co.extensionName].decompress(e,this._fin,(i,r)=>{if(i)return t(i);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(Y(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(r)}let o=this.dataMessage();if(o)return t(o);this.startLoop(t)})}dataMessage(){if(this._fin){let e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let s;this._binaryType==="nodebuffer"?s=Is(t,e):this._binaryType==="arraybuffer"?s=Fu(Is(t,e)):s=t,this.emit("message",s)}else{let s=Is(t,e);if(!uo(s))return this._loop=!1,Y(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",s.toString())}}this._state=Lt}controlMessage(e){if(this._opcode===8)if(this._loop=!1,e.length===0)this.emit("conclude",1005,""),this.end();else{if(e.length===1)return Y(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");{let t=e.readUInt16BE(0);if(!Vu(t))return Y(RangeError,`invalid status code ${t}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");let s=e.slice(2);if(!uo(s))return Y(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",t,s.toString()),this.end()}}else this._opcode===9?this.emit("ping",e):this.emit("pong",e);this._state=Lt}};_o.exports=Ps;function Y(n,e,t,s,i){let r=new n(t?`Invalid WebSocket frame: ${e}`:e);return Error.captureStackTrace(r,Y),r.code=i,r[Au]=s,r}});var Ts=M((If,mo)=>{"use strict";var Of=require("net"),Rf=require("tls"),{randomFillSync:$u}=require("crypto"),po=Nt(),{EMPTY_BUFFER:Gu}=ct(),{isValidStatusCode:Hu}=Rs(),{mask:go,toBuffer:We}=qt(),ut=Buffer.alloc(4),ks=class n{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){let s=t.mask&&t.readOnly,i=t.mask?6:2,r=e.length;e.length>=65536?(i+=8,r=127):e.length>125&&(i+=2,r=126);let o=Buffer.allocUnsafe(s?e.length+i:i);return o[0]=t.fin?t.opcode|128:t.opcode,t.rsv1&&(o[0]|=64),o[1]=r,r===126?o.writeUInt16BE(e.length,2):r===127&&(o.writeUInt32BE(0,2),o.writeUInt32BE(e.length,6)),t.mask?($u(ut,0,4),o[1]|=128,o[i-4]=ut[0],o[i-3]=ut[1],o[i-2]=ut[2],o[i-1]=ut[3],s?(go(e,ut,o,i,e.length),[o]):(go(e,ut,e,0,e.length),[o,e])):[o,e]}close(e,t,s,i){let r;if(e===void 0)r=Gu;else{if(typeof e!="number"||!Hu(e))throw new TypeError("First argument must be a valid error code number");if(t===void 0||t==="")r=Buffer.allocUnsafe(2),r.writeUInt16BE(e,0);else{let o=Buffer.byteLength(t);if(o>123)throw new RangeError("The message must not be greater than 123 bytes");r=Buffer.allocUnsafe(2+o),r.writeUInt16BE(e,0),r.write(t,2)}}this._deflating?this.enqueue([this.doClose,r,s,i]):this.doClose(r,s,i)}doClose(e,t,s){this.sendFrame(n.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),s)}ping(e,t,s){let i=We(e);if(i.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,i,t,We.readOnly,s]):this.doPing(i,t,We.readOnly,s)}doPing(e,t,s,i){this.sendFrame(n.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:s}),i)}pong(e,t,s){let i=We(e);if(i.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,i,t,We.readOnly,s]):this.doPong(i,t,We.readOnly,s)}doPong(e,t,s,i){this.sendFrame(n.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:s}),i)}send(e,t,s){let i=We(e),r=this._extensions[po.extensionName],o=t.binary?2:1,a=t.compress;if(this._firstFragment?(this._firstFragment=!1,a&&r&&(a=i.length>=r._threshold),this._compress=a):(a=!1,o=0),t.fin&&(this._firstFragment=!0),r){let c={fin:t.fin,rsv1:a,opcode:o,mask:t.mask,readOnly:We.readOnly};this._deflating?this.enqueue([this.dispatch,i,this._compress,c,s]):this.dispatch(i,this._compress,c,s)}else this.sendFrame(n.frame(i,{fin:t.fin,rsv1:!1,opcode:o,mask:t.mask,readOnly:We.readOnly}),s)}dispatch(e,t,s,i){if(!t){this.sendFrame(n.frame(e,s),i);return}let r=this._extensions[po.extensionName];this._bufferedBytes+=e.length,this._deflating=!0,r.compress(e,s.fin,(o,a)=>{if(this._socket.destroyed){let c=new Error("The socket was closed while data was being compressed");typeof i=="function"&&i(c);for(let u=0;u<this._queue.length;u++){let l=this._queue[u][4];typeof l=="function"&&l(c)}return}this._bufferedBytes-=e.length,this._deflating=!1,s.readOnly=!1,this.sendFrame(n.frame(a,s),i),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[1].length,Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}};mo.exports=ks});var yo=M((Df,vo)=>{"use strict";var yt=class{constructor(e,t){this.target=t,this.type=e}},qs=class extends yt{constructor(e,t){super("message",t),this.data=e}},js=class extends yt{constructor(e,t,s){super("close",s),this.wasClean=s._closeFrameReceived&&s._closeFrameSent,this.reason=t,this.code=e}},Us=class extends yt{constructor(e){super("open",e)}},Ns=class extends yt{constructor(e,t){super("error",t),this.message=e.message,this.error=e}},zu={addEventListener(n,e,t){if(typeof e!="function")return;function s(c){e.call(this,new qs(c,this))}function i(c,u){e.call(this,new js(c,u,this))}function r(c){e.call(this,new Ns(c,this))}function o(){e.call(this,new Us(this))}let a=t&&t.once?"once":"on";n==="message"?(s._listener=e,this[a](n,s)):n==="close"?(i._listener=e,this[a](n,i)):n==="error"?(r._listener=e,this[a](n,r)):n==="open"?(o._listener=e,this[a](n,o)):this[a](n,e)},removeEventListener(n,e){let t=this.listeners(n);for(let s=0;s<t.length;s++)(t[s]===e||t[s]._listener===e)&&this.removeListener(n,t[s])}};vo.exports=zu});var Ls=M((Pf,So)=>{"use strict";var At=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function je(n,e,t){n[e]===void 0?n[e]=[t]:n[e].push(t)}function Ju(n){let e=Object.create(null);if(n===void 0||n==="")return e;let t=Object.create(null),s=!1,i=!1,r=!1,o,a,c=-1,u=-1,l=0;for(;l<n.length;l++){let g=n.charCodeAt(l);if(o===void 0)if(u===-1&&At[g]===1)c===-1&&(c=l);else if(g===32||g===9)u===-1&&c!==-1&&(u=l);else if(g===59||g===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${l}`);u===-1&&(u=l);let y=n.slice(c,u);g===44?(je(e,y,t),t=Object.create(null)):o=y,c=u=-1}else throw new SyntaxError(`Unexpected character at index ${l}`);else if(a===void 0)if(u===-1&&At[g]===1)c===-1&&(c=l);else if(g===32||g===9)u===-1&&c!==-1&&(u=l);else if(g===59||g===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${l}`);u===-1&&(u=l),je(t,n.slice(c,u),!0),g===44&&(je(e,o,t),t=Object.create(null),o=void 0),c=u=-1}else if(g===61&&c!==-1&&u===-1)a=n.slice(c,l),c=u=-1;else throw new SyntaxError(`Unexpected character at index ${l}`);else if(i){if(At[g]!==1)throw new SyntaxError(`Unexpected character at index ${l}`);c===-1?c=l:s||(s=!0),i=!1}else if(r)if(At[g]===1)c===-1&&(c=l);else if(g===34&&c!==-1)r=!1,u=l;else if(g===92)i=!0;else throw new SyntaxError(`Unexpected character at index ${l}`);else if(g===34&&n.charCodeAt(l-1)===61)r=!0;else if(u===-1&&At[g]===1)c===-1&&(c=l);else if(c!==-1&&(g===32||g===9))u===-1&&(u=l);else if(g===59||g===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${l}`);u===-1&&(u=l);let y=n.slice(c,u);s&&(y=y.replace(/\\/g,""),s=!1),je(t,a,y),g===44&&(je(e,o,t),t=Object.create(null),o=void 0),a=void 0,c=u=-1}else throw new SyntaxError(`Unexpected character at index ${l}`)}if(c===-1||r)throw new SyntaxError("Unexpected end of input");u===-1&&(u=l);let d=n.slice(c,u);return o===void 0?je(e,d,t):(a===void 0?je(t,d,!0):s?je(t,a,d.replace(/\\/g,"")):je(t,a,d),je(e,o,t)),e}function Yu(n){return Object.keys(n).map(e=>{let t=n[e];return Array.isArray(t)||(t=[t]),t.map(s=>[e].concat(Object.keys(s).map(i=>{let r=s[i];return Array.isArray(r)||(r=[r]),r.map(o=>o===!0?i:`${i}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}So.exports={format:Yu,parse:Ju}});var Ws=M((kf,Po)=>{"use strict";var Xu=require("events"),Zu=require("https"),Qu=require("http"),Co=require("net"),el=require("tls"),{randomBytes:tl,createHash:nl}=require("crypto"),{Readable:xf}=require("stream"),{URL:As}=require("url"),Ye=Nt(),sl=xs(),il=Ts(),{BINARY_TYPES:wo,EMPTY_BUFFER:Bs,GUID:rl,kStatusCode:ol,kWebSocket:re,NOOP:Eo}=ct(),{addEventListener:al,removeEventListener:cl}=yo(),{format:ul,parse:ll}=Ls(),{toBuffer:hl}=qt(),$e=["CONNECTING","OPEN","CLOSING","CLOSED"],Fs=[8,13],dl=30*1e3,z=class n extends Xu{constructor(e,t,s){super(),this._binaryType=wo[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._extensions={},this._protocol="",this._readyState=n.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,Array.isArray(t)?t=t.join(", "):typeof t=="object"&&t!==null&&(s=t,t=void 0),Mo(this,e,t,s)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){wo.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get onclose(){}set onclose(e){}get onerror(){}set onerror(e){}get onopen(){}set onopen(e){}get onmessage(){}set onmessage(e){}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,s){let i=new sl(this.binaryType,this._extensions,this._isServer,s);this._sender=new il(e,this._extensions),this._receiver=i,this._socket=e,i[re]=this,e[re]=this,i.on("conclude",pl),i.on("drain",gl),i.on("error",ml),i.on("message",vl),i.on("ping",yl),i.on("pong",Sl),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",Ro),e.on("data",mn),e.on("end",Io),e.on("error",Do),this._readyState=n.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=n.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[Ye.extensionName]&&this._extensions[Ye.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=n.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==n.CLOSED){if(this.readyState===n.CONNECTING){let s="WebSocket was closed before the connection was established";return ye(this,this._req,s)}if(this.readyState===n.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=n.CLOSING,this._sender.close(e,t,!this._isServer,s=>{s||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),dl)}}ping(e,t,s){if(this.readyState===n.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(s=e,e=t=void 0):typeof t=="function"&&(s=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==n.OPEN){Vs(this,e,s);return}t===void 0&&(t=!this._isServer),this._sender.ping(e||Bs,t,s)}pong(e,t,s){if(this.readyState===n.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(s=e,e=t=void 0):typeof t=="function"&&(s=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==n.OPEN){Vs(this,e,s);return}t===void 0&&(t=!this._isServer),this._sender.pong(e||Bs,t,s)}send(e,t,s){if(this.readyState===n.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"&&(s=t,t={}),typeof e=="number"&&(e=e.toString()),this.readyState!==n.OPEN){Vs(this,e,s);return}let i={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[Ye.extensionName]||(i.compress=!1),this._sender.send(e||Bs,i,s)}terminate(){if(this.readyState!==n.CLOSED){if(this.readyState===n.CONNECTING){let e="WebSocket was closed before the connection was established";return ye(this,this._req,e)}this._socket&&(this._readyState=n.CLOSING,this._socket.destroy())}}};Object.defineProperty(z,"CONNECTING",{enumerable:!0,value:$e.indexOf("CONNECTING")});Object.defineProperty(z.prototype,"CONNECTING",{enumerable:!0,value:$e.indexOf("CONNECTING")});Object.defineProperty(z,"OPEN",{enumerable:!0,value:$e.indexOf("OPEN")});Object.defineProperty(z.prototype,"OPEN",{enumerable:!0,value:$e.indexOf("OPEN")});Object.defineProperty(z,"CLOSING",{enumerable:!0,value:$e.indexOf("CLOSING")});Object.defineProperty(z.prototype,"CLOSING",{enumerable:!0,value:$e.indexOf("CLOSING")});Object.defineProperty(z,"CLOSED",{enumerable:!0,value:$e.indexOf("CLOSED")});Object.defineProperty(z.prototype,"CLOSED",{enumerable:!0,value:$e.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","protocol","readyState","url"].forEach(n=>{Object.defineProperty(z.prototype,n,{enumerable:!0})});["open","error","close","message"].forEach(n=>{Object.defineProperty(z.prototype,`on${n}`,{enumerable:!0,get(){let e=this.listeners(n);for(let t=0;t<e.length;t++)if(e[t]._listener)return e[t]._listener},set(e){let t=this.listeners(n);for(let s=0;s<t.length;s++)t[s]._listener&&this.removeListener(n,t[s]);this.addEventListener(n,e)}})});z.prototype.addEventListener=al;z.prototype.removeEventListener=cl;Po.exports=z;function Mo(n,e,t,s){let i={protocolVersion:Fs[1],maxPayload:104857600,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...s,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0};if(!Fs.includes(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} (supported versions: ${Fs.join(", ")})`);let r;e instanceof As?(r=e,n._url=e.href):(r=new As(e),n._url=e);let o=r.protocol==="ws+unix:";if(!r.host&&(!o||!r.pathname)){let y=new Error(`Invalid URL: ${n.url}`);if(n._redirects===0)throw y;Ks(n,y);return}let a=r.protocol==="wss:"||r.protocol==="https:",c=a?443:80,u=tl(16).toString("base64"),l=a?Zu.get:Qu.get,d;if(i.createConnection=a?_l:fl,i.defaultPort=i.defaultPort||c,i.port=r.port||c,i.host=r.hostname.startsWith("[")?r.hostname.slice(1,-1):r.hostname,i.headers={"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":u,Connection:"Upgrade",Upgrade:"websocket",...i.headers},i.path=r.pathname+r.search,i.timeout=i.handshakeTimeout,i.perMessageDeflate&&(d=new Ye(i.perMessageDeflate!==!0?i.perMessageDeflate:{},!1,i.maxPayload),i.headers["Sec-WebSocket-Extensions"]=ul({[Ye.extensionName]:d.offer()})),t&&(i.headers["Sec-WebSocket-Protocol"]=t),i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),(r.username||r.password)&&(i.auth=`${r.username}:${r.password}`),o){let y=i.path.split(":");i.socketPath=y[0],i.path=y[1]}if(i.followRedirects){if(n._redirects===0){n._originalUnixSocket=o,n._originalSecure=a,n._originalHostOrSocketPath=o?i.socketPath:r.host;let y=s&&s.headers;if(s={...s,headers:{}},y)for(let[v,b]of Object.entries(y))s.headers[v.toLowerCase()]=b}else{let y=o?n._originalUnixSocket?i.socketPath===n._originalHostOrSocketPath:!1:n._originalUnixSocket?!1:r.host===n._originalHostOrSocketPath;(!y||n._originalSecure&&!a)&&(delete i.headers.authorization,delete i.headers.cookie,y||delete i.headers.host,i.auth=void 0)}i.auth&&!s.headers.authorization&&(s.headers.authorization="Basic "+Buffer.from(i.auth).toString("base64"))}let g=n._req=l(i);i.timeout&&g.on("timeout",()=>{ye(n,g,"Opening handshake has timed out")}),g.on("error",y=>{g===null||g.aborted||(g=n._req=null,Ks(n,y))}),g.on("response",y=>{let v=y.headers.location,b=y.statusCode;if(v&&i.followRedirects&&b>=300&&b<400){if(++n._redirects>i.maxRedirects){ye(n,g,"Maximum redirects exceeded");return}g.abort();let I;try{I=new As(v,e)}catch(O){Ks(n,O);return}Mo(n,I,t,s)}else n.emit("unexpected-response",g,y)||ye(n,g,`Unexpected server response: ${y.statusCode}`)}),g.on("upgrade",(y,v,b)=>{if(n.emit("upgrade",y),n.readyState!==z.CONNECTING)return;g=n._req=null;let I=y.headers.upgrade;if(I===void 0||I.toLowerCase()!=="websocket"){ye(n,v,"Invalid Upgrade header");return}let O=nl("sha1").update(u+rl).digest("base64");if(y.headers["sec-websocket-accept"]!==O){ye(n,v,"Invalid Sec-WebSocket-Accept header");return}let P=y.headers["sec-websocket-protocol"],R=(t||"").split(/, */),x;if(!t&&P?x="Server sent a subprotocol but none was requested":t&&!P?x="Server sent no subprotocol":P&&!R.includes(P)&&(x="Server sent an invalid subprotocol"),x){ye(n,v,x);return}P&&(n._protocol=P);let L=y.headers["sec-websocket-extensions"];if(L!==void 0){if(!d){ye(n,v,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let q;try{q=ll(L)}catch{ye(n,v,"Invalid Sec-WebSocket-Extensions header");return}let S=Object.keys(q);if(S.length){if(S.length!==1||S[0]!==Ye.extensionName){ye(n,v,"Server indicated an extension that was not requested");return}try{d.accept(q[Ye.extensionName])}catch{ye(n,v,"Invalid Sec-WebSocket-Extensions header");return}n._extensions[Ye.extensionName]=d}}n.setSocket(v,b,i.maxPayload)})}function Ks(n,e){n._readyState=z.CLOSING,n.emit("error",e),n.emitClose()}function fl(n){return n.path=n.socketPath,Co.connect(n)}function _l(n){return n.path=void 0,!n.servername&&n.servername!==""&&(n.servername=Co.isIP(n.host)?"":n.host),el.connect(n)}function ye(n,e,t){n._readyState=z.CLOSING;let s=new Error(t);Error.captureStackTrace(s,ye),e.setHeader?(e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),e.once("abort",n.emitClose.bind(n)),n.emit("error",s)):(e.destroy(s),e.once("error",n.emit.bind(n,"error")),e.once("close",n.emitClose.bind(n)))}function Vs(n,e,t){if(e){let s=hl(e).length;n._socket?n._sender._bufferedBytes+=s:n._bufferedAmount+=s}if(t){let s=new Error(`WebSocket is not open: readyState ${n.readyState} (${$e[n.readyState]})`);t(s)}}function pl(n,e){let t=this[re];t._closeFrameReceived=!0,t._closeMessage=e,t._closeCode=n,t._socket[re]!==void 0&&(t._socket.removeListener("data",mn),process.nextTick(Oo,t._socket),n===1005?t.close():t.close(n,e))}function gl(){this[re]._socket.resume()}function ml(n){let e=this[re];e._socket[re]!==void 0&&(e._socket.removeListener("data",mn),process.nextTick(Oo,e._socket),e.close(n[ol])),e.emit("error",n)}function bo(){this[re].emitClose()}function vl(n){this[re].emit("message",n)}function yl(n){let e=this[re];e.pong(n,!e._isServer,Eo),e.emit("ping",n)}function Sl(n){this[re].emit("pong",n)}function Oo(n){n.resume()}function Ro(){let n=this[re];this.removeListener("close",Ro),this.removeListener("data",mn),this.removeListener("end",Io),n._readyState=z.CLOSING;let e;!this._readableState.endEmitted&&!n._closeFrameReceived&&!n._receiver._writableState.errorEmitted&&(e=n._socket.read())!==null&&n._receiver.write(e),n._receiver.end(),this[re]=void 0,clearTimeout(n._closeTimer),n._receiver._writableState.finished||n._receiver._writableState.errorEmitted?n.emitClose():(n._receiver.on("error",bo),n._receiver.on("finish",bo))}function mn(n){this[re]._receiver.write(n)||this.pause()}function Io(){let n=this[re];n._readyState=z.CLOSING,n._receiver.end(),this.end()}function Do(){let n=this[re];this.removeListener("error",Do),this.on("error",Eo),n&&(n._readyState=z.CLOSING,this.destroy())}});var qo=M((Tf,To)=>{"use strict";var{Duplex:wl}=require("stream");function xo(n){n.emit("close")}function bl(){!this.destroyed&&this._writableState.finished&&this.destroy()}function ko(n){this.removeListener("error",ko),this.destroy(),this.listenerCount("error")===0&&this.emit("error",n)}function Cl(n,e){let t=!0,s=!0;function i(){t&&n._socket.resume()}n.readyState===n.CONNECTING?n.once("open",function(){n._receiver.removeAllListeners("drain"),n._receiver.on("drain",i)}):(n._receiver.removeAllListeners("drain"),n._receiver.on("drain",i));let r=new wl({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return n.on("message",function(a){r.push(a)||(t=!1,n._socket.pause())}),n.once("error",function(a){r.destroyed||(s=!1,r.destroy(a))}),n.once("close",function(){r.destroyed||r.push(null)}),r._destroy=function(o,a){if(n.readyState===n.CLOSED){a(o),process.nextTick(xo,r);return}let c=!1;n.once("error",function(l){c=!0,a(l)}),n.once("close",function(){c||a(o),process.nextTick(xo,r)}),s&&n.terminate()},r._final=function(o){if(n.readyState===n.CONNECTING){n.once("open",function(){r._final(o)});return}n._socket!==null&&(n._socket._writableState.finished?(o(),r._readableState.endEmitted&&r.destroy()):(n._socket.once("finish",function(){o()}),n.close()))},r._read=function(){(n.readyState===n.OPEN||n.readyState===n.CLOSING)&&!t&&(t=!0,n._receiver._writableState.needDrain||n._socket.resume())},r._write=function(o,a,c){if(n.readyState===n.CONNECTING){n.once("open",function(){r._write(o,a,c)});return}n.send(o,c)},r.on("end",bl),r.on("error",ko),r}To.exports=Cl});var Ao=M((Nf,Lo)=>{"use strict";var El=require("events"),vn=require("http"),qf=require("https"),jf=require("net"),Uf=require("tls"),{createHash:Ml}=require("crypto"),lt=Nt(),Ol=Ws(),{format:Rl,parse:Il}=Ls(),{GUID:Dl,kWebSocket:Pl}=ct(),xl=/^[+/0-9A-Za-z]{22}==$/,jo=0,Uo=1,No=2,Gs=class extends El{constructor(e,t){if(super(),e={maxPayload:100*1024*1024,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=vn.createServer((s,i)=>{let r=vn.STATUS_CODES[426];i.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),i.end(r)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){let s=this.emit.bind(this,"connection");this._removeListeners=kl(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(i,r,o)=>{this.handleUpgrade(i,r,o,s)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e,this._state=jo}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(e&&this.once("close",e),this._state===No){process.nextTick($s,this);return}if(this._state===Uo)return;if(this._state=Uo,this.clients)for(let s of this.clients)s.terminate();let t=this._server;if(t&&(this._removeListeners(),this._removeListeners=this._server=null,this.options.port!=null)){t.close($s.bind(void 0,this));return}process.nextTick($s,this)}shouldHandle(e){if(this.options.path){let t=e.url.indexOf("?");if((t!==-1?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,s,i){t.on("error",Hs);let r=e.headers["sec-websocket-key"]!==void 0?e.headers["sec-websocket-key"].trim():!1,o=e.headers.upgrade,a=+e.headers["sec-websocket-version"],c={};if(e.method!=="GET"||o===void 0||o.toLowerCase()!=="websocket"||!r||!xl.test(r)||a!==8&&a!==13||!this.shouldHandle(e))return Bt(t,400);if(this.options.perMessageDeflate){let u=new lt(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let l=Il(e.headers["sec-websocket-extensions"]);l[lt.extensionName]&&(u.accept(l[lt.extensionName]),c[lt.extensionName]=u)}catch{return Bt(t,400)}}if(this.options.verifyClient){let u={origin:e.headers[`${a===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(u,(l,d,g,y)=>{if(!l)return Bt(t,d||401,g,y);this.completeUpgrade(r,c,e,t,s,i)});return}if(!this.options.verifyClient(u))return Bt(t,401)}this.completeUpgrade(r,c,e,t,s,i)}completeUpgrade(e,t,s,i,r,o){if(!i.readable||!i.writable)return i.destroy();if(i[Pl])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>jo)return Bt(i,503);let c=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${Ml("sha1").update(e+Dl).digest("base64")}`],u=new Ol(null),l=s.headers["sec-websocket-protocol"];if(l&&(l=l.split(",").map(Tl),this.options.handleProtocols?l=this.options.handleProtocols(l,s):l=l[0],l&&(c.push(`Sec-WebSocket-Protocol: ${l}`),u._protocol=l)),t[lt.extensionName]){let d=t[lt.extensionName].params,g=Rl({[lt.extensionName]:[d]});c.push(`Sec-WebSocket-Extensions: ${g}`),u._extensions=t}this.emit("headers",c,s),i.write(c.concat(`\r
`).join(`\r
`)),i.removeListener("error",Hs),u.setSocket(i,r,this.options.maxPayload),this.clients&&(this.clients.add(u),u.on("close",()=>this.clients.delete(u))),o(u,s)}};Lo.exports=Gs;function kl(n,e){for(let t of Object.keys(e))n.on(t,e[t]);return function(){for(let s of Object.keys(e))n.removeListener(s,e[s])}}function $s(n){n._state=No,n.emit("close")}function Hs(){this.destroy()}function Bt(n,e,t,s){n.writable&&(t=t||vn.STATUS_CODES[e],s={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(t),...s},n.write(`HTTP/1.1 ${e} ${vn.STATUS_CODES[e]}\r
`+Object.keys(s).map(i=>`${i}: ${s[i]}`).join(`\r
`)+`\r
\r
`+t)),n.removeListener("error",Hs),n.destroy()}function Tl(n){return n.trim()}});var Fo=M((Lf,Bo)=>{"use strict";var Ft=Ws();Ft.createWebSocketStream=qo();Ft.Server=Ao();Ft.Receiver=xs();Ft.Sender=Ts();Bo.exports=Ft});var Se=M(Kt=>{"use strict";var zs,Js,Ys;Object.defineProperty(Kt,"__esModule",{value:!0});Kt.ServerConnection=void 0;var ht=ue(),Xs,Zs,Qs,ei;if(typeof window>"u"){let n=require("node-fetch");Xs=(zs=global.fetch)!==null&&zs!==void 0?zs:n,Qs=(Js=global.Request)!==null&&Js!==void 0?Js:n.Request,Zs=(Ys=global.Headers)!==null&&Ys!==void 0?Ys:n.Headers,ei=Fo()}else Xs=fetch,Qs=Request,Zs=Headers,ei=WebSocket;var Ko;(function(n){function e(r){return yn.makeSettings(r)}n.makeSettings=e;function t(r,o,a){return yn.handleRequest(r,o,a)}n.makeRequest=t;class s extends Error{constructor(o,a=`Invalid response: ${o.status} ${o.statusText}`,c=""){super(a),this.response=o,this.traceback=c}static async create(o){try{let a=await o.json();return a.traceback&&console.error(a.traceback),a.message?new s(o,a.message):new s(o)}catch(a){return console.debug(a),new s(o)}}}n.ResponseError=s;class i extends TypeError{constructor(o){super(o.message),this.stack=o.stack}}n.NetworkError=i})(Ko=Kt.ServerConnection||(Kt.ServerConnection={}));var yn;(function(n){function e(i={}){let r=ht.PageConfig.getBaseUrl(),o=ht.PageConfig.getWsUrl(),a=ht.URLExt.normalize(i.baseUrl)||r,c=i.wsUrl;return!c&&a===r&&(c=o),!c&&a.indexOf("http")===0&&(c="ws"+a.slice(4)),c=c??o,Object.assign(Object.assign({init:{cache:"no-store",credentials:"same-origin"},fetch:Xs,Headers:Zs,Request:Qs,WebSocket:ei,token:ht.PageConfig.getToken(),appUrl:ht.PageConfig.getOption("appUrl"),appendToken:typeof window>"u"||process.env.JEST_WORKER_ID!==void 0||ht.URLExt.getHostName(r)!==ht.URLExt.getHostName(c)},i),{baseUrl:a,wsUrl:c})}n.makeSettings=e;function t(i,r,o){var a;if(i.indexOf(o.baseUrl)!==0)throw new Error("Can only be used for notebook server requests");((a=r.cache)!==null&&a!==void 0?a:o.init.cache)==="no-store"&&(i+=(/\?/.test(i)?"&":"?")+new Date().getTime());let u=new o.Request(i,Object.assign(Object.assign({},o.init),r)),l=!1;if(o.token&&(l=!0,u.headers.append("Authorization",`token ${o.token}`)),typeof document<"u"&&document?.cookie){let d=s("_xsrf");d!==void 0&&(l=!0,u.headers.append("X-XSRFToken",d))}return!u.headers.has("Content-Type")&&l&&u.headers.set("Content-Type","application/json"),o.fetch.call(null,u).catch(d=>{throw new Ko.NetworkError(d)})}n.handleRequest=t;function s(i){let r=document.cookie.match("\\b"+i+"=([^;]*)\\b");return r?.[1]}})(yn||(yn={}))});var Vt=M(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.validateModels=Xe.validateModel=Xe.validateMessage=void 0;var dt=Tt(),Vo=["username","version","session","msg_id","msg_type"],ql={stream:{name:"string",text:"string"},display_data:{data:"object",metadata:"object"},execute_input:{code:"string",execution_count:"number"},execute_result:{execution_count:"number",data:"object",metadata:"object"},error:{ename:"string",evalue:"string",traceback:"object"},status:{execution_state:["string",["starting","idle","busy","restarting","dead"]]},clear_output:{wait:"boolean"},comm_open:{comm_id:"string",target_name:"string",data:"object"},comm_msg:{comm_id:"string",data:"object"},comm_close:{comm_id:"string"},shutdown_reply:{restart:"boolean"}};function jl(n){for(let e=0;e<Vo.length;e++)dt.validateProperty(n,Vo[e],"string")}function Ul(n){dt.validateProperty(n,"metadata","object"),dt.validateProperty(n,"content","object"),dt.validateProperty(n,"channel","string"),jl(n.header),n.channel==="iopub"&&Nl(n)}Xe.validateMessage=Ul;function Nl(n){if(n.channel==="iopub"){let e=ql[n.header.msg_type];if(e===void 0)return;let t=Object.keys(e),s=n.content;for(let i=0;i<t.length;i++){let r=e[t[i]];Array.isArray(r)||(r=[r]),dt.validateProperty(s,t[i],...r)}}}function Wo(n){dt.validateProperty(n,"name","string"),dt.validateProperty(n,"id","string")}Xe.validateModel=Wo;function Ll(n){if(!Array.isArray(n))throw new Error("Invalid kernel list");n.forEach(e=>Wo(e))}Xe.validateModels=Ll});var Wt=M(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});H.getKernelModel=H.shutdownKernel=H.interruptKernel=H.restartKernel=H.startNew=H.listRunning=H.KERNEL_SERVICE_URL=void 0;var Q=Se(),St=ue(),Sn=Vt();H.KERNEL_SERVICE_URL="api/kernels";async function Al(n=Q.ServerConnection.makeSettings()){let e=St.URLExt.join(n.baseUrl,H.KERNEL_SERVICE_URL),t=await Q.ServerConnection.makeRequest(e,{},n);if(t.status!==200)throw await Q.ServerConnection.ResponseError.create(t);let s=await t.json();return Sn.validateModels(s),s}H.listRunning=Al;async function Bl(n={},e=Q.ServerConnection.makeSettings()){let t=St.URLExt.join(e.baseUrl,H.KERNEL_SERVICE_URL),s={method:"POST",body:JSON.stringify(n)},i=await Q.ServerConnection.makeRequest(t,s,e);if(i.status!==201)throw await Q.ServerConnection.ResponseError.create(i);let r=await i.json();return Sn.validateModel(r),r}H.startNew=Bl;async function Fl(n,e=Q.ServerConnection.makeSettings()){let t=St.URLExt.join(e.baseUrl,H.KERNEL_SERVICE_URL,encodeURIComponent(n),"restart"),s={method:"POST"},i=await Q.ServerConnection.makeRequest(t,s,e);if(i.status!==200)throw await Q.ServerConnection.ResponseError.create(i);let r=await i.json();Sn.validateModel(r)}H.restartKernel=Fl;async function Kl(n,e=Q.ServerConnection.makeSettings()){let t=St.URLExt.join(e.baseUrl,H.KERNEL_SERVICE_URL,encodeURIComponent(n),"interrupt"),s={method:"POST"},i=await Q.ServerConnection.makeRequest(t,s,e);if(i.status!==204)throw await Q.ServerConnection.ResponseError.create(i)}H.interruptKernel=Kl;async function Vl(n,e=Q.ServerConnection.makeSettings()){let t=St.URLExt.join(e.baseUrl,H.KERNEL_SERVICE_URL,encodeURIComponent(n)),s={method:"DELETE"},i=await Q.ServerConnection.makeRequest(t,s,e);if(i.status===404){let r=`The kernel "${n}" does not exist on the server`;console.warn(r)}else if(i.status!==204)throw await Q.ServerConnection.ResponseError.create(i)}H.shutdownKernel=Vl;async function Wl(n,e=Q.ServerConnection.makeSettings()){let t=St.URLExt.join(e.baseUrl,H.KERNEL_SERVICE_URL,encodeURIComponent(n)),s=await Q.ServerConnection.makeRequest(t,{},e);if(s.status===404)return;if(s.status!==200)throw await Q.ServerConnection.ResponseError.create(s);let i=await s.json();return Sn.validateModel(i),i}H.getKernelModel=Wl});var $t=M((wn,$o)=>{(function(n,e){typeof wn=="object"&&typeof $o<"u"?e(wn,Ee(),te()):typeof define=="function"&&define.amd?define(["exports","@lumino/coreutils","@lumino/signaling"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.lumino_polling={},n.lumino_coreutils,n.lumino_signaling))})(wn,function(n,e,t){"use strict";var s=function(v,b){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,O){I.__proto__=O}||function(I,O){for(var P in O)Object.prototype.hasOwnProperty.call(O,P)&&(I[P]=O[P])},s(v,b)};function i(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");s(v,b);function I(){this.constructor=v}v.prototype=b===null?Object.create(b):(I.prototype=b.prototype,new I)}var r=function(){return r=Object.assign||function(b){for(var I,O=1,P=arguments.length;O<P;O++){I=arguments[O];for(var R in I)Object.prototype.hasOwnProperty.call(I,R)&&(b[R]=I[R])}return b},r.apply(this,arguments)};function o(v,b,I,O){function P(R){return R instanceof I?R:new I(function(x){x(R)})}return new(I||(I=Promise))(function(R,x){function L(j){try{S(O.next(j))}catch(N){x(N)}}function q(j){try{S(O.throw(j))}catch(N){x(N)}}function S(j){j.done?R(j.value):P(j.value).then(L,q)}S((O=O.apply(v,b||[])).next())})}function a(v,b){var I={label:0,sent:function(){if(R[0]&1)throw R[1];return R[1]},trys:[],ops:[]},O,P,R,x;return x={next:L(0),throw:L(1),return:L(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function L(S){return function(j){return q([S,j])}}function q(S){if(O)throw new TypeError("Generator is already executing.");for(;I;)try{if(O=1,P&&(R=S[0]&2?P.return:S[0]?P.throw||((R=P.return)&&R.call(P),0):P.next)&&!(R=R.call(P,S[1])).done)return R;switch(P=0,R&&(S=[S[0]&2,R.value]),S[0]){case 0:case 1:R=S;break;case 4:return I.label++,{value:S[1],done:!1};case 5:I.label++,P=S[1],S=[0];continue;case 7:S=I.ops.pop(),I.trys.pop();continue;default:if(R=I.trys,!(R=R.length>0&&R[R.length-1])&&(S[0]===6||S[0]===2)){I=0;continue}if(S[0]===3&&(!R||S[1]>R[0]&&S[1]<R[3])){I.label=S[1];break}if(S[0]===6&&I.label<R[1]){I.label=R[1],R=S;break}if(R&&I.label<R[2]){I.label=R[2],I.ops.push(S);break}R[2]&&I.ops.pop(),I.trys.pop();continue}S=b.call(v,I)}catch(j){S=[6,j],P=0}finally{O=R=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}}var c=typeof requestAnimationFrame=="function"?requestAnimationFrame:setImmediate,u=typeof cancelAnimationFrame=="function"?cancelAnimationFrame:clearImmediate;n.Poll=function(){function v(b){var I=this;this._disposed=new t.Signal(this),this._tick=new e.PromiseDelegate,this._ticked=new t.Signal(this),this._timeout=-1,this._factory=b.factory,this._standby=b.standby||l.DEFAULT_STANDBY,this._state=r(r({},l.DEFAULT_STATE),{timestamp:new Date().getTime()});var O=b.frequency||{},P=Math.max(O.interval||0,O.max||0,l.DEFAULT_FREQUENCY.max);this.frequency=r(r(r({},l.DEFAULT_FREQUENCY),O),{max:P}),this.name=b.name||l.DEFAULT_NAME,(!("auto"in b)||b.auto)&&c(function(){return void I.start()})}return Object.defineProperty(v.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"frequency",{get:function(){return this._frequency},set:function(b){if(!(this.isDisposed||e.JSONExt.deepEqual(b,this.frequency||{}))){var I=b.backoff,O=b.interval,P=b.max;if(O=Math.round(O),P=Math.round(P),typeof I=="number"&&I<1)throw new Error("Poll backoff growth factor must be at least 1");if((O<0||O>P)&&O!==v.NEVER)throw new Error("Poll interval must be between 0 and max");if(P>v.MAX_INTERVAL&&P!==v.NEVER)throw new Error("Max interval must be less than "+v.MAX_INTERVAL);this._frequency={backoff:I,interval:O,max:P}}},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"isDisposed",{get:function(){return this.state.phase==="disposed"},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"standby",{get:function(){return this._standby},set:function(b){this.isDisposed||this.standby===b||(this._standby=b)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"tick",{get:function(){return this._tick.promise},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"ticked",{get:function(){return this._ticked},enumerable:!0,configurable:!0}),v.prototype.dispose=function(){this.isDisposed||(this._state=r(r({},l.DISPOSED_STATE),{timestamp:new Date().getTime()}),this._tick.promise.catch(function(b){}),this._tick.reject(new Error("Poll ("+this.name+") is disposed.")),this._disposed.emit(void 0),t.Signal.clearData(this))},v.prototype.refresh=function(){return this.schedule({cancel:function(b){var I=b.phase;return I==="refreshed"},interval:v.IMMEDIATE,phase:"refreshed"})},v.prototype.schedule=function(b){return b===void 0&&(b={}),o(this,void 0,void 0,function(){var I,O,P,R,x,L=this;return a(this,function(q){switch(q.label){case 0:return this.isDisposed?[2]:b.cancel&&b.cancel(this.state)?[2]:(I=this.state,O=this._tick,P=new e.PromiseDelegate,R=r({interval:this.frequency.interval,payload:null,phase:"standby",timestamp:new Date().getTime()},b),this._state=R,this._tick=P,I.interval===v.IMMEDIATE?u(this._timeout):clearTimeout(this._timeout),this._ticked.emit(this.state),O.resolve(this),[4,O.promise]);case 1:return q.sent(),x=function(){L.isDisposed||L.tick!==P.promise||L._execute()},this._timeout=R.interval===v.IMMEDIATE?c(x):R.interval===v.NEVER?-1:setTimeout(x,R.interval),[2]}})})},v.prototype.start=function(){return this.schedule({cancel:function(b){var I=b.phase;return I!=="constructed"&&I!=="standby"&&I!=="stopped"},interval:v.IMMEDIATE,phase:"started"})},v.prototype.stop=function(){return this.schedule({cancel:function(b){var I=b.phase;return I==="stopped"},interval:v.NEVER,phase:"stopped"})},v.prototype._execute=function(){var b=this,I=typeof this.standby=="function"?this.standby():this.standby;if(I=I==="never"?!1:I==="when-hidden"?!!(typeof document<"u"&&document&&document.hidden):I,I){this.schedule();return}var O=this.tick;this._factory(this.state).then(function(P){b.isDisposed||b.tick!==O||b.schedule({payload:P,phase:b.state.phase==="rejected"?"reconnected":"resolved"})}).catch(function(P){b.isDisposed||b.tick!==O||b.schedule({interval:l.sleep(b.frequency,b.state),payload:P,phase:"rejected"})})},v}(),function(v){v.IMMEDIATE=0,v.MAX_INTERVAL=2147483647,v.NEVER=1/0}(n.Poll||(n.Poll={}));var l;(function(v){v.DEFAULT_BACKOFF=3,v.DEFAULT_FREQUENCY={backoff:!0,interval:1e3,max:30*1e3},v.DEFAULT_NAME="unknown",v.DEFAULT_STANDBY="when-hidden",v.DEFAULT_STATE={interval:n.Poll.NEVER,payload:null,phase:"constructed",timestamp:new Date(0).getTime()},v.DISPOSED_STATE={interval:n.Poll.NEVER,payload:null,phase:"disposed",timestamp:new Date(0).getTime()};function b(O,P){return O=Math.ceil(O),P=Math.floor(P),Math.floor(Math.random()*(P-O+1))+O}function I(O,P){var R=O.backoff,x=O.interval,L=O.max;if(x===n.Poll.NEVER)return x;var q=R===!0?v.DEFAULT_BACKOFF:R===!1?1:R,S=b(x,P.interval*q);return Math.min(L,S)}v.sleep=I})(l||(l={}));var d=function(){function v(b,I){var O=this;I===void 0&&(I=500),this.payload=null,this.limit=I,this.poll=new n.Poll({auto:!1,factory:function(){return o(O,void 0,void 0,function(){return a(this,function(P){switch(P.label){case 0:return[4,b()];case 1:return[2,P.sent()]}})})},frequency:{backoff:!1,interval:n.Poll.NEVER,max:n.Poll.NEVER},standby:"never"}),this.payload=new e.PromiseDelegate,this.poll.ticked.connect(function(P,R){var x=O.payload;if(R.phase==="resolved"){O.payload=new e.PromiseDelegate,x.resolve(R.payload);return}if(R.phase==="rejected"||R.phase==="stopped"){O.payload=new e.PromiseDelegate,x.promise.catch(function(L){}),x.reject(R.payload);return}},this)}return Object.defineProperty(v.prototype,"isDisposed",{get:function(){return this.payload===null},enumerable:!0,configurable:!0}),v.prototype.dispose=function(){this.isDisposed||(this.payload=null,this.poll.dispose())},v.prototype.stop=function(){return o(this,void 0,void 0,function(){return a(this,function(b){return[2,this.poll.stop()]})})},v}(),g=function(v){i(b,v);function b(){return v!==null&&v.apply(this,arguments)||this}return b.prototype.invoke=function(){return this.poll.schedule({interval:this.limit,phase:"invoked"}),this.payload.promise},b}(d),y=function(v){i(b,v);function b(I,O){var P=v.call(this,I,typeof O=="number"?O:O&&O.limit)||this,R="leading";return typeof O!="number"&&(O=O||{},R="edge"in O?O.edge:R),P._interval=R==="trailing"?P.limit:n.Poll.IMMEDIATE,P}return b.prototype.invoke=function(){return this.poll.state.phase!=="invoked"&&this.poll.schedule({interval:this._interval,phase:"invoked"}),this.payload.promise},b}(d);n.Debouncer=g,n.RateLimiter=d,n.Throttler=y,Object.defineProperty(n,"__esModule",{value:!0})})});var Gt=M(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.BaseManager=void 0;var Go=te(),$l=Se(),ti=class{constructor(e){var t;this._isDisposed=!1,this._disposed=new Go.Signal(this),this.serverSettings=(t=e.serverSettings)!==null&&t!==void 0?t:$l.ServerConnection.makeSettings()}get disposed(){return this._disposed}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._disposed.emit(void 0),Go.Signal.clearData(this))}};bn.BaseManager=ti});var ni=M((Cn,Ho)=>{(function(n,e){typeof Cn=="object"&&typeof Ho<"u"?e(Cn,st(),te()):typeof define=="function"&&define.amd?define(["exports","@lumino/algorithm","@lumino/signaling"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.lumino_disposable={},n.lumino_algorithm,n.lumino_signaling))})(Cn,function(n,e,t){"use strict";var s=function(a,c){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(u[d]=l[d])},s(a,c)};function i(a,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");s(a,c);function u(){this.constructor=a}a.prototype=c===null?Object.create(c):(u.prototype=c.prototype,new u)}var r=function(){function a(c){this._fn=c}return Object.defineProperty(a.prototype,"isDisposed",{get:function(){return!this._fn},enumerable:!0,configurable:!0}),a.prototype.dispose=function(){if(this._fn){var c=this._fn;this._fn=null,c()}},a}(),o=function(a){i(c,a);function c(){var u=a!==null&&a.apply(this,arguments)||this;return u._disposed=new t.Signal(u),u}return Object.defineProperty(c.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),c.prototype.dispose=function(){this.isDisposed||(a.prototype.dispose.call(this),this._disposed.emit(void 0),t.Signal.clearData(this))},c}(r);n.DisposableSet=function(){function a(){this._isDisposed=!1,this._items=new Set}return Object.defineProperty(a.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),a.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._items.forEach(function(c){c.dispose()}),this._items.clear())},a.prototype.contains=function(c){return this._items.has(c)},a.prototype.add=function(c){this._items.add(c)},a.prototype.remove=function(c){this._items.delete(c)},a.prototype.clear=function(){this._items.clear()},a}(),function(a){function c(u){var l=new a;return e.each(u,function(d){l.add(d)}),l}a.from=c}(n.DisposableSet||(n.DisposableSet={})),n.ObservableDisposableSet=function(a){i(c,a);function c(){var u=a!==null&&a.apply(this,arguments)||this;return u._disposed=new t.Signal(u),u}return Object.defineProperty(c.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),c.prototype.dispose=function(){this.isDisposed||(a.prototype.dispose.call(this),this._disposed.emit(void 0),t.Signal.clearData(this))},c}(n.DisposableSet),function(a){function c(u){var l=new a;return e.each(u,function(d){l.add(d)}),l}a.from=c}(n.ObservableDisposableSet||(n.ObservableDisposableSet={})),n.DisposableDelegate=r,n.ObservableDisposableDelegate=o,Object.defineProperty(n,"__esModule",{value:!0})})});var ii=M(Ue=>{"use strict";var Gl=Ue&&Ue.__createBinding||(Object.create?function(n,e,t,s){s===void 0&&(s=t),Object.defineProperty(n,s,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}),Hl=Ue&&Ue.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),zl=Ue&&Ue.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&Gl(e,n,t);return Hl(e,n),e};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.CommHandler=void 0;var Jl=ni(),En=zl(vt()),si=class extends Jl.DisposableDelegate{constructor(e,t,s,i){super(i),this._target="",this._id="",this._id=t,this._target=e,this._kernel=s}get commId(){return this._id}get targetName(){return this._target}get onClose(){return this._onClose}set onClose(e){this._onClose=e}get onMsg(){return this._onMsg}set onMsg(e){this._onMsg=e}open(e,t,s=[]){if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot open");let i=En.createMessage({msgType:"comm_open",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,target_name:this._target,data:e??{}},metadata:t,buffers:s});return this._kernel.sendShellMessage(i,!1,!0)}send(e,t,s=[],i=!0){if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot send");let r=En.createMessage({msgType:"comm_msg",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,data:e},metadata:t,buffers:s});return this._kernel.sendShellMessage(r,!1,i)}close(e,t,s=[]){if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot close");let i=En.createMessage({msgType:"comm_close",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,data:e??{}},metadata:t,buffers:s}),r=this._kernel.sendShellMessage(i,!1,!0),o=this._onClose;if(o){let a=En.createMessage({msgType:"comm_close",channel:"iopub",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,data:e??{}},metadata:t,buffers:s});o(a)}return this.dispose(),r}};Ue.CommHandler=si});var ai=M(ge=>{"use strict";var Yl=ge&&ge.__createBinding||(Object.create?function(n,e,t,s){s===void 0&&(s=t),Object.defineProperty(n,s,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}),Xl=ge&&ge.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Zl=ge&&ge.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&Yl(e,n,t);return Xl(e,n),e};Object.defineProperty(ge,"__esModule",{value:!0});ge.KernelShellFutureHandler=ge.KernelControlFutureHandler=ge.KernelFutureHandler=void 0;var zo=Ee(),Ql=ni(),eh=Zl(vt()),Ht=class extends Ql.DisposableDelegate{constructor(e,t,s,i,r){super(e),this._status=0,this._stdin=ne.noOp,this._iopub=ne.noOp,this._reply=ne.noOp,this._done=new zo.PromiseDelegate,this._hooks=new ne.HookList,this._disposeOnDone=!0,this._msg=t,s||this._setFlag(ne.KernelFutureFlag.GotReply),this._disposeOnDone=i,this._kernel=r}get msg(){return this._msg}get done(){return this._done.promise}get onReply(){return this._reply}set onReply(e){this._reply=e}get onIOPub(){return this._iopub}set onIOPub(e){this._iopub=e}get onStdin(){return this._stdin}set onStdin(e){this._stdin=e}registerMessageHook(e){if(this.isDisposed)throw new Error("Kernel future is disposed");this._hooks.add(e)}removeMessageHook(e){this.isDisposed||this._hooks.remove(e)}sendInputReply(e){this._kernel.sendInputReply(e)}dispose(){this._stdin=ne.noOp,this._iopub=ne.noOp,this._reply=ne.noOp,this._hooks=null,this._testFlag(ne.KernelFutureFlag.IsDone)||(this._done.promise.catch(()=>{}),this._done.reject(new Error(`Canceled future for ${this.msg.header.msg_type} message before replies were done`))),super.dispose()}async handleMsg(e){switch(e.channel){case"control":case"shell":e.channel===this.msg.channel&&e.parent_header.msg_id===this.msg.header.msg_id&&await this._handleReply(e);break;case"stdin":await this._handleStdin(e);break;case"iopub":await this._handleIOPub(e);break;default:break}}async _handleReply(e){let t=this._reply;t&&await t(e),this._replyMsg=e,this._setFlag(ne.KernelFutureFlag.GotReply),this._testFlag(ne.KernelFutureFlag.GotIdle)&&this._handleDone()}async _handleStdin(e){let t=this._stdin;t&&await t(e)}async _handleIOPub(e){let t=await this._hooks.process(e),s=this._iopub;t&&s&&await s(e),eh.isStatusMsg(e)&&e.content.execution_state==="idle"&&(this._setFlag(ne.KernelFutureFlag.GotIdle),this._testFlag(ne.KernelFutureFlag.GotReply)&&this._handleDone())}_handleDone(){this._testFlag(ne.KernelFutureFlag.IsDone)||(this._setFlag(ne.KernelFutureFlag.IsDone),this._done.resolve(this._replyMsg),this._disposeOnDone&&this.dispose())}_testFlag(e){return(this._status&e)!==0}_setFlag(e){this._status|=e}};ge.KernelFutureHandler=Ht;var ri=class extends Ht{};ge.KernelControlFutureHandler=ri;var oi=class extends Ht{};ge.KernelShellFutureHandler=oi;var ne;(function(n){n.noOp=()=>{};let e=(()=>typeof requestAnimationFrame=="function"?requestAnimationFrame:setImmediate)();class t{constructor(){this._hooks=[]}add(r){this.remove(r),this._hooks.push(r)}remove(r){let o=this._hooks.indexOf(r);o>=0&&(this._hooks[o]=null,this._scheduleCompact())}async process(r){await this._processing;let o=new zo.PromiseDelegate;this._processing=o.promise;let a;for(let c=this._hooks.length-1;c>=0;c--){let u=this._hooks[c];if(u!==null){try{a=await u(r)}catch(l){a=!0,console.error(l)}if(a===!1)return o.resolve(void 0),!1}}return o.resolve(void 0),!0}_scheduleCompact(){this._compactScheduled||(this._compactScheduled=!0,e(()=>{this._processing=this._processing.then(()=>{this._compactScheduled=!1,this._compact()})}))}_compact(){let r=0;for(let o=0,a=this._hooks.length;o<a;o++){let c=this._hooks[o];this._hooks[o]===null?r++:this._hooks[o-r]=c}this._hooks.length-=r}}n.HookList=t;let s;(function(i){i[i.GotReply=1]="GotReply",i[i.GotIdle=2]="GotIdle",i[i.IsDone=4]="IsDone",i[i.DisposeOnDone=8]="DisposeOnDone"})(s=n.KernelFutureFlag||(n.KernelFutureFlag={}))})(ne||(ne={}))});var Jo=M(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.serialize=wt.deserialize=void 0;function th(n){let e;return typeof n=="string"?e=JSON.parse(n):e=sh(n),e}wt.deserialize=th;function nh(n){var e;let t;return!((e=n.buffers)===null||e===void 0)&&e.length?t=ih(n):t=JSON.stringify(n),t}wt.serialize=nh;function sh(n){let e=new DataView(n),t=e.getUint32(0),s=[];if(t<2)throw new Error("Invalid incoming Kernel Message");for(let o=1;o<=t;o++)s.push(e.getUint32(o*4));let i=new Uint8Array(n.slice(s[0],s[1])),r=JSON.parse(new TextDecoder("utf8").decode(i));r.buffers=[];for(let o=1;o<t;o++){let a=s[o],c=s[o+1]||n.byteLength;r.buffers.push(new DataView(n.slice(a,c)))}return r}function ih(n){let e=[],t=[],s=new TextEncoder,i=[];n.buffers!==void 0&&(i=n.buffers,delete n.buffers);let r=s.encode(JSON.stringify(n));t.push(r.buffer);for(let u=0;u<i.length;u++){let l=i[u];t.push(ArrayBuffer.isView(l)?l.buffer:l)}let o=t.length;e.push(4*(o+1));for(let u=0;u+1<t.length;u++)e.push(e[e.length-1]+t[u].byteLength);let a=new Uint8Array(e[e.length-1]+t[t.length-1].byteLength),c=new DataView(a.buffer);c.setUint32(0,o);for(let u=0;u<e.length;u++)c.setUint32(4*(u+1),e[u]);for(let u=0;u<t.length;u++)a.set(new Uint8Array(t[u]),e[u]);return a.buffer}});var Xo=M(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0})});var Qo=M(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.validateSpecModels=bt.validateSpecModel=void 0;var ft=Tt();function Zo(n){let e=n.spec;if(!e)throw new Error("Invalid kernel spec");ft.validateProperty(n,"name","string"),ft.validateProperty(n,"resources","object"),ft.validateProperty(e,"language","string"),ft.validateProperty(e,"display_name","string"),ft.validateProperty(e,"argv","array");let t=null;e.hasOwnProperty("metadata")&&(ft.validateProperty(e,"metadata","object"),t=e.metadata);let s=null;return e.hasOwnProperty("env")&&(ft.validateProperty(e,"env","object"),s=e.env),{name:n.name,resources:n.resources,language:e.language,display_name:e.display_name,argv:e.argv,metadata:t,env:s}}bt.validateSpecModel=Zo;function rh(n){if(!n.hasOwnProperty("kernelspecs"))throw new Error("No kernelspecs found");let e=Object.keys(n.kernelspecs),t=Object.create(null),s=n.default;for(let i=0;i<e.length;i++){let r=n.kernelspecs[e[i]];try{t[e[i]]=Zo(r)}catch{console.warn(`Removing errant kernel spec: ${e[i]}`)}}if(e=Object.keys(t),!e.length)throw new Error("No valid kernelspecs found");return(!s||typeof s!="string"||!(s in t))&&(s=e[0],console.warn(`Default kernel not found, using '${e[0]}'`)),{default:s,kernelspecs:t}}bt.validateSpecModels=rh});var ui=M(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});Mn.getSpecs=void 0;var ci=Se(),oh=Qo(),ah=ue(),ch="api/kernelspecs";async function uh(n=ci.ServerConnection.makeSettings()){let e=ah.URLExt.join(n.baseUrl,ch),t=await ci.ServerConnection.makeRequest(e,{},n);if(t.status!==200)throw await ci.ServerConnection.ResponseError.create(t);let s=await t.json();return oh.validateSpecModels(s)}Mn.getSpecs=uh});var ta=M(Ne=>{"use strict";var lh=Ne&&Ne.__createBinding||(Object.create?function(n,e,t,s){s===void 0&&(s=t),Object.defineProperty(n,s,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}),hh=Ne&&Ne.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),dh=Ne&&Ne.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&lh(e,n,t);return hh(e,n),e};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.KernelSpecManager=void 0;var fh=Ee(),_h=$t(),ea=te(),ph=dh(ui()),gh=Gt(),li=class extends gh.BaseManager{constructor(e={}){var t;super(e),this._isReady=!1,this._connectionFailure=new ea.Signal(this),this._specs=null,this._specsChanged=new ea.Signal(this),this._ready=Promise.all([this.requestSpecs()]).then(s=>{}).catch(s=>{}).then(()=>{this.isDisposed||(this._isReady=!0)}),this._pollSpecs=new _h.Poll({auto:!1,factory:()=>this.requestSpecs(),frequency:{interval:61*1e3,backoff:!0,max:300*1e3},name:"@jupyterlab/services:KernelSpecManager#specs",standby:(t=e.standby)!==null&&t!==void 0?t:"when-hidden"}),this.ready.then(()=>{this._pollSpecs.start()})}get isReady(){return this._isReady}get ready(){return this._ready}get specs(){return this._specs}get specsChanged(){return this._specsChanged}get connectionFailure(){return this._connectionFailure}dispose(){this._pollSpecs.dispose(),super.dispose()}async refreshSpecs(){await this._pollSpecs.refresh(),await this._pollSpecs.tick}async requestSpecs(){let e=await ph.getSpecs(this.serverSettings);this.isDisposed||fh.JSONExt.deepEqual(e,this._specs)||(this._specs=e,this._specsChanged.emit(e))}};Ne.KernelSpecManager=li});var zt=M(he=>{"use strict";var na=he&&he.__createBinding||(Object.create?function(n,e,t,s){s===void 0&&(s=t),Object.defineProperty(n,s,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}),mh=he&&he.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),sa=he&&he.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&na(e,n,t);return mh(e,n),e},vh=he&&he.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&na(e,n,t)};Object.defineProperty(he,"__esModule",{value:!0});he.KernelSpecAPI=he.KernelSpec=void 0;var yh=sa(Xo());he.KernelSpec=yh;var Sh=sa(ui());he.KernelSpecAPI=Sh;vh(ta(),he)});var aa=M(Le=>{"use strict";var wh=Le&&Le.__createBinding||(Object.create?function(n,e,t,s){s===void 0&&(s=t),Object.defineProperty(n,s,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}),bh=Le&&Le.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Rn=Le&&Le.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&wh(e,n,t);return bh(e,n),e};Object.defineProperty(Le,"__esModule",{value:!0});Le.KernelConnection=void 0;var ia=ue(),Ze=Ee(),_t=te(),Ch=Be(),ra=ii(),we=Rn(vt()),oa=ai(),hi=Rn(Jo()),Eh=Rn(Vt()),Mh=zt(),On=Rn(Wt()),Oh=3e3,Ct="_RESTARTING_",Rh="",di=class n{constructor(e){var t,s,i,r;this._createSocket=()=>{this._errorIfDisposed(),this._clearSocket(),this._updateConnectionStatus("connecting");let o=this.serverSettings,a=ia.URLExt.join(o.wsUrl,On.KERNEL_SERVICE_URL,encodeURIComponent(this._id)),c=a.replace(/^((?:\w+:)?\/\/)(?:[^@\/]+@)/,"$1"),u=ia.URLExt.join(a,"channels?session_id="+encodeURIComponent(this._clientId)),l=o.token;o.appendToken&&l!==""&&(u=u+`&token=${encodeURIComponent(l)}`),this._ws=new o.WebSocket(u),this._ws.binaryType="arraybuffer",this._ws.onmessage=this._onWSMessage,this._ws.onopen=this._onWSOpen,this._ws.onclose=this._onWSClose,this._ws.onerror=this._onWSClose},this._onWSOpen=o=>{this._updateConnectionStatus("connected")},this._onWSMessage=o=>{let a;try{a=hi.deserialize(o.data),Eh.validateMessage(a)}catch(c){throw c.message=`Kernel message validation error: ${c.message}`,c}this._kernelSession=a.header.session,this._msgChain=this._msgChain.then(()=>this._handleMessage(a)).catch(c=>{c.message.startsWith("Canceled future for ")&&console.error(c)}),this._anyMessage.emit({msg:a,direction:"recv"})},this._onWSClose=o=>{this.isDisposed||this._reconnect()},this._id="",this._name="",this._status="unknown",this._connectionStatus="connecting",this._kernelSession="",this._isDisposed=!1,this._ws=null,this._username="",this._reconnectLimit=7,this._reconnectAttempt=0,this._reconnectTimeout=null,this._futures=new Map,this._comms=new Map,this._targetRegistry=Object.create(null),this._info=new Ze.PromiseDelegate,this._pendingMessages=[],this._statusChanged=new _t.Signal(this),this._connectionStatusChanged=new _t.Signal(this),this._disposed=new _t.Signal(this),this._iopubMessage=new _t.Signal(this),this._anyMessage=new _t.Signal(this),this._unhandledMessage=new _t.Signal(this),this._displayIdToParentIds=new Map,this._msgIdToDisplayIds=new Map,this._msgChain=Promise.resolve(),this._noOp=()=>{},this._name=e.model.name,this._id=e.model.id,this.serverSettings=(t=e.serverSettings)!==null&&t!==void 0?t:Ch.ServerConnection.makeSettings(),this._clientId=(s=e.clientId)!==null&&s!==void 0?s:Ze.UUID.uuid4(),this._username=(i=e.username)!==null&&i!==void 0?i:"",this.handleComms=(r=e.handleComms)!==null&&r!==void 0?r:!0,this._createSocket()}get disposed(){return this._disposed}get statusChanged(){return this._statusChanged}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get model(){return{id:this.id,name:this.name}}get anyMessage(){return this._anyMessage}get id(){return this._id}get name(){return this._name}get username(){return this._username}get clientId(){return this._clientId}get status(){return this._status}get connectionStatus(){return this._connectionStatus}get isDisposed(){return this._isDisposed}get info(){return this._info.promise}get spec(){return this._specPromise?this._specPromise:(this._specPromise=Mh.KernelSpecAPI.getSpecs(this.serverSettings).then(e=>e.kernelspecs[this._name]),this._specPromise)}clone(e={}){return new n(Object.assign({model:this.model,username:this.username,serverSettings:this.serverSettings,handleComms:!1},e))}dispose(){this.isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._updateConnectionStatus("disconnected"),this._clearKernelState(),this._pendingMessages=[],this._clearSocket(),_t.Signal.clearData(this))}sendShellMessage(e,t=!1,s=!0){return this._sendKernelShellControl(oa.KernelShellFutureHandler,e,t,s)}sendControlMessage(e,t=!1,s=!0){return this._sendKernelShellControl(oa.KernelControlFutureHandler,e,t,s)}_sendKernelShellControl(e,t,s=!1,i=!0){this._sendMessage(t),this._anyMessage.emit({msg:t,direction:"send"});let r=new e(()=>{let o=t.header.msg_id;this._futures.delete(o);let a=this._msgIdToDisplayIds.get(o);a&&(a.forEach(c=>{let u=this._displayIdToParentIds.get(c);if(u){let l=u.indexOf(o);if(l===-1)return;u.length===1?this._displayIdToParentIds.delete(c):(u.splice(l,1),this._displayIdToParentIds.set(c,u))}}),this._msgIdToDisplayIds.delete(o))},t,s,i,this);return this._futures.set(t.header.msg_id,r),r}_sendMessage(e,t=!0){if(this.status==="dead")throw new Error("Kernel is dead");if((this._kernelSession===Rh||this._kernelSession===Ct)&&we.isInfoRequestMsg(e))if(this.connectionStatus==="connected"){this._ws.send(hi.serialize(e));return}else throw new Error("Could not send message: status is not connected");if(t&&this._pendingMessages.length>0){this._pendingMessages.push(e);return}if(this.connectionStatus==="connected"&&this._kernelSession!==Ct)this._ws.send(hi.serialize(e));else if(t)this._pendingMessages.push(e);else throw new Error("Could not send message")}async interrupt(){if(this.status==="dead")throw new Error("Kernel is dead");return On.interruptKernel(this.id,this.serverSettings)}async restart(){if(this.status==="dead")throw new Error("Kernel is dead");this._updateStatus("restarting"),this._clearKernelState(),this._kernelSession=Ct,await On.restartKernel(this.id,this.serverSettings),await this.reconnect()}reconnect(){this._errorIfDisposed();let e=new Ze.PromiseDelegate,t=(s,i)=>{i==="connected"?(e.resolve(),this.connectionStatusChanged.disconnect(t,this)):i==="disconnected"&&(e.reject(new Error("Kernel connection disconnected")),this.connectionStatusChanged.disconnect(t,this))};return this.connectionStatusChanged.connect(t,this),this._reconnectAttempt=0,this._reconnect(),e.promise}async shutdown(){this.status!=="dead"&&await On.shutdownKernel(this.id,this.serverSettings),this.handleShutdown()}handleShutdown(){this._updateStatus("dead"),this.dispose()}async requestKernelInfo(){let e=we.createMessage({msgType:"kernel_info_request",channel:"shell",username:this._username,session:this._clientId,content:{}}),t;try{t=await Oe.handleShellMessage(this,e)}catch(s){if(this.isDisposed)return;throw s}if(this._errorIfDisposed(),!!t)return t.content.status===void 0&&(t.content.status="ok"),t.content.status!=="ok"?(this._info.reject("Kernel info reply errored"),t):(this._info.resolve(t.content),this._kernelSession=t.header.session,t)}requestComplete(e){let t=we.createMessage({msgType:"complete_request",channel:"shell",username:this._username,session:this._clientId,content:e});return Oe.handleShellMessage(this,t)}requestInspect(e){let t=we.createMessage({msgType:"inspect_request",channel:"shell",username:this._username,session:this._clientId,content:e});return Oe.handleShellMessage(this,t)}requestHistory(e){let t=we.createMessage({msgType:"history_request",channel:"shell",username:this._username,session:this._clientId,content:e});return Oe.handleShellMessage(this,t)}requestExecute(e,t=!0,s){let i={silent:!1,store_history:!0,user_expressions:{},allow_stdin:!0,stop_on_error:!1},r=we.createMessage({msgType:"execute_request",channel:"shell",username:this._username,session:this._clientId,content:Object.assign(Object.assign({},i),e),metadata:s});return this.sendShellMessage(r,!0,t)}requestDebug(e,t=!0){let s=we.createMessage({msgType:"debug_request",channel:"control",username:this._username,session:this._clientId,content:e});return this.sendControlMessage(s,!0,t)}requestIsComplete(e){let t=we.createMessage({msgType:"is_complete_request",channel:"shell",username:this._username,session:this._clientId,content:e});return Oe.handleShellMessage(this,t)}requestCommInfo(e){let t=we.createMessage({msgType:"comm_info_request",channel:"shell",username:this._username,session:this._clientId,content:e});return Oe.handleShellMessage(this,t)}sendInputReply(e){let t=we.createMessage({msgType:"input_reply",channel:"stdin",username:this._username,session:this._clientId,content:e});this._sendMessage(t),this._anyMessage.emit({msg:t,direction:"send"})}createComm(e,t=Ze.UUID.uuid4()){if(!this.handleComms)throw new Error("Comms are disabled on this kernel connection");if(this._comms.has(t))throw new Error("Comm is already created");let s=new ra.CommHandler(e,t,this,()=>{this._unregisterComm(t)});return this._comms.set(t,s),s}hasComm(e){return this._comms.has(e)}registerCommTarget(e,t){this.handleComms&&(this._targetRegistry[e]=t)}removeCommTarget(e,t){this.handleComms&&!this.isDisposed&&this._targetRegistry[e]===t&&delete this._targetRegistry[e]}registerMessageHook(e,t){var s;let i=(s=this._futures)===null||s===void 0?void 0:s.get(e);i&&i.registerMessageHook(t)}removeMessageHook(e,t){var s;let i=(s=this._futures)===null||s===void 0?void 0:s.get(e);i&&i.removeMessageHook(t)}async _handleDisplayId(e,t){var s,i;let r=t.parent_header.msg_id,o=this._displayIdToParentIds.get(e);if(o){let c={header:Ze.JSONExt.deepCopy(t.header),parent_header:Ze.JSONExt.deepCopy(t.parent_header),metadata:Ze.JSONExt.deepCopy(t.metadata),content:Ze.JSONExt.deepCopy(t.content),channel:t.channel,buffers:t.buffers?t.buffers.slice():[]};c.header.msg_type="update_display_data",await Promise.all(o.map(async u=>{let l=this._futures&&this._futures.get(u);l&&await l.handleMsg(c)}))}if(t.header.msg_type==="update_display_data")return!0;o=(s=this._displayIdToParentIds.get(e))!==null&&s!==void 0?s:[],o.indexOf(r)===-1&&o.push(r),this._displayIdToParentIds.set(e,o);let a=(i=this._msgIdToDisplayIds.get(r))!==null&&i!==void 0?i:[];return a.indexOf(r)===-1&&a.push(r),this._msgIdToDisplayIds.set(r,a),!1}_clearSocket(){this._ws!==null&&(this._ws.onopen=this._noOp,this._ws.onclose=this._noOp,this._ws.onerror=this._noOp,this._ws.onmessage=this._noOp,this._ws.close(),this._ws=null)}_updateStatus(e){this._status===e||this._status==="dead"||(this._status=e,Oe.logKernelStatus(this),this._statusChanged.emit(e),e==="dead"&&this.dispose())}_sendPending(){for(;this.connectionStatus==="connected"&&this._kernelSession!==Ct&&this._pendingMessages.length>0;)this._sendMessage(this._pendingMessages[0],!1),this._pendingMessages.shift()}_clearKernelState(){this._kernelSession="",this._pendingMessages=[],this._futures.forEach(e=>{e.dispose()}),this._comms.forEach(e=>{e.dispose()}),this._msgChain=Promise.resolve(),this._futures=new Map,this._comms=new Map,this._displayIdToParentIds.clear(),this._msgIdToDisplayIds.clear()}_assertCurrentMessage(e){if(this._errorIfDisposed(),e.header.session!==this._kernelSession)throw new Error(`Canceling handling of old message: ${e.header.msg_type}`)}async _handleCommOpen(e){this._assertCurrentMessage(e);let t=e.content,s=new ra.CommHandler(t.target_name,t.comm_id,this,()=>{this._unregisterComm(t.comm_id)});this._comms.set(t.comm_id,s);try{await(await Oe.loadObject(t.target_name,t.target_module,this._targetRegistry))(s,e)}catch(i){throw s.close(),console.error("Exception opening new comm"),i}}async _handleCommClose(e){this._assertCurrentMessage(e);let t=e.content,s=this._comms.get(t.comm_id);if(!s){console.error("Comm not found for comm id "+t.comm_id);return}this._unregisterComm(s.commId);let i=s.onClose;i&&await i(e),s.dispose()}async _handleCommMsg(e){this._assertCurrentMessage(e);let t=e.content,s=this._comms.get(t.comm_id);if(!s)return;let i=s.onMsg;i&&await i(e)}_unregisterComm(e){this._comms.delete(e)}_updateConnectionStatus(e){if(this._connectionStatus!==e){if(this._connectionStatus=e,e!=="connecting"&&(this._reconnectAttempt=0,clearTimeout(this._reconnectTimeout)),this.status!=="dead")if(e==="connected"){let t=this._kernelSession===Ct,s=this.requestKernelInfo(),i=!1,r=()=>{i||(i=!0,t&&this._kernelSession===Ct&&(this._kernelSession=""),clearTimeout(o),this._pendingMessages.length>0&&this._sendPending())};s.then(r);let o=setTimeout(r,Oh)}else this._updateStatus("unknown");this._connectionStatusChanged.emit(e)}}async _handleMessage(e){var t,s;let i=!1;if(e.parent_header&&e.channel==="iopub"&&(we.isDisplayDataMsg(e)||we.isUpdateDisplayDataMsg(e)||we.isExecuteResultMsg(e))){let o=((t=e.content.transient)!==null&&t!==void 0?t:{}).display_id;o&&(i=await this._handleDisplayId(o,e),this._assertCurrentMessage(e))}if(!i&&e.parent_header){let r=e.parent_header,o=(s=this._futures)===null||s===void 0?void 0:s.get(r.msg_id);if(o)await o.handleMsg(e),this._assertCurrentMessage(e);else{let a=r.session===this.clientId;e.channel!=="iopub"&&a&&this._unhandledMessage.emit(e)}}if(e.channel==="iopub"){switch(e.header.msg_type){case"status":{let r=e.content.execution_state;r==="restarting"&&Promise.resolve().then(async()=>{this._updateStatus("autorestarting"),this._clearKernelState(),await this.reconnect()}),this._updateStatus(r);break}case"comm_open":this.handleComms&&await this._handleCommOpen(e);break;case"comm_msg":this.handleComms&&await this._handleCommMsg(e);break;case"comm_close":this.handleComms&&await this._handleCommClose(e);break;default:break}this.isDisposed||(this._assertCurrentMessage(e),this._iopubMessage.emit(e))}}_reconnect(){if(this._errorIfDisposed(),clearTimeout(this._reconnectTimeout),this._reconnectAttempt<this._reconnectLimit){this._updateConnectionStatus("connecting");let e=Oe.getRandomIntInclusive(0,1e3*(Math.pow(2,this._reconnectAttempt)-1));console.warn(`Connection lost, reconnecting in ${Math.floor(e/1e3)} seconds.`),this._reconnectTimeout=setTimeout(this._createSocket,e),this._reconnectAttempt+=1}else this._updateConnectionStatus("disconnected");this._clearSocket()}_errorIfDisposed(){if(this.isDisposed)throw new Error("Kernel connection is disposed")}};Le.KernelConnection=di;var Oe;(function(n){function e(r){switch(r.status){case"idle":case"busy":case"unknown":return;default:console.debug(`Kernel: ${r.status} (${r.id})`);break}}n.logKernelStatus=e;async function t(r,o){return r.sendShellMessage(o,!0).done}n.handleShellMessage=t;function s(r,o,a){return new Promise((c,u)=>{if(o){if(typeof requirejs>"u")throw new Error("requirejs not found");requirejs([o],l=>{if(l[r]===void 0){let d=`Object '${r}' not found in module '${o}'`;u(new Error(d))}else c(l[r])},u)}else a?.[r]?c(a[r]):u(new Error(`Object '${r}' not found in registry`))})}n.loadObject=s;function i(r,o){return r=Math.ceil(r),o=Math.floor(o),Math.floor(Math.random()*(o-r+1))+r}n.getRandomIntInclusive=i})(Oe||(Oe={}))});var la=M(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Dn.KernelManager=void 0;var ca=st(),Ih=$t(),ua=te(),Dh=Be(),Ph=Gt(),In=Wt(),xh=aa(),fi=class extends Ph.BaseManager{constructor(e={}){var t;super(e),this._isReady=!1,this._kernelConnections=new Set,this._models=new Map,this._runningChanged=new ua.Signal(this),this._connectionFailure=new ua.Signal(this),this._pollModels=new Ih.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:10*1e3,backoff:!0,max:300*1e3},name:"@jupyterlab/services:KernelManager#models",standby:(t=e.standby)!==null&&t!==void 0?t:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._models.clear(),this._kernelConnections.forEach(e=>e.dispose()),this._pollModels.dispose(),super.dispose())}connectTo(e){var t;let{id:s}=e.model,i=(t=e.handleComms)!==null&&t!==void 0?t:!0;if(e.handleComms===void 0){for(let o of this._kernelConnections)if(o.id===s&&o.handleComms){i=!1;break}}let r=new xh.KernelConnection(Object.assign(Object.assign({handleComms:i},e),{serverSettings:this.serverSettings}));return this._onStarted(r),this._models.has(s)||this.refreshRunning().catch(()=>{}),r}running(){return ca.iter([...this._models.values()])}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(e={},t={}){let s=await In.startNew(e,this.serverSettings);return this.connectTo(Object.assign(Object.assign({},t),{model:s}))}async shutdown(e){await In.shutdownKernel(e,this.serverSettings),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all([...this._models.keys()].map(e=>In.shutdownKernel(e,this.serverSettings))),await this.refreshRunning()}async findById(e){return this._models.has(e)?this._models.get(e):(await this.refreshRunning(),this._models.get(e))}async requestRunning(){var e,t;let s;try{s=await In.listRunning(this.serverSettings)}catch(i){throw(i instanceof Dh.ServerConnection.NetworkError||((e=i.response)===null||e===void 0?void 0:e.status)===503||((t=i.response)===null||t===void 0?void 0:t.status)===424)&&this._connectionFailure.emit(i),i}this.isDisposed||this._models.size===s.length&&ca.every(s,i=>{let r=this._models.get(i.id);return r?r.name===i.name:!1})||(this._models=new Map(s.map(i=>[i.id,i])),this._kernelConnections.forEach(i=>{this._models.has(i.id)||i.handleShutdown()}),this._runningChanged.emit(s))}_onStarted(e){this._kernelConnections.add(e),e.statusChanged.connect(this._onStatusChanged,this),e.disposed.connect(this._onDisposed,this)}_onDisposed(e){this._kernelConnections.delete(e),this.refreshRunning().catch(()=>{})}_onStatusChanged(e,t){t==="dead"&&this.refreshRunning().catch(()=>{})}};Dn.KernelManager=fi});var pi=M(se=>{"use strict";var ha=se&&se.__createBinding||(Object.create?function(n,e,t,s){s===void 0&&(s=t),Object.defineProperty(n,s,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}),kh=se&&se.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),_i=se&&se.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&ha(e,n,t);return kh(e,n),e},Th=se&&se.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ha(e,n,t)};Object.defineProperty(se,"__esModule",{value:!0});se.KernelAPI=se.KernelMessage=se.Kernel=void 0;var qh=_i(Mr());se.Kernel=qh;var jh=_i(vt());se.KernelMessage=jh;var Uh=_i(Wt());se.KernelAPI=Uh;Th(la(),se)});var da=M(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.BuildManager=void 0;var gi=ue(),Qe=Se(),Nh="api/build",mi=class{constructor(e={}){var t;this._url="",this.serverSettings=(t=e.serverSettings)!==null&&t!==void 0?t:Qe.ServerConnection.makeSettings();let{baseUrl:s,appUrl:i}=this.serverSettings;this._url=gi.URLExt.join(s,i,Nh)}get isAvailable(){return gi.PageConfig.getOption("buildAvailable").toLowerCase()==="true"}get shouldCheck(){return gi.PageConfig.getOption("buildCheck").toLowerCase()==="true"}getStatus(){let{_url:e,serverSettings:t}=this;return Qe.ServerConnection.makeRequest(e,{},t).then(i=>{if(i.status!==200)throw new Qe.ServerConnection.ResponseError(i);return i.json()}).then(i=>{if(typeof i.status!="string")throw new Error("Invalid data");if(typeof i.message!="string")throw new Error("Invalid data");return i})}build(){let{_url:e,serverSettings:t}=this,s={method:"POST"};return Qe.ServerConnection.makeRequest(e,s,t).then(r=>{if(r.status===400)throw new Qe.ServerConnection.ResponseError(r,"Build aborted");if(r.status!==200){let o=`Build failed with ${r.status}, please run 'jupyter lab build' on the server for full output`;throw new Qe.ServerConnection.ResponseError(r,o)}})}cancel(){let{_url:e,serverSettings:t}=this,s={method:"DELETE"};return Qe.ServerConnection.makeRequest(e,s,t).then(r=>{if(r.status!==204)throw new Qe.ServerConnection.ResponseError(r)})}};Pn.BuildManager=mi});var Si=M(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.NbConvertManager=void 0;var Lh=ue(),vi=Se(),Ah="api/nbconvert",yi=class{constructor(e={}){var t;this.serverSettings=(t=e.serverSettings)!==null&&t!==void 0?t:vi.ServerConnection.makeSettings()}async getExportFormats(){let e=this.serverSettings.baseUrl,t=Lh.URLExt.join(e,Ah),{serverSettings:s}=this,i=await vi.ServerConnection.makeRequest(t,{},s);if(i.status!==200)throw await vi.ServerConnection.ResponseError.create(i);let r=await i.json(),o={};return Object.keys(r).forEach(function(c){let u=r[c].output_mimetype;o[c]={output_mimetype:u}}),o}};xn.NbConvertManager=yi});var _a=M(fa=>{"use strict";Object.defineProperty(fa,"__esModule",{value:!0})});var ga=M(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.validateModels=et.updateLegacySessionModel=et.validateModel=void 0;var Bh=Vt(),Jt=Tt();function pa(n){Jt.validateProperty(n,"id","string"),Jt.validateProperty(n,"type","string"),Jt.validateProperty(n,"name","string"),Jt.validateProperty(n,"path","string"),Jt.validateProperty(n,"kernel","object"),Bh.validateModel(n.kernel)}et.validateModel=pa;function Fh(n){n.path===void 0&&n.notebook!==void 0&&(n.path=n.notebook.path,n.type="notebook",n.name="")}et.updateLegacySessionModel=Fh;function Kh(n){if(!Array.isArray(n))throw new Error("Invalid session list");n.forEach(e=>pa(e))}et.validateModels=Kh});var Tn=M(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.updateSession=X.startSession=X.getSessionModel=X.shutdownSession=X.getSessionUrl=X.listRunning=X.SESSION_SERVICE_URL=void 0;var oe=Se(),wi=ue(),tt=ga();X.SESSION_SERVICE_URL="api/sessions";async function Vh(n=oe.ServerConnection.makeSettings()){let e=wi.URLExt.join(n.baseUrl,X.SESSION_SERVICE_URL),t=await oe.ServerConnection.makeRequest(e,{},n);if(t.status!==200)throw await oe.ServerConnection.ResponseError.create(t);let s=await t.json();if(!Array.isArray(s))throw new Error("Invalid Session list");return s.forEach(i=>{tt.updateLegacySessionModel(i),tt.validateModel(i)}),s}X.listRunning=Vh;function kn(n,e){return wi.URLExt.join(n,X.SESSION_SERVICE_URL,e)}X.getSessionUrl=kn;async function Wh(n,e=oe.ServerConnection.makeSettings()){var t;let s=kn(e.baseUrl,n),i={method:"DELETE"},r=await oe.ServerConnection.makeRequest(s,i,e);if(r.status===404){let a=(t=(await r.json()).message)!==null&&t!==void 0?t:`The session "${n}"" does not exist on the server`;console.warn(a)}else{if(r.status===410)throw new oe.ServerConnection.ResponseError(r,"The kernel was deleted but the session was not");if(r.status!==204)throw await oe.ServerConnection.ResponseError.create(r)}}X.shutdownSession=Wh;async function $h(n,e=oe.ServerConnection.makeSettings()){let t=kn(e.baseUrl,n),s=await oe.ServerConnection.makeRequest(t,{},e);if(s.status!==200)throw await oe.ServerConnection.ResponseError.create(s);let i=await s.json();return tt.updateLegacySessionModel(i),tt.validateModel(i),i}X.getSessionModel=$h;async function Gh(n,e=oe.ServerConnection.makeSettings()){let t=wi.URLExt.join(e.baseUrl,X.SESSION_SERVICE_URL),s={method:"POST",body:JSON.stringify(n)},i=await oe.ServerConnection.makeRequest(t,s,e);if(i.status!==201)throw await oe.ServerConnection.ResponseError.create(i);let r=await i.json();return tt.updateLegacySessionModel(r),tt.validateModel(r),r}X.startSession=Gh;async function Hh(n,e=oe.ServerConnection.makeSettings()){let t=kn(e.baseUrl,n.id),s={method:"PATCH",body:JSON.stringify(n)},i=await oe.ServerConnection.makeRequest(t,s,e);if(i.status!==200)throw await oe.ServerConnection.ResponseError.create(i);let r=await i.json();return tt.updateLegacySessionModel(r),tt.validateModel(r),r}X.updateSession=Hh});var va=M(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});qn.SessionConnection=void 0;var Ge=te(),zh=Be(),ma=Tn(),Jh=Ee(),bi=class{constructor(e){var t,s,i,r;this._id="",this._path="",this._name="",this._type="",this._kernel=null,this._isDisposed=!1,this._disposed=new Ge.Signal(this),this._kernelChanged=new Ge.Signal(this),this._statusChanged=new Ge.Signal(this),this._connectionStatusChanged=new Ge.Signal(this),this._iopubMessage=new Ge.Signal(this),this._unhandledMessage=new Ge.Signal(this),this._anyMessage=new Ge.Signal(this),this._propertyChanged=new Ge.Signal(this),this._id=e.model.id,this._name=e.model.name,this._path=e.model.path,this._type=e.model.type,this._username=(t=e.username)!==null&&t!==void 0?t:"",this._clientId=(s=e.clientId)!==null&&s!==void 0?s:Jh.UUID.uuid4(),this._connectToKernel=e.connectToKernel,this._kernelConnectionOptions=(i=e.kernelConnectionOptions)!==null&&i!==void 0?i:{},this.serverSettings=(r=e.serverSettings)!==null&&r!==void 0?r:zh.ServerConnection.makeSettings(),this.setupKernel(e.model.kernel)}get disposed(){return this._disposed}get kernelChanged(){return this._kernelChanged}get statusChanged(){return this._statusChanged}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get anyMessage(){return this._anyMessage}get propertyChanged(){return this._propertyChanged}get id(){return this._id}get kernel(){return this._kernel}get path(){return this._path}get type(){return this._type}get name(){return this._name}get model(){return{id:this.id,kernel:this.kernel&&{id:this.kernel.id,name:this.kernel.name},path:this._path,type:this._type,name:this._name}}get isDisposed(){return this._isDisposed}update(e){let t=this.model;if(this._path=e.path,this._name=e.name,this._type=e.type,this._kernel===null&&e.kernel!==null||this._kernel!==null&&e.kernel===null||this._kernel!==null&&e.kernel!==null&&this._kernel.id!==e.kernel.id){this._kernel!==null&&this._kernel.dispose();let s=this._kernel||null;this.setupKernel(e.kernel);let i=this._kernel||null;this._kernelChanged.emit({name:"kernel",oldValue:s,newValue:i})}this._handleModelChange(t)}dispose(){if(!this.isDisposed){if(this._isDisposed=!0,this._disposed.emit(),this._kernel){this._kernel.dispose();let e=this._kernel;this._kernel=null;let t=this._kernel;this._kernelChanged.emit({name:"kernel",oldValue:e,newValue:t})}Ge.Signal.clearData(this)}}async setPath(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({path:e})}async setName(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({name:e})}async setType(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({type:e})}async changeKernel(e){if(this.isDisposed)throw new Error("Session is disposed");return await this._patch({kernel:e}),this.kernel}async shutdown(){if(this.isDisposed)throw new Error("Session is disposed");await ma.shutdownSession(this.id,this.serverSettings),this.dispose()}setupKernel(e){if(e===null){this._kernel=null;return}let t=this._connectToKernel(Object.assign(Object.assign({},this._kernelConnectionOptions),{model:e,username:this._username,clientId:this._clientId,serverSettings:this.serverSettings}));this._kernel=t,t.statusChanged.connect(this.onKernelStatus,this),t.connectionStatusChanged.connect(this.onKernelConnectionStatus,this),t.unhandledMessage.connect(this.onUnhandledMessage,this),t.iopubMessage.connect(this.onIOPubMessage,this),t.anyMessage.connect(this.onAnyMessage,this)}onKernelStatus(e,t){this._statusChanged.emit(t)}onKernelConnectionStatus(e,t){this._connectionStatusChanged.emit(t)}onIOPubMessage(e,t){this._iopubMessage.emit(t)}onUnhandledMessage(e,t){this._unhandledMessage.emit(t)}onAnyMessage(e,t){this._anyMessage.emit(t)}async _patch(e){let t=await ma.updateSession(Object.assign(Object.assign({},e),{id:this._id}),this.serverSettings);return this.update(t),t}_handleModelChange(e){e.name!==this._name&&this._propertyChanged.emit("name"),e.type!==this._type&&this._propertyChanged.emit("type"),e.path!==this._path&&this._propertyChanged.emit("path")}};qn.SessionConnection=bi});var wa=M(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});jn.SessionManager=void 0;var ya=st(),Yh=$t(),Sa=te(),Xh=Se(),Zh=Gt(),Qh=va(),Yt=Tn(),Ci=class extends Zh.BaseManager{constructor(e){var t;super(e),this._isReady=!1,this._sessionConnections=new Set,this._models=new Map,this._runningChanged=new Sa.Signal(this),this._connectionFailure=new Sa.Signal(this),this._connectToKernel=s=>this._kernelManager.connectTo(s),this._kernelManager=e.kernelManager,this._pollModels=new Yh.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:10*1e3,backoff:!0,max:300*1e3},name:"@jupyterlab/services:SessionManager#models",standby:(t=e.standby)!==null&&t!==void 0?t:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,await this._kernelManager.ready,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._models.clear(),this._sessionConnections.forEach(e=>e.dispose()),this._pollModels.dispose(),super.dispose())}connectTo(e){let t=new Qh.SessionConnection(Object.assign(Object.assign({},e),{connectToKernel:this._connectToKernel,serverSettings:this.serverSettings}));return this._onStarted(t),this._models.has(e.model.id)||this.refreshRunning().catch(()=>{}),t}running(){return ya.iter([...this._models.values()])}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(e,t={}){let s=await Yt.startSession(e,this.serverSettings);return await this.refreshRunning(),this.connectTo(Object.assign(Object.assign({},t),{model:s}))}async shutdown(e){await Yt.shutdownSession(e,this.serverSettings),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all([...this._models.keys()].map(e=>Yt.shutdownSession(e,this.serverSettings))),await this.refreshRunning()}async stopIfNeeded(e){try{let s=(await Yt.listRunning(this.serverSettings)).filter(i=>i.path===e);if(s.length===1){let i=s[0].id;await this.shutdown(i)}}catch{}}async findById(e){return this._models.has(e)?this._models.get(e):(await this.refreshRunning(),this._models.get(e))}async findByPath(e){for(let t of this._models.values())if(t.path===e)return t;await this.refreshRunning();for(let t of this._models.values())if(t.path===e)return t}async requestRunning(){var e,t;let s;try{s=await Yt.listRunning(this.serverSettings)}catch(i){throw(i instanceof Xh.ServerConnection.NetworkError||((e=i.response)===null||e===void 0?void 0:e.status)===503||((t=i.response)===null||t===void 0?void 0:t.status)===424)&&this._connectionFailure.emit(i),i}this.isDisposed||this._models.size===s.length&&ya.every(s,i=>{var r,o,a,c;let u=this._models.get(i.id);return u?((r=u.kernel)===null||r===void 0?void 0:r.id)===((o=i.kernel)===null||o===void 0?void 0:o.id)&&((a=u.kernel)===null||a===void 0?void 0:a.name)===((c=i.kernel)===null||c===void 0?void 0:c.name)&&u.name===i.name&&u.path===i.path&&u.type===i.type:!1})||(this._models=new Map(s.map(i=>[i.id,i])),this._sessionConnections.forEach(i=>{this._models.has(i.id)?i.update(this._models.get(i.id)):i.dispose()}),this._runningChanged.emit(s))}_onStarted(e){this._sessionConnections.add(e),e.disposed.connect(this._onDisposed,this),e.propertyChanged.connect(this._onChanged,this),e.kernelChanged.connect(this._onChanged,this)}_onDisposed(e){this._sessionConnections.delete(e),this.refreshRunning().catch(()=>{})}_onChanged(){this.refreshRunning().catch(()=>{})}};jn.SessionManager=Ci});var Ei=M(de=>{"use strict";var ba=de&&de.__createBinding||(Object.create?function(n,e,t,s){s===void 0&&(s=t),Object.defineProperty(n,s,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}),ed=de&&de.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Ca=de&&de.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&ba(e,n,t);return ed(e,n),e},td=de&&de.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ba(e,n,t)};Object.defineProperty(de,"__esModule",{value:!0});de.SessionAPI=de.Session=void 0;var nd=Ca(_a());de.Session=nd;var sd=Ca(Tn());de.SessionAPI=sd;td(wa(),de)});var Ea=M(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});Un.DataConnector=void 0;var Mi=class{async list(e){throw new Error("DataConnector#list method has not been implemented.")}async remove(e){throw new Error("DataConnector#remove method has not been implemented.")}async save(e,t){throw new Error("DataConnector#save method has not been implemented.")}};Un.DataConnector=Mi});var Oa=M(Ma=>{"use strict";Object.defineProperty(Ma,"__esModule",{value:!0})});var Ia=M(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.RestorablePool=void 0;var id=Ee(),Ra=es(),Nn=te(),Oi=class{constructor(e){this._added=new Nn.Signal(this),this._current=null,this._currentChanged=new Nn.Signal(this),this._hasRestored=!1,this._isDisposed=!1,this._objects=new Set,this._restore=null,this._restored=new id.PromiseDelegate,this._updated=new Nn.Signal(this),this.namespace=e.namespace}get added(){return this._added}get current(){return this._current}set current(e){this._current!==e&&e!==null&&this._objects.has(e)&&(this._current=e,this._currentChanged.emit(this._current))}get currentChanged(){return this._currentChanged}get isDisposed(){return this._isDisposed}get restored(){return this._restored.promise}get size(){return this._objects.size}get updated(){return this._updated}async add(e){var t,s;if(e.isDisposed){let i="A disposed object cannot be added.";throw console.warn(i,e),new Error(i)}if(this._objects.has(e)){let i="This object already exists in the pool.";throw console.warn(i,e),new Error(i)}if(this._objects.add(e),e.disposed.connect(this._onInstanceDisposed,this),!Ae.injectedProperty.get(e)){if(this._restore){let{connector:i}=this._restore,r=this._restore.name(e);if(r){let o=`${this.namespace}:${r}`,a=(s=(t=this._restore).args)===null||s===void 0?void 0:s.call(t,e);Ae.nameProperty.set(e,o),await i.save(o,{data:a})}}this._added.emit(e)}}dispose(){this.isDisposed||(this._current=null,this._isDisposed=!0,this._objects.clear(),Nn.Signal.clearData(this))}find(e){let t=this._objects.values();for(let s of t)if(e(s))return s}forEach(e){this._objects.forEach(e)}filter(e){let t=[];return this.forEach(s=>{e(s)&&t.push(s)}),t}inject(e){return Ae.injectedProperty.set(e,!0),this.add(e)}has(e){return this._objects.has(e)}async restore(e){if(this._hasRestored)throw new Error("This pool has already been restored.");this._hasRestored=!0;let{command:t,connector:s,registry:i,when:r}=e,o=this.namespace,a=r?[s.list(o)].concat(r):[s.list(o)];this._restore=e;let[c]=await Promise.all(a),u=await Promise.all(c.ids.map(async(l,d)=>{let g=c.values[d],y=g&&g.data;return y===void 0?s.remove(l):i.execute(t,y).catch(()=>s.remove(l))}));return this._restored.resolve(),u}async save(e){var t,s;let i=Ae.injectedProperty.get(e);if(!this._restore||!this.has(e)||i)return;let{connector:r}=this._restore,o=this._restore.name(e),a=Ae.nameProperty.get(e),c=o?`${this.namespace}:${o}`:"";if(a&&a!==c&&await r.remove(a),Ae.nameProperty.set(e,c),c){let u=(s=(t=this._restore).args)===null||s===void 0?void 0:s.call(t,e);await r.save(c,{data:u})}a!==c&&this._updated.emit(e)}_onInstanceDisposed(e){if(this._objects.delete(e),e===this._current&&(this._current=null,this._currentChanged.emit(this._current)),Ae.injectedProperty.get(e)||!this._restore)return;let{connector:t}=this._restore,s=Ae.nameProperty.get(e);s&&t.remove(s)}};Ln.RestorablePool=Oi;var Ae;(function(n){n.injectedProperty=new Ra.AttachedProperty({name:"injected",create:()=>!1}),n.nameProperty=new Ra.AttachedProperty({name:"name",create:()=>""})})(Ae||(Ae={}))});var Da=M(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.StateDB=void 0;var rd=te(),An=class n{constructor(e={}){this._changed=new rd.Signal(this);let{connector:t,transform:s}=e;this._connector=t||new n.Connector,s?this._ready=s.then(i=>{let{contents:r,type:o}=i;switch(o){case"cancel":return;case"clear":return this._clear();case"merge":return this._merge(r||{});case"overwrite":return this._overwrite(r||{});default:return}}):this._ready=Promise.resolve(void 0)}get changed(){return this._changed}async clear(){await this._ready,await this._clear()}async fetch(e){return await this._ready,this._fetch(e)}async list(e){return await this._ready,this._list(e)}async remove(e){await this._ready,await this._remove(e),this._changed.emit({id:e,type:"remove"})}async save(e,t){await this._ready,await this._save(e,t),this._changed.emit({id:e,type:"save"})}async toJSON(){await this._ready;let{ids:e,values:t}=await this._list();return t.reduce((s,i,r)=>(s[e[r]]=i,s),{})}async _clear(){await Promise.all((await this._list()).ids.map(e=>this._remove(e)))}async _fetch(e){let t=await this._connector.fetch(e);if(t)return JSON.parse(t).v}async _list(e=""){let{ids:t,values:s}=await this._connector.list(e);return{ids:t,values:s.map(i=>JSON.parse(i).v)}}async _merge(e){await Promise.all(Object.keys(e).map(t=>e[t]&&this._save(t,e[t])))}async _overwrite(e){await this._clear(),await this._merge(e)}async _remove(e){return this._connector.remove(e)}async _save(e,t){return this._connector.save(e,JSON.stringify({v:t}))}};Et.StateDB=An;(function(n){class e{constructor(){this._storage={}}async fetch(s){return this._storage[s]}async list(s=""){return Object.keys(this._storage).reduce((i,r)=>((s===""||s===r.split(":")[0])&&(i.ids.push(r),i.values.push(this._storage[r])),i),{ids:[],values:[]})}async remove(s){delete this._storage[s]}async save(s,i){this._storage[s]=i}}n.Connector=e})(An=Et.StateDB||(Et.StateDB={}))});var Pa=M(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.IStateDB=void 0;var od=Ee();Bn.IStateDB=new od.Token("@jupyterlab/coreutils:IStateDB")});var Ri=M(Re=>{"use strict";var ad=Re&&Re.__createBinding||(Object.create?function(n,e,t,s){s===void 0&&(s=t),Object.defineProperty(n,s,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}),Xt=Re&&Re.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ad(e,n,t)};Object.defineProperty(Re,"__esModule",{value:!0});Xt(Ea(),Re);Xt(Oa(),Re);Xt(Ia(),Re);Xt(Da(),Re);Xt(Pa(),Re)});var Di=M(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});Kn.SettingManager=void 0;var cd=ue(),ud=Ri(),Fn=Se(),ld="api/settings",Ii=class extends ud.DataConnector{constructor(e={}){var t;super(),this.serverSettings=(t=e.serverSettings)!==null&&t!==void 0?t:Fn.ServerConnection.makeSettings()}async fetch(e){if(!e)throw new Error("Plugin `id` parameter is required for settings fetch.");let{serverSettings:t}=this,{baseUrl:s,appUrl:i}=t,{makeRequest:r,ResponseError:o}=Fn.ServerConnection,a=s+i,c=Zt.url(a,e),u=await r(c,{},t);if(u.status!==200)throw await o.create(u);return u.json()}async list(){var e,t;let{serverSettings:s}=this,{baseUrl:i,appUrl:r}=s,{makeRequest:o,ResponseError:a}=Fn.ServerConnection,c=i+r,u=Zt.url(c,""),l=await o(u,{},s);if(l.status!==200)throw new a(l);let d=await l.json(),g=(t=(e=d?.settings)===null||e===void 0?void 0:e.map(v=>(v.data={composite:{},user:{}},v)))!==null&&t!==void 0?t:[];return{ids:g.map(v=>v.id),values:g}}async save(e,t){let{serverSettings:s}=this,{baseUrl:i,appUrl:r}=s,{makeRequest:o,ResponseError:a}=Fn.ServerConnection,c=i+r,u=Zt.url(c,e),l={body:JSON.stringify({raw:t}),method:"PUT"},d=await o(u,l,s);if(d.status!==204)throw new a(d)}};Kn.SettingManager=Ii;var Zt;(function(n){function e(t,s){return cd.URLExt.join(t,ld,s)}n.url=e})(Zt||(Zt={}))});var en=M(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.shutdownTerminal=fe.listRunning=fe.startNew=fe.isAvailable=fe.TERMINAL_SERVICE_URL=void 0;var Vn=ue(),He=Se();fe.TERMINAL_SERVICE_URL="api/terminals";function xa(){return String(Vn.PageConfig.getOption("terminalsAvailable")).toLowerCase()==="true"}fe.isAvailable=xa;async function hd(n=He.ServerConnection.makeSettings()){Qt.errorIfNotAvailable();let e=Vn.URLExt.join(n.baseUrl,fe.TERMINAL_SERVICE_URL),t={method:"POST"},s=await He.ServerConnection.makeRequest(e,t,n);if(s.status!==200)throw await He.ServerConnection.ResponseError.create(s);return await s.json()}fe.startNew=hd;async function dd(n=He.ServerConnection.makeSettings()){Qt.errorIfNotAvailable();let e=Vn.URLExt.join(n.baseUrl,fe.TERMINAL_SERVICE_URL),t=await He.ServerConnection.makeRequest(e,{},n);if(t.status!==200)throw await He.ServerConnection.ResponseError.create(t);let s=await t.json();if(!Array.isArray(s))throw new Error("Invalid terminal list");return s}fe.listRunning=dd;async function fd(n,e=He.ServerConnection.makeSettings()){var t;Qt.errorIfNotAvailable();let s=Vn.URLExt.join(e.baseUrl,fe.TERMINAL_SERVICE_URL,n),i={method:"DELETE"},r=await He.ServerConnection.makeRequest(s,i,e);if(r.status===404){let a=(t=(await r.json()).message)!==null&&t!==void 0?t:`The terminal session "${n}"" does not exist on the server`;console.warn(a)}else if(r.status!==204)throw await He.ServerConnection.ResponseError.create(r)}fe.shutdownTerminal=fd;var Qt;(function(n){function e(){if(!xa())throw new Error("Terminals Unavailable")}n.errorIfNotAvailable=e})(Qt||(Qt={}))});var ka=M(Wn=>{"use strict";Object.defineProperty(Wn,"__esModule",{value:!0});Wn.isAvailable=void 0;var _d=en();Object.defineProperty(Wn,"isAvailable",{enumerable:!0,get:function(){return _d.isAvailable}})});var ja=M(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});Gn.TerminalConnection=void 0;var Ta=ue(),pd=Ee(),$n=te(),gd=Be(),qa=en(),Pi=class n{constructor(e){var t;this._createSocket=()=>{this._errorIfDisposed(),this._clearSocket(),this._updateConnectionStatus("connecting");let s=this._name,i=this.serverSettings,r=Ta.URLExt.join(i.wsUrl,"terminals","websocket",encodeURIComponent(s)),o=i.token;i.appendToken&&o!==""&&(r=r+`?token=${encodeURIComponent(o)}`),this._ws=new i.WebSocket(r),this._ws.onmessage=this._onWSMessage,this._ws.onclose=this._onWSClose,this._ws.onerror=this._onWSClose},this._onWSMessage=s=>{if(this._isDisposed)return;let i=JSON.parse(s.data);if(i[0]==="disconnect"&&this.dispose(),this._connectionStatus==="connecting"){i[0]==="setup"&&this._updateConnectionStatus("connected");return}this._messageReceived.emit({type:i[0],content:i.slice(1)})},this._onWSClose=s=>{console.warn(`Terminal websocket closed: ${s.code}`),this.isDisposed||this._reconnect()},this._connectionStatus="connecting",this._connectionStatusChanged=new $n.Signal(this),this._isDisposed=!1,this._disposed=new $n.Signal(this),this._messageReceived=new $n.Signal(this),this._reconnectTimeout=null,this._ws=null,this._noOp=()=>{},this._reconnectLimit=7,this._reconnectAttempt=0,this._pendingMessages=[],this._name=e.model.name,this.serverSettings=(t=e.serverSettings)!==null&&t!==void 0?t:gd.ServerConnection.makeSettings(),this._createSocket()}get disposed(){return this._disposed}get messageReceived(){return this._messageReceived}get name(){return this._name}get model(){return{name:this._name}}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._updateConnectionStatus("disconnected"),this._clearSocket(),$n.Signal.clearData(this))}send(e){this._sendMessage(e)}_sendMessage(e,t=!0){if(!(this._isDisposed||!e.content))if(this.connectionStatus==="connected"&&this._ws){let s=[e.type,...e.content];this._ws.send(JSON.stringify(s))}else if(t)this._pendingMessages.push(e);else throw new Error(`Could not send message: ${JSON.stringify(e)}`)}_sendPending(){for(;this.connectionStatus==="connected"&&this._pendingMessages.length>0;)this._sendMessage(this._pendingMessages[0],!1),this._pendingMessages.shift()}reconnect(){this._errorIfDisposed();let e=new pd.PromiseDelegate,t=(s,i)=>{i==="connected"?(e.resolve(),this.connectionStatusChanged.disconnect(t,this)):i==="disconnected"&&(e.reject(new Error("Terminal connection disconnected")),this.connectionStatusChanged.disconnect(t,this))};return this.connectionStatusChanged.connect(t,this),this._reconnectAttempt=0,this._reconnect(),e.promise}_reconnect(){if(this._errorIfDisposed(),clearTimeout(this._reconnectTimeout),this._reconnectAttempt<this._reconnectLimit){this._updateConnectionStatus("connecting");let e=xi.getRandomIntInclusive(0,1e3*(Math.pow(2,this._reconnectAttempt)-1));console.error(`Connection lost, reconnecting in ${Math.floor(e/1e3)} seconds.`),this._reconnectTimeout=setTimeout(this._createSocket,e),this._reconnectAttempt+=1}else this._updateConnectionStatus("disconnected");this._clearSocket()}_clearSocket(){this._ws!==null&&(this._ws.onopen=this._noOp,this._ws.onclose=this._noOp,this._ws.onerror=this._noOp,this._ws.onmessage=this._noOp,this._ws.close(),this._ws=null)}async shutdown(){await qa.shutdownTerminal(this.name,this.serverSettings),this.dispose()}clone(){return new n(this)}_updateConnectionStatus(e){this._connectionStatus!==e&&(this._connectionStatus=e,e!=="connecting"&&(this._reconnectAttempt=0,clearTimeout(this._reconnectTimeout)),e==="connected"&&this._sendPending(),this._connectionStatusChanged.emit(e))}_errorIfDisposed(){if(this.isDisposed)throw new Error("Terminal connection is disposed")}get connectionStatusChanged(){return this._connectionStatusChanged}get connectionStatus(){return this._connectionStatus}};Gn.TerminalConnection=Pi;var xi;(function(n){function e(s,i){return Ta.URLExt.join(s,qa.TERMINAL_SERVICE_URL,encodeURIComponent(i))}n.getTermUrl=e;function t(s,i){return s=Math.ceil(s),i=Math.floor(i),Math.floor(Math.random()*(i-s+1))+s}n.getRandomIntInclusive=t})(xi||(xi={}))});var Na=M(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.TerminalManager=void 0;var md=st(),vd=$t(),Ua=te(),yd=Be(),Sd=Gt(),tn=en(),wd=ja(),ki=class extends Sd.BaseManager{constructor(e={}){var t;if(super(e),this._isReady=!1,this._names=[],this._terminalConnections=new Set,this._runningChanged=new Ua.Signal(this),this._connectionFailure=new Ua.Signal(this),!this.isAvailable()){this._ready=Promise.reject("Terminals unavailable"),this._ready.catch(s=>{});return}this._pollModels=new vd.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:10*1e3,backoff:!0,max:300*1e3},name:"@jupyterlab/services:TerminalManager#models",standby:(t=e.standby)!==null&&t!==void 0?t:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._names.length=0,this._terminalConnections.forEach(e=>e.dispose()),this._pollModels.dispose(),super.dispose())}isAvailable(){return tn.isAvailable()}connectTo(e){let t=new wd.TerminalConnection(Object.assign(Object.assign({},e),{serverSettings:this.serverSettings}));return this._onStarted(t),this._names.includes(e.model.name)||this.refreshRunning().catch(()=>{}),t}running(){return md.iter(this._models)}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(){let e=await tn.startNew(this.serverSettings);return await this.refreshRunning(),this.connectTo({model:e})}async shutdown(e){await tn.shutdownTerminal(e,this.serverSettings),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all(this._names.map(e=>tn.shutdownTerminal(e,this.serverSettings))),await this.refreshRunning()}async requestRunning(){var e,t;let s;try{s=await tn.listRunning(this.serverSettings)}catch(r){throw(r instanceof yd.ServerConnection.NetworkError||((e=r.response)===null||e===void 0?void 0:e.status)===503||((t=r.response)===null||t===void 0?void 0:t.status)===424)&&this._connectionFailure.emit(r),r}if(this.isDisposed)return;let i=s.map(({name:r})=>r).sort();i!==this._names&&(this._names=i,this._terminalConnections.forEach(r=>{i.includes(r.name)||r.dispose()}),this._runningChanged.emit(this._models))}_onStarted(e){this._terminalConnections.add(e),e.disposed.connect(this._onDisposed,this)}_onDisposed(e){this._terminalConnections.delete(e),this.refreshRunning().catch(()=>{})}get _models(){return this._names.map(e=>({name:e}))}};Hn.TerminalManager=ki});var Ti=M(_e=>{"use strict";var La=_e&&_e.__createBinding||(Object.create?function(n,e,t,s){s===void 0&&(s=t),Object.defineProperty(n,s,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}),bd=_e&&_e.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Aa=_e&&_e.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&La(e,n,t);return bd(e,n),e},Cd=_e&&_e.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&La(e,n,t)};Object.defineProperty(_e,"__esModule",{value:!0});_e.TerminalAPI=_e.Terminal=void 0;var Ed=Aa(ka());_e.Terminal=Ed;var Md=Aa(en());_e.TerminalAPI=Md;Cd(Na(),_e)});var ji=M(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.WorkspaceManager=void 0;var Od=ue(),Rd=Ri(),nn=Se(),Id="api/workspaces",qi=class extends Rd.DataConnector{constructor(e={}){var t;super(),this.serverSettings=(t=e.serverSettings)!==null&&t!==void 0?t:nn.ServerConnection.makeSettings()}async fetch(e){let{serverSettings:t}=this,{baseUrl:s,appUrl:i}=t,{makeRequest:r,ResponseError:o}=nn.ServerConnection,a=s+i,c=Mt.url(a,e),u=await r(c,{},t);if(u.status!==200)throw await o.create(u);return u.json()}async list(){let{serverSettings:e}=this,{baseUrl:t,appUrl:s}=e,{makeRequest:i,ResponseError:r}=nn.ServerConnection,o=t+s,a=Mt.url(o,""),c=await i(a,{},e);if(c.status!==200)throw await r.create(c);return(await c.json()).workspaces}async remove(e){let{serverSettings:t}=this,{baseUrl:s,appUrl:i}=t,{makeRequest:r,ResponseError:o}=nn.ServerConnection,a=s+i,c=Mt.url(a,e),l=await r(c,{method:"DELETE"},t);if(l.status!==204)throw await o.create(l)}async save(e,t){let{serverSettings:s}=this,{baseUrl:i,appUrl:r}=s,{makeRequest:o,ResponseError:a}=nn.ServerConnection,c=i+r,u=Mt.url(c,e),l={body:JSON.stringify(t),method:"PUT"},d=await o(u,l,s);if(d.status!==204)throw await a.create(d)}};zn.WorkspaceManager=qi;var Mt;(function(n){function e(t,s){return Od.URLExt.join(t,Id,s)}n.url=e})(Mt||(Mt={}))});var Fa=M(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.ServiceManager=void 0;var Ba=te(),Dd=da(),Pd=Si(),xd=ds(),kd=zt(),Td=Ei(),qd=Di(),jd=Ti(),Ud=Se(),Nd=ji(),Ld=pi(),Ui=class{constructor(e={}){var t,s;this._isDisposed=!1,this._connectionFailure=new Ba.Signal(this),this._isReady=!1;let i=e.defaultDrive,r=(t=e.serverSettings)!==null&&t!==void 0?t:Ud.ServerConnection.makeSettings(),o=(s=e.standby)!==null&&s!==void 0?s:"when-hidden",a={defaultDrive:i,serverSettings:r,standby:o},c=new Ld.KernelManager(a);this.serverSettings=r,this.contents=new xd.ContentsManager(a),this.sessions=new Td.SessionManager(Object.assign(Object.assign({},a),{kernelManager:c})),this.settings=new qd.SettingManager(a),this.terminals=new jd.TerminalManager(a),this.builder=new Dd.BuildManager(a),this.workspaces=new Nd.WorkspaceManager(a),this.nbconvert=new Pd.NbConvertManager(a),this.kernelspecs=new kd.KernelSpecManager(a),this.kernelspecs.connectionFailure.connect(this._onConnectionFailure,this),this.sessions.connectionFailure.connect(this._onConnectionFailure,this),this.terminals.connectionFailure.connect(this._onConnectionFailure,this);let u=[this.sessions.ready,this.kernelspecs.ready];this.terminals.isAvailable()&&u.push(this.terminals.ready),this._readyPromise=Promise.all(u).then(()=>{this._isReady=!0})}get connectionFailure(){return this._connectionFailure}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,Ba.Signal.clearData(this),this.contents.dispose(),this.sessions.dispose(),this.terminals.dispose())}get isReady(){return this._isReady}get ready(){return this._readyPromise}_onConnectionFailure(e,t){this._connectionFailure.emit(t)}};Jn.ServiceManager=Ui});var Be=M(ie=>{"use strict";var Ad=ie&&ie.__createBinding||(Object.create?function(n,e,t,s){s===void 0&&(s=t),Object.defineProperty(n,s,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}),Ie=ie&&ie.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Ad(e,n,t)};Object.defineProperty(ie,"__esModule",{value:!0});Ie(br(),ie);Ie(ds(),ie);Ie(pi(),ie);Ie(zt(),ie);Ie(Fa(),ie);Ie(Se(),ie);Ie(Ei(),ie);Ie(Di(),ie);Ie(Ti(),ie);Ie(ji(),ie);Ie(Si(),ie)});var Bd=exports&&exports.__createBinding||(Object.create?function(n,e,t,s){s===void 0&&(s=t),Object.defineProperty(n,s,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}),Fd=exports&&exports.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Ai=exports&&exports.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&Bd(e,n,t);return Fd(e,n),e};Object.defineProperty(exports,"__esModule",{value:!0});exports.KernelConnection=void 0;var Ka=ue(),nt=Ee(),pt=te(),Kd=Be(),Va=ii(),be=Ai(vt()),Wa=ai(),Ni={serialize:n=>n,deserialize:n=>n},Vd=Ai(Vt()),Wd=zt(),Yn=Ai(Wt()),$d=3e3,Ot="_RESTARTING_",Gd="",Li=class n{constructor(e){var t,s,i,r;this._createSocket=()=>{this._errorIfDisposed(),this._clearSocket(),this._updateConnectionStatus("connecting");let o=this.serverSettings,a=Ka.URLExt.join(o.wsUrl,Yn.KERNEL_SERVICE_URL,encodeURIComponent(this._id)),c=a.replace(/^((?:\w+:)?\/\/)(?:[^@\/]+@)/,"$1");console.debug(`Starting WebSocket: ${c}`);let u=Ka.URLExt.join(a,"channels?session_id="+encodeURIComponent(this._clientId)),l=o.token;o.appendToken&&l!==""&&(u=u+`&token=${encodeURIComponent(l)}`),this._ws=new o.WebSocket(u),this._ws.binaryType="arraybuffer",this._ws.onmessage=this._onWSMessage,this._ws.onopen=this._onWSOpen,this._ws.onclose=this._onWSClose,this._ws.onerror=this._onWSClose},this._onWSOpen=o=>{this._updateConnectionStatus("connected")},this._onWSMessage=o=>{let a;try{a=Ni.deserialize(o.data),Vd.validateMessage(a)}catch(c){throw c.message=`Kernel message validation error: ${c.message}`,c}this._kernelSession=a.header.session,this._msgChain=this._msgChain.then(()=>this._handleMessage(a)).catch(c=>{c.message.startsWith("Canceled future for ")&&console.error(c)}),this._anyMessage.emit({msg:a,direction:"recv"})},this._onWSClose=o=>{this.isDisposed||this._reconnect()},this._id="",this._name="",this._status="unknown",this._connectionStatus="connecting",this._kernelSession="",this._isDisposed=!1,this._ws=null,this._username="",this._reconnectLimit=7,this._reconnectAttempt=0,this._reconnectTimeout=null,this._futures=new Map,this._comms=new Map,this._targetRegistry=Object.create(null),this._info=new nt.PromiseDelegate,this._pendingMessages=[],this._statusChanged=new pt.Signal(this),this._connectionStatusChanged=new pt.Signal(this),this._disposed=new pt.Signal(this),this._iopubMessage=new pt.Signal(this),this._anyMessage=new pt.Signal(this),this._unhandledMessage=new pt.Signal(this),this._displayIdToParentIds=new Map,this._msgIdToDisplayIds=new Map,this._msgChain=Promise.resolve(),this._noOp=()=>{},this._name=e.model.name,this._id=e.model.id,this.serverSettings=(t=e.serverSettings)!==null&&t!==void 0?t:Kd.ServerConnection.makeSettings(),this._clientId=(s=e.clientId)!==null&&s!==void 0?s:nt.UUID.uuid4(),this._username=(i=e.username)!==null&&i!==void 0?i:"",this.handleComms=(r=e.handleComms)!==null&&r!==void 0?r:!0,this._createSocket()}get disposed(){return this._disposed}get statusChanged(){return this._statusChanged}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get model(){return{id:this.id,name:this.name}}get anyMessage(){return this._anyMessage}get id(){return this._id}get name(){return this._name}get username(){return this._username}get clientId(){return this._clientId}get status(){return this._status}get connectionStatus(){return this._connectionStatus}get isDisposed(){return this._isDisposed}get info(){return this._info.promise}get spec(){return this._specPromise?this._specPromise:(this._specPromise=Wd.KernelSpecAPI.getSpecs(this.serverSettings).then(e=>e.kernelspecs[this._name]),this._specPromise)}clone(e={}){return new n(Object.assign({model:this.model,username:this.username,serverSettings:this.serverSettings,handleComms:!1},e))}dispose(){this.isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._updateConnectionStatus("disconnected"),this._clearKernelState(),this._pendingMessages=[],this._clearSocket(),pt.Signal.clearData(this))}sendShellMessage(e,t=!1,s=!0){return this._sendKernelShellControl(Wa.KernelShellFutureHandler,e,t,s)}sendControlMessage(e,t=!1,s=!0){return this._sendKernelShellControl(Wa.KernelControlFutureHandler,e,t,s)}_sendKernelShellControl(e,t,s=!1,i=!0){this._sendMessage(t),this._anyMessage.emit({msg:t,direction:"send"});let r=new e(()=>{let o=t.header.msg_id;this._futures.delete(o);let a=this._msgIdToDisplayIds.get(o);a&&(a.forEach(c=>{let u=this._displayIdToParentIds.get(c);if(u){let l=u.indexOf(o);if(l===-1)return;u.length===1?this._displayIdToParentIds.delete(c):(u.splice(l,1),this._displayIdToParentIds.set(c,u))}}),this._msgIdToDisplayIds.delete(o))},t,s,i,this);return this._futures.set(t.header.msg_id,r),r}_sendMessage(e,t=!0){if(this.status==="dead")throw new Error("Kernel is dead");if((this._kernelSession===Gd||this._kernelSession===Ot)&&be.isInfoRequestMsg(e))if(this.connectionStatus==="connected"){this._ws.send(Ni.serialize(e));return}else throw new Error("Could not send message: status is not connected");if(t&&this._pendingMessages.length>0){this._pendingMessages.push(e);return}if(this.connectionStatus==="connected"&&this._kernelSession!==Ot)this._ws.send(Ni.serialize(e));else if(t)this._pendingMessages.push(e);else throw new Error("Could not send message")}async interrupt(){if(this.status==="dead")throw new Error("Kernel is dead");return Yn.interruptKernel(this.id,this.serverSettings)}async restart(){if(this.status==="dead")throw new Error("Kernel is dead");this._updateStatus("restarting"),this._clearKernelState(),this._kernelSession=Ot,await Yn.restartKernel(this.id,this.serverSettings),await this.reconnect()}reconnect(){this._errorIfDisposed();let e=new nt.PromiseDelegate,t=(s,i)=>{i==="connected"?(e.resolve(),this.connectionStatusChanged.disconnect(t,this)):i==="disconnected"&&(e.reject(new Error("Kernel connection disconnected")),this.connectionStatusChanged.disconnect(t,this))};return this.connectionStatusChanged.connect(t,this),this._reconnectAttempt=0,this._reconnect(),e.promise}async shutdown(){this.status!=="dead"&&await Yn.shutdownKernel(this.id,this.serverSettings),this.handleShutdown()}handleShutdown(){this._updateStatus("dead"),this.dispose()}async requestKernelInfo(){let e=be.createMessage({msgType:"kernel_info_request",channel:"shell",username:this._username,session:this._clientId,content:{}}),t;try{t=await De.handleShellMessage(this,e)}catch(s){if(this.isDisposed)return;throw s}if(this._errorIfDisposed(),!!t)return t.content.status===void 0&&(t.content.status="ok"),t.content.status!=="ok"?(this._info.reject("Kernel info reply errored"),t):(this._info.resolve(t.content),this._kernelSession=t.header.session,t)}requestComplete(e){let t=be.createMessage({msgType:"complete_request",channel:"shell",username:this._username,session:this._clientId,content:e});return De.handleShellMessage(this,t)}requestInspect(e){let t=be.createMessage({msgType:"inspect_request",channel:"shell",username:this._username,session:this._clientId,content:e});return De.handleShellMessage(this,t)}requestHistory(e){let t=be.createMessage({msgType:"history_request",channel:"shell",username:this._username,session:this._clientId,content:e});return De.handleShellMessage(this,t)}requestExecute(e,t=!0,s){let i={silent:!1,store_history:!0,user_expressions:{},allow_stdin:!0,stop_on_error:!1},r=be.createMessage({msgType:"execute_request",channel:"shell",username:this._username,session:this._clientId,content:Object.assign(Object.assign({},i),e),metadata:s});return this.sendShellMessage(r,!0,t)}requestDebug(e,t=!0){let s=be.createMessage({msgType:"debug_request",channel:"control",username:this._username,session:this._clientId,content:e});return this.sendControlMessage(s,!0,t)}requestIsComplete(e){let t=be.createMessage({msgType:"is_complete_request",channel:"shell",username:this._username,session:this._clientId,content:e});return De.handleShellMessage(this,t)}requestCommInfo(e){let t=be.createMessage({msgType:"comm_info_request",channel:"shell",username:this._username,session:this._clientId,content:e});return De.handleShellMessage(this,t)}sendInputReply(e){let t=be.createMessage({msgType:"input_reply",channel:"stdin",username:this._username,session:this._clientId,content:e});this._sendMessage(t),this._anyMessage.emit({msg:t,direction:"send"})}createComm(e,t=nt.UUID.uuid4()){if(!this.handleComms)throw new Error("Comms are disabled on this kernel connection");if(this._comms.has(t))throw new Error("Comm is already created");let s=new Va.CommHandler(e,t,this,()=>{this._unregisterComm(t)});return this._comms.set(t,s),s}hasComm(e){return this._comms.has(e)}registerCommTarget(e,t){this.handleComms&&(this._targetRegistry[e]=t)}removeCommTarget(e,t){this.handleComms&&!this.isDisposed&&this._targetRegistry[e]===t&&delete this._targetRegistry[e]}registerMessageHook(e,t){var s;let i=(s=this._futures)===null||s===void 0?void 0:s.get(e);i&&i.registerMessageHook(t)}removeMessageHook(e,t){var s;let i=(s=this._futures)===null||s===void 0?void 0:s.get(e);i&&i.removeMessageHook(t)}async _handleDisplayId(e,t){var s,i;let r=t.parent_header.msg_id,o=this._displayIdToParentIds.get(e);if(o){let c={header:nt.JSONExt.deepCopy(t.header),parent_header:nt.JSONExt.deepCopy(t.parent_header),metadata:nt.JSONExt.deepCopy(t.metadata),content:nt.JSONExt.deepCopy(t.content),channel:t.channel,buffers:t.buffers?t.buffers.slice():[]};c.header.msg_type="update_display_data",await Promise.all(o.map(async u=>{let l=this._futures&&this._futures.get(u);l&&await l.handleMsg(c)}))}if(t.header.msg_type==="update_display_data")return!0;o=(s=this._displayIdToParentIds.get(e))!==null&&s!==void 0?s:[],o.indexOf(r)===-1&&o.push(r),this._displayIdToParentIds.set(e,o);let a=(i=this._msgIdToDisplayIds.get(r))!==null&&i!==void 0?i:[];return a.indexOf(r)===-1&&a.push(r),this._msgIdToDisplayIds.set(r,a),!1}_clearSocket(){this._ws!==null&&(this._ws.onopen=this._noOp,this._ws.onclose=this._noOp,this._ws.onerror=this._noOp,this._ws.onmessage=this._noOp,this._ws.close(),this._ws=null)}_updateStatus(e){this._status===e||this._status==="dead"||(this._status=e,De.logKernelStatus(this),this._statusChanged.emit(e),e==="dead"&&this.dispose())}_sendPending(){for(;this.connectionStatus==="connected"&&this._kernelSession!==Ot&&this._pendingMessages.length>0;)this._sendMessage(this._pendingMessages[0],!1),this._pendingMessages.shift()}_clearKernelState(){this._kernelSession="",this._pendingMessages=[],this._futures.forEach(e=>{e.dispose()}),this._comms.forEach(e=>{e.dispose()}),this._msgChain=Promise.resolve(),this._futures=new Map,this._comms=new Map,this._displayIdToParentIds.clear(),this._msgIdToDisplayIds.clear()}_assertCurrentMessage(e){if(this._errorIfDisposed(),e.header.session!==this._kernelSession)throw new Error(`Canceling handling of old message: ${e.header.msg_type}`)}async _handleCommOpen(e){this._assertCurrentMessage(e);let t=e.content,s=new Va.CommHandler(t.target_name,t.comm_id,this,()=>{this._unregisterComm(t.comm_id)});this._comms.set(t.comm_id,s);try{await(await De.loadObject(t.target_name,t.target_module,this._targetRegistry))(s,e)}catch(i){throw s.close(),console.error("Exception opening new comm"),i}}async _handleCommClose(e){this._assertCurrentMessage(e);let t=e.content,s=this._comms.get(t.comm_id);if(!s){console.error("Comm not found for comm id "+t.comm_id);return}this._unregisterComm(s.commId);let i=s.onClose;i&&await i(e),s.dispose()}async _handleCommMsg(e){this._assertCurrentMessage(e);let t=e.content,s=this._comms.get(t.comm_id);if(!s)return;let i=s.onMsg;i&&await i(e)}_unregisterComm(e){this._comms.delete(e)}_updateConnectionStatus(e){if(this._connectionStatus!==e){if(this._connectionStatus=e,e!=="connecting"&&(this._reconnectAttempt=0,clearTimeout(this._reconnectTimeout)),this.status!=="dead")if(e==="connected"){let t=this._kernelSession===Ot,s=this.requestKernelInfo(),i=!1,r=()=>{i||(i=!0,t&&this._kernelSession===Ot&&(this._kernelSession=""),clearTimeout(o),this._pendingMessages.length>0&&this._sendPending())};s.then(r);let o=setTimeout(r,$d)}else this._updateStatus("unknown");this._connectionStatusChanged.emit(e)}}async _handleMessage(e){var t,s;let i=!1;if(e.parent_header&&e.channel==="iopub"&&(be.isDisplayDataMsg(e)||be.isUpdateDisplayDataMsg(e)||be.isExecuteResultMsg(e))){let o=((t=e.content.transient)!==null&&t!==void 0?t:{}).display_id;o&&(i=await this._handleDisplayId(o,e),this._assertCurrentMessage(e))}if(!i&&e.parent_header){let r=e.parent_header,o=(s=this._futures)===null||s===void 0?void 0:s.get(r.msg_id);if(o)await o.handleMsg(e),this._assertCurrentMessage(e);else{let a=r.session===this.clientId;e.channel!=="iopub"&&a&&this._unhandledMessage.emit(e)}}if(e.channel==="iopub"){switch(e.header.msg_type){case"status":{let r=e.content.execution_state;r==="restarting"&&Promise.resolve().then(async()=>{this._updateStatus("autorestarting"),this._clearKernelState(),await this.reconnect()}),this._updateStatus(r);break}case"comm_open":this.handleComms&&await this._handleCommOpen(e);break;case"comm_msg":this.handleComms&&await this._handleCommMsg(e);break;case"comm_close":this.handleComms&&await this._handleCommClose(e);break;default:break}this.isDisposed||(this._assertCurrentMessage(e),this._iopubMessage.emit(e))}}_reconnect(){if(this._errorIfDisposed(),clearTimeout(this._reconnectTimeout),this._reconnectAttempt<this._reconnectLimit){this._updateConnectionStatus("connecting");let e=De.getRandomIntInclusive(0,1e3*(Math.pow(2,this._reconnectAttempt)-1));console.warn(`Connection lost, reconnecting in ${Math.floor(e/1e3)} seconds.`),this._reconnectTimeout=setTimeout(this._createSocket,e),this._reconnectAttempt+=1}else this._updateConnectionStatus("disconnected");this._clearSocket()}_errorIfDisposed(){if(this.isDisposed)throw new Error("Kernel connection is disposed")}};exports.KernelConnection=Li;var De;(function(n){function e(r){switch(r.status){case"idle":case"busy":case"unknown":return;default:console.debug(`Kernel: ${r.status} (${r.id})`);break}}n.logKernelStatus=e;async function t(r,o){return r.sendShellMessage(o,!0).done}n.handleShellMessage=t;function s(r,o,a){return new Promise((c,u)=>{if(o){if(typeof requirejs>"u")throw new Error("requirejs not found");requirejs([o],l=>{if(l[r]===void 0){let d=`Object '${r}' not found in module '${o}'`;u(new Error(d))}else c(l[r])},u)}else a?.[r]?c(a[r]):u(new Error(`Object '${r}' not found in registry`))})}n.loadObject=s;function i(r,o){return r=Math.ceil(r),o=Math.floor(o),Math.floor(Math.random()*(o-r+1))+r}n.getRandomIntInclusive=i})(De||(De={}));
/*! Bundled license information:

@lumino/polling/dist/index.js:
  (*! *****************************************************************************
      Copyright (c) Microsoft Corporation.
  
      Permission to use, copy, modify, and/or distribute this software for any
      purpose with or without fee is hereby granted.
  
      THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
      PERFORMANCE OF THIS SOFTWARE.
      ***************************************************************************** *)

@lumino/disposable/dist/index.js:
  (*! *****************************************************************************
      Copyright (c) Microsoft Corporation.
  
      Permission to use, copy, modify, and/or distribute this software for any
      purpose with or without fee is hereby granted.
  
      THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
      PERFORMANCE OF THIS SOFTWARE.
      ***************************************************************************** *)
*/
